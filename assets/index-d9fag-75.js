(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&o(l)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();function cy(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Nh={exports:{}},Tl={},Eh={exports:{}},ge={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xi=Symbol.for("react.element"),dy=Symbol.for("react.portal"),fy=Symbol.for("react.fragment"),py=Symbol.for("react.strict_mode"),hy=Symbol.for("react.profiler"),my=Symbol.for("react.provider"),gy=Symbol.for("react.context"),yy=Symbol.for("react.forward_ref"),xy=Symbol.for("react.suspense"),vy=Symbol.for("react.memo"),wy=Symbol.for("react.lazy"),yd=Symbol.iterator;function by(e){return e===null||typeof e!="object"?null:(e=yd&&e[yd]||e["@@iterator"],typeof e=="function"?e:null)}var Th={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},kh=Object.assign,_h={};function Hr(e,t,n){this.props=e,this.context=t,this.refs=_h,this.updater=n||Th}Hr.prototype.isReactComponent={};Hr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Hr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Ih(){}Ih.prototype=Hr.prototype;function Ou(e,t,n){this.props=e,this.context=t,this.refs=_h,this.updater=n||Th}var Wu=Ou.prototype=new Ih;Wu.constructor=Ou;kh(Wu,Hr.prototype);Wu.isPureReactComponent=!0;var xd=Array.isArray,Ah=Object.prototype.hasOwnProperty,Ju={current:null},Mh={key:!0,ref:!0,__self:!0,__source:!0};function Ph(e,t,n){var o,r={},i=null,l=null;if(t!=null)for(o in t.ref!==void 0&&(l=t.ref),t.key!==void 0&&(i=""+t.key),t)Ah.call(t,o)&&!Mh.hasOwnProperty(o)&&(r[o]=t[o]);var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){for(var d=Array(u),f=0;f<u;f++)d[f]=arguments[f+2];r.children=d}if(e&&e.defaultProps)for(o in u=e.defaultProps,u)r[o]===void 0&&(r[o]=u[o]);return{$$typeof:Xi,type:e,key:i,ref:l,props:r,_owner:Ju.current}}function Cy(e,t){return{$$typeof:Xi,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Yu(e){return typeof e=="object"&&e!==null&&e.$$typeof===Xi}function Sy(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var vd=/\/+/g;function ua(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Sy(""+e.key):t.toString(36)}function Ds(e,t,n,o,r){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var l=!1;if(e===null)l=!0;else switch(i){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case Xi:case dy:l=!0}}if(l)return l=e,r=r(l),e=o===""?"."+ua(l,0):o,xd(r)?(n="",e!=null&&(n=e.replace(vd,"$&/")+"/"),Ds(r,t,n,"",function(f){return f})):r!=null&&(Yu(r)&&(r=Cy(r,n+(!r.key||l&&l.key===r.key?"":(""+r.key).replace(vd,"$&/")+"/")+e)),t.push(r)),1;if(l=0,o=o===""?".":o+":",xd(e))for(var u=0;u<e.length;u++){i=e[u];var d=o+ua(i,u);l+=Ds(i,t,n,d,r)}else if(d=by(e),typeof d=="function")for(e=d.call(e),u=0;!(i=e.next()).done;)i=i.value,d=o+ua(i,u++),l+=Ds(i,t,n,d,r);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function ds(e,t,n){if(e==null)return e;var o=[],r=0;return Ds(e,o,"","",function(i){return t.call(n,i,r++)}),o}function Ny(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var St={current:null},Ls={transition:null},Ey={ReactCurrentDispatcher:St,ReactCurrentBatchConfig:Ls,ReactCurrentOwner:Ju};function Rh(){throw Error("act(...) is not supported in production builds of React.")}ge.Children={map:ds,forEach:function(e,t,n){ds(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return ds(e,function(){t++}),t},toArray:function(e){return ds(e,function(t){return t})||[]},only:function(e){if(!Yu(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ge.Component=Hr;ge.Fragment=fy;ge.Profiler=hy;ge.PureComponent=Ou;ge.StrictMode=py;ge.Suspense=xy;ge.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ey;ge.act=Rh;ge.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var o=kh({},e.props),r=e.key,i=e.ref,l=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,l=Ju.current),t.key!==void 0&&(r=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(d in t)Ah.call(t,d)&&!Mh.hasOwnProperty(d)&&(o[d]=t[d]===void 0&&u!==void 0?u[d]:t[d])}var d=arguments.length-2;if(d===1)o.children=n;else if(1<d){u=Array(d);for(var f=0;f<d;f++)u[f]=arguments[f+2];o.children=u}return{$$typeof:Xi,type:e.type,key:r,ref:i,props:o,_owner:l}};ge.createContext=function(e){return e={$$typeof:gy,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:my,_context:e},e.Consumer=e};ge.createElement=Ph;ge.createFactory=function(e){var t=Ph.bind(null,e);return t.type=e,t};ge.createRef=function(){return{current:null}};ge.forwardRef=function(e){return{$$typeof:yy,render:e}};ge.isValidElement=Yu;ge.lazy=function(e){return{$$typeof:wy,_payload:{_status:-1,_result:e},_init:Ny}};ge.memo=function(e,t){return{$$typeof:vy,type:e,compare:t===void 0?null:t}};ge.startTransition=function(e){var t=Ls.transition;Ls.transition={};try{e()}finally{Ls.transition=t}};ge.unstable_act=Rh;ge.useCallback=function(e,t){return St.current.useCallback(e,t)};ge.useContext=function(e){return St.current.useContext(e)};ge.useDebugValue=function(){};ge.useDeferredValue=function(e){return St.current.useDeferredValue(e)};ge.useEffect=function(e,t){return St.current.useEffect(e,t)};ge.useId=function(){return St.current.useId()};ge.useImperativeHandle=function(e,t,n){return St.current.useImperativeHandle(e,t,n)};ge.useInsertionEffect=function(e,t){return St.current.useInsertionEffect(e,t)};ge.useLayoutEffect=function(e,t){return St.current.useLayoutEffect(e,t)};ge.useMemo=function(e,t){return St.current.useMemo(e,t)};ge.useReducer=function(e,t,n){return St.current.useReducer(e,t,n)};ge.useRef=function(e){return St.current.useRef(e)};ge.useState=function(e){return St.current.useState(e)};ge.useSyncExternalStore=function(e,t,n){return St.current.useSyncExternalStore(e,t,n)};ge.useTransition=function(){return St.current.useTransition()};ge.version="18.3.1";Eh.exports=ge;var I=Eh.exports;const Ku=cy(I);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ty=I,ky=Symbol.for("react.element"),_y=Symbol.for("react.fragment"),Iy=Object.prototype.hasOwnProperty,Ay=Ty.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,My={key:!0,ref:!0,__self:!0,__source:!0};function Dh(e,t,n){var o,r={},i=null,l=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(l=t.ref);for(o in t)Iy.call(t,o)&&!My.hasOwnProperty(o)&&(r[o]=t[o]);if(e&&e.defaultProps)for(o in t=e.defaultProps,t)r[o]===void 0&&(r[o]=t[o]);return{$$typeof:ky,type:e,key:i,ref:l,props:r,_owner:Ay.current}}Tl.Fragment=_y;Tl.jsx=Dh;Tl.jsxs=Dh;Nh.exports=Tl;var s=Nh.exports,Ga={},Lh={exports:{}},Ht={},jh={exports:{}},Fh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(W,re){var se=W.length;W.push(re);e:for(;0<se;){var ye=se-1>>>1,be=W[ye];if(0<r(be,re))W[ye]=re,W[se]=be,se=ye;else break e}}function n(W){return W.length===0?null:W[0]}function o(W){if(W.length===0)return null;var re=W[0],se=W.pop();if(se!==re){W[0]=se;e:for(var ye=0,be=W.length,Ce=be>>>1;ye<Ce;){var De=2*(ye+1)-1,at=W[De],He=De+1,Et=W[He];if(0>r(at,se))He<be&&0>r(Et,at)?(W[ye]=Et,W[He]=se,ye=He):(W[ye]=at,W[De]=se,ye=De);else if(He<be&&0>r(Et,se))W[ye]=Et,W[He]=se,ye=He;else break e}}return re}function r(W,re){var se=W.sortIndex-re.sortIndex;return se!==0?se:W.id-re.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var l=Date,u=l.now();e.unstable_now=function(){return l.now()-u}}var d=[],f=[],p=1,h=null,m=3,v=!1,C=!1,S=!1,D=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(W){for(var re=n(f);re!==null;){if(re.callback===null)o(f);else if(re.startTime<=W)o(f),re.sortIndex=re.expirationTime,t(d,re);else break;re=n(f)}}function N(W){if(S=!1,g(W),!C)if(n(d)!==null)C=!0,Q(M);else{var re=n(f);re!==null&&Te(N,re.startTime-W)}}function M(W,re){C=!1,S&&(S=!1,b(R),R=-1),v=!0;var se=m;try{for(g(re),h=n(d);h!==null&&(!(h.expirationTime>re)||W&&!q());){var ye=h.callback;if(typeof ye=="function"){h.callback=null,m=h.priorityLevel;var be=ye(h.expirationTime<=re);re=e.unstable_now(),typeof be=="function"?h.callback=be:h===n(d)&&o(d),g(re)}else o(d);h=n(d)}if(h!==null)var Ce=!0;else{var De=n(f);De!==null&&Te(N,De.startTime-re),Ce=!1}return Ce}finally{h=null,m=se,v=!1}}var T=!1,P=null,R=-1,j=5,U=-1;function q(){return!(e.unstable_now()-U<j)}function V(){if(P!==null){var W=e.unstable_now();U=W;var re=!0;try{re=P(!0,W)}finally{re?oe():(T=!1,P=null)}}else T=!1}var oe;if(typeof x=="function")oe=function(){x(V)};else if(typeof MessageChannel<"u"){var ce=new MessageChannel,fe=ce.port2;ce.port1.onmessage=V,oe=function(){fe.postMessage(null)}}else oe=function(){D(V,0)};function Q(W){P=W,T||(T=!0,oe())}function Te(W,re){R=D(function(){W(e.unstable_now())},re)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(W){W.callback=null},e.unstable_continueExecution=function(){C||v||(C=!0,Q(M))},e.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<W?Math.floor(1e3/W):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return n(d)},e.unstable_next=function(W){switch(m){case 1:case 2:case 3:var re=3;break;default:re=m}var se=m;m=re;try{return W()}finally{m=se}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(W,re){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var se=m;m=W;try{return re()}finally{m=se}},e.unstable_scheduleCallback=function(W,re,se){var ye=e.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?ye+se:ye):se=ye,W){case 1:var be=-1;break;case 2:be=250;break;case 5:be=1073741823;break;case 4:be=1e4;break;default:be=5e3}return be=se+be,W={id:p++,callback:re,priorityLevel:W,startTime:se,expirationTime:be,sortIndex:-1},se>ye?(W.sortIndex=se,t(f,W),n(d)===null&&W===n(f)&&(S?(b(R),R=-1):S=!0,Te(N,se-ye))):(W.sortIndex=be,t(d,W),C||v||(C=!0,Q(M))),W},e.unstable_shouldYield=q,e.unstable_wrapCallback=function(W){var re=m;return function(){var se=m;m=re;try{return W.apply(this,arguments)}finally{m=se}}}})(Fh);jh.exports=Fh;var Py=jh.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ry=I,$t=Py;function J(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Uh=new Set,Ri={};function Ho(e,t){Lr(e,t),Lr(e+"Capture",t)}function Lr(e,t){for(Ri[e]=t,e=0;e<t.length;e++)Uh.add(t[e])}var jn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ba=Object.prototype.hasOwnProperty,Dy=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,wd={},bd={};function Ly(e){return Ba.call(bd,e)?!0:Ba.call(wd,e)?!1:Dy.test(e)?bd[e]=!0:(wd[e]=!0,!1)}function jy(e,t,n,o){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return o?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Fy(e,t,n,o){if(t===null||typeof t>"u"||jy(e,t,n,o))return!0;if(o)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Nt(e,t,n,o,r,i,l){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=o,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=l}var lt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){lt[e]=new Nt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];lt[t]=new Nt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){lt[e]=new Nt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){lt[e]=new Nt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){lt[e]=new Nt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){lt[e]=new Nt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){lt[e]=new Nt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){lt[e]=new Nt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){lt[e]=new Nt(e,5,!1,e.toLowerCase(),null,!1,!1)});var Xu=/[\-:]([a-z])/g;function Qu(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Xu,Qu);lt[t]=new Nt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Xu,Qu);lt[t]=new Nt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Xu,Qu);lt[t]=new Nt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){lt[e]=new Nt(e,1,!1,e.toLowerCase(),null,!1,!1)});lt.xlinkHref=new Nt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){lt[e]=new Nt(e,1,!1,e.toLowerCase(),null,!0,!0)});function Zu(e,t,n,o){var r=lt.hasOwnProperty(t)?lt[t]:null;(r!==null?r.type!==0:o||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Fy(t,n,r,o)&&(n=null),o||r===null?Ly(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):r.mustUseProperty?e[r.propertyName]=n===null?r.type===3?!1:"":n:(t=r.attributeName,o=r.attributeNamespace,n===null?e.removeAttribute(t):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,o?e.setAttributeNS(o,t,n):e.setAttribute(t,n))))}var $n=Ry.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,fs=Symbol.for("react.element"),pr=Symbol.for("react.portal"),hr=Symbol.for("react.fragment"),ec=Symbol.for("react.strict_mode"),qa=Symbol.for("react.profiler"),zh=Symbol.for("react.provider"),Vh=Symbol.for("react.context"),tc=Symbol.for("react.forward_ref"),Oa=Symbol.for("react.suspense"),Wa=Symbol.for("react.suspense_list"),nc=Symbol.for("react.memo"),Kn=Symbol.for("react.lazy"),$h=Symbol.for("react.offscreen"),Cd=Symbol.iterator;function ri(e){return e===null||typeof e!="object"?null:(e=Cd&&e[Cd]||e["@@iterator"],typeof e=="function"?e:null)}var $e=Object.assign,ca;function vi(e){if(ca===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);ca=t&&t[1]||""}return`
`+ca+e}var da=!1;function fa(e,t){if(!e||da)return"";da=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(f){var o=f}Reflect.construct(e,[],t)}else{try{t.call()}catch(f){o=f}e.call(t.prototype)}else{try{throw Error()}catch(f){o=f}e()}}catch(f){if(f&&o&&typeof f.stack=="string"){for(var r=f.stack.split(`
`),i=o.stack.split(`
`),l=r.length-1,u=i.length-1;1<=l&&0<=u&&r[l]!==i[u];)u--;for(;1<=l&&0<=u;l--,u--)if(r[l]!==i[u]){if(l!==1||u!==1)do if(l--,u--,0>u||r[l]!==i[u]){var d=`
`+r[l].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}while(1<=l&&0<=u);break}}}finally{da=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?vi(e):""}function Uy(e){switch(e.tag){case 5:return vi(e.type);case 16:return vi("Lazy");case 13:return vi("Suspense");case 19:return vi("SuspenseList");case 0:case 2:case 15:return e=fa(e.type,!1),e;case 11:return e=fa(e.type.render,!1),e;case 1:return e=fa(e.type,!0),e;default:return""}}function Ja(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case hr:return"Fragment";case pr:return"Portal";case qa:return"Profiler";case ec:return"StrictMode";case Oa:return"Suspense";case Wa:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Vh:return(e.displayName||"Context")+".Consumer";case zh:return(e._context.displayName||"Context")+".Provider";case tc:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case nc:return t=e.displayName||null,t!==null?t:Ja(e.type)||"Memo";case Kn:t=e._payload,e=e._init;try{return Ja(e(t))}catch{}}return null}function zy(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ja(t);case 8:return t===ec?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function po(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Hh(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Vy(e){var t=Hh(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),o=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(l){o=""+l,i.call(this,l)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return o},setValue:function(l){o=""+l},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ps(e){e._valueTracker||(e._valueTracker=Vy(e))}function Gh(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),o="";return e&&(o=Hh(e)?e.checked?"true":"false":e.value),e=o,e!==n?(t.setValue(e),!0):!1}function Ys(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ya(e,t){var n=t.checked;return $e({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Sd(e,t){var n=t.defaultValue==null?"":t.defaultValue,o=t.checked!=null?t.checked:t.defaultChecked;n=po(t.value!=null?t.value:n),e._wrapperState={initialChecked:o,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Bh(e,t){t=t.checked,t!=null&&Zu(e,"checked",t,!1)}function Ka(e,t){Bh(e,t);var n=po(t.value),o=t.type;if(n!=null)o==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(o==="submit"||o==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Xa(e,t.type,n):t.hasOwnProperty("defaultValue")&&Xa(e,t.type,po(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Nd(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var o=t.type;if(!(o!=="submit"&&o!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Xa(e,t,n){(t!=="number"||Ys(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var wi=Array.isArray;function Tr(e,t,n,o){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&o&&(e[n].defaultSelected=!0)}else{for(n=""+po(n),t=null,r=0;r<e.length;r++){if(e[r].value===n){e[r].selected=!0,o&&(e[r].defaultSelected=!0);return}t!==null||e[r].disabled||(t=e[r])}t!==null&&(t.selected=!0)}}function Qa(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(J(91));return $e({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Ed(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(J(92));if(wi(n)){if(1<n.length)throw Error(J(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:po(n)}}function qh(e,t){var n=po(t.value),o=po(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),o!=null&&(e.defaultValue=""+o)}function Td(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Oh(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Za(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Oh(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var hs,Wh=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,o,r){MSApp.execUnsafeLocalFunction(function(){return e(t,n,o,r)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(hs=hs||document.createElement("div"),hs.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=hs.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Di(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Si={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},$y=["Webkit","ms","Moz","O"];Object.keys(Si).forEach(function(e){$y.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Si[t]=Si[e]})});function Jh(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Si.hasOwnProperty(e)&&Si[e]?(""+t).trim():t+"px"}function Yh(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var o=n.indexOf("--")===0,r=Jh(n,t[n],o);n==="float"&&(n="cssFloat"),o?e.setProperty(n,r):e[n]=r}}var Hy=$e({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function eu(e,t){if(t){if(Hy[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(J(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(J(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(J(61))}if(t.style!=null&&typeof t.style!="object")throw Error(J(62))}}function tu(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var nu=null;function oc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ou=null,kr=null,_r=null;function kd(e){if(e=es(e)){if(typeof ou!="function")throw Error(J(280));var t=e.stateNode;t&&(t=Ml(t),ou(e.stateNode,e.type,t))}}function Kh(e){kr?_r?_r.push(e):_r=[e]:kr=e}function Xh(){if(kr){var e=kr,t=_r;if(_r=kr=null,kd(e),t)for(e=0;e<t.length;e++)kd(t[e])}}function Qh(e,t){return e(t)}function Zh(){}var pa=!1;function em(e,t,n){if(pa)return e(t,n);pa=!0;try{return Qh(e,t,n)}finally{pa=!1,(kr!==null||_r!==null)&&(Zh(),Xh())}}function Li(e,t){var n=e.stateNode;if(n===null)return null;var o=Ml(n);if(o===null)return null;n=o[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(J(231,t,typeof n));return n}var ru=!1;if(jn)try{var ii={};Object.defineProperty(ii,"passive",{get:function(){ru=!0}}),window.addEventListener("test",ii,ii),window.removeEventListener("test",ii,ii)}catch{ru=!1}function Gy(e,t,n,o,r,i,l,u,d){var f=Array.prototype.slice.call(arguments,3);try{t.apply(n,f)}catch(p){this.onError(p)}}var Ni=!1,Ks=null,Xs=!1,iu=null,By={onError:function(e){Ni=!0,Ks=e}};function qy(e,t,n,o,r,i,l,u,d){Ni=!1,Ks=null,Gy.apply(By,arguments)}function Oy(e,t,n,o,r,i,l,u,d){if(qy.apply(this,arguments),Ni){if(Ni){var f=Ks;Ni=!1,Ks=null}else throw Error(J(198));Xs||(Xs=!0,iu=f)}}function Go(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function tm(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function _d(e){if(Go(e)!==e)throw Error(J(188))}function Wy(e){var t=e.alternate;if(!t){if(t=Go(e),t===null)throw Error(J(188));return t!==e?null:e}for(var n=e,o=t;;){var r=n.return;if(r===null)break;var i=r.alternate;if(i===null){if(o=r.return,o!==null){n=o;continue}break}if(r.child===i.child){for(i=r.child;i;){if(i===n)return _d(r),e;if(i===o)return _d(r),t;i=i.sibling}throw Error(J(188))}if(n.return!==o.return)n=r,o=i;else{for(var l=!1,u=r.child;u;){if(u===n){l=!0,n=r,o=i;break}if(u===o){l=!0,o=r,n=i;break}u=u.sibling}if(!l){for(u=i.child;u;){if(u===n){l=!0,n=i,o=r;break}if(u===o){l=!0,o=i,n=r;break}u=u.sibling}if(!l)throw Error(J(189))}}if(n.alternate!==o)throw Error(J(190))}if(n.tag!==3)throw Error(J(188));return n.stateNode.current===n?e:t}function nm(e){return e=Wy(e),e!==null?om(e):null}function om(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=om(e);if(t!==null)return t;e=e.sibling}return null}var rm=$t.unstable_scheduleCallback,Id=$t.unstable_cancelCallback,Jy=$t.unstable_shouldYield,Yy=$t.unstable_requestPaint,Je=$t.unstable_now,Ky=$t.unstable_getCurrentPriorityLevel,rc=$t.unstable_ImmediatePriority,im=$t.unstable_UserBlockingPriority,Qs=$t.unstable_NormalPriority,Xy=$t.unstable_LowPriority,sm=$t.unstable_IdlePriority,kl=null,wn=null;function Qy(e){if(wn&&typeof wn.onCommitFiberRoot=="function")try{wn.onCommitFiberRoot(kl,e,void 0,(e.current.flags&128)===128)}catch{}}var dn=Math.clz32?Math.clz32:tx,Zy=Math.log,ex=Math.LN2;function tx(e){return e>>>=0,e===0?32:31-(Zy(e)/ex|0)|0}var ms=64,gs=4194304;function bi(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Zs(e,t){var n=e.pendingLanes;if(n===0)return 0;var o=0,r=e.suspendedLanes,i=e.pingedLanes,l=n&268435455;if(l!==0){var u=l&~r;u!==0?o=bi(u):(i&=l,i!==0&&(o=bi(i)))}else l=n&~r,l!==0?o=bi(l):i!==0&&(o=bi(i));if(o===0)return 0;if(t!==0&&t!==o&&!(t&r)&&(r=o&-o,i=t&-t,r>=i||r===16&&(i&4194240)!==0))return t;if(o&4&&(o|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=o;0<t;)n=31-dn(t),r=1<<n,o|=e[n],t&=~r;return o}function nx(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ox(e,t){for(var n=e.suspendedLanes,o=e.pingedLanes,r=e.expirationTimes,i=e.pendingLanes;0<i;){var l=31-dn(i),u=1<<l,d=r[l];d===-1?(!(u&n)||u&o)&&(r[l]=nx(u,t)):d<=t&&(e.expiredLanes|=u),i&=~u}}function su(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function lm(){var e=ms;return ms<<=1,!(ms&4194240)&&(ms=64),e}function ha(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Qi(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-dn(t),e[t]=n}function rx(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var o=e.eventTimes;for(e=e.expirationTimes;0<n;){var r=31-dn(n),i=1<<r;t[r]=0,o[r]=-1,e[r]=-1,n&=~i}}function ic(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var o=31-dn(n),r=1<<o;r&t|e[o]&t&&(e[o]|=t),n&=~r}}var Ee=0;function am(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var um,sc,cm,dm,fm,lu=!1,ys=[],oo=null,ro=null,io=null,ji=new Map,Fi=new Map,Qn=[],ix="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ad(e,t){switch(e){case"focusin":case"focusout":oo=null;break;case"dragenter":case"dragleave":ro=null;break;case"mouseover":case"mouseout":io=null;break;case"pointerover":case"pointerout":ji.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fi.delete(t.pointerId)}}function si(e,t,n,o,r,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:o,nativeEvent:i,targetContainers:[r]},t!==null&&(t=es(t),t!==null&&sc(t)),e):(e.eventSystemFlags|=o,t=e.targetContainers,r!==null&&t.indexOf(r)===-1&&t.push(r),e)}function sx(e,t,n,o,r){switch(t){case"focusin":return oo=si(oo,e,t,n,o,r),!0;case"dragenter":return ro=si(ro,e,t,n,o,r),!0;case"mouseover":return io=si(io,e,t,n,o,r),!0;case"pointerover":var i=r.pointerId;return ji.set(i,si(ji.get(i)||null,e,t,n,o,r)),!0;case"gotpointercapture":return i=r.pointerId,Fi.set(i,si(Fi.get(i)||null,e,t,n,o,r)),!0}return!1}function pm(e){var t=Po(e.target);if(t!==null){var n=Go(t);if(n!==null){if(t=n.tag,t===13){if(t=tm(n),t!==null){e.blockedOn=t,fm(e.priority,function(){cm(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function js(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=au(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var o=new n.constructor(n.type,n);nu=o,n.target.dispatchEvent(o),nu=null}else return t=es(n),t!==null&&sc(t),e.blockedOn=n,!1;t.shift()}return!0}function Md(e,t,n){js(e)&&n.delete(t)}function lx(){lu=!1,oo!==null&&js(oo)&&(oo=null),ro!==null&&js(ro)&&(ro=null),io!==null&&js(io)&&(io=null),ji.forEach(Md),Fi.forEach(Md)}function li(e,t){e.blockedOn===t&&(e.blockedOn=null,lu||(lu=!0,$t.unstable_scheduleCallback($t.unstable_NormalPriority,lx)))}function Ui(e){function t(r){return li(r,e)}if(0<ys.length){li(ys[0],e);for(var n=1;n<ys.length;n++){var o=ys[n];o.blockedOn===e&&(o.blockedOn=null)}}for(oo!==null&&li(oo,e),ro!==null&&li(ro,e),io!==null&&li(io,e),ji.forEach(t),Fi.forEach(t),n=0;n<Qn.length;n++)o=Qn[n],o.blockedOn===e&&(o.blockedOn=null);for(;0<Qn.length&&(n=Qn[0],n.blockedOn===null);)pm(n),n.blockedOn===null&&Qn.shift()}var Ir=$n.ReactCurrentBatchConfig,el=!0;function ax(e,t,n,o){var r=Ee,i=Ir.transition;Ir.transition=null;try{Ee=1,lc(e,t,n,o)}finally{Ee=r,Ir.transition=i}}function ux(e,t,n,o){var r=Ee,i=Ir.transition;Ir.transition=null;try{Ee=4,lc(e,t,n,o)}finally{Ee=r,Ir.transition=i}}function lc(e,t,n,o){if(el){var r=au(e,t,n,o);if(r===null)Na(e,t,o,tl,n),Ad(e,o);else if(sx(r,e,t,n,o))o.stopPropagation();else if(Ad(e,o),t&4&&-1<ix.indexOf(e)){for(;r!==null;){var i=es(r);if(i!==null&&um(i),i=au(e,t,n,o),i===null&&Na(e,t,o,tl,n),i===r)break;r=i}r!==null&&o.stopPropagation()}else Na(e,t,o,null,n)}}var tl=null;function au(e,t,n,o){if(tl=null,e=oc(o),e=Po(e),e!==null)if(t=Go(e),t===null)e=null;else if(n=t.tag,n===13){if(e=tm(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return tl=e,null}function hm(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ky()){case rc:return 1;case im:return 4;case Qs:case Xy:return 16;case sm:return 536870912;default:return 16}default:return 16}}var eo=null,ac=null,Fs=null;function mm(){if(Fs)return Fs;var e,t=ac,n=t.length,o,r="value"in eo?eo.value:eo.textContent,i=r.length;for(e=0;e<n&&t[e]===r[e];e++);var l=n-e;for(o=1;o<=l&&t[n-o]===r[i-o];o++);return Fs=r.slice(e,1<o?1-o:void 0)}function Us(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function xs(){return!0}function Pd(){return!1}function Gt(e){function t(n,o,r,i,l){this._reactName=n,this._targetInst=r,this.type=o,this.nativeEvent=i,this.target=l,this.currentTarget=null;for(var u in e)e.hasOwnProperty(u)&&(n=e[u],this[u]=n?n(i):i[u]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?xs:Pd,this.isPropagationStopped=Pd,this}return $e(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=xs)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=xs)},persist:function(){},isPersistent:xs}),t}var Gr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},uc=Gt(Gr),Zi=$e({},Gr,{view:0,detail:0}),cx=Gt(Zi),ma,ga,ai,_l=$e({},Zi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ai&&(ai&&e.type==="mousemove"?(ma=e.screenX-ai.screenX,ga=e.screenY-ai.screenY):ga=ma=0,ai=e),ma)},movementY:function(e){return"movementY"in e?e.movementY:ga}}),Rd=Gt(_l),dx=$e({},_l,{dataTransfer:0}),fx=Gt(dx),px=$e({},Zi,{relatedTarget:0}),ya=Gt(px),hx=$e({},Gr,{animationName:0,elapsedTime:0,pseudoElement:0}),mx=Gt(hx),gx=$e({},Gr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),yx=Gt(gx),xx=$e({},Gr,{data:0}),Dd=Gt(xx),vx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cx(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=bx[e])?!!t[e]:!1}function cc(){return Cx}var Sx=$e({},Zi,{key:function(e){if(e.key){var t=vx[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Us(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?wx[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cc,charCode:function(e){return e.type==="keypress"?Us(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Us(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Nx=Gt(Sx),Ex=$e({},_l,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ld=Gt(Ex),Tx=$e({},Zi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cc}),kx=Gt(Tx),_x=$e({},Gr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ix=Gt(_x),Ax=$e({},_l,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Mx=Gt(Ax),Px=[9,13,27,32],dc=jn&&"CompositionEvent"in window,Ei=null;jn&&"documentMode"in document&&(Ei=document.documentMode);var Rx=jn&&"TextEvent"in window&&!Ei,gm=jn&&(!dc||Ei&&8<Ei&&11>=Ei),jd=" ",Fd=!1;function ym(e,t){switch(e){case"keyup":return Px.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xm(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var mr=!1;function Dx(e,t){switch(e){case"compositionend":return xm(t);case"keypress":return t.which!==32?null:(Fd=!0,jd);case"textInput":return e=t.data,e===jd&&Fd?null:e;default:return null}}function Lx(e,t){if(mr)return e==="compositionend"||!dc&&ym(e,t)?(e=mm(),Fs=ac=eo=null,mr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return gm&&t.locale!=="ko"?null:t.data;default:return null}}var jx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ud(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!jx[e.type]:t==="textarea"}function vm(e,t,n,o){Kh(o),t=nl(t,"onChange"),0<t.length&&(n=new uc("onChange","change",null,n,o),e.push({event:n,listeners:t}))}var Ti=null,zi=null;function Fx(e){Am(e,0)}function Il(e){var t=xr(e);if(Gh(t))return e}function Ux(e,t){if(e==="change")return t}var wm=!1;if(jn){var xa;if(jn){var va="oninput"in document;if(!va){var zd=document.createElement("div");zd.setAttribute("oninput","return;"),va=typeof zd.oninput=="function"}xa=va}else xa=!1;wm=xa&&(!document.documentMode||9<document.documentMode)}function Vd(){Ti&&(Ti.detachEvent("onpropertychange",bm),zi=Ti=null)}function bm(e){if(e.propertyName==="value"&&Il(zi)){var t=[];vm(t,zi,e,oc(e)),em(Fx,t)}}function zx(e,t,n){e==="focusin"?(Vd(),Ti=t,zi=n,Ti.attachEvent("onpropertychange",bm)):e==="focusout"&&Vd()}function Vx(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Il(zi)}function $x(e,t){if(e==="click")return Il(t)}function Hx(e,t){if(e==="input"||e==="change")return Il(t)}function Gx(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var pn=typeof Object.is=="function"?Object.is:Gx;function Vi(e,t){if(pn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),o=Object.keys(t);if(n.length!==o.length)return!1;for(o=0;o<n.length;o++){var r=n[o];if(!Ba.call(t,r)||!pn(e[r],t[r]))return!1}return!0}function $d(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Hd(e,t){var n=$d(e);e=0;for(var o;n;){if(n.nodeType===3){if(o=e+n.textContent.length,e<=t&&o>=t)return{node:n,offset:t-e};e=o}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=$d(n)}}function Cm(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Cm(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Sm(){for(var e=window,t=Ys();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Ys(e.document)}return t}function fc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Bx(e){var t=Sm(),n=e.focusedElem,o=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Cm(n.ownerDocument.documentElement,n)){if(o!==null&&fc(n)){if(t=o.start,e=o.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var r=n.textContent.length,i=Math.min(o.start,r);o=o.end===void 0?i:Math.min(o.end,r),!e.extend&&i>o&&(r=o,o=i,i=r),r=Hd(n,i);var l=Hd(n,o);r&&l&&(e.rangeCount!==1||e.anchorNode!==r.node||e.anchorOffset!==r.offset||e.focusNode!==l.node||e.focusOffset!==l.offset)&&(t=t.createRange(),t.setStart(r.node,r.offset),e.removeAllRanges(),i>o?(e.addRange(t),e.extend(l.node,l.offset)):(t.setEnd(l.node,l.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var qx=jn&&"documentMode"in document&&11>=document.documentMode,gr=null,uu=null,ki=null,cu=!1;function Gd(e,t,n){var o=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;cu||gr==null||gr!==Ys(o)||(o=gr,"selectionStart"in o&&fc(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),ki&&Vi(ki,o)||(ki=o,o=nl(uu,"onSelect"),0<o.length&&(t=new uc("onSelect","select",null,t,n),e.push({event:t,listeners:o}),t.target=gr)))}function vs(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var yr={animationend:vs("Animation","AnimationEnd"),animationiteration:vs("Animation","AnimationIteration"),animationstart:vs("Animation","AnimationStart"),transitionend:vs("Transition","TransitionEnd")},wa={},Nm={};jn&&(Nm=document.createElement("div").style,"AnimationEvent"in window||(delete yr.animationend.animation,delete yr.animationiteration.animation,delete yr.animationstart.animation),"TransitionEvent"in window||delete yr.transitionend.transition);function Al(e){if(wa[e])return wa[e];if(!yr[e])return e;var t=yr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Nm)return wa[e]=t[n];return e}var Em=Al("animationend"),Tm=Al("animationiteration"),km=Al("animationstart"),_m=Al("transitionend"),Im=new Map,Bd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function mo(e,t){Im.set(e,t),Ho(t,[e])}for(var ba=0;ba<Bd.length;ba++){var Ca=Bd[ba],Ox=Ca.toLowerCase(),Wx=Ca[0].toUpperCase()+Ca.slice(1);mo(Ox,"on"+Wx)}mo(Em,"onAnimationEnd");mo(Tm,"onAnimationIteration");mo(km,"onAnimationStart");mo("dblclick","onDoubleClick");mo("focusin","onFocus");mo("focusout","onBlur");mo(_m,"onTransitionEnd");Lr("onMouseEnter",["mouseout","mouseover"]);Lr("onMouseLeave",["mouseout","mouseover"]);Lr("onPointerEnter",["pointerout","pointerover"]);Lr("onPointerLeave",["pointerout","pointerover"]);Ho("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ho("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ho("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ho("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ho("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ho("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ci="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Jx=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ci));function qd(e,t,n){var o=e.type||"unknown-event";e.currentTarget=n,Oy(o,t,void 0,e),e.currentTarget=null}function Am(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var o=e[n],r=o.event;o=o.listeners;e:{var i=void 0;if(t)for(var l=o.length-1;0<=l;l--){var u=o[l],d=u.instance,f=u.currentTarget;if(u=u.listener,d!==i&&r.isPropagationStopped())break e;qd(r,u,f),i=d}else for(l=0;l<o.length;l++){if(u=o[l],d=u.instance,f=u.currentTarget,u=u.listener,d!==i&&r.isPropagationStopped())break e;qd(r,u,f),i=d}}}if(Xs)throw e=iu,Xs=!1,iu=null,e}function Me(e,t){var n=t[mu];n===void 0&&(n=t[mu]=new Set);var o=e+"__bubble";n.has(o)||(Mm(t,e,2,!1),n.add(o))}function Sa(e,t,n){var o=0;t&&(o|=4),Mm(n,e,o,t)}var ws="_reactListening"+Math.random().toString(36).slice(2);function $i(e){if(!e[ws]){e[ws]=!0,Uh.forEach(function(n){n!=="selectionchange"&&(Jx.has(n)||Sa(n,!1,e),Sa(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ws]||(t[ws]=!0,Sa("selectionchange",!1,t))}}function Mm(e,t,n,o){switch(hm(t)){case 1:var r=ax;break;case 4:r=ux;break;default:r=lc}n=r.bind(null,t,n,e),r=void 0,!ru||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(r=!0),o?r!==void 0?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):r!==void 0?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function Na(e,t,n,o,r){var i=o;if(!(t&1)&&!(t&2)&&o!==null)e:for(;;){if(o===null)return;var l=o.tag;if(l===3||l===4){var u=o.stateNode.containerInfo;if(u===r||u.nodeType===8&&u.parentNode===r)break;if(l===4)for(l=o.return;l!==null;){var d=l.tag;if((d===3||d===4)&&(d=l.stateNode.containerInfo,d===r||d.nodeType===8&&d.parentNode===r))return;l=l.return}for(;u!==null;){if(l=Po(u),l===null)return;if(d=l.tag,d===5||d===6){o=i=l;continue e}u=u.parentNode}}o=o.return}em(function(){var f=i,p=oc(n),h=[];e:{var m=Im.get(e);if(m!==void 0){var v=uc,C=e;switch(e){case"keypress":if(Us(n)===0)break e;case"keydown":case"keyup":v=Nx;break;case"focusin":C="focus",v=ya;break;case"focusout":C="blur",v=ya;break;case"beforeblur":case"afterblur":v=ya;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=Rd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=fx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=kx;break;case Em:case Tm:case km:v=mx;break;case _m:v=Ix;break;case"scroll":v=cx;break;case"wheel":v=Mx;break;case"copy":case"cut":case"paste":v=yx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=Ld}var S=(t&4)!==0,D=!S&&e==="scroll",b=S?m!==null?m+"Capture":null:m;S=[];for(var x=f,g;x!==null;){g=x;var N=g.stateNode;if(g.tag===5&&N!==null&&(g=N,b!==null&&(N=Li(x,b),N!=null&&S.push(Hi(x,N,g)))),D)break;x=x.return}0<S.length&&(m=new v(m,C,null,n,p),h.push({event:m,listeners:S}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",v=e==="mouseout"||e==="pointerout",m&&n!==nu&&(C=n.relatedTarget||n.fromElement)&&(Po(C)||C[Fn]))break e;if((v||m)&&(m=p.window===p?p:(m=p.ownerDocument)?m.defaultView||m.parentWindow:window,v?(C=n.relatedTarget||n.toElement,v=f,C=C?Po(C):null,C!==null&&(D=Go(C),C!==D||C.tag!==5&&C.tag!==6)&&(C=null)):(v=null,C=f),v!==C)){if(S=Rd,N="onMouseLeave",b="onMouseEnter",x="mouse",(e==="pointerout"||e==="pointerover")&&(S=Ld,N="onPointerLeave",b="onPointerEnter",x="pointer"),D=v==null?m:xr(v),g=C==null?m:xr(C),m=new S(N,x+"leave",v,n,p),m.target=D,m.relatedTarget=g,N=null,Po(p)===f&&(S=new S(b,x+"enter",C,n,p),S.target=g,S.relatedTarget=D,N=S),D=N,v&&C)t:{for(S=v,b=C,x=0,g=S;g;g=ur(g))x++;for(g=0,N=b;N;N=ur(N))g++;for(;0<x-g;)S=ur(S),x--;for(;0<g-x;)b=ur(b),g--;for(;x--;){if(S===b||b!==null&&S===b.alternate)break t;S=ur(S),b=ur(b)}S=null}else S=null;v!==null&&Od(h,m,v,S,!1),C!==null&&D!==null&&Od(h,D,C,S,!0)}}e:{if(m=f?xr(f):window,v=m.nodeName&&m.nodeName.toLowerCase(),v==="select"||v==="input"&&m.type==="file")var M=Ux;else if(Ud(m))if(wm)M=Hx;else{M=Vx;var T=zx}else(v=m.nodeName)&&v.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(M=$x);if(M&&(M=M(e,f))){vm(h,M,n,p);break e}T&&T(e,m,f),e==="focusout"&&(T=m._wrapperState)&&T.controlled&&m.type==="number"&&Xa(m,"number",m.value)}switch(T=f?xr(f):window,e){case"focusin":(Ud(T)||T.contentEditable==="true")&&(gr=T,uu=f,ki=null);break;case"focusout":ki=uu=gr=null;break;case"mousedown":cu=!0;break;case"contextmenu":case"mouseup":case"dragend":cu=!1,Gd(h,n,p);break;case"selectionchange":if(qx)break;case"keydown":case"keyup":Gd(h,n,p)}var P;if(dc)e:{switch(e){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else mr?ym(e,n)&&(R="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(R="onCompositionStart");R&&(gm&&n.locale!=="ko"&&(mr||R!=="onCompositionStart"?R==="onCompositionEnd"&&mr&&(P=mm()):(eo=p,ac="value"in eo?eo.value:eo.textContent,mr=!0)),T=nl(f,R),0<T.length&&(R=new Dd(R,e,null,n,p),h.push({event:R,listeners:T}),P?R.data=P:(P=xm(n),P!==null&&(R.data=P)))),(P=Rx?Dx(e,n):Lx(e,n))&&(f=nl(f,"onBeforeInput"),0<f.length&&(p=new Dd("onBeforeInput","beforeinput",null,n,p),h.push({event:p,listeners:f}),p.data=P))}Am(h,t)})}function Hi(e,t,n){return{instance:e,listener:t,currentTarget:n}}function nl(e,t){for(var n=t+"Capture",o=[];e!==null;){var r=e,i=r.stateNode;r.tag===5&&i!==null&&(r=i,i=Li(e,n),i!=null&&o.unshift(Hi(e,i,r)),i=Li(e,t),i!=null&&o.push(Hi(e,i,r))),e=e.return}return o}function ur(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Od(e,t,n,o,r){for(var i=t._reactName,l=[];n!==null&&n!==o;){var u=n,d=u.alternate,f=u.stateNode;if(d!==null&&d===o)break;u.tag===5&&f!==null&&(u=f,r?(d=Li(n,i),d!=null&&l.unshift(Hi(n,d,u))):r||(d=Li(n,i),d!=null&&l.push(Hi(n,d,u)))),n=n.return}l.length!==0&&e.push({event:t,listeners:l})}var Yx=/\r\n?/g,Kx=/\u0000|\uFFFD/g;function Wd(e){return(typeof e=="string"?e:""+e).replace(Yx,`
`).replace(Kx,"")}function bs(e,t,n){if(t=Wd(t),Wd(e)!==t&&n)throw Error(J(425))}function ol(){}var du=null,fu=null;function pu(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var hu=typeof setTimeout=="function"?setTimeout:void 0,Xx=typeof clearTimeout=="function"?clearTimeout:void 0,Jd=typeof Promise=="function"?Promise:void 0,Qx=typeof queueMicrotask=="function"?queueMicrotask:typeof Jd<"u"?function(e){return Jd.resolve(null).then(e).catch(Zx)}:hu;function Zx(e){setTimeout(function(){throw e})}function Ea(e,t){var n=t,o=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(o===0){e.removeChild(r),Ui(t);return}o--}else n!=="$"&&n!=="$?"&&n!=="$!"||o++;n=r}while(n);Ui(t)}function so(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Yd(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Br=Math.random().toString(36).slice(2),vn="__reactFiber$"+Br,Gi="__reactProps$"+Br,Fn="__reactContainer$"+Br,mu="__reactEvents$"+Br,ev="__reactListeners$"+Br,tv="__reactHandles$"+Br;function Po(e){var t=e[vn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Fn]||n[vn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Yd(e);e!==null;){if(n=e[vn])return n;e=Yd(e)}return t}e=n,n=e.parentNode}return null}function es(e){return e=e[vn]||e[Fn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function xr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(J(33))}function Ml(e){return e[Gi]||null}var gu=[],vr=-1;function go(e){return{current:e}}function Re(e){0>vr||(e.current=gu[vr],gu[vr]=null,vr--)}function Ae(e,t){vr++,gu[vr]=e.current,e.current=t}var ho={},mt=go(ho),Mt=go(!1),Fo=ho;function jr(e,t){var n=e.type.contextTypes;if(!n)return ho;var o=e.stateNode;if(o&&o.__reactInternalMemoizedUnmaskedChildContext===t)return o.__reactInternalMemoizedMaskedChildContext;var r={},i;for(i in n)r[i]=t[i];return o&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=r),r}function Pt(e){return e=e.childContextTypes,e!=null}function rl(){Re(Mt),Re(mt)}function Kd(e,t,n){if(mt.current!==ho)throw Error(J(168));Ae(mt,t),Ae(Mt,n)}function Pm(e,t,n){var o=e.stateNode;if(t=t.childContextTypes,typeof o.getChildContext!="function")return n;o=o.getChildContext();for(var r in o)if(!(r in t))throw Error(J(108,zy(e)||"Unknown",r));return $e({},n,o)}function il(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ho,Fo=mt.current,Ae(mt,e),Ae(Mt,Mt.current),!0}function Xd(e,t,n){var o=e.stateNode;if(!o)throw Error(J(169));n?(e=Pm(e,t,Fo),o.__reactInternalMemoizedMergedChildContext=e,Re(Mt),Re(mt),Ae(mt,e)):Re(Mt),Ae(Mt,n)}var Pn=null,Pl=!1,Ta=!1;function Rm(e){Pn===null?Pn=[e]:Pn.push(e)}function nv(e){Pl=!0,Rm(e)}function yo(){if(!Ta&&Pn!==null){Ta=!0;var e=0,t=Ee;try{var n=Pn;for(Ee=1;e<n.length;e++){var o=n[e];do o=o(!0);while(o!==null)}Pn=null,Pl=!1}catch(r){throw Pn!==null&&(Pn=Pn.slice(e+1)),rm(rc,yo),r}finally{Ee=t,Ta=!1}}return null}var wr=[],br=0,sl=null,ll=0,Jt=[],Yt=0,Uo=null,Rn=1,Dn="";function Ao(e,t){wr[br++]=ll,wr[br++]=sl,sl=e,ll=t}function Dm(e,t,n){Jt[Yt++]=Rn,Jt[Yt++]=Dn,Jt[Yt++]=Uo,Uo=e;var o=Rn;e=Dn;var r=32-dn(o)-1;o&=~(1<<r),n+=1;var i=32-dn(t)+r;if(30<i){var l=r-r%5;i=(o&(1<<l)-1).toString(32),o>>=l,r-=l,Rn=1<<32-dn(t)+r|n<<r|o,Dn=i+e}else Rn=1<<i|n<<r|o,Dn=e}function pc(e){e.return!==null&&(Ao(e,1),Dm(e,1,0))}function hc(e){for(;e===sl;)sl=wr[--br],wr[br]=null,ll=wr[--br],wr[br]=null;for(;e===Uo;)Uo=Jt[--Yt],Jt[Yt]=null,Dn=Jt[--Yt],Jt[Yt]=null,Rn=Jt[--Yt],Jt[Yt]=null}var Vt=null,zt=null,Ue=!1,cn=null;function Lm(e,t){var n=Kt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Qd(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Vt=e,zt=so(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Vt=e,zt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Uo!==null?{id:Rn,overflow:Dn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Kt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Vt=e,zt=null,!0):!1;default:return!1}}function yu(e){return(e.mode&1)!==0&&(e.flags&128)===0}function xu(e){if(Ue){var t=zt;if(t){var n=t;if(!Qd(e,t)){if(yu(e))throw Error(J(418));t=so(n.nextSibling);var o=Vt;t&&Qd(e,t)?Lm(o,n):(e.flags=e.flags&-4097|2,Ue=!1,Vt=e)}}else{if(yu(e))throw Error(J(418));e.flags=e.flags&-4097|2,Ue=!1,Vt=e}}}function Zd(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Vt=e}function Cs(e){if(e!==Vt)return!1;if(!Ue)return Zd(e),Ue=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!pu(e.type,e.memoizedProps)),t&&(t=zt)){if(yu(e))throw jm(),Error(J(418));for(;t;)Lm(e,t),t=so(t.nextSibling)}if(Zd(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(J(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){zt=so(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}zt=null}}else zt=Vt?so(e.stateNode.nextSibling):null;return!0}function jm(){for(var e=zt;e;)e=so(e.nextSibling)}function Fr(){zt=Vt=null,Ue=!1}function mc(e){cn===null?cn=[e]:cn.push(e)}var ov=$n.ReactCurrentBatchConfig;function ui(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(J(309));var o=n.stateNode}if(!o)throw Error(J(147,e));var r=o,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(l){var u=r.refs;l===null?delete u[i]:u[i]=l},t._stringRef=i,t)}if(typeof e!="string")throw Error(J(284));if(!n._owner)throw Error(J(290,e))}return e}function Ss(e,t){throw e=Object.prototype.toString.call(t),Error(J(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ef(e){var t=e._init;return t(e._payload)}function Fm(e){function t(b,x){if(e){var g=b.deletions;g===null?(b.deletions=[x],b.flags|=16):g.push(x)}}function n(b,x){if(!e)return null;for(;x!==null;)t(b,x),x=x.sibling;return null}function o(b,x){for(b=new Map;x!==null;)x.key!==null?b.set(x.key,x):b.set(x.index,x),x=x.sibling;return b}function r(b,x){return b=co(b,x),b.index=0,b.sibling=null,b}function i(b,x,g){return b.index=g,e?(g=b.alternate,g!==null?(g=g.index,g<x?(b.flags|=2,x):g):(b.flags|=2,x)):(b.flags|=1048576,x)}function l(b){return e&&b.alternate===null&&(b.flags|=2),b}function u(b,x,g,N){return x===null||x.tag!==6?(x=Ra(g,b.mode,N),x.return=b,x):(x=r(x,g),x.return=b,x)}function d(b,x,g,N){var M=g.type;return M===hr?p(b,x,g.props.children,N,g.key):x!==null&&(x.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Kn&&ef(M)===x.type)?(N=r(x,g.props),N.ref=ui(b,x,g),N.return=b,N):(N=qs(g.type,g.key,g.props,null,b.mode,N),N.ref=ui(b,x,g),N.return=b,N)}function f(b,x,g,N){return x===null||x.tag!==4||x.stateNode.containerInfo!==g.containerInfo||x.stateNode.implementation!==g.implementation?(x=Da(g,b.mode,N),x.return=b,x):(x=r(x,g.children||[]),x.return=b,x)}function p(b,x,g,N,M){return x===null||x.tag!==7?(x=jo(g,b.mode,N,M),x.return=b,x):(x=r(x,g),x.return=b,x)}function h(b,x,g){if(typeof x=="string"&&x!==""||typeof x=="number")return x=Ra(""+x,b.mode,g),x.return=b,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case fs:return g=qs(x.type,x.key,x.props,null,b.mode,g),g.ref=ui(b,null,x),g.return=b,g;case pr:return x=Da(x,b.mode,g),x.return=b,x;case Kn:var N=x._init;return h(b,N(x._payload),g)}if(wi(x)||ri(x))return x=jo(x,b.mode,g,null),x.return=b,x;Ss(b,x)}return null}function m(b,x,g,N){var M=x!==null?x.key:null;if(typeof g=="string"&&g!==""||typeof g=="number")return M!==null?null:u(b,x,""+g,N);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case fs:return g.key===M?d(b,x,g,N):null;case pr:return g.key===M?f(b,x,g,N):null;case Kn:return M=g._init,m(b,x,M(g._payload),N)}if(wi(g)||ri(g))return M!==null?null:p(b,x,g,N,null);Ss(b,g)}return null}function v(b,x,g,N,M){if(typeof N=="string"&&N!==""||typeof N=="number")return b=b.get(g)||null,u(x,b,""+N,M);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case fs:return b=b.get(N.key===null?g:N.key)||null,d(x,b,N,M);case pr:return b=b.get(N.key===null?g:N.key)||null,f(x,b,N,M);case Kn:var T=N._init;return v(b,x,g,T(N._payload),M)}if(wi(N)||ri(N))return b=b.get(g)||null,p(x,b,N,M,null);Ss(x,N)}return null}function C(b,x,g,N){for(var M=null,T=null,P=x,R=x=0,j=null;P!==null&&R<g.length;R++){P.index>R?(j=P,P=null):j=P.sibling;var U=m(b,P,g[R],N);if(U===null){P===null&&(P=j);break}e&&P&&U.alternate===null&&t(b,P),x=i(U,x,R),T===null?M=U:T.sibling=U,T=U,P=j}if(R===g.length)return n(b,P),Ue&&Ao(b,R),M;if(P===null){for(;R<g.length;R++)P=h(b,g[R],N),P!==null&&(x=i(P,x,R),T===null?M=P:T.sibling=P,T=P);return Ue&&Ao(b,R),M}for(P=o(b,P);R<g.length;R++)j=v(P,b,R,g[R],N),j!==null&&(e&&j.alternate!==null&&P.delete(j.key===null?R:j.key),x=i(j,x,R),T===null?M=j:T.sibling=j,T=j);return e&&P.forEach(function(q){return t(b,q)}),Ue&&Ao(b,R),M}function S(b,x,g,N){var M=ri(g);if(typeof M!="function")throw Error(J(150));if(g=M.call(g),g==null)throw Error(J(151));for(var T=M=null,P=x,R=x=0,j=null,U=g.next();P!==null&&!U.done;R++,U=g.next()){P.index>R?(j=P,P=null):j=P.sibling;var q=m(b,P,U.value,N);if(q===null){P===null&&(P=j);break}e&&P&&q.alternate===null&&t(b,P),x=i(q,x,R),T===null?M=q:T.sibling=q,T=q,P=j}if(U.done)return n(b,P),Ue&&Ao(b,R),M;if(P===null){for(;!U.done;R++,U=g.next())U=h(b,U.value,N),U!==null&&(x=i(U,x,R),T===null?M=U:T.sibling=U,T=U);return Ue&&Ao(b,R),M}for(P=o(b,P);!U.done;R++,U=g.next())U=v(P,b,R,U.value,N),U!==null&&(e&&U.alternate!==null&&P.delete(U.key===null?R:U.key),x=i(U,x,R),T===null?M=U:T.sibling=U,T=U);return e&&P.forEach(function(V){return t(b,V)}),Ue&&Ao(b,R),M}function D(b,x,g,N){if(typeof g=="object"&&g!==null&&g.type===hr&&g.key===null&&(g=g.props.children),typeof g=="object"&&g!==null){switch(g.$$typeof){case fs:e:{for(var M=g.key,T=x;T!==null;){if(T.key===M){if(M=g.type,M===hr){if(T.tag===7){n(b,T.sibling),x=r(T,g.props.children),x.return=b,b=x;break e}}else if(T.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Kn&&ef(M)===T.type){n(b,T.sibling),x=r(T,g.props),x.ref=ui(b,T,g),x.return=b,b=x;break e}n(b,T);break}else t(b,T);T=T.sibling}g.type===hr?(x=jo(g.props.children,b.mode,N,g.key),x.return=b,b=x):(N=qs(g.type,g.key,g.props,null,b.mode,N),N.ref=ui(b,x,g),N.return=b,b=N)}return l(b);case pr:e:{for(T=g.key;x!==null;){if(x.key===T)if(x.tag===4&&x.stateNode.containerInfo===g.containerInfo&&x.stateNode.implementation===g.implementation){n(b,x.sibling),x=r(x,g.children||[]),x.return=b,b=x;break e}else{n(b,x);break}else t(b,x);x=x.sibling}x=Da(g,b.mode,N),x.return=b,b=x}return l(b);case Kn:return T=g._init,D(b,x,T(g._payload),N)}if(wi(g))return C(b,x,g,N);if(ri(g))return S(b,x,g,N);Ss(b,g)}return typeof g=="string"&&g!==""||typeof g=="number"?(g=""+g,x!==null&&x.tag===6?(n(b,x.sibling),x=r(x,g),x.return=b,b=x):(n(b,x),x=Ra(g,b.mode,N),x.return=b,b=x),l(b)):n(b,x)}return D}var Ur=Fm(!0),Um=Fm(!1),al=go(null),ul=null,Cr=null,gc=null;function yc(){gc=Cr=ul=null}function xc(e){var t=al.current;Re(al),e._currentValue=t}function vu(e,t,n){for(;e!==null;){var o=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,o!==null&&(o.childLanes|=t)):o!==null&&(o.childLanes&t)!==t&&(o.childLanes|=t),e===n)break;e=e.return}}function Ar(e,t){ul=e,gc=Cr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(At=!0),e.firstContext=null)}function Zt(e){var t=e._currentValue;if(gc!==e)if(e={context:e,memoizedValue:t,next:null},Cr===null){if(ul===null)throw Error(J(308));Cr=e,ul.dependencies={lanes:0,firstContext:e}}else Cr=Cr.next=e;return t}var Ro=null;function vc(e){Ro===null?Ro=[e]:Ro.push(e)}function zm(e,t,n,o){var r=t.interleaved;return r===null?(n.next=n,vc(t)):(n.next=r.next,r.next=n),t.interleaved=n,Un(e,o)}function Un(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Xn=!1;function wc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Vm(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ln(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function lo(e,t,n){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,ve&2){var r=o.pending;return r===null?t.next=t:(t.next=r.next,r.next=t),o.pending=t,Un(e,n)}return r=o.interleaved,r===null?(t.next=t,vc(o)):(t.next=r.next,r.next=t),o.interleaved=t,Un(e,n)}function zs(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var o=t.lanes;o&=e.pendingLanes,n|=o,t.lanes=n,ic(e,n)}}function tf(e,t){var n=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,n===o)){var r=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?r=i=l:i=i.next=l,n=n.next}while(n!==null);i===null?r=i=t:i=i.next=t}else r=i=t;n={baseState:o.baseState,firstBaseUpdate:r,lastBaseUpdate:i,shared:o.shared,effects:o.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function cl(e,t,n,o){var r=e.updateQueue;Xn=!1;var i=r.firstBaseUpdate,l=r.lastBaseUpdate,u=r.shared.pending;if(u!==null){r.shared.pending=null;var d=u,f=d.next;d.next=null,l===null?i=f:l.next=f,l=d;var p=e.alternate;p!==null&&(p=p.updateQueue,u=p.lastBaseUpdate,u!==l&&(u===null?p.firstBaseUpdate=f:u.next=f,p.lastBaseUpdate=d))}if(i!==null){var h=r.baseState;l=0,p=f=d=null,u=i;do{var m=u.lane,v=u.eventTime;if((o&m)===m){p!==null&&(p=p.next={eventTime:v,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var C=e,S=u;switch(m=t,v=n,S.tag){case 1:if(C=S.payload,typeof C=="function"){h=C.call(v,h,m);break e}h=C;break e;case 3:C.flags=C.flags&-65537|128;case 0:if(C=S.payload,m=typeof C=="function"?C.call(v,h,m):C,m==null)break e;h=$e({},h,m);break e;case 2:Xn=!0}}u.callback!==null&&u.lane!==0&&(e.flags|=64,m=r.effects,m===null?r.effects=[u]:m.push(u))}else v={eventTime:v,lane:m,tag:u.tag,payload:u.payload,callback:u.callback,next:null},p===null?(f=p=v,d=h):p=p.next=v,l|=m;if(u=u.next,u===null){if(u=r.shared.pending,u===null)break;m=u,u=m.next,m.next=null,r.lastBaseUpdate=m,r.shared.pending=null}}while(!0);if(p===null&&(d=h),r.baseState=d,r.firstBaseUpdate=f,r.lastBaseUpdate=p,t=r.shared.interleaved,t!==null){r=t;do l|=r.lane,r=r.next;while(r!==t)}else i===null&&(r.shared.lanes=0);Vo|=l,e.lanes=l,e.memoizedState=h}}function nf(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var o=e[t],r=o.callback;if(r!==null){if(o.callback=null,o=n,typeof r!="function")throw Error(J(191,r));r.call(o)}}}var ts={},bn=go(ts),Bi=go(ts),qi=go(ts);function Do(e){if(e===ts)throw Error(J(174));return e}function bc(e,t){switch(Ae(qi,t),Ae(Bi,e),Ae(bn,ts),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Za(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Za(t,e)}Re(bn),Ae(bn,t)}function zr(){Re(bn),Re(Bi),Re(qi)}function $m(e){Do(qi.current);var t=Do(bn.current),n=Za(t,e.type);t!==n&&(Ae(Bi,e),Ae(bn,n))}function Cc(e){Bi.current===e&&(Re(bn),Re(Bi))}var ze=go(0);function dl(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ka=[];function Sc(){for(var e=0;e<ka.length;e++)ka[e]._workInProgressVersionPrimary=null;ka.length=0}var Vs=$n.ReactCurrentDispatcher,_a=$n.ReactCurrentBatchConfig,zo=0,Ve=null,Ze=null,ot=null,fl=!1,_i=!1,Oi=0,rv=0;function dt(){throw Error(J(321))}function Nc(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!pn(e[n],t[n]))return!1;return!0}function Ec(e,t,n,o,r,i){if(zo=i,Ve=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Vs.current=e===null||e.memoizedState===null?av:uv,e=n(o,r),_i){i=0;do{if(_i=!1,Oi=0,25<=i)throw Error(J(301));i+=1,ot=Ze=null,t.updateQueue=null,Vs.current=cv,e=n(o,r)}while(_i)}if(Vs.current=pl,t=Ze!==null&&Ze.next!==null,zo=0,ot=Ze=Ve=null,fl=!1,t)throw Error(J(300));return e}function Tc(){var e=Oi!==0;return Oi=0,e}function xn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ot===null?Ve.memoizedState=ot=e:ot=ot.next=e,ot}function en(){if(Ze===null){var e=Ve.alternate;e=e!==null?e.memoizedState:null}else e=Ze.next;var t=ot===null?Ve.memoizedState:ot.next;if(t!==null)ot=t,Ze=e;else{if(e===null)throw Error(J(310));Ze=e,e={memoizedState:Ze.memoizedState,baseState:Ze.baseState,baseQueue:Ze.baseQueue,queue:Ze.queue,next:null},ot===null?Ve.memoizedState=ot=e:ot=ot.next=e}return ot}function Wi(e,t){return typeof t=="function"?t(e):t}function Ia(e){var t=en(),n=t.queue;if(n===null)throw Error(J(311));n.lastRenderedReducer=e;var o=Ze,r=o.baseQueue,i=n.pending;if(i!==null){if(r!==null){var l=r.next;r.next=i.next,i.next=l}o.baseQueue=r=i,n.pending=null}if(r!==null){i=r.next,o=o.baseState;var u=l=null,d=null,f=i;do{var p=f.lane;if((zo&p)===p)d!==null&&(d=d.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),o=f.hasEagerState?f.eagerState:e(o,f.action);else{var h={lane:p,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};d===null?(u=d=h,l=o):d=d.next=h,Ve.lanes|=p,Vo|=p}f=f.next}while(f!==null&&f!==i);d===null?l=o:d.next=u,pn(o,t.memoizedState)||(At=!0),t.memoizedState=o,t.baseState=l,t.baseQueue=d,n.lastRenderedState=o}if(e=n.interleaved,e!==null){r=e;do i=r.lane,Ve.lanes|=i,Vo|=i,r=r.next;while(r!==e)}else r===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Aa(e){var t=en(),n=t.queue;if(n===null)throw Error(J(311));n.lastRenderedReducer=e;var o=n.dispatch,r=n.pending,i=t.memoizedState;if(r!==null){n.pending=null;var l=r=r.next;do i=e(i,l.action),l=l.next;while(l!==r);pn(i,t.memoizedState)||(At=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,o]}function Hm(){}function Gm(e,t){var n=Ve,o=en(),r=t(),i=!pn(o.memoizedState,r);if(i&&(o.memoizedState=r,At=!0),o=o.queue,kc(Om.bind(null,n,o,e),[e]),o.getSnapshot!==t||i||ot!==null&&ot.memoizedState.tag&1){if(n.flags|=2048,Ji(9,qm.bind(null,n,o,r,t),void 0,null),rt===null)throw Error(J(349));zo&30||Bm(n,t,r)}return r}function Bm(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ve.updateQueue,t===null?(t={lastEffect:null,stores:null},Ve.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function qm(e,t,n,o){t.value=n,t.getSnapshot=o,Wm(t)&&Jm(e)}function Om(e,t,n){return n(function(){Wm(t)&&Jm(e)})}function Wm(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!pn(e,n)}catch{return!0}}function Jm(e){var t=Un(e,1);t!==null&&fn(t,e,1,-1)}function of(e){var t=xn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Wi,lastRenderedState:e},t.queue=e,e=e.dispatch=lv.bind(null,Ve,e),[t.memoizedState,e]}function Ji(e,t,n,o){return e={tag:e,create:t,destroy:n,deps:o,next:null},t=Ve.updateQueue,t===null?(t={lastEffect:null,stores:null},Ve.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(o=n.next,n.next=e,e.next=o,t.lastEffect=e)),e}function Ym(){return en().memoizedState}function $s(e,t,n,o){var r=xn();Ve.flags|=e,r.memoizedState=Ji(1|t,n,void 0,o===void 0?null:o)}function Rl(e,t,n,o){var r=en();o=o===void 0?null:o;var i=void 0;if(Ze!==null){var l=Ze.memoizedState;if(i=l.destroy,o!==null&&Nc(o,l.deps)){r.memoizedState=Ji(t,n,i,o);return}}Ve.flags|=e,r.memoizedState=Ji(1|t,n,i,o)}function rf(e,t){return $s(8390656,8,e,t)}function kc(e,t){return Rl(2048,8,e,t)}function Km(e,t){return Rl(4,2,e,t)}function Xm(e,t){return Rl(4,4,e,t)}function Qm(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Zm(e,t,n){return n=n!=null?n.concat([e]):null,Rl(4,4,Qm.bind(null,t,e),n)}function _c(){}function eg(e,t){var n=en();t=t===void 0?null:t;var o=n.memoizedState;return o!==null&&t!==null&&Nc(t,o[1])?o[0]:(n.memoizedState=[e,t],e)}function tg(e,t){var n=en();t=t===void 0?null:t;var o=n.memoizedState;return o!==null&&t!==null&&Nc(t,o[1])?o[0]:(e=e(),n.memoizedState=[e,t],e)}function ng(e,t,n){return zo&21?(pn(n,t)||(n=lm(),Ve.lanes|=n,Vo|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,At=!0),e.memoizedState=n)}function iv(e,t){var n=Ee;Ee=n!==0&&4>n?n:4,e(!0);var o=_a.transition;_a.transition={};try{e(!1),t()}finally{Ee=n,_a.transition=o}}function og(){return en().memoizedState}function sv(e,t,n){var o=uo(e);if(n={lane:o,action:n,hasEagerState:!1,eagerState:null,next:null},rg(e))ig(t,n);else if(n=zm(e,t,n,o),n!==null){var r=Ct();fn(n,e,o,r),sg(n,t,o)}}function lv(e,t,n){var o=uo(e),r={lane:o,action:n,hasEagerState:!1,eagerState:null,next:null};if(rg(e))ig(t,r);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var l=t.lastRenderedState,u=i(l,n);if(r.hasEagerState=!0,r.eagerState=u,pn(u,l)){var d=t.interleaved;d===null?(r.next=r,vc(t)):(r.next=d.next,d.next=r),t.interleaved=r;return}}catch{}finally{}n=zm(e,t,r,o),n!==null&&(r=Ct(),fn(n,e,o,r),sg(n,t,o))}}function rg(e){var t=e.alternate;return e===Ve||t!==null&&t===Ve}function ig(e,t){_i=fl=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function sg(e,t,n){if(n&4194240){var o=t.lanes;o&=e.pendingLanes,n|=o,t.lanes=n,ic(e,n)}}var pl={readContext:Zt,useCallback:dt,useContext:dt,useEffect:dt,useImperativeHandle:dt,useInsertionEffect:dt,useLayoutEffect:dt,useMemo:dt,useReducer:dt,useRef:dt,useState:dt,useDebugValue:dt,useDeferredValue:dt,useTransition:dt,useMutableSource:dt,useSyncExternalStore:dt,useId:dt,unstable_isNewReconciler:!1},av={readContext:Zt,useCallback:function(e,t){return xn().memoizedState=[e,t===void 0?null:t],e},useContext:Zt,useEffect:rf,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,$s(4194308,4,Qm.bind(null,t,e),n)},useLayoutEffect:function(e,t){return $s(4194308,4,e,t)},useInsertionEffect:function(e,t){return $s(4,2,e,t)},useMemo:function(e,t){var n=xn();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var o=xn();return t=n!==void 0?n(t):t,o.memoizedState=o.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},o.queue=e,e=e.dispatch=sv.bind(null,Ve,e),[o.memoizedState,e]},useRef:function(e){var t=xn();return e={current:e},t.memoizedState=e},useState:of,useDebugValue:_c,useDeferredValue:function(e){return xn().memoizedState=e},useTransition:function(){var e=of(!1),t=e[0];return e=iv.bind(null,e[1]),xn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var o=Ve,r=xn();if(Ue){if(n===void 0)throw Error(J(407));n=n()}else{if(n=t(),rt===null)throw Error(J(349));zo&30||Bm(o,t,n)}r.memoizedState=n;var i={value:n,getSnapshot:t};return r.queue=i,rf(Om.bind(null,o,i,e),[e]),o.flags|=2048,Ji(9,qm.bind(null,o,i,n,t),void 0,null),n},useId:function(){var e=xn(),t=rt.identifierPrefix;if(Ue){var n=Dn,o=Rn;n=(o&~(1<<32-dn(o)-1)).toString(32)+n,t=":"+t+"R"+n,n=Oi++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=rv++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},uv={readContext:Zt,useCallback:eg,useContext:Zt,useEffect:kc,useImperativeHandle:Zm,useInsertionEffect:Km,useLayoutEffect:Xm,useMemo:tg,useReducer:Ia,useRef:Ym,useState:function(){return Ia(Wi)},useDebugValue:_c,useDeferredValue:function(e){var t=en();return ng(t,Ze.memoizedState,e)},useTransition:function(){var e=Ia(Wi)[0],t=en().memoizedState;return[e,t]},useMutableSource:Hm,useSyncExternalStore:Gm,useId:og,unstable_isNewReconciler:!1},cv={readContext:Zt,useCallback:eg,useContext:Zt,useEffect:kc,useImperativeHandle:Zm,useInsertionEffect:Km,useLayoutEffect:Xm,useMemo:tg,useReducer:Aa,useRef:Ym,useState:function(){return Aa(Wi)},useDebugValue:_c,useDeferredValue:function(e){var t=en();return Ze===null?t.memoizedState=e:ng(t,Ze.memoizedState,e)},useTransition:function(){var e=Aa(Wi)[0],t=en().memoizedState;return[e,t]},useMutableSource:Hm,useSyncExternalStore:Gm,useId:og,unstable_isNewReconciler:!1};function an(e,t){if(e&&e.defaultProps){t=$e({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function wu(e,t,n,o){t=e.memoizedState,n=n(o,t),n=n==null?t:$e({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Dl={isMounted:function(e){return(e=e._reactInternals)?Go(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var o=Ct(),r=uo(e),i=Ln(o,r);i.payload=t,n!=null&&(i.callback=n),t=lo(e,i,r),t!==null&&(fn(t,e,r,o),zs(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var o=Ct(),r=uo(e),i=Ln(o,r);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=lo(e,i,r),t!==null&&(fn(t,e,r,o),zs(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ct(),o=uo(e),r=Ln(n,o);r.tag=2,t!=null&&(r.callback=t),t=lo(e,r,o),t!==null&&(fn(t,e,o,n),zs(t,e,o))}};function sf(e,t,n,o,r,i,l){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,i,l):t.prototype&&t.prototype.isPureReactComponent?!Vi(n,o)||!Vi(r,i):!0}function lg(e,t,n){var o=!1,r=ho,i=t.contextType;return typeof i=="object"&&i!==null?i=Zt(i):(r=Pt(t)?Fo:mt.current,o=t.contextTypes,i=(o=o!=null)?jr(e,r):ho),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Dl,e.stateNode=t,t._reactInternals=e,o&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=i),t}function lf(e,t,n,o){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,o),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,o),t.state!==e&&Dl.enqueueReplaceState(t,t.state,null)}function bu(e,t,n,o){var r=e.stateNode;r.props=n,r.state=e.memoizedState,r.refs={},wc(e);var i=t.contextType;typeof i=="object"&&i!==null?r.context=Zt(i):(i=Pt(t)?Fo:mt.current,r.context=jr(e,i)),r.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(wu(e,t,i,n),r.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(t=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),t!==r.state&&Dl.enqueueReplaceState(r,r.state,null),cl(e,n,r,o),r.state=e.memoizedState),typeof r.componentDidMount=="function"&&(e.flags|=4194308)}function Vr(e,t){try{var n="",o=t;do n+=Uy(o),o=o.return;while(o);var r=n}catch(i){r=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:r,digest:null}}function Ma(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Cu(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var dv=typeof WeakMap=="function"?WeakMap:Map;function ag(e,t,n){n=Ln(-1,n),n.tag=3,n.payload={element:null};var o=t.value;return n.callback=function(){ml||(ml=!0,Pu=o),Cu(e,t)},n}function ug(e,t,n){n=Ln(-1,n),n.tag=3;var o=e.type.getDerivedStateFromError;if(typeof o=="function"){var r=t.value;n.payload=function(){return o(r)},n.callback=function(){Cu(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Cu(e,t),typeof o!="function"&&(ao===null?ao=new Set([this]):ao.add(this));var l=t.stack;this.componentDidCatch(t.value,{componentStack:l!==null?l:""})}),n}function af(e,t,n){var o=e.pingCache;if(o===null){o=e.pingCache=new dv;var r=new Set;o.set(t,r)}else r=o.get(t),r===void 0&&(r=new Set,o.set(t,r));r.has(n)||(r.add(n),e=Ev.bind(null,e,t,n),t.then(e,e))}function uf(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function cf(e,t,n,o,r){return e.mode&1?(e.flags|=65536,e.lanes=r,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Ln(-1,1),t.tag=2,lo(n,t,1))),n.lanes|=1),e)}var fv=$n.ReactCurrentOwner,At=!1;function bt(e,t,n,o){t.child=e===null?Um(t,null,n,o):Ur(t,e.child,n,o)}function df(e,t,n,o,r){n=n.render;var i=t.ref;return Ar(t,r),o=Ec(e,t,n,o,i,r),n=Tc(),e!==null&&!At?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,zn(e,t,r)):(Ue&&n&&pc(t),t.flags|=1,bt(e,t,o,r),t.child)}function ff(e,t,n,o,r){if(e===null){var i=n.type;return typeof i=="function"&&!jc(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,cg(e,t,i,o,r)):(e=qs(n.type,null,o,t,t.mode,r),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&r)){var l=i.memoizedProps;if(n=n.compare,n=n!==null?n:Vi,n(l,o)&&e.ref===t.ref)return zn(e,t,r)}return t.flags|=1,e=co(i,o),e.ref=t.ref,e.return=t,t.child=e}function cg(e,t,n,o,r){if(e!==null){var i=e.memoizedProps;if(Vi(i,o)&&e.ref===t.ref)if(At=!1,t.pendingProps=o=i,(e.lanes&r)!==0)e.flags&131072&&(At=!0);else return t.lanes=e.lanes,zn(e,t,r)}return Su(e,t,n,o,r)}function dg(e,t,n){var o=t.pendingProps,r=o.children,i=e!==null?e.memoizedState:null;if(o.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ae(Nr,Ut),Ut|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ae(Nr,Ut),Ut|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},o=i!==null?i.baseLanes:n,Ae(Nr,Ut),Ut|=o}else i!==null?(o=i.baseLanes|n,t.memoizedState=null):o=n,Ae(Nr,Ut),Ut|=o;return bt(e,t,r,n),t.child}function fg(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Su(e,t,n,o,r){var i=Pt(n)?Fo:mt.current;return i=jr(t,i),Ar(t,r),n=Ec(e,t,n,o,i,r),o=Tc(),e!==null&&!At?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,zn(e,t,r)):(Ue&&o&&pc(t),t.flags|=1,bt(e,t,n,r),t.child)}function pf(e,t,n,o,r){if(Pt(n)){var i=!0;il(t)}else i=!1;if(Ar(t,r),t.stateNode===null)Hs(e,t),lg(t,n,o),bu(t,n,o,r),o=!0;else if(e===null){var l=t.stateNode,u=t.memoizedProps;l.props=u;var d=l.context,f=n.contextType;typeof f=="object"&&f!==null?f=Zt(f):(f=Pt(n)?Fo:mt.current,f=jr(t,f));var p=n.getDerivedStateFromProps,h=typeof p=="function"||typeof l.getSnapshotBeforeUpdate=="function";h||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(u!==o||d!==f)&&lf(t,l,o,f),Xn=!1;var m=t.memoizedState;l.state=m,cl(t,o,l,r),d=t.memoizedState,u!==o||m!==d||Mt.current||Xn?(typeof p=="function"&&(wu(t,n,p,o),d=t.memoizedState),(u=Xn||sf(t,n,u,o,m,d,f))?(h||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=o,t.memoizedState=d),l.props=o,l.state=d,l.context=f,o=u):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),o=!1)}else{l=t.stateNode,Vm(e,t),u=t.memoizedProps,f=t.type===t.elementType?u:an(t.type,u),l.props=f,h=t.pendingProps,m=l.context,d=n.contextType,typeof d=="object"&&d!==null?d=Zt(d):(d=Pt(n)?Fo:mt.current,d=jr(t,d));var v=n.getDerivedStateFromProps;(p=typeof v=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(u!==h||m!==d)&&lf(t,l,o,d),Xn=!1,m=t.memoizedState,l.state=m,cl(t,o,l,r);var C=t.memoizedState;u!==h||m!==C||Mt.current||Xn?(typeof v=="function"&&(wu(t,n,v,o),C=t.memoizedState),(f=Xn||sf(t,n,f,o,m,C,d)||!1)?(p||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(o,C,d),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(o,C,d)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||u===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=o,t.memoizedState=C),l.props=o,l.state=C,l.context=d,o=f):(typeof l.componentDidUpdate!="function"||u===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),o=!1)}return Nu(e,t,n,o,i,r)}function Nu(e,t,n,o,r,i){fg(e,t);var l=(t.flags&128)!==0;if(!o&&!l)return r&&Xd(t,n,!1),zn(e,t,i);o=t.stateNode,fv.current=t;var u=l&&typeof n.getDerivedStateFromError!="function"?null:o.render();return t.flags|=1,e!==null&&l?(t.child=Ur(t,e.child,null,i),t.child=Ur(t,null,u,i)):bt(e,t,u,i),t.memoizedState=o.state,r&&Xd(t,n,!0),t.child}function pg(e){var t=e.stateNode;t.pendingContext?Kd(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Kd(e,t.context,!1),bc(e,t.containerInfo)}function hf(e,t,n,o,r){return Fr(),mc(r),t.flags|=256,bt(e,t,n,o),t.child}var Eu={dehydrated:null,treeContext:null,retryLane:0};function Tu(e){return{baseLanes:e,cachePool:null,transitions:null}}function hg(e,t,n){var o=t.pendingProps,r=ze.current,i=!1,l=(t.flags&128)!==0,u;if((u=l)||(u=e!==null&&e.memoizedState===null?!1:(r&2)!==0),u?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(r|=1),Ae(ze,r&1),e===null)return xu(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=o.children,e=o.fallback,i?(o=t.mode,i=t.child,l={mode:"hidden",children:l},!(o&1)&&i!==null?(i.childLanes=0,i.pendingProps=l):i=Fl(l,o,0,null),e=jo(e,o,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Tu(n),t.memoizedState=Eu,e):Ic(t,l));if(r=e.memoizedState,r!==null&&(u=r.dehydrated,u!==null))return pv(e,t,l,o,u,r,n);if(i){i=o.fallback,l=t.mode,r=e.child,u=r.sibling;var d={mode:"hidden",children:o.children};return!(l&1)&&t.child!==r?(o=t.child,o.childLanes=0,o.pendingProps=d,t.deletions=null):(o=co(r,d),o.subtreeFlags=r.subtreeFlags&14680064),u!==null?i=co(u,i):(i=jo(i,l,n,null),i.flags|=2),i.return=t,o.return=t,o.sibling=i,t.child=o,o=i,i=t.child,l=e.child.memoizedState,l=l===null?Tu(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},i.memoizedState=l,i.childLanes=e.childLanes&~n,t.memoizedState=Eu,o}return i=e.child,e=i.sibling,o=co(i,{mode:"visible",children:o.children}),!(t.mode&1)&&(o.lanes=n),o.return=t,o.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=o,t.memoizedState=null,o}function Ic(e,t){return t=Fl({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Ns(e,t,n,o){return o!==null&&mc(o),Ur(t,e.child,null,n),e=Ic(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function pv(e,t,n,o,r,i,l){if(n)return t.flags&256?(t.flags&=-257,o=Ma(Error(J(422))),Ns(e,t,l,o)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=o.fallback,r=t.mode,o=Fl({mode:"visible",children:o.children},r,0,null),i=jo(i,r,l,null),i.flags|=2,o.return=t,i.return=t,o.sibling=i,t.child=o,t.mode&1&&Ur(t,e.child,null,l),t.child.memoizedState=Tu(l),t.memoizedState=Eu,i);if(!(t.mode&1))return Ns(e,t,l,null);if(r.data==="$!"){if(o=r.nextSibling&&r.nextSibling.dataset,o)var u=o.dgst;return o=u,i=Error(J(419)),o=Ma(i,o,void 0),Ns(e,t,l,o)}if(u=(l&e.childLanes)!==0,At||u){if(o=rt,o!==null){switch(l&-l){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(o.suspendedLanes|l)?0:r,r!==0&&r!==i.retryLane&&(i.retryLane=r,Un(e,r),fn(o,e,r,-1))}return Lc(),o=Ma(Error(J(421))),Ns(e,t,l,o)}return r.data==="$?"?(t.flags|=128,t.child=e.child,t=Tv.bind(null,e),r._reactRetry=t,null):(e=i.treeContext,zt=so(r.nextSibling),Vt=t,Ue=!0,cn=null,e!==null&&(Jt[Yt++]=Rn,Jt[Yt++]=Dn,Jt[Yt++]=Uo,Rn=e.id,Dn=e.overflow,Uo=t),t=Ic(t,o.children),t.flags|=4096,t)}function mf(e,t,n){e.lanes|=t;var o=e.alternate;o!==null&&(o.lanes|=t),vu(e.return,t,n)}function Pa(e,t,n,o,r){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:o,tail:n,tailMode:r}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=o,i.tail=n,i.tailMode=r)}function mg(e,t,n){var o=t.pendingProps,r=o.revealOrder,i=o.tail;if(bt(e,t,o.children,n),o=ze.current,o&2)o=o&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&mf(e,n,t);else if(e.tag===19)mf(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}o&=1}if(Ae(ze,o),!(t.mode&1))t.memoizedState=null;else switch(r){case"forwards":for(n=t.child,r=null;n!==null;)e=n.alternate,e!==null&&dl(e)===null&&(r=n),n=n.sibling;n=r,n===null?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),Pa(t,!1,r,n,i);break;case"backwards":for(n=null,r=t.child,t.child=null;r!==null;){if(e=r.alternate,e!==null&&dl(e)===null){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}Pa(t,!0,n,null,i);break;case"together":Pa(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Hs(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function zn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Vo|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(J(153));if(t.child!==null){for(e=t.child,n=co(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=co(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function hv(e,t,n){switch(t.tag){case 3:pg(t),Fr();break;case 5:$m(t);break;case 1:Pt(t.type)&&il(t);break;case 4:bc(t,t.stateNode.containerInfo);break;case 10:var o=t.type._context,r=t.memoizedProps.value;Ae(al,o._currentValue),o._currentValue=r;break;case 13:if(o=t.memoizedState,o!==null)return o.dehydrated!==null?(Ae(ze,ze.current&1),t.flags|=128,null):n&t.child.childLanes?hg(e,t,n):(Ae(ze,ze.current&1),e=zn(e,t,n),e!==null?e.sibling:null);Ae(ze,ze.current&1);break;case 19:if(o=(n&t.childLanes)!==0,e.flags&128){if(o)return mg(e,t,n);t.flags|=128}if(r=t.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Ae(ze,ze.current),o)break;return null;case 22:case 23:return t.lanes=0,dg(e,t,n)}return zn(e,t,n)}var gg,ku,yg,xg;gg=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ku=function(){};yg=function(e,t,n,o){var r=e.memoizedProps;if(r!==o){e=t.stateNode,Do(bn.current);var i=null;switch(n){case"input":r=Ya(e,r),o=Ya(e,o),i=[];break;case"select":r=$e({},r,{value:void 0}),o=$e({},o,{value:void 0}),i=[];break;case"textarea":r=Qa(e,r),o=Qa(e,o),i=[];break;default:typeof r.onClick!="function"&&typeof o.onClick=="function"&&(e.onclick=ol)}eu(n,o);var l;n=null;for(f in r)if(!o.hasOwnProperty(f)&&r.hasOwnProperty(f)&&r[f]!=null)if(f==="style"){var u=r[f];for(l in u)u.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(Ri.hasOwnProperty(f)?i||(i=[]):(i=i||[]).push(f,null));for(f in o){var d=o[f];if(u=r!=null?r[f]:void 0,o.hasOwnProperty(f)&&d!==u&&(d!=null||u!=null))if(f==="style")if(u){for(l in u)!u.hasOwnProperty(l)||d&&d.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in d)d.hasOwnProperty(l)&&u[l]!==d[l]&&(n||(n={}),n[l]=d[l])}else n||(i||(i=[]),i.push(f,n)),n=d;else f==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,u=u?u.__html:void 0,d!=null&&u!==d&&(i=i||[]).push(f,d)):f==="children"?typeof d!="string"&&typeof d!="number"||(i=i||[]).push(f,""+d):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(Ri.hasOwnProperty(f)?(d!=null&&f==="onScroll"&&Me("scroll",e),i||u===d||(i=[])):(i=i||[]).push(f,d))}n&&(i=i||[]).push("style",n);var f=i;(t.updateQueue=f)&&(t.flags|=4)}};xg=function(e,t,n,o){n!==o&&(t.flags|=4)};function ci(e,t){if(!Ue)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var o=null;n!==null;)n.alternate!==null&&(o=n),n=n.sibling;o===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function ft(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,o=0;if(t)for(var r=e.child;r!==null;)n|=r.lanes|r.childLanes,o|=r.subtreeFlags&14680064,o|=r.flags&14680064,r.return=e,r=r.sibling;else for(r=e.child;r!==null;)n|=r.lanes|r.childLanes,o|=r.subtreeFlags,o|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=o,e.childLanes=n,t}function mv(e,t,n){var o=t.pendingProps;switch(hc(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ft(t),null;case 1:return Pt(t.type)&&rl(),ft(t),null;case 3:return o=t.stateNode,zr(),Re(Mt),Re(mt),Sc(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(e===null||e.child===null)&&(Cs(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,cn!==null&&(Lu(cn),cn=null))),ku(e,t),ft(t),null;case 5:Cc(t);var r=Do(qi.current);if(n=t.type,e!==null&&t.stateNode!=null)yg(e,t,n,o,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!o){if(t.stateNode===null)throw Error(J(166));return ft(t),null}if(e=Do(bn.current),Cs(t)){o=t.stateNode,n=t.type;var i=t.memoizedProps;switch(o[vn]=t,o[Gi]=i,e=(t.mode&1)!==0,n){case"dialog":Me("cancel",o),Me("close",o);break;case"iframe":case"object":case"embed":Me("load",o);break;case"video":case"audio":for(r=0;r<Ci.length;r++)Me(Ci[r],o);break;case"source":Me("error",o);break;case"img":case"image":case"link":Me("error",o),Me("load",o);break;case"details":Me("toggle",o);break;case"input":Sd(o,i),Me("invalid",o);break;case"select":o._wrapperState={wasMultiple:!!i.multiple},Me("invalid",o);break;case"textarea":Ed(o,i),Me("invalid",o)}eu(n,i),r=null;for(var l in i)if(i.hasOwnProperty(l)){var u=i[l];l==="children"?typeof u=="string"?o.textContent!==u&&(i.suppressHydrationWarning!==!0&&bs(o.textContent,u,e),r=["children",u]):typeof u=="number"&&o.textContent!==""+u&&(i.suppressHydrationWarning!==!0&&bs(o.textContent,u,e),r=["children",""+u]):Ri.hasOwnProperty(l)&&u!=null&&l==="onScroll"&&Me("scroll",o)}switch(n){case"input":ps(o),Nd(o,i,!0);break;case"textarea":ps(o),Td(o);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(o.onclick=ol)}o=r,t.updateQueue=o,o!==null&&(t.flags|=4)}else{l=r.nodeType===9?r:r.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Oh(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof o.is=="string"?e=l.createElement(n,{is:o.is}):(e=l.createElement(n),n==="select"&&(l=e,o.multiple?l.multiple=!0:o.size&&(l.size=o.size))):e=l.createElementNS(e,n),e[vn]=t,e[Gi]=o,gg(e,t,!1,!1),t.stateNode=e;e:{switch(l=tu(n,o),n){case"dialog":Me("cancel",e),Me("close",e),r=o;break;case"iframe":case"object":case"embed":Me("load",e),r=o;break;case"video":case"audio":for(r=0;r<Ci.length;r++)Me(Ci[r],e);r=o;break;case"source":Me("error",e),r=o;break;case"img":case"image":case"link":Me("error",e),Me("load",e),r=o;break;case"details":Me("toggle",e),r=o;break;case"input":Sd(e,o),r=Ya(e,o),Me("invalid",e);break;case"option":r=o;break;case"select":e._wrapperState={wasMultiple:!!o.multiple},r=$e({},o,{value:void 0}),Me("invalid",e);break;case"textarea":Ed(e,o),r=Qa(e,o),Me("invalid",e);break;default:r=o}eu(n,r),u=r;for(i in u)if(u.hasOwnProperty(i)){var d=u[i];i==="style"?Yh(e,d):i==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&Wh(e,d)):i==="children"?typeof d=="string"?(n!=="textarea"||d!=="")&&Di(e,d):typeof d=="number"&&Di(e,""+d):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Ri.hasOwnProperty(i)?d!=null&&i==="onScroll"&&Me("scroll",e):d!=null&&Zu(e,i,d,l))}switch(n){case"input":ps(e),Nd(e,o,!1);break;case"textarea":ps(e),Td(e);break;case"option":o.value!=null&&e.setAttribute("value",""+po(o.value));break;case"select":e.multiple=!!o.multiple,i=o.value,i!=null?Tr(e,!!o.multiple,i,!1):o.defaultValue!=null&&Tr(e,!!o.multiple,o.defaultValue,!0);break;default:typeof r.onClick=="function"&&(e.onclick=ol)}switch(n){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}}o&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ft(t),null;case 6:if(e&&t.stateNode!=null)xg(e,t,e.memoizedProps,o);else{if(typeof o!="string"&&t.stateNode===null)throw Error(J(166));if(n=Do(qi.current),Do(bn.current),Cs(t)){if(o=t.stateNode,n=t.memoizedProps,o[vn]=t,(i=o.nodeValue!==n)&&(e=Vt,e!==null))switch(e.tag){case 3:bs(o.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&bs(o.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else o=(n.nodeType===9?n:n.ownerDocument).createTextNode(o),o[vn]=t,t.stateNode=o}return ft(t),null;case 13:if(Re(ze),o=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ue&&zt!==null&&t.mode&1&&!(t.flags&128))jm(),Fr(),t.flags|=98560,i=!1;else if(i=Cs(t),o!==null&&o.dehydrated!==null){if(e===null){if(!i)throw Error(J(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(J(317));i[vn]=t}else Fr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ft(t),i=!1}else cn!==null&&(Lu(cn),cn=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(o=o!==null,o!==(e!==null&&e.memoizedState!==null)&&o&&(t.child.flags|=8192,t.mode&1&&(e===null||ze.current&1?et===0&&(et=3):Lc())),t.updateQueue!==null&&(t.flags|=4),ft(t),null);case 4:return zr(),ku(e,t),e===null&&$i(t.stateNode.containerInfo),ft(t),null;case 10:return xc(t.type._context),ft(t),null;case 17:return Pt(t.type)&&rl(),ft(t),null;case 19:if(Re(ze),i=t.memoizedState,i===null)return ft(t),null;if(o=(t.flags&128)!==0,l=i.rendering,l===null)if(o)ci(i,!1);else{if(et!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(l=dl(e),l!==null){for(t.flags|=128,ci(i,!1),o=l.updateQueue,o!==null&&(t.updateQueue=o,t.flags|=4),t.subtreeFlags=0,o=n,n=t.child;n!==null;)i=n,e=o,i.flags&=14680066,l=i.alternate,l===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,e=l.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ae(ze,ze.current&1|2),t.child}e=e.sibling}i.tail!==null&&Je()>$r&&(t.flags|=128,o=!0,ci(i,!1),t.lanes=4194304)}else{if(!o)if(e=dl(l),e!==null){if(t.flags|=128,o=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),ci(i,!0),i.tail===null&&i.tailMode==="hidden"&&!l.alternate&&!Ue)return ft(t),null}else 2*Je()-i.renderingStartTime>$r&&n!==1073741824&&(t.flags|=128,o=!0,ci(i,!1),t.lanes=4194304);i.isBackwards?(l.sibling=t.child,t.child=l):(n=i.last,n!==null?n.sibling=l:t.child=l,i.last=l)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Je(),t.sibling=null,n=ze.current,Ae(ze,o?n&1|2:n&1),t):(ft(t),null);case 22:case 23:return Dc(),o=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==o&&(t.flags|=8192),o&&t.mode&1?Ut&1073741824&&(ft(t),t.subtreeFlags&6&&(t.flags|=8192)):ft(t),null;case 24:return null;case 25:return null}throw Error(J(156,t.tag))}function gv(e,t){switch(hc(t),t.tag){case 1:return Pt(t.type)&&rl(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return zr(),Re(Mt),Re(mt),Sc(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Cc(t),null;case 13:if(Re(ze),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(J(340));Fr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Re(ze),null;case 4:return zr(),null;case 10:return xc(t.type._context),null;case 22:case 23:return Dc(),null;case 24:return null;default:return null}}var Es=!1,pt=!1,yv=typeof WeakSet=="function"?WeakSet:Set,ne=null;function Sr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(o){We(e,t,o)}else n.current=null}function _u(e,t,n){try{n()}catch(o){We(e,t,o)}}var gf=!1;function xv(e,t){if(du=el,e=Sm(),fc(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var o=n.getSelection&&n.getSelection();if(o&&o.rangeCount!==0){n=o.anchorNode;var r=o.anchorOffset,i=o.focusNode;o=o.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var l=0,u=-1,d=-1,f=0,p=0,h=e,m=null;t:for(;;){for(var v;h!==n||r!==0&&h.nodeType!==3||(u=l+r),h!==i||o!==0&&h.nodeType!==3||(d=l+o),h.nodeType===3&&(l+=h.nodeValue.length),(v=h.firstChild)!==null;)m=h,h=v;for(;;){if(h===e)break t;if(m===n&&++f===r&&(u=l),m===i&&++p===o&&(d=l),(v=h.nextSibling)!==null)break;h=m,m=h.parentNode}h=v}n=u===-1||d===-1?null:{start:u,end:d}}else n=null}n=n||{start:0,end:0}}else n=null;for(fu={focusedElem:e,selectionRange:n},el=!1,ne=t;ne!==null;)if(t=ne,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ne=e;else for(;ne!==null;){t=ne;try{var C=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(C!==null){var S=C.memoizedProps,D=C.memoizedState,b=t.stateNode,x=b.getSnapshotBeforeUpdate(t.elementType===t.type?S:an(t.type,S),D);b.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var g=t.stateNode.containerInfo;g.nodeType===1?g.textContent="":g.nodeType===9&&g.documentElement&&g.removeChild(g.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(J(163))}}catch(N){We(t,t.return,N)}if(e=t.sibling,e!==null){e.return=t.return,ne=e;break}ne=t.return}return C=gf,gf=!1,C}function Ii(e,t,n){var o=t.updateQueue;if(o=o!==null?o.lastEffect:null,o!==null){var r=o=o.next;do{if((r.tag&e)===e){var i=r.destroy;r.destroy=void 0,i!==void 0&&_u(t,n,i)}r=r.next}while(r!==o)}}function Ll(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var o=n.create;n.destroy=o()}n=n.next}while(n!==t)}}function Iu(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function vg(e){var t=e.alternate;t!==null&&(e.alternate=null,vg(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[vn],delete t[Gi],delete t[mu],delete t[ev],delete t[tv])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function wg(e){return e.tag===5||e.tag===3||e.tag===4}function yf(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||wg(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Au(e,t,n){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=ol));else if(o!==4&&(e=e.child,e!==null))for(Au(e,t,n),e=e.sibling;e!==null;)Au(e,t,n),e=e.sibling}function Mu(e,t,n){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(o!==4&&(e=e.child,e!==null))for(Mu(e,t,n),e=e.sibling;e!==null;)Mu(e,t,n),e=e.sibling}var it=null,un=!1;function Yn(e,t,n){for(n=n.child;n!==null;)bg(e,t,n),n=n.sibling}function bg(e,t,n){if(wn&&typeof wn.onCommitFiberUnmount=="function")try{wn.onCommitFiberUnmount(kl,n)}catch{}switch(n.tag){case 5:pt||Sr(n,t);case 6:var o=it,r=un;it=null,Yn(e,t,n),it=o,un=r,it!==null&&(un?(e=it,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):it.removeChild(n.stateNode));break;case 18:it!==null&&(un?(e=it,n=n.stateNode,e.nodeType===8?Ea(e.parentNode,n):e.nodeType===1&&Ea(e,n),Ui(e)):Ea(it,n.stateNode));break;case 4:o=it,r=un,it=n.stateNode.containerInfo,un=!0,Yn(e,t,n),it=o,un=r;break;case 0:case 11:case 14:case 15:if(!pt&&(o=n.updateQueue,o!==null&&(o=o.lastEffect,o!==null))){r=o=o.next;do{var i=r,l=i.destroy;i=i.tag,l!==void 0&&(i&2||i&4)&&_u(n,t,l),r=r.next}while(r!==o)}Yn(e,t,n);break;case 1:if(!pt&&(Sr(n,t),o=n.stateNode,typeof o.componentWillUnmount=="function"))try{o.props=n.memoizedProps,o.state=n.memoizedState,o.componentWillUnmount()}catch(u){We(n,t,u)}Yn(e,t,n);break;case 21:Yn(e,t,n);break;case 22:n.mode&1?(pt=(o=pt)||n.memoizedState!==null,Yn(e,t,n),pt=o):Yn(e,t,n);break;default:Yn(e,t,n)}}function xf(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new yv),t.forEach(function(o){var r=kv.bind(null,e,o);n.has(o)||(n.add(o),o.then(r,r))})}}function ln(e,t){var n=t.deletions;if(n!==null)for(var o=0;o<n.length;o++){var r=n[o];try{var i=e,l=t,u=l;e:for(;u!==null;){switch(u.tag){case 5:it=u.stateNode,un=!1;break e;case 3:it=u.stateNode.containerInfo,un=!0;break e;case 4:it=u.stateNode.containerInfo,un=!0;break e}u=u.return}if(it===null)throw Error(J(160));bg(i,l,r),it=null,un=!1;var d=r.alternate;d!==null&&(d.return=null),r.return=null}catch(f){We(r,t,f)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Cg(t,e),t=t.sibling}function Cg(e,t){var n=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ln(t,e),yn(e),o&4){try{Ii(3,e,e.return),Ll(3,e)}catch(S){We(e,e.return,S)}try{Ii(5,e,e.return)}catch(S){We(e,e.return,S)}}break;case 1:ln(t,e),yn(e),o&512&&n!==null&&Sr(n,n.return);break;case 5:if(ln(t,e),yn(e),o&512&&n!==null&&Sr(n,n.return),e.flags&32){var r=e.stateNode;try{Di(r,"")}catch(S){We(e,e.return,S)}}if(o&4&&(r=e.stateNode,r!=null)){var i=e.memoizedProps,l=n!==null?n.memoizedProps:i,u=e.type,d=e.updateQueue;if(e.updateQueue=null,d!==null)try{u==="input"&&i.type==="radio"&&i.name!=null&&Bh(r,i),tu(u,l);var f=tu(u,i);for(l=0;l<d.length;l+=2){var p=d[l],h=d[l+1];p==="style"?Yh(r,h):p==="dangerouslySetInnerHTML"?Wh(r,h):p==="children"?Di(r,h):Zu(r,p,h,f)}switch(u){case"input":Ka(r,i);break;case"textarea":qh(r,i);break;case"select":var m=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!i.multiple;var v=i.value;v!=null?Tr(r,!!i.multiple,v,!1):m!==!!i.multiple&&(i.defaultValue!=null?Tr(r,!!i.multiple,i.defaultValue,!0):Tr(r,!!i.multiple,i.multiple?[]:"",!1))}r[Gi]=i}catch(S){We(e,e.return,S)}}break;case 6:if(ln(t,e),yn(e),o&4){if(e.stateNode===null)throw Error(J(162));r=e.stateNode,i=e.memoizedProps;try{r.nodeValue=i}catch(S){We(e,e.return,S)}}break;case 3:if(ln(t,e),yn(e),o&4&&n!==null&&n.memoizedState.isDehydrated)try{Ui(t.containerInfo)}catch(S){We(e,e.return,S)}break;case 4:ln(t,e),yn(e);break;case 13:ln(t,e),yn(e),r=e.child,r.flags&8192&&(i=r.memoizedState!==null,r.stateNode.isHidden=i,!i||r.alternate!==null&&r.alternate.memoizedState!==null||(Pc=Je())),o&4&&xf(e);break;case 22:if(p=n!==null&&n.memoizedState!==null,e.mode&1?(pt=(f=pt)||p,ln(t,e),pt=f):ln(t,e),yn(e),o&8192){if(f=e.memoizedState!==null,(e.stateNode.isHidden=f)&&!p&&e.mode&1)for(ne=e,p=e.child;p!==null;){for(h=ne=p;ne!==null;){switch(m=ne,v=m.child,m.tag){case 0:case 11:case 14:case 15:Ii(4,m,m.return);break;case 1:Sr(m,m.return);var C=m.stateNode;if(typeof C.componentWillUnmount=="function"){o=m,n=m.return;try{t=o,C.props=t.memoizedProps,C.state=t.memoizedState,C.componentWillUnmount()}catch(S){We(o,n,S)}}break;case 5:Sr(m,m.return);break;case 22:if(m.memoizedState!==null){wf(h);continue}}v!==null?(v.return=m,ne=v):wf(h)}p=p.sibling}e:for(p=null,h=e;;){if(h.tag===5){if(p===null){p=h;try{r=h.stateNode,f?(i=r.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(u=h.stateNode,d=h.memoizedProps.style,l=d!=null&&d.hasOwnProperty("display")?d.display:null,u.style.display=Jh("display",l))}catch(S){We(e,e.return,S)}}}else if(h.tag===6){if(p===null)try{h.stateNode.nodeValue=f?"":h.memoizedProps}catch(S){We(e,e.return,S)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;p===h&&(p=null),h=h.return}p===h&&(p=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ln(t,e),yn(e),o&4&&xf(e);break;case 21:break;default:ln(t,e),yn(e)}}function yn(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(wg(n)){var o=n;break e}n=n.return}throw Error(J(160))}switch(o.tag){case 5:var r=o.stateNode;o.flags&32&&(Di(r,""),o.flags&=-33);var i=yf(e);Mu(e,i,r);break;case 3:case 4:var l=o.stateNode.containerInfo,u=yf(e);Au(e,u,l);break;default:throw Error(J(161))}}catch(d){We(e,e.return,d)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function vv(e,t,n){ne=e,Sg(e)}function Sg(e,t,n){for(var o=(e.mode&1)!==0;ne!==null;){var r=ne,i=r.child;if(r.tag===22&&o){var l=r.memoizedState!==null||Es;if(!l){var u=r.alternate,d=u!==null&&u.memoizedState!==null||pt;u=Es;var f=pt;if(Es=l,(pt=d)&&!f)for(ne=r;ne!==null;)l=ne,d=l.child,l.tag===22&&l.memoizedState!==null?bf(r):d!==null?(d.return=l,ne=d):bf(r);for(;i!==null;)ne=i,Sg(i),i=i.sibling;ne=r,Es=u,pt=f}vf(e)}else r.subtreeFlags&8772&&i!==null?(i.return=r,ne=i):vf(e)}}function vf(e){for(;ne!==null;){var t=ne;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:pt||Ll(5,t);break;case 1:var o=t.stateNode;if(t.flags&4&&!pt)if(n===null)o.componentDidMount();else{var r=t.elementType===t.type?n.memoizedProps:an(t.type,n.memoizedProps);o.componentDidUpdate(r,n.memoizedState,o.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&nf(t,i,o);break;case 3:var l=t.updateQueue;if(l!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}nf(t,l,n)}break;case 5:var u=t.stateNode;if(n===null&&t.flags&4){n=u;var d=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&n.focus();break;case"img":d.src&&(n.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var f=t.alternate;if(f!==null){var p=f.memoizedState;if(p!==null){var h=p.dehydrated;h!==null&&Ui(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(J(163))}pt||t.flags&512&&Iu(t)}catch(m){We(t,t.return,m)}}if(t===e){ne=null;break}if(n=t.sibling,n!==null){n.return=t.return,ne=n;break}ne=t.return}}function wf(e){for(;ne!==null;){var t=ne;if(t===e){ne=null;break}var n=t.sibling;if(n!==null){n.return=t.return,ne=n;break}ne=t.return}}function bf(e){for(;ne!==null;){var t=ne;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Ll(4,t)}catch(d){We(t,n,d)}break;case 1:var o=t.stateNode;if(typeof o.componentDidMount=="function"){var r=t.return;try{o.componentDidMount()}catch(d){We(t,r,d)}}var i=t.return;try{Iu(t)}catch(d){We(t,i,d)}break;case 5:var l=t.return;try{Iu(t)}catch(d){We(t,l,d)}}}catch(d){We(t,t.return,d)}if(t===e){ne=null;break}var u=t.sibling;if(u!==null){u.return=t.return,ne=u;break}ne=t.return}}var wv=Math.ceil,hl=$n.ReactCurrentDispatcher,Ac=$n.ReactCurrentOwner,Xt=$n.ReactCurrentBatchConfig,ve=0,rt=null,Ke=null,st=0,Ut=0,Nr=go(0),et=0,Yi=null,Vo=0,jl=0,Mc=0,Ai=null,It=null,Pc=0,$r=1/0,Mn=null,ml=!1,Pu=null,ao=null,Ts=!1,to=null,gl=0,Mi=0,Ru=null,Gs=-1,Bs=0;function Ct(){return ve&6?Je():Gs!==-1?Gs:Gs=Je()}function uo(e){return e.mode&1?ve&2&&st!==0?st&-st:ov.transition!==null?(Bs===0&&(Bs=lm()),Bs):(e=Ee,e!==0||(e=window.event,e=e===void 0?16:hm(e.type)),e):1}function fn(e,t,n,o){if(50<Mi)throw Mi=0,Ru=null,Error(J(185));Qi(e,n,o),(!(ve&2)||e!==rt)&&(e===rt&&(!(ve&2)&&(jl|=n),et===4&&Zn(e,st)),Rt(e,o),n===1&&ve===0&&!(t.mode&1)&&($r=Je()+500,Pl&&yo()))}function Rt(e,t){var n=e.callbackNode;ox(e,t);var o=Zs(e,e===rt?st:0);if(o===0)n!==null&&Id(n),e.callbackNode=null,e.callbackPriority=0;else if(t=o&-o,e.callbackPriority!==t){if(n!=null&&Id(n),t===1)e.tag===0?nv(Cf.bind(null,e)):Rm(Cf.bind(null,e)),Qx(function(){!(ve&6)&&yo()}),n=null;else{switch(am(o)){case 1:n=rc;break;case 4:n=im;break;case 16:n=Qs;break;case 536870912:n=sm;break;default:n=Qs}n=Mg(n,Ng.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Ng(e,t){if(Gs=-1,Bs=0,ve&6)throw Error(J(327));var n=e.callbackNode;if(Mr()&&e.callbackNode!==n)return null;var o=Zs(e,e===rt?st:0);if(o===0)return null;if(o&30||o&e.expiredLanes||t)t=yl(e,o);else{t=o;var r=ve;ve|=2;var i=Tg();(rt!==e||st!==t)&&(Mn=null,$r=Je()+500,Lo(e,t));do try{Sv();break}catch(u){Eg(e,u)}while(!0);yc(),hl.current=i,ve=r,Ke!==null?t=0:(rt=null,st=0,t=et)}if(t!==0){if(t===2&&(r=su(e),r!==0&&(o=r,t=Du(e,r))),t===1)throw n=Yi,Lo(e,0),Zn(e,o),Rt(e,Je()),n;if(t===6)Zn(e,o);else{if(r=e.current.alternate,!(o&30)&&!bv(r)&&(t=yl(e,o),t===2&&(i=su(e),i!==0&&(o=i,t=Du(e,i))),t===1))throw n=Yi,Lo(e,0),Zn(e,o),Rt(e,Je()),n;switch(e.finishedWork=r,e.finishedLanes=o,t){case 0:case 1:throw Error(J(345));case 2:Mo(e,It,Mn);break;case 3:if(Zn(e,o),(o&130023424)===o&&(t=Pc+500-Je(),10<t)){if(Zs(e,0)!==0)break;if(r=e.suspendedLanes,(r&o)!==o){Ct(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=hu(Mo.bind(null,e,It,Mn),t);break}Mo(e,It,Mn);break;case 4:if(Zn(e,o),(o&4194240)===o)break;for(t=e.eventTimes,r=-1;0<o;){var l=31-dn(o);i=1<<l,l=t[l],l>r&&(r=l),o&=~i}if(o=r,o=Je()-o,o=(120>o?120:480>o?480:1080>o?1080:1920>o?1920:3e3>o?3e3:4320>o?4320:1960*wv(o/1960))-o,10<o){e.timeoutHandle=hu(Mo.bind(null,e,It,Mn),o);break}Mo(e,It,Mn);break;case 5:Mo(e,It,Mn);break;default:throw Error(J(329))}}}return Rt(e,Je()),e.callbackNode===n?Ng.bind(null,e):null}function Du(e,t){var n=Ai;return e.current.memoizedState.isDehydrated&&(Lo(e,t).flags|=256),e=yl(e,t),e!==2&&(t=It,It=n,t!==null&&Lu(t)),e}function Lu(e){It===null?It=e:It.push.apply(It,e)}function bv(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var o=0;o<n.length;o++){var r=n[o],i=r.getSnapshot;r=r.value;try{if(!pn(i(),r))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Zn(e,t){for(t&=~Mc,t&=~jl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-dn(t),o=1<<n;e[n]=-1,t&=~o}}function Cf(e){if(ve&6)throw Error(J(327));Mr();var t=Zs(e,0);if(!(t&1))return Rt(e,Je()),null;var n=yl(e,t);if(e.tag!==0&&n===2){var o=su(e);o!==0&&(t=o,n=Du(e,o))}if(n===1)throw n=Yi,Lo(e,0),Zn(e,t),Rt(e,Je()),n;if(n===6)throw Error(J(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Mo(e,It,Mn),Rt(e,Je()),null}function Rc(e,t){var n=ve;ve|=1;try{return e(t)}finally{ve=n,ve===0&&($r=Je()+500,Pl&&yo())}}function $o(e){to!==null&&to.tag===0&&!(ve&6)&&Mr();var t=ve;ve|=1;var n=Xt.transition,o=Ee;try{if(Xt.transition=null,Ee=1,e)return e()}finally{Ee=o,Xt.transition=n,ve=t,!(ve&6)&&yo()}}function Dc(){Ut=Nr.current,Re(Nr)}function Lo(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Xx(n)),Ke!==null)for(n=Ke.return;n!==null;){var o=n;switch(hc(o),o.tag){case 1:o=o.type.childContextTypes,o!=null&&rl();break;case 3:zr(),Re(Mt),Re(mt),Sc();break;case 5:Cc(o);break;case 4:zr();break;case 13:Re(ze);break;case 19:Re(ze);break;case 10:xc(o.type._context);break;case 22:case 23:Dc()}n=n.return}if(rt=e,Ke=e=co(e.current,null),st=Ut=t,et=0,Yi=null,Mc=jl=Vo=0,It=Ai=null,Ro!==null){for(t=0;t<Ro.length;t++)if(n=Ro[t],o=n.interleaved,o!==null){n.interleaved=null;var r=o.next,i=n.pending;if(i!==null){var l=i.next;i.next=r,o.next=l}n.pending=o}Ro=null}return e}function Eg(e,t){do{var n=Ke;try{if(yc(),Vs.current=pl,fl){for(var o=Ve.memoizedState;o!==null;){var r=o.queue;r!==null&&(r.pending=null),o=o.next}fl=!1}if(zo=0,ot=Ze=Ve=null,_i=!1,Oi=0,Ac.current=null,n===null||n.return===null){et=1,Yi=t,Ke=null;break}e:{var i=e,l=n.return,u=n,d=t;if(t=st,u.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var f=d,p=u,h=p.tag;if(!(p.mode&1)&&(h===0||h===11||h===15)){var m=p.alternate;m?(p.updateQueue=m.updateQueue,p.memoizedState=m.memoizedState,p.lanes=m.lanes):(p.updateQueue=null,p.memoizedState=null)}var v=uf(l);if(v!==null){v.flags&=-257,cf(v,l,u,i,t),v.mode&1&&af(i,f,t),t=v,d=f;var C=t.updateQueue;if(C===null){var S=new Set;S.add(d),t.updateQueue=S}else C.add(d);break e}else{if(!(t&1)){af(i,f,t),Lc();break e}d=Error(J(426))}}else if(Ue&&u.mode&1){var D=uf(l);if(D!==null){!(D.flags&65536)&&(D.flags|=256),cf(D,l,u,i,t),mc(Vr(d,u));break e}}i=d=Vr(d,u),et!==4&&(et=2),Ai===null?Ai=[i]:Ai.push(i),i=l;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var b=ag(i,d,t);tf(i,b);break e;case 1:u=d;var x=i.type,g=i.stateNode;if(!(i.flags&128)&&(typeof x.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(ao===null||!ao.has(g)))){i.flags|=65536,t&=-t,i.lanes|=t;var N=ug(i,u,t);tf(i,N);break e}}i=i.return}while(i!==null)}_g(n)}catch(M){t=M,Ke===n&&n!==null&&(Ke=n=n.return);continue}break}while(!0)}function Tg(){var e=hl.current;return hl.current=pl,e===null?pl:e}function Lc(){(et===0||et===3||et===2)&&(et=4),rt===null||!(Vo&268435455)&&!(jl&268435455)||Zn(rt,st)}function yl(e,t){var n=ve;ve|=2;var o=Tg();(rt!==e||st!==t)&&(Mn=null,Lo(e,t));do try{Cv();break}catch(r){Eg(e,r)}while(!0);if(yc(),ve=n,hl.current=o,Ke!==null)throw Error(J(261));return rt=null,st=0,et}function Cv(){for(;Ke!==null;)kg(Ke)}function Sv(){for(;Ke!==null&&!Jy();)kg(Ke)}function kg(e){var t=Ag(e.alternate,e,Ut);e.memoizedProps=e.pendingProps,t===null?_g(e):Ke=t,Ac.current=null}function _g(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=gv(n,t),n!==null){n.flags&=32767,Ke=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{et=6,Ke=null;return}}else if(n=mv(n,t,Ut),n!==null){Ke=n;return}if(t=t.sibling,t!==null){Ke=t;return}Ke=t=e}while(t!==null);et===0&&(et=5)}function Mo(e,t,n){var o=Ee,r=Xt.transition;try{Xt.transition=null,Ee=1,Nv(e,t,n,o)}finally{Xt.transition=r,Ee=o}return null}function Nv(e,t,n,o){do Mr();while(to!==null);if(ve&6)throw Error(J(327));n=e.finishedWork;var r=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(J(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(rx(e,i),e===rt&&(Ke=rt=null,st=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ts||(Ts=!0,Mg(Qs,function(){return Mr(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Xt.transition,Xt.transition=null;var l=Ee;Ee=1;var u=ve;ve|=4,Ac.current=null,xv(e,n),Cg(n,e),Bx(fu),el=!!du,fu=du=null,e.current=n,vv(n),Yy(),ve=u,Ee=l,Xt.transition=i}else e.current=n;if(Ts&&(Ts=!1,to=e,gl=r),i=e.pendingLanes,i===0&&(ao=null),Qy(n.stateNode),Rt(e,Je()),t!==null)for(o=e.onRecoverableError,n=0;n<t.length;n++)r=t[n],o(r.value,{componentStack:r.stack,digest:r.digest});if(ml)throw ml=!1,e=Pu,Pu=null,e;return gl&1&&e.tag!==0&&Mr(),i=e.pendingLanes,i&1?e===Ru?Mi++:(Mi=0,Ru=e):Mi=0,yo(),null}function Mr(){if(to!==null){var e=am(gl),t=Xt.transition,n=Ee;try{if(Xt.transition=null,Ee=16>e?16:e,to===null)var o=!1;else{if(e=to,to=null,gl=0,ve&6)throw Error(J(331));var r=ve;for(ve|=4,ne=e.current;ne!==null;){var i=ne,l=i.child;if(ne.flags&16){var u=i.deletions;if(u!==null){for(var d=0;d<u.length;d++){var f=u[d];for(ne=f;ne!==null;){var p=ne;switch(p.tag){case 0:case 11:case 15:Ii(8,p,i)}var h=p.child;if(h!==null)h.return=p,ne=h;else for(;ne!==null;){p=ne;var m=p.sibling,v=p.return;if(vg(p),p===f){ne=null;break}if(m!==null){m.return=v,ne=m;break}ne=v}}}var C=i.alternate;if(C!==null){var S=C.child;if(S!==null){C.child=null;do{var D=S.sibling;S.sibling=null,S=D}while(S!==null)}}ne=i}}if(i.subtreeFlags&2064&&l!==null)l.return=i,ne=l;else e:for(;ne!==null;){if(i=ne,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Ii(9,i,i.return)}var b=i.sibling;if(b!==null){b.return=i.return,ne=b;break e}ne=i.return}}var x=e.current;for(ne=x;ne!==null;){l=ne;var g=l.child;if(l.subtreeFlags&2064&&g!==null)g.return=l,ne=g;else e:for(l=x;ne!==null;){if(u=ne,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:Ll(9,u)}}catch(M){We(u,u.return,M)}if(u===l){ne=null;break e}var N=u.sibling;if(N!==null){N.return=u.return,ne=N;break e}ne=u.return}}if(ve=r,yo(),wn&&typeof wn.onPostCommitFiberRoot=="function")try{wn.onPostCommitFiberRoot(kl,e)}catch{}o=!0}return o}finally{Ee=n,Xt.transition=t}}return!1}function Sf(e,t,n){t=Vr(n,t),t=ag(e,t,1),e=lo(e,t,1),t=Ct(),e!==null&&(Qi(e,1,t),Rt(e,t))}function We(e,t,n){if(e.tag===3)Sf(e,e,n);else for(;t!==null;){if(t.tag===3){Sf(t,e,n);break}else if(t.tag===1){var o=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(ao===null||!ao.has(o))){e=Vr(n,e),e=ug(t,e,1),t=lo(t,e,1),e=Ct(),t!==null&&(Qi(t,1,e),Rt(t,e));break}}t=t.return}}function Ev(e,t,n){var o=e.pingCache;o!==null&&o.delete(t),t=Ct(),e.pingedLanes|=e.suspendedLanes&n,rt===e&&(st&n)===n&&(et===4||et===3&&(st&130023424)===st&&500>Je()-Pc?Lo(e,0):Mc|=n),Rt(e,t)}function Ig(e,t){t===0&&(e.mode&1?(t=gs,gs<<=1,!(gs&130023424)&&(gs=4194304)):t=1);var n=Ct();e=Un(e,t),e!==null&&(Qi(e,t,n),Rt(e,n))}function Tv(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Ig(e,n)}function kv(e,t){var n=0;switch(e.tag){case 13:var o=e.stateNode,r=e.memoizedState;r!==null&&(n=r.retryLane);break;case 19:o=e.stateNode;break;default:throw Error(J(314))}o!==null&&o.delete(t),Ig(e,n)}var Ag;Ag=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Mt.current)At=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return At=!1,hv(e,t,n);At=!!(e.flags&131072)}else At=!1,Ue&&t.flags&1048576&&Dm(t,ll,t.index);switch(t.lanes=0,t.tag){case 2:var o=t.type;Hs(e,t),e=t.pendingProps;var r=jr(t,mt.current);Ar(t,n),r=Ec(null,t,o,e,r,n);var i=Tc();return t.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Pt(o)?(i=!0,il(t)):i=!1,t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,wc(t),r.updater=Dl,t.stateNode=r,r._reactInternals=t,bu(t,o,e,n),t=Nu(null,t,o,!0,i,n)):(t.tag=0,Ue&&i&&pc(t),bt(null,t,r,n),t=t.child),t;case 16:o=t.elementType;e:{switch(Hs(e,t),e=t.pendingProps,r=o._init,o=r(o._payload),t.type=o,r=t.tag=Iv(o),e=an(o,e),r){case 0:t=Su(null,t,o,e,n);break e;case 1:t=pf(null,t,o,e,n);break e;case 11:t=df(null,t,o,e,n);break e;case 14:t=ff(null,t,o,an(o.type,e),n);break e}throw Error(J(306,o,""))}return t;case 0:return o=t.type,r=t.pendingProps,r=t.elementType===o?r:an(o,r),Su(e,t,o,r,n);case 1:return o=t.type,r=t.pendingProps,r=t.elementType===o?r:an(o,r),pf(e,t,o,r,n);case 3:e:{if(pg(t),e===null)throw Error(J(387));o=t.pendingProps,i=t.memoizedState,r=i.element,Vm(e,t),cl(t,o,null,n);var l=t.memoizedState;if(o=l.element,i.isDehydrated)if(i={element:o,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){r=Vr(Error(J(423)),t),t=hf(e,t,o,n,r);break e}else if(o!==r){r=Vr(Error(J(424)),t),t=hf(e,t,o,n,r);break e}else for(zt=so(t.stateNode.containerInfo.firstChild),Vt=t,Ue=!0,cn=null,n=Um(t,null,o,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Fr(),o===r){t=zn(e,t,n);break e}bt(e,t,o,n)}t=t.child}return t;case 5:return $m(t),e===null&&xu(t),o=t.type,r=t.pendingProps,i=e!==null?e.memoizedProps:null,l=r.children,pu(o,r)?l=null:i!==null&&pu(o,i)&&(t.flags|=32),fg(e,t),bt(e,t,l,n),t.child;case 6:return e===null&&xu(t),null;case 13:return hg(e,t,n);case 4:return bc(t,t.stateNode.containerInfo),o=t.pendingProps,e===null?t.child=Ur(t,null,o,n):bt(e,t,o,n),t.child;case 11:return o=t.type,r=t.pendingProps,r=t.elementType===o?r:an(o,r),df(e,t,o,r,n);case 7:return bt(e,t,t.pendingProps,n),t.child;case 8:return bt(e,t,t.pendingProps.children,n),t.child;case 12:return bt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(o=t.type._context,r=t.pendingProps,i=t.memoizedProps,l=r.value,Ae(al,o._currentValue),o._currentValue=l,i!==null)if(pn(i.value,l)){if(i.children===r.children&&!Mt.current){t=zn(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var u=i.dependencies;if(u!==null){l=i.child;for(var d=u.firstContext;d!==null;){if(d.context===o){if(i.tag===1){d=Ln(-1,n&-n),d.tag=2;var f=i.updateQueue;if(f!==null){f=f.shared;var p=f.pending;p===null?d.next=d:(d.next=p.next,p.next=d),f.pending=d}}i.lanes|=n,d=i.alternate,d!==null&&(d.lanes|=n),vu(i.return,n,t),u.lanes|=n;break}d=d.next}}else if(i.tag===10)l=i.type===t.type?null:i.child;else if(i.tag===18){if(l=i.return,l===null)throw Error(J(341));l.lanes|=n,u=l.alternate,u!==null&&(u.lanes|=n),vu(l,n,t),l=i.sibling}else l=i.child;if(l!==null)l.return=i;else for(l=i;l!==null;){if(l===t){l=null;break}if(i=l.sibling,i!==null){i.return=l.return,l=i;break}l=l.return}i=l}bt(e,t,r.children,n),t=t.child}return t;case 9:return r=t.type,o=t.pendingProps.children,Ar(t,n),r=Zt(r),o=o(r),t.flags|=1,bt(e,t,o,n),t.child;case 14:return o=t.type,r=an(o,t.pendingProps),r=an(o.type,r),ff(e,t,o,r,n);case 15:return cg(e,t,t.type,t.pendingProps,n);case 17:return o=t.type,r=t.pendingProps,r=t.elementType===o?r:an(o,r),Hs(e,t),t.tag=1,Pt(o)?(e=!0,il(t)):e=!1,Ar(t,n),lg(t,o,r),bu(t,o,r,n),Nu(null,t,o,!0,e,n);case 19:return mg(e,t,n);case 22:return dg(e,t,n)}throw Error(J(156,t.tag))};function Mg(e,t){return rm(e,t)}function _v(e,t,n,o){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Kt(e,t,n,o){return new _v(e,t,n,o)}function jc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Iv(e){if(typeof e=="function")return jc(e)?1:0;if(e!=null){if(e=e.$$typeof,e===tc)return 11;if(e===nc)return 14}return 2}function co(e,t){var n=e.alternate;return n===null?(n=Kt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function qs(e,t,n,o,r,i){var l=2;if(o=e,typeof e=="function")jc(e)&&(l=1);else if(typeof e=="string")l=5;else e:switch(e){case hr:return jo(n.children,r,i,t);case ec:l=8,r|=8;break;case qa:return e=Kt(12,n,t,r|2),e.elementType=qa,e.lanes=i,e;case Oa:return e=Kt(13,n,t,r),e.elementType=Oa,e.lanes=i,e;case Wa:return e=Kt(19,n,t,r),e.elementType=Wa,e.lanes=i,e;case $h:return Fl(n,r,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case zh:l=10;break e;case Vh:l=9;break e;case tc:l=11;break e;case nc:l=14;break e;case Kn:l=16,o=null;break e}throw Error(J(130,e==null?e:typeof e,""))}return t=Kt(l,n,t,r),t.elementType=e,t.type=o,t.lanes=i,t}function jo(e,t,n,o){return e=Kt(7,e,o,t),e.lanes=n,e}function Fl(e,t,n,o){return e=Kt(22,e,o,t),e.elementType=$h,e.lanes=n,e.stateNode={isHidden:!1},e}function Ra(e,t,n){return e=Kt(6,e,null,t),e.lanes=n,e}function Da(e,t,n){return t=Kt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Av(e,t,n,o,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ha(0),this.expirationTimes=ha(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ha(0),this.identifierPrefix=o,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Fc(e,t,n,o,r,i,l,u,d){return e=new Av(e,t,n,u,d),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Kt(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:o,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},wc(i),e}function Mv(e,t,n){var o=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:pr,key:o==null?null:""+o,children:e,containerInfo:t,implementation:n}}function Pg(e){if(!e)return ho;e=e._reactInternals;e:{if(Go(e)!==e||e.tag!==1)throw Error(J(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Pt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(J(171))}if(e.tag===1){var n=e.type;if(Pt(n))return Pm(e,n,t)}return t}function Rg(e,t,n,o,r,i,l,u,d){return e=Fc(n,o,!0,e,r,i,l,u,d),e.context=Pg(null),n=e.current,o=Ct(),r=uo(n),i=Ln(o,r),i.callback=t??null,lo(n,i,r),e.current.lanes=r,Qi(e,r,o),Rt(e,o),e}function Ul(e,t,n,o){var r=t.current,i=Ct(),l=uo(r);return n=Pg(n),t.context===null?t.context=n:t.pendingContext=n,t=Ln(i,l),t.payload={element:e},o=o===void 0?null:o,o!==null&&(t.callback=o),e=lo(r,t,l),e!==null&&(fn(e,r,l,i),zs(e,r,l)),l}function xl(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Nf(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Uc(e,t){Nf(e,t),(e=e.alternate)&&Nf(e,t)}function Pv(){return null}var Dg=typeof reportError=="function"?reportError:function(e){console.error(e)};function zc(e){this._internalRoot=e}zl.prototype.render=zc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(J(409));Ul(e,t,null,null)};zl.prototype.unmount=zc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;$o(function(){Ul(null,e,null,null)}),t[Fn]=null}};function zl(e){this._internalRoot=e}zl.prototype.unstable_scheduleHydration=function(e){if(e){var t=dm();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Qn.length&&t!==0&&t<Qn[n].priority;n++);Qn.splice(n,0,e),n===0&&pm(e)}};function Vc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Vl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Ef(){}function Rv(e,t,n,o,r){if(r){if(typeof o=="function"){var i=o;o=function(){var f=xl(l);i.call(f)}}var l=Rg(t,o,e,0,null,!1,!1,"",Ef);return e._reactRootContainer=l,e[Fn]=l.current,$i(e.nodeType===8?e.parentNode:e),$o(),l}for(;r=e.lastChild;)e.removeChild(r);if(typeof o=="function"){var u=o;o=function(){var f=xl(d);u.call(f)}}var d=Fc(e,0,!1,null,null,!1,!1,"",Ef);return e._reactRootContainer=d,e[Fn]=d.current,$i(e.nodeType===8?e.parentNode:e),$o(function(){Ul(t,d,n,o)}),d}function $l(e,t,n,o,r){var i=n._reactRootContainer;if(i){var l=i;if(typeof r=="function"){var u=r;r=function(){var d=xl(l);u.call(d)}}Ul(t,l,e,r)}else l=Rv(n,t,e,r,o);return xl(l)}um=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=bi(t.pendingLanes);n!==0&&(ic(t,n|1),Rt(t,Je()),!(ve&6)&&($r=Je()+500,yo()))}break;case 13:$o(function(){var o=Un(e,1);if(o!==null){var r=Ct();fn(o,e,1,r)}}),Uc(e,1)}};sc=function(e){if(e.tag===13){var t=Un(e,134217728);if(t!==null){var n=Ct();fn(t,e,134217728,n)}Uc(e,134217728)}};cm=function(e){if(e.tag===13){var t=uo(e),n=Un(e,t);if(n!==null){var o=Ct();fn(n,e,t,o)}Uc(e,t)}};dm=function(){return Ee};fm=function(e,t){var n=Ee;try{return Ee=e,t()}finally{Ee=n}};ou=function(e,t,n){switch(t){case"input":if(Ka(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var o=n[t];if(o!==e&&o.form===e.form){var r=Ml(o);if(!r)throw Error(J(90));Gh(o),Ka(o,r)}}}break;case"textarea":qh(e,n);break;case"select":t=n.value,t!=null&&Tr(e,!!n.multiple,t,!1)}};Qh=Rc;Zh=$o;var Dv={usingClientEntryPoint:!1,Events:[es,xr,Ml,Kh,Xh,Rc]},di={findFiberByHostInstance:Po,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Lv={bundleType:di.bundleType,version:di.version,rendererPackageName:di.rendererPackageName,rendererConfig:di.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:$n.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=nm(e),e===null?null:e.stateNode},findFiberByHostInstance:di.findFiberByHostInstance||Pv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ks=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ks.isDisabled&&ks.supportsFiber)try{kl=ks.inject(Lv),wn=ks}catch{}}Ht.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Dv;Ht.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Vc(t))throw Error(J(200));return Mv(e,t,null,n)};Ht.createRoot=function(e,t){if(!Vc(e))throw Error(J(299));var n=!1,o="",r=Dg;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(o=t.identifierPrefix),t.onRecoverableError!==void 0&&(r=t.onRecoverableError)),t=Fc(e,1,!1,null,null,n,!1,o,r),e[Fn]=t.current,$i(e.nodeType===8?e.parentNode:e),new zc(t)};Ht.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(J(188)):(e=Object.keys(e).join(","),Error(J(268,e)));return e=nm(t),e=e===null?null:e.stateNode,e};Ht.flushSync=function(e){return $o(e)};Ht.hydrate=function(e,t,n){if(!Vl(t))throw Error(J(200));return $l(null,e,t,!0,n)};Ht.hydrateRoot=function(e,t,n){if(!Vc(e))throw Error(J(405));var o=n!=null&&n.hydratedSources||null,r=!1,i="",l=Dg;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),t=Rg(t,null,e,1,n??null,r,!1,i,l),e[Fn]=t.current,$i(e),o)for(e=0;e<o.length;e++)n=o[e],r=n._getVersion,r=r(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,r]:t.mutableSourceEagerHydrationData.push(n,r);return new zl(t)};Ht.render=function(e,t,n){if(!Vl(t))throw Error(J(200));return $l(null,e,t,!1,n)};Ht.unmountComponentAtNode=function(e){if(!Vl(e))throw Error(J(40));return e._reactRootContainer?($o(function(){$l(null,null,e,!1,function(){e._reactRootContainer=null,e[Fn]=null})}),!0):!1};Ht.unstable_batchedUpdates=Rc;Ht.unstable_renderSubtreeIntoContainer=function(e,t,n,o){if(!Vl(n))throw Error(J(200));if(e==null||e._reactInternals===void 0)throw Error(J(38));return $l(e,t,n,!1,o)};Ht.version="18.3.1-next-f1338f8080-20240426";function Lg(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Lg)}catch(e){console.error(e)}}Lg(),Lh.exports=Ht;var jv=Lh.exports,Tf=jv;Ga.createRoot=Tf.createRoot,Ga.hydrateRoot=Tf.hydrateRoot;var O=(e=>(e.ROOT="ROOT",e.MAIN="MAIN",e.SUB="SUB",e.NOTE="NOTE",e.MEDIA="MEDIA",e.TASK="TASK",e.CODE="CODE",e.TABLE="TABLE",e))(O||{}),xe=(e=>(e.SELECT="SELECT",e.HAND="HAND",e.CONNECT="CONNECT",e.NOTE="NOTE",e.DRAW="DRAW",e))(xe||{});const _s=[{id:"root-1",type:O.ROOT,label:"Start Here",position:{x:0,y:0},childrenIds:[]}],fi=.1,pi=5,Oe=()=>`node-${Math.random().toString(36).substr(2,9)}`,Ki={default:{id:"default",name:"Singularity Light",bg:"#f0f4f8",pattern:"dots",nodeRoot:"bg-slate-900 text-white border-slate-700",nodeMain:"bg-white text-slate-900 border-gray-300",nodeSub:"bg-white text-slate-900 border-gray-300",textMain:"#1e293b",lineColor:"#cbd5e1",isDark:!1},dark:{id:"dark",name:"Deep Space",bg:"#0f172a",pattern:"grid",nodeRoot:"bg-blue-600 text-white border-blue-400",nodeMain:"bg-slate-800 text-white border-slate-600",nodeSub:"bg-slate-900 text-gray-300 border-slate-700",textMain:"#f8fafc",lineColor:"#334155",isDark:!0},midnight:{id:"midnight",name:"Cyberpunk",bg:"#000000",pattern:"grid",nodeRoot:"bg-yellow-400 text-black border-yellow-600",nodeMain:"bg-black text-pink-500 border-pink-500",nodeSub:"bg-black text-cyan-400 border-cyan-400",textMain:"#ffffff",lineColor:"#333333",isDark:!0},nature:{id:"nature",name:"Forest Focus",bg:"#ecfdf5",pattern:"dots",nodeRoot:"bg-emerald-800 text-white border-emerald-900",nodeMain:"bg-white text-emerald-900 border-emerald-200",nodeSub:"bg-emerald-50 text-emerald-800 border-emerald-100",textMain:"#064e3b",lineColor:"#a7f3d0",isDark:!1}},vl={SWOT:(e,t)=>{const n=Oe(),o=Oe(),r=Oe(),i=Oe(),l=Oe();return[{id:n,type:O.ROOT,label:"SWOT Analysis",position:{x:e,y:t},childrenIds:[o,r,i,l],shape:"circle"},{id:o,type:O.MAIN,label:"Strengths",position:{x:e-300,y:t-150},childrenIds:[],color:"#dcfce7",shape:"rounded"},{id:r,type:O.MAIN,label:"Weaknesses",position:{x:e+300,y:t-150},childrenIds:[],color:"#fee2e2",shape:"rounded"},{id:i,type:O.MAIN,label:"Opportunities",position:{x:e-300,y:t+150},childrenIds:[],color:"#dbeafe",shape:"rounded"},{id:l,type:O.MAIN,label:"Threats",position:{x:e+300,y:t+150},childrenIds:[],color:"#fef9c3",shape:"rounded"}]},ROADMAP:(e,t)=>{const n=Oe(),o=Oe(),r=Oe(),i=Oe(),l=Oe();return[{id:n,type:O.ROOT,label:"Product Roadmap",position:{x:e,y:t},childrenIds:[o,r,i,l],shape:"cloud"},{id:o,type:O.MAIN,label:"Q1: Research",position:{x:e-400,y:t+150},childrenIds:[],color:"#e0e7ff",shape:"parallelogram"},{id:r,type:O.MAIN,label:"Q2: Design",position:{x:e-150,y:t+150},childrenIds:[],color:"#e0e7ff",shape:"parallelogram"},{id:i,type:O.MAIN,label:"Q3: Develop",position:{x:e+150,y:t+150},childrenIds:[],color:"#e0e7ff",shape:"parallelogram"},{id:l,type:O.MAIN,label:"Q4: Launch",position:{x:e+400,y:t+150},childrenIds:[],color:"#dcfce7",shape:"parallelogram"}]},PROJECT_PLAN:(e,t)=>[{id:Oe(),type:O.ROOT,label:"Project X",position:{x:e,y:t},childrenIds:[],shape:"rectangle"}]},La=(e,t,n=200)=>t.map(o=>{if(o.id===e.id)return o;const r=o.position.x-e.position.x,i=o.position.y-e.position.y,l=Math.sqrt(r*r+i*i);if(l<n){let u=Math.atan2(i,r);l===0&&(u=Math.random()*Math.PI*2);const d=n-l+20;return{...o,position:{x:o.position.x+Math.cos(u)*d,y:o.position.y+Math.sin(u)*d}}}return o}),kf=(e,t,n)=>{if(t.length===0)return t;const o=200+t.length*10;let r=0,i=Math.PI*2;if(n){const l=e.position.x-n.position.x,u=e.position.y-n.position.y,d=Math.atan2(u,l);i=Math.min(Math.PI,t.length*Math.PI/6),r=d-i/2}else i=Math.PI*2,r=0;return t.map((l,u)=>{const d=t.length===1?r+i/2:r+u/(n?t.length-1:t.length)*i;return{...l,position:{x:e.position.x+Math.cos(d)*o,y:e.position.y+Math.sin(d)*o}}})},Os=e=>{const t=e.map(u=>({...u})),n=new Map(t.map(u=>[u.id,u])),o=t.find(u=>u.type==="ROOT")||t[0];if(!o)return e;const r=new Map,i=u=>{const d=n.get(u);if(!d)return 0;if(d.childrenIds.length===0)return r.set(u,1),1;const f=d.childrenIds.reduce((h,m)=>h+i(m),0),p=Math.max(1,f);return r.set(u,p),p};i(o.id);const l=(u,d,f,p)=>{const h=n.get(u);if(!h||h.childrenIds.length===0)return;const m=f-d;let v=0;h.childrenIds.forEach(D=>{v+=r.get(D)||1});let C=d;const S=p===0?250:300;h.childrenIds.forEach(D=>{const b=n.get(D);if(!b)return;const g=(r.get(D)||1)/v,N=m*g,M=C+N/2;b.position={x:h.position.x+Math.cos(M)*S,y:h.position.y+Math.sin(M)*S},l(D,C,C+N,p+1),C+=N})};return l(o.id,0,Math.PI*2,0),t},Fv=(e,t,n)=>{const o=[],r=(i,l,u)=>{const d=Oe(),f={id:d,type:u===0?O.ROOT:u===1?O.MAIN:O.SUB,label:i.label,position:{x:t,y:n},parentId:l,childrenIds:[],isAiGenerated:!0};return o.push(f),i.children&&i.children.forEach(p=>{const h=r(p,d,u+1);f.childrenIds.push(h)}),d};return r(e,void 0,0),o},Uv=(e,t)=>{const n=new Map(e.map(r=>[r.id,{...r}])),o=Array.from(n.values()).find(r=>r.type===O.ROOT)||Array.from(n.values())[0];if(!o)return e;if(t==="RADIAL"||t==="FLOWER")return Os(e);if(t==="MINDMAP_LR"||t==="MINDMAP_RL"){const l=t==="MINDMAP_RL"?-1:1,u=f=>{const p=n.get(f);return!p||p.childrenIds.length===0?100:p.childrenIds.reduce((h,m)=>h+u(m),0)},d=(f,p,h)=>{const m=n.get(f);if(!m)return;m.position={x:p,y:h};let v=h-u(f)/2;m.childrenIds.forEach(C=>{const S=u(C);d(C,p+250*l,v+S/2),v+=S})};return d(o.id,o.position.x,o.position.y),Array.from(n.values())}if(t==="FLOWCHART"){const l=new Set,u=(d,f,p)=>{if(l.has(d))return p;l.add(d);const h=n.get(d);if(!h)return p;if(h.position={x:p,y:f*150},h.childrenIds.length>0){const m=(h.childrenIds.length-1)*220;let v=p-m/2;h.childrenIds.forEach((C,S)=>{u(C,f+1,v+S*220)})}return p};return u(o.id,0,o.position.x),Array.from(n.values())}if(t==="TREE"){const l=d=>{const f=n.get(d);return!f||f.childrenIds.length===0?180:f.childrenIds.reduce((p,h)=>p+l(h),0)+(f.childrenIds.length-1)*20},u=(d,f,p)=>{const h=n.get(d);if(!h)return;h.position={x:f,y:p};let m=f-l(d)/2;h.childrenIds.forEach(v=>{const C=l(v);u(v,m+C/2,p+150),m+=C+20})};return u(o.id,o.position.x,o.position.y),Array.from(n.values())}return e};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zv=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Vv=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,o)=>o?o.toUpperCase():n.toLowerCase()),_f=e=>{const t=Vv(e);return t.charAt(0).toUpperCase()+t.slice(1)},jg=(...e)=>e.filter((t,n,o)=>!!t&&t.trim()!==""&&o.indexOf(t)===n).join(" ").trim(),$v=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Hv={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gv=I.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:o,className:r="",children:i,iconNode:l,...u},d)=>I.createElement("svg",{ref:d,...Hv,width:t,height:t,stroke:e,strokeWidth:o?Number(n)*24/Number(t):n,className:jg("lucide",r),...!i&&!$v(u)&&{"aria-hidden":"true"},...u},[...l.map(([f,p])=>I.createElement(f,p)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=(e,t)=>{const n=I.forwardRef(({className:o,...r},i)=>I.createElement(Gv,{ref:i,iconNode:t,className:jg(`lucide-${zv(_f(e))}`,`lucide-${e}`,o),...r}));return n.displayName=_f(e),n};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bv=[["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"M10 16v4a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2v-4",key:"11f1s0"}],["path",{d:"M10 8V4a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v4",key:"t14dx9"}],["path",{d:"M20 16v1a2 2 0 0 1-2 2h-2a2 2 0 0 1-2-2v-1",key:"1w07xs"}],["path",{d:"M14 8V7c0-1.1.9-2 2-2h2a2 2 0 0 1 2 2v1",key:"1apec2"}]],qv=Y("align-center-horizontal",Bv);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ov=[["rect",{width:"14",height:"6",x:"5",y:"16",rx:"2",key:"1i8z2d"}],["rect",{width:"10",height:"6",x:"7",y:"2",rx:"2",key:"ypihtt"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],Wv=Y("align-vertical-justify-center",Ov);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jv=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],Yv=Y("arrow-up-right",Jv);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kv=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]],Xv=Y("brain-circuit",Kv);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qv=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],Zv=Y("camera",Qv);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ew=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],tw=Y("check",ew);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nw=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],ow=Y("chevron-down",nw);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rw=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],iw=Y("chevron-left",rw);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sw=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],lw=Y("chevron-right",sw);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aw=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],uw=Y("chevron-up",aw);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cw=[["path",{d:"m7 6 5 5 5-5",key:"1lc07p"}],["path",{d:"m7 13 5 5 5-5",key:"1d48rs"}]],dw=Y("chevrons-down",cw);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fw=[["path",{d:"m11 17-5-5 5-5",key:"13zhaf"}],["path",{d:"m18 17-5-5 5-5",key:"h8a8et"}]],pw=Y("chevrons-left",fw);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hw=[["path",{d:"m6 17 5-5-5-5",key:"xnjwq"}],["path",{d:"m13 17 5-5-5-5",key:"17xmmf"}]],mw=Y("chevrons-right",hw);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gw=[["path",{d:"m17 11-5-5-5 5",key:"e8nh98"}],["path",{d:"m17 18-5-5-5 5",key:"2avn1x"}]],yw=Y("chevrons-up",gw);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xw=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],vw=Y("circle-question-mark",xw);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ww=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["rect",{x:"9",y:"9",width:"6",height:"6",rx:"1",key:"1ssd4o"}]],bw=Y("circle-stop",ww);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cw=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Sw=Y("circle-x",Cw);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nw=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Ew=Y("circle",Nw);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tw=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]],kw=Y("clipboard",Tw);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _w=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],If=Y("cloud",_w);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iw=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],Aw=Y("code",Iw);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mw=[["path",{d:"M15 6v12a3 3 0 1 0 3-3H6a3 3 0 1 0 3 3V6a3 3 0 1 0-3 3h12a3 3 0 1 0-3-3",key:"11bfej"}]],Pw=Y("command",Mw);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rw=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Af=Y("copy",Rw);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dw=[["path",{d:"m15 10 5 5-5 5",key:"qqa56n"}],["path",{d:"M4 4v7a4 4 0 0 0 4 4h12",key:"z08zvw"}]],Lw=Y("corner-down-right",Dw);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jw=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],Fw=Y("cpu",jw);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uw=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],zw=Y("database",Uw);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vw=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],$w=Y("download",Vw);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hw=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],Gw=Y("ellipsis",Hw);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bw=[["path",{d:"M21 21H8a2 2 0 0 1-1.42-.587l-3.994-3.999a2 2 0 0 1 0-2.828l10-10a2 2 0 0 1 2.829 0l5.999 6a2 2 0 0 1 0 2.828L12.834 21",key:"g5wo59"}],["path",{d:"m5.082 11.09 8.828 8.828",key:"1wx5vj"}]],qw=Y("eraser",Bw);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ow=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Ww=Y("external-link",Ow);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jw=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Yw=Y("file-text",Jw);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kw=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],Xw=Y("globe",Kw);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qw=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],Zw=Y("grid-3x3",Qw);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e1=[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]],t1=Y("hand",e1);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n1=[["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}]],o1=Y("hexagon",n1);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r1=[["path",{d:"m9 11-6 6v3h9l3-3",key:"1a3l36"}],["path",{d:"m22 12-4.6 4.6a2 2 0 0 1-2.8 0l-5.2-5.2a2 2 0 0 1 0-2.8L14 4",key:"14a9rk"}]],i1=Y("highlighter",r1);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s1=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],l1=Y("image",s1);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a1=[["path",{d:"M6 16c5 0 7-8 12-8a4 4 0 0 1 0 8c-5 0-7-8-12-8a4 4 0 1 0 0 8",key:"18ogeb"}]],u1=Y("infinity",a1);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c1=[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]],d1=Y("keyboard",c1);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f1=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],p1=Y("layers",f1);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h1=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],m1=Y("link",h1);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g1=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]],y1=Y("lock-open",g1);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x1=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],v1=Y("lock",x1);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w1=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],b1=Y("map",w1);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C1=[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]],S1=Y("maximize",C1);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N1=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],E1=Y("message-circle",N1);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T1=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],k1=Y("mic",T1);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _1=[["path",{d:"M5 12h14",key:"1ays0h"}]],I1=Y("minus",_1);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A1=[["path",{d:"M15.033 9.44a.647.647 0 0 1 0 1.12l-4.065 2.352a.645.645 0 0 1-.968-.56V7.648a.645.645 0 0 1 .967-.56z",key:"vbtd3f"}],["path",{d:"M12 17v4",key:"1riwvh"}],["path",{d:"M8 21h8",key:"1ev6f3"}],["rect",{x:"2",y:"3",width:"20",height:"14",rx:"2",key:"x3v2xh"}]],Mf=Y("monitor-play",A1);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M1=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],P1=Y("moon",M1);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R1=[["path",{d:"M4.037 4.688a.495.495 0 0 1 .651-.651l16 6.5a.5.5 0 0 1-.063.947l-6.124 1.58a2 2 0 0 0-1.438 1.435l-1.579 6.126a.5.5 0 0 1-.947.063z",key:"edeuup"}]],D1=Y("mouse-pointer-2",R1);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L1=[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"m15 19-3 3-3-3",key:"11eu04"}],["path",{d:"m19 9 3 3-3 3",key:"1mg7y2"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m5 9-3 3 3 3",key:"j64kie"}],["path",{d:"m9 5 3-3 3 3",key:"l8vdw6"}]],j1=Y("move",L1);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F1=[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]],U1=Y("navigation",F1);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z1=[["path",{d:"M2.586 16.726A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2h6.624a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586z",key:"2d38gg"}]],V1=Y("octagon",z1);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $1=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],H1=Y("palette",$1);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G1=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]],B1=Y("panels-top-left",G1);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q1=[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]],O1=Y("paperclip",q1);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W1=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],J1=Y("pen-line",W1);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y1=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],K1=Y("pen",Y1);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X1=[["path",{d:"m12 9-8.414 8.414A2 2 0 0 0 3 18.828v1.344a2 2 0 0 1-.586 1.414A2 2 0 0 1 3.828 21h1.344a2 2 0 0 0 1.414-.586L15 12",key:"1y3wsu"}],["path",{d:"m18 9 .4.4a1 1 0 1 1-3 3l-3.8-3.8a1 1 0 1 1 3-3l.4.4 3.4-3.4a1 1 0 1 1 3 3z",key:"110lr1"}],["path",{d:"m2 22 .414-.414",key:"jhxm08"}]],Q1=Y("pipette",X1);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z1=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],eb=Y("play",Z1);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tb=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],nb=Y("plus",tb);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ob=[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]],rb=Y("redo",ob);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ib=[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]],sb=Y("scissors",ib);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lb=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],ab=Y("search",lb);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ub=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],cb=Y("send",ub);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const db=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],fb=Y("settings",db);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pb=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],hb=Y("share-2",pb);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mb=[["path",{d:"M17.971 4.285A2 2 0 0 1 21 6v12a2 2 0 0 1-3.029 1.715l-9.997-5.998a2 2 0 0 1-.003-3.432z",key:"15892j"}],["path",{d:"M3 20V4",key:"1ptbpl"}]],gb=Y("skip-back",mb);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yb=[["path",{d:"M21 4v16",key:"7j8fe9"}],["path",{d:"M6.029 4.285A2 2 0 0 0 3 6v12a2 2 0 0 0 3.029 1.715l9.997-5.998a2 2 0 0 0 .003-3.432z",key:"zs4d6"}]],xb=Y("skip-forward",yb);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vb=[["path",{d:"M22 2 2 22",key:"y4kqgn"}]],wb=Y("slash",vb);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bb=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Cb=Y("sparkles",bb);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sb=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Nb=Y("square-check-big",Sb);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eb=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],Tb=Y("square",Eb);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kb=[["path",{d:"M21 9a2.4 2.4 0 0 0-.706-1.706l-3.588-3.588A2.4 2.4 0 0 0 15 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2z",key:"1dfntj"}],["path",{d:"M15 3v5a1 1 0 0 0 1 1h5",key:"6s6qgf"}]],_b=Y("sticky-note",kb);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ib=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],Ab=Y("sun",Ib);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mb=[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]],Pb=Y("table",Mb);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rb=[["path",{d:"M12 19h8",key:"baeox8"}],["path",{d:"m4 17 6-6-6-6",key:"1yngyt"}]],Db=Y("terminal",Rb);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lb=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 19H3",key:"z6ezky"}]],jb=Y("text-align-start",Lb);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fb=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Ub=Y("trash-2",Fb);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zb=[["path",{d:"M13.73 4a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"14u9p9"}]],Vb=Y("triangle",zb);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $b=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],Pf=Y("type",$b);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hb=[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]],Gb=Y("undo",Hb);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bb=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],qb=Y("wand-sparkles",Bb);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ob=[["rect",{width:"8",height:"8",x:"3",y:"3",rx:"2",key:"by2w9f"}],["path",{d:"M7 11v4a2 2 0 0 0 2 2h4",key:"xkn7yn"}],["rect",{width:"8",height:"8",x:"13",y:"13",rx:"2",key:"1cgmvn"}]],Wb=Y("workflow",Ob);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jb=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Yb=Y("x",Jb);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kb=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Xb=Y("zap",Kb),w={Brain:Xv,Plus:nb,Minus:I1,Navigation:U1,Zap:Xb,Share:hb,Layout:B1,Settings:fb,Search:ab,More:Gw,Sparkles:Cb,Trash:Ub,Maximize:S1,Command:Pw,Keyboard:d1,Undo:Gb,Redo:rb,Copy:Af,Cut:sb,Paste:kw,Help:vw,Close:Yb,Edit:J1,Grid:Zw,CornerDownRight:Lw,Hand:t1,Select:D1,Connect:m1,Palette:H1,Map:b1,Note:Pf,DeleteLink:Sw,Move:j1,ShapeRect:Tb,ShapeCircle:Ew,ShapeTriangle:Vb,ShapeHexagon:o1,ShapeOctagon:V1,ShapeCloud:If,ShapePara:wb,Cloud:If,Lock:v1,Unlock:y1,Duplicate:Af,Task:Nb,Image:l1,Pen:K1,StickyNote:_b,FileText:Yw,MessageCircle:E1,Play:eb,Infinity:u1,Flowchart:Wb,Arrow:Yv,Present:Mf,MonitorPlay:Mf,Camera:Zv,Eraser:qw,Highlighter:i1,Send:cb,Paperclip:O1,Download:$w,Sun:Ab,Moon:P1,AlignLeft:jb,AlignCenter:qv,AlignMiddle:Wv,Pipette:Q1,Layers:p1,ExternalLink:Ww,Next:xb,Prev:gb,Stop:bw,Code:Aw,Table:Pb,Magic:qb,Terminal:Db,Cpu:Fw,Database:zw,Check:tw,ChevronDown:ow,ChevronRight:lw,ChevronLeft:iw,ChevronUp:uw,Type:Pf,ChevronsDown:dw,ChevronsUp:yw,ChevronsLeft:pw,ChevronsRight:mw,Globe:Xw,Mic:k1},Qb=e=>{if(!e||!e.startsWith("#"))return"#1e293b";let t=e.replace("#","");t.length===3&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]);const n=parseInt(t.substr(0,2),16),o=parseInt(t.substr(2,2),16),r=parseInt(t.substr(4,2),16);return(n*299+o*587+r*114)/1e3>=128?"#1e293b":"#ffffff"},Zb=({node:e,isSelected:t,isHighlighted:n,isDimmed:o,isEditing:r,themeClasses:i,onMouseDown:l,onContextMenu:u,onAddChild:d,onDelete:f,onExpandAI:p,onLabelChange:h,onToggleTask:m,onEditStart:v,onEditEnd:C,connectMode:S,onListChange:D,onDataChange:b,isExpanded:x=!0,onToggleExpand:g})=>{var Xr,Xo,Qo,En,ns,Zo,er,le,Le,ke,ut,tr,Wn,Se,Tn,nr;const N=I.useRef(null),[M,T]=I.useState(e.label),[P,R]=I.useState(!1),[j,U]=I.useState(!1),[q,V]=I.useState(((Xr=e.data)==null?void 0:Xr.description)||""),[oe,ce]=I.useState(!1),[fe,Q]=I.useState(null),[Te,W]=I.useState(""),[re,se]=I.useState(((Xo=e.data)==null?void 0:Xo.codeSnippet)||"// Write code here..."),[ye,be]=I.useState(((Qo=e.data)==null?void 0:Qo.tableRows)||[["Header 1","Header 2"],["Data 1","Data 2"]]),[Ce,De]=I.useState(null),[at,He]=I.useState(""),Et=(En=e.data)==null?void 0:En.isDreaming;I.useEffect(()=>{var $,ee,me;T(e.label),V((($=e.data)==null?void 0:$.description)||""),((ee=e.data)==null?void 0:ee.codeSnippet)!==void 0&&se(e.data.codeSnippet),((me=e.data)==null?void 0:me.tableRows)!==void 0&&be(e.data.tableRows)},[e.label,e.data]),I.useEffect(()=>{r&&N.current&&fe===null&&e.type!==O.CODE&&e.type!==O.TABLE&&(N.current.focus(),N.current.select())},[r,fe,e.type]);const Bt=$=>$.match(/^(http|https):\/\/[^ "]+$/),Jr=$=>{var ee;$.stopPropagation(),(ee=e.data)!=null&&ee.url&&window.open(e.data.url,"_blank")},tn=$=>{se($.target.value)},tt=()=>{b&&b(e.id,{...e.data,codeSnippet:re})},Cn=()=>{var me;tt();const $=((me=e.data)==null?void 0:me.codeLanguage)||"JavaScript";let ee="";if($.toLowerCase()==="javascript"||$.toLowerCase()==="js"){const ie=[],xt={log:(...Qe)=>ie.push(Qe.join(" ")),warn:(...Qe)=>ie.push("WARN: "+Qe.join(" ")),error:(...Qe)=>ie.push("ERROR: "+Qe.join(" "))};try{const os=new Function("console",re)(xt);os!==void 0&&ie.push("Return: "+os),ee=ie.join(`
`)||"Executed successfully (No Output)"}catch(Qe){ee="Error: "+Qe.toString()}}else ee=`[Simulation] Executed ${$} code.
Output generation not supported for this language in browser.`;b&&b(e.id,{...e.data,codeSnippet:re,codeOutput:ee})},vo=($,ee,me)=>{De({r:$,c:ee}),He(me)},nn=()=>{if(!Ce)return;const $=[...ye];$[Ce.r]=[...$[Ce.r]],$[Ce.r][Ce.c]=at,be($),De(null),b&&b(e.id,{...e.data,tableRows:$})},wo=$=>{V($.target.value)},qo=()=>{b&&b(e.id,{...e.data,description:q})},Oo=($,ee)=>{if(ee)return ee.startsWith("#")||ee.startsWith("rgb")?"":ee==="transparent"?"bg-transparent text-slate-900 border-2 border-transparent hover:border-gray-400 font-bold":`${ee} text-white border-white/40 font-bold`;switch($){case O.ROOT:return i.root+" font-black tracking-wide";case O.MAIN:return i.main+" font-extrabold";case O.SUB:return i.sub+" font-bold";case O.TASK:return i.sub+" font-bold flex items-center gap-2 pl-3";case O.NOTE:return"bg-[#fff740] text-slate-900 shadow-[2px_2px_5px_rgba(0,0,0,0.1)] border-none rotate-1 font-display font-bold";case O.CODE:return"bg-[#1e1e1e] text-gray-300 border-gray-600 font-mono text-sm";case O.TABLE:return"bg-white text-gray-800 border-gray-300";default:return i.sub+" font-bold"}},Bn=($,ee,me)=>{const ie="flex flex-col items-center overflow-hidden transition-shadow transition-colors duration-200 relative";if(me||$===O.CODE||$===O.TABLE)return`${ie} rounded-lg`;if(ee==="rectangle")return`${ie} rounded-lg`;if(ee==="circle")return`${ie} rounded-full aspect-square justify-center`;if(ee==="rounded")return`${ie} rounded-[2rem] justify-center`;if(["diamond","triangle","hexagon","octagon","parallelogram","cloud"].includes(ee||""))return`${ie} justify-center`;switch($){case O.ROOT:return`${ie} rounded-[3rem] justify-center`;case O.MAIN:return`${ie} rounded-[2rem] justify-center`;case O.SUB:return`${ie} rounded-[1rem] justify-center`;case O.TASK:return`${ie} rounded-lg justify-center`;case O.NOTE:return`${ie} rounded-none aspect-square justify-start`;default:return`${ie} rounded-xl justify-center`}},qn=($,ee)=>{if(ee)return"none";switch($){case"diamond":return"polygon(50% 0%, 100% 50%, 50% 100%, 0% 50%)";case"triangle":return"polygon(50% 0%, 0% 100%, 100% 100%)";case"hexagon":return"polygon(25% 0%, 75% 0%, 100% 50%, 75% 100%, 25% 100%, 0% 50%)";case"octagon":return"polygon(30% 0%, 70% 0%, 100% 30%, 100% 70%, 70% 100%, 30% 100%, 0% 70%, 0% 30%)";case"parallelogram":return"polygon(25% 0%, 100% 0%, 75% 100%, 0% 100%)";case"cloud":return"url(#shape-cloud)";default:return"none"}},ae=($,ee,me,ie)=>{if(me)return"p-2 min-w-[200px] min-h-[200px]";if(ie)return"min-w-[200px] h-auto";if($===O.CODE)return"min-w-[320px] h-auto p-0 items-stretch text-left";if($===O.TABLE)return"min-w-[300px] h-auto p-0 items-stretch";const Qe=["diamond","triangle","hexagon","octagon","circle"].includes(ee||"")?"p-8 aspect-square":"py-4 px-8";if(ee==="circle")return $===O.ROOT?"w-48 h-48 text-xl":"w-32 h-32 text-sm";switch($){case O.ROOT:return`${Qe} text-2xl min-w-[200px] min-h-[100px] border-[4px]`;case O.MAIN:return`${Qe} text-xl min-w-[160px] min-h-[80px] border-[3px]`;case O.SUB:return`${Qe} text-base min-w-[120px] border-[2px]`;case O.TASK:return"py-3 px-4 text-base min-w-[150px] border-[2px]";case O.NOTE:return"p-5 text-lg font-hand min-w-[200px] min-h-[200px] text-left align-top items-start";default:return"py-3 px-6 text-base border-2"}},Ge=$=>{$.key==="Enter"&&!$.shiftKey&&e.type!==O.NOTE&&e.type!==O.CODE?(h(e.id,M),C()):$.key==="Escape"&&(T(e.label),C()),$.stopPropagation()},Be=()=>{var ee;const $=[...((ee=e.data)==null?void 0:ee.items)||[],"New Item"];D&&D(e.id,$)},gt=$=>{var ee;if(window.confirm("Are you sure you want to delete this item?")){const me=[...((ee=e.data)==null?void 0:ee.items)||[]];me.splice($,1),D&&D(e.id,me)}},mn=($,ee)=>{var ie;const me=[...((ie=e.data)==null?void 0:ie.items)||[]];me[$]=ee,D&&D(e.id,me)},bo=e.type===O.ROOT,Co=e.type===O.TASK,Lt=!!((ns=e.data)!=null&&ns.imageUrl),yt=Bt(e.label),Xe=!!((Zo=e.data)!=null&&Zo.items),Wl=!!((er=e.data)!=null&&er.url),Sn=e.type===O.CODE,So=e.type===O.TABLE,Wo=Oo(e.type,e.color),Jl=Bn(e.type,e.shape,Xe),Yr=ae(e.type,e.shape,Lt||!!yt,Xe),Kr=qn(e.shape,Xe),No=Kr!=="none",Jo=e.type===O.NOTE,On=e.color&&e.color.startsWith("#")?e.color:void 0;let Nn="#1e293b";On?Nn=Qb(On):(bo&&!Wo.includes("text-slate-900")||e.color&&e.color.includes("text-white"))&&(Nn="#ffffff");const Yo=Nn==="#ffffff"?"0 1px 2px rgba(0,0,0,0.8)":"1px 1px 0 #fff, -1px -1px 0 #fff, 1px -1px 0 #fff, -1px 1px 0 #fff",Yl=(le=e.color)!=null&&le.startsWith("#")||(Le=e.color)!=null&&Le.startsWith("rgb")?{backgroundColor:e.color,borderColor:"rgba(0,0,0,0.1)"}:{};let Ko="";No||(n?Ko="shadow-[0_0_25px_rgba(234,179,8,0.8)] ring-4 ring-yellow-400 scale-110 z-50":t?Ko="shadow-xl ring-4 ring-blue-500 scale-105 z-50":Ko=Jo?"shadow-[5px_5px_15px_rgba(0,0,0,0.1)]":"shadow-clay-md hover:shadow-clay-lg hover:-translate-y-0.5");const Eo=($,ee)=>{const me=fe===ee;return s.jsxs("div",{className:"group/item flex items-start gap-2 px-4 py-2 hover:bg-black/5 border-b border-black/5 last:border-0 transition-colors relative",children:[s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-blue-400 shrink-0 mt-2"}),me?s.jsx("textarea",{autoFocus:!0,value:Te,onChange:ie=>{W(ie.target.value),ie.target.style.height="auto",ie.target.style.height=ie.target.scrollHeight+"px"},onFocus:ie=>{ie.target.style.height="auto",ie.target.style.height=ie.target.scrollHeight+"px";const xt=ie.target.value;ie.target.value="",ie.target.value=xt},onBlur:()=>{mn(ee,Te),Q(null)},onKeyDown:ie=>{ie.stopPropagation(),ie.key==="Escape"&&(Q(null),W($))},className:"flex-1 bg-transparent outline-none text-sm min-w-[120px] resize-none overflow-hidden font-sans leading-relaxed w-full",style:{height:"auto"},rows:1,onClick:ie=>ie.stopPropagation()}):s.jsx("span",{className:"flex-1 text-sm whitespace-pre-wrap break-words cursor-text leading-relaxed select-text",onDoubleClick:ie=>{ie.stopPropagation(),Q(ee),W($)},children:$}),s.jsx("button",{onClick:ie=>{ie.stopPropagation(),gt(ee)},className:`p-1.5 text-gray-400 hover:text-red-600 hover:bg-red-100 rounded-md transition-all ${me?"opacity-100":"opacity-0 group-hover/item:opacity-100"}`,title:"Delete Item",children:s.jsx(w.Trash,{size:14})})]},ee)},Kl=()=>{var $;return!oe||!(($=e.data)!=null&&$.presentationItems)||e.data.presentationItems.length===0?null:s.jsxs("div",{className:"absolute top-full mt-4 left-1/2 -translate-x-1/2 w-[320px] bg-white/90 backdrop-blur-xl rounded-2xl shadow-2xl border border-white/50 p-4 z-[100] animate-drawer origin-top",children:[s.jsx("div",{className:"grid grid-cols-3 gap-2",children:e.data.presentationItems.map((ee,me)=>s.jsx("div",{className:"aspect-square rounded-lg overflow-hidden border border-gray-200 bg-gray-50/80 shadow-sm hover:scale-105 transition-transform cursor-pointer hover:shadow-md",children:ee.type==="image"?s.jsx("img",{src:ee.content,className:"w-full h-full object-cover",alt:"Presentation Media",onClick:ie=>{ie.stopPropagation(),window.open(ee.content,"_blank")}}):s.jsx("div",{className:"w-full h-full p-2 text-[10px] overflow-hidden text-gray-700 leading-tight flex items-center justify-center text-center font-medium",children:ee.content})},me))}),s.jsx("div",{className:"absolute -top-1.5 left-1/2 -translate-x-1/2 w-3 h-3 bg-white/90 rotate-45 border-l border-t border-white/50"})]})},Tt=()=>j?s.jsxs("div",{className:"absolute top-full left-1/2 -translate-x-1/2 mt-3 w-64 bg-yellow-50/95 backdrop-blur-sm border border-yellow-200/50 rounded-xl shadow-xl z-[90] animate-slide-up origin-top flex flex-col overflow-hidden",onMouseDown:$=>$.stopPropagation(),children:[s.jsx("div",{className:"absolute -top-1.5 left-1/2 -translate-x-1/2 w-3 h-3 bg-yellow-50 rotate-45 border-l border-t border-yellow-200/50 z-20"}),s.jsx("div",{className:"p-2 border-b border-yellow-200/30 bg-yellow-100/30 flex items-center justify-between",children:s.jsx("span",{className:"text-[10px] font-bold text-yellow-700 uppercase tracking-wider pl-1",children:"Note Details"})}),s.jsx("textarea",{className:"w-full h-32 p-3 bg-transparent text-sm text-gray-700 resize-none outline-none custom-scrollbar",placeholder:"Add a brief description...",value:q,onChange:wo,onBlur:qo})]}):null;return s.jsxs("div",{className:`absolute group ${o?"opacity-10 grayscale pointer-events-none":""}`,"data-node-id":e.id,style:{left:e.position.x,top:e.position.y,transform:"translate(-50%, -50%)",zIndex:t||n?50:10},onMouseDown:$=>{$.button!==2&&($.stopPropagation(),l($,e.id))},onMouseEnter:()=>R(!0),onMouseLeave:()=>R(!1),onDoubleClick:$=>{$.stopPropagation(),!e.locked&&!Xe&&!Sn&&!So&&v(e.id)},onContextMenu:$=>{$.preventDefault(),$.stopPropagation(),u($,e.id)},children:[e.locked&&s.jsx("div",{className:"absolute -top-3 -right-3 z-30 bg-gray-800 text-white p-1.5 rounded-full shadow border border-white/20",children:s.jsx(w.Lock,{size:12})}),((ke=e.data)==null?void 0:ke.presentationItems)&&e.data.presentationItems.length>0&&s.jsx("div",{onClick:$=>{$.stopPropagation(),$.nativeEvent.stopImmediatePropagation(),ce(!oe)},onMouseDown:$=>{$.stopPropagation(),$.nativeEvent.stopImmediatePropagation()},className:`
                absolute -top-2 -right-2 z-40 
                bg-white text-indigo-600 hover:text-white hover:bg-indigo-600
                w-6 h-6 flex items-center justify-center rounded-full shadow-sm border border-indigo-100 
                cursor-pointer transition-all duration-200
            `,title:"Toggle Data Drawer",children:s.jsx(w.Layers,{size:14})}),e.childrenIds.length>0&&s.jsx("div",{onClick:$=>{$.stopPropagation(),$.nativeEvent.stopImmediatePropagation(),g&&g(e.id)},onMouseDown:$=>{$.stopPropagation(),$.nativeEvent.stopImmediatePropagation()},className:`
                absolute top-1/2 -right-6 -translate-y-1/2 z-40 
                bg-white/90 backdrop-blur-md text-gray-500 hover:text-indigo-600 hover:bg-white
                w-5 h-8 flex items-center justify-center rounded-full shadow-sm border border-gray-200 
                cursor-pointer transition-transform duration-200 hover:scale-110 hover:shadow-md
                ${x?"opacity-0 group-hover:opacity-100":"opacity-100"}
            `,title:x?"Collapse Branch":"Expand Branch",children:x?s.jsx(w.ChevronRight,{size:16,strokeWidth:2.5}):s.jsx(w.ChevronLeft,{size:16,strokeWidth:2.5})}),s.jsx("div",{onClick:$=>{$.stopPropagation(),U(!j)},onMouseDown:$=>$.stopPropagation(),className:`
            absolute -bottom-3 left-1/2 -translate-x-1/2 z-40
            w-8 h-4 bg-white/90 border border-gray-200 border-t-0 rounded-b-lg shadow-sm
            flex items-center justify-center cursor-pointer hover:bg-gray-50 hover:text-blue-600 text-gray-400
            transition-all duration-200 opacity-0 group-hover:opacity-100
            ${j?"opacity-100 bg-yellow-50 text-yellow-600 border-yellow-200":""}
        `,title:"Toggle Description",children:j?s.jsx(w.ChevronUp,{size:14}):s.jsx(w.ChevronDown,{size:14})}),Kl(),Tt(),Et&&s.jsxs("div",{className:"absolute -top-10 left-1/2 -translate-x-1/2 z-50 bg-white/90 backdrop-blur text-purple-600 px-3 py-1 rounded-full shadow-lg border border-purple-200 flex items-center gap-2 animate-bounce",children:[s.jsx(w.Sparkles,{size:14,className:"animate-spin"}),s.jsx("span",{className:"text-xs font-bold whitespace-nowrap",children:"Dreaming..."})]}),Wl&&!r&&s.jsx("div",{className:"absolute -top-3 -left-3 z-30 bg-blue-500 text-white p-1.5 rounded-full shadow hover:scale-110 cursor-pointer transition-transform border border-white/20",onClick:Jr,title:`Open: ${(ut=e.data)==null?void 0:ut.url}`,children:s.jsx(w.ExternalLink,{size:12})}),s.jsxs("div",{className:"relative",children:[No&&(t||n)&&s.jsx("div",{className:`absolute inset-0 transition-transform duration-200 ${t?"bg-blue-500":"bg-yellow-400"}`,style:{clipPath:Kr,transform:"scale(1.1)",zIndex:-1,opacity:.8}}),s.jsxs("div",{className:`
              relative cursor-pointer select-none
              ${Wo}
              ${Jl}
              ${Yr}
              ${S?"cursor-crosshair hover:ring-4 hover:ring-green-400":""}
              ${e.locked?"cursor-not-allowed opacity-80":""}
              ${No?"":Ko} 
            `,style:{clipPath:Kr,...Yl},children:[!Jo&&!Lt&&!yt&&!Co&&!Sn&&!So&&s.jsx("div",{className:"absolute inset-0 pointer-events-none z-0 mix-blend-overlay",style:{background:"radial-gradient(circle at 20% 20%, rgba(255,255,255,0.7) 0%, rgba(255,255,255,0) 60%)"}}),Lt&&s.jsxs("div",{className:"relative w-full h-full flex items-center justify-center",children:[s.jsx("img",{src:e.data.imageUrl,alt:"Node Media",className:`w-full h-auto max-h-[300px] object-contain rounded mb-2 pointer-events-none dark:invert-0 relative z-10 ${Et?"opacity-50 blur-sm":""}`}),Et&&s.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-20",children:s.jsx(w.Sparkles,{size:32,className:"text-white animate-spin"})}),!r&&e.label&&Lt&&s.jsx("div",{className:"absolute bottom-2 left-0 right-0 bg-black/60 text-white text-xs px-2 py-1 text-center backdrop-blur-sm mx-2 rounded",children:e.label})]}),Sn&&s.jsxs("div",{className:"w-full h-full flex flex-col",children:[s.jsxs("div",{className:"bg-[#2d2d2d] px-3 py-2 flex items-center justify-between border-b border-gray-700 rounded-t-lg",children:[s.jsxs("div",{className:"flex gap-1.5 items-center",children:[s.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500"}),s.jsx("div",{className:"w-3 h-3 rounded-full bg-yellow-500"}),s.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"}),s.jsx("span",{className:"text-xs text-gray-400 font-mono ml-2",children:((tr=e.data)==null?void 0:tr.codeLanguage)||"JavaScript"})]}),s.jsx("button",{onClick:$=>{$.stopPropagation(),Cn()},className:"text-green-400 hover:text-green-300 p-1 hover:bg-white/10 rounded transition-colors",title:"Run Code",children:s.jsx(w.Play,{size:14,fill:"currentColor"})})]}),s.jsx("textarea",{className:"flex-1 bg-[#1e1e1e] text-gray-300 font-mono text-xs p-3 resize-none outline-none border-0 min-h-[150px] custom-scrollbar leading-normal",value:re,onChange:tn,onMouseDown:$=>$.stopPropagation(),onBlur:tt,spellCheck:!1}),((Wn=e.data)==null?void 0:Wn.codeOutput)&&s.jsx("div",{className:"bg-black p-3 border-t border-gray-700 font-mono text-[10px] text-green-400 max-h-[100px] overflow-y-auto whitespace-pre-wrap",children:e.data.codeOutput})]}),So&&s.jsxs("div",{className:"w-full h-full flex flex-col bg-white rounded-lg overflow-hidden",children:[s.jsxs("div",{className:"bg-gray-100 p-2 border-b border-gray-200 font-bold text-xs text-center text-gray-600 uppercase tracking-wider flex items-center justify-between",children:[s.jsx("span",{className:"pl-2",children:e.label}),s.jsxs("span",{className:"text-[9px] text-gray-400",children:[ye.length,"x",(Se=ye[0])==null?void 0:Se.length]})]}),s.jsx("div",{className:"p-0 overflow-x-auto custom-scrollbar",children:s.jsxs("table",{className:"w-full text-xs text-left border-collapse",children:[s.jsx("thead",{children:s.jsx("tr",{children:ye[0].map(($,ee)=>s.jsx("th",{className:"border border-gray-300 p-0 bg-gray-50 min-w-[60px]",children:(Ce==null?void 0:Ce.r)===0&&(Ce==null?void 0:Ce.c)===ee?s.jsx("input",{autoFocus:!0,value:at,onChange:me=>He(me.target.value),onBlur:nn,onKeyDown:me=>me.key==="Enter"&&nn(),className:"w-full h-full p-1 bg-white outline-none font-bold text-center"}):s.jsx("div",{onDoubleClick:me=>{me.stopPropagation(),vo(0,ee,$)},className:"p-1.5 w-full h-full cursor-text text-center",children:$})},ee))})}),s.jsx("tbody",{children:ye.slice(1).map(($,ee)=>{const me=ee+1;return s.jsx("tr",{children:$.map((ie,xt)=>s.jsx("td",{className:"border border-gray-300 p-0 min-w-[60px]",children:(Ce==null?void 0:Ce.r)===me&&(Ce==null?void 0:Ce.c)===xt?s.jsx("input",{autoFocus:!0,value:at,onChange:Qe=>He(Qe.target.value),onBlur:nn,onKeyDown:Qe=>Qe.key==="Enter"&&nn(),className:"w-full h-full p-1 bg-blue-50 outline-none"}):s.jsx("div",{onDoubleClick:Qe=>{Qe.stopPropagation(),vo(me,xt,ie)},className:"p-1.5 w-full h-full cursor-text min-h-[24px]",children:ie})},xt))},me)})})]})}),s.jsx("div",{className:"bg-gray-50 p-1 text-[9px] text-center text-gray-400 italic border-t border-gray-200",children:"Double click cells to edit"})]}),Xe&&s.jsxs("div",{className:"w-full flex flex-col h-full relative z-10 bg-white/50",children:[s.jsxs("div",{className:"flex items-center gap-2 p-3 border-b border-black/10 bg-black/5",children:[s.jsx(w.Layers,{size:16,className:"opacity-50"}),r&&fe===null?s.jsx("input",{ref:N,value:M,onChange:$=>T($.target.value),onKeyDown:Ge,onBlur:()=>{h(e.id,M),C()},className:"flex-1 bg-transparent font-bold outline-none min-w-0",onClick:$=>$.stopPropagation()}):s.jsx("span",{className:"flex-1 font-bold truncate cursor-text",onDoubleClick:$=>{$.stopPropagation(),v(e.id)},children:e.label}),s.jsx("button",{onClick:$=>{$.stopPropagation(),Be()},className:"p-1 hover:bg-black/10 rounded",children:s.jsx(w.Plus,{size:14})})]}),s.jsx("div",{className:"flex-col pb-2 min-h-[40px]",children:(nr=(Tn=e.data)==null?void 0:Tn.items)==null?void 0:nr.map(($,ee)=>Eo($,ee))})]}),!Xe&&!Sn&&!So&&(r?Jo?s.jsx("textarea",{ref:N,value:M,onChange:$=>T($.target.value),onKeyDown:Ge,onBlur:()=>{h(e.id,M),C()},className:"bg-transparent font-inherit w-full h-full outline-none resize-none relative z-20 text-slate-900 placeholder-gray-600",onClick:$=>$.stopPropagation()}):s.jsx("input",{ref:N,value:M,onChange:$=>T($.target.value),onKeyDown:Ge,onBlur:()=>{h(e.id,M),C()},className:"bg-transparent text-center font-inherit w-full outline-none relative z-20 placeholder-gray-500",style:{color:Nn,textShadow:Yo},onClick:$=>$.stopPropagation()}):!Lt&&!yt&&!Co&&s.jsx("div",{className:`relative z-10 leading-tight max-w-[300px] break-words ${e.shape==="triangle"?"pt-8":""} ${Jo?"whitespace-pre-wrap max-h-[300px] overflow-y-auto custom-scrollbar pr-1":""}`,style:{color:Nn,textShadow:Yo},onWheel:$=>$.stopPropagation(),children:e.label})),Co&&!r&&s.jsxs("div",{className:"flex items-center relative z-10",children:[s.jsx("div",{className:`mr-2 w-5 h-5 rounded border-2 flex items-center justify-center cursor-pointer transition-all ${e.checked?"bg-green-500 border-green-500":"border-gray-400 hover:border-blue-500"}`,onClick:$=>{$.stopPropagation(),m(e.id)},children:e.checked&&s.jsx(w.Task,{size:14,className:"text-white"})}),s.jsx("div",{className:e.checked?"line-through opacity-50":"",style:{color:Nn},children:e.label})]})]})]})]})},Fg=I.memo(Zb);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let eC,tC;function nC(){return{geminiUrl:eC,vertexUrl:tC}}function oC(e,t,n,o){var r,i;if(!(e!=null&&e.baseUrl)){const l=nC();return t?(r=l.vertexUrl)!==null&&r!==void 0?r:n:(i=l.geminiUrl)!==null&&i!==void 0?i:o}return e.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Hn{}function X(e,t){const n=/\{([^}]+)\}/g;return e.replace(n,(o,r)=>{if(Object.prototype.hasOwnProperty.call(t,r)){const i=t[r];return i!=null?String(i):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function c(e,t,n){for(let i=0;i<t.length-1;i++){const l=t[i];if(l.endsWith("[]")){const u=l.slice(0,-2);if(!(u in e))if(Array.isArray(n))e[u]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${l}`);if(Array.isArray(e[u])){const d=e[u];if(Array.isArray(n))for(let f=0;f<d.length;f++){const p=d[f];c(p,t.slice(i+1),n[f])}else for(const f of d)c(f,t.slice(i+1),n)}return}else if(l.endsWith("[0]")){const u=l.slice(0,-3);u in e||(e[u]=[{}]);const d=e[u];c(d[0],t.slice(i+1),n);return}(!e[l]||typeof e[l]!="object")&&(e[l]={}),e=e[l]}const o=t[t.length-1],r=e[o];if(r!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===r)return;if(typeof r=="object"&&typeof n=="object"&&r!==null&&n!==null)Object.assign(r,n);else throw new Error(`Cannot set value for an existing key. Key: ${o}`)}else o==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(e,n):e[o]=n}function a(e,t,n=void 0){try{if(t.length===1&&t[0]==="_self")return e;for(let o=0;o<t.length;o++){if(typeof e!="object"||e===null)return n;const r=t[o];if(r.endsWith("[]")){const i=r.slice(0,-2);if(i in e){const l=e[i];return Array.isArray(l)?l.map(u=>a(u,t.slice(o+1),n)):n}else return n}else e=e[r]}return e}catch(o){if(o instanceof TypeError)return n;throw o}}function rC(e,t){for(const[n,o]of Object.entries(t)){const r=n.split("."),i=o.split("."),l=new Set;let u=-1;for(let d=0;d<r.length;d++)if(r[d]==="*"){u=d;break}if(u!==-1&&i.length>u)for(let d=u;d<i.length;d++){const f=i[d];f!=="*"&&!f.endsWith("[]")&&!f.endsWith("[0]")&&l.add(f)}ju(e,r,i,0,l)}}function ju(e,t,n,o,r){if(o>=t.length||typeof e!="object"||e===null)return;const i=t[o];if(i.endsWith("[]")){const l=i.slice(0,-2),u=e;if(l in u&&Array.isArray(u[l]))for(const d of u[l])ju(d,t,n,o+1,r)}else if(i==="*"){if(typeof e=="object"&&e!==null&&!Array.isArray(e)){const l=e,u=Object.keys(l).filter(f=>!f.startsWith("_")&&!r.has(f)),d={};for(const f of u)d[f]=l[f];for(const[f,p]of Object.entries(d)){const h=[];for(const m of n.slice(o))m==="*"?h.push(f):h.push(m);c(l,h,p)}for(const f of u)delete l[f]}}else{const l=e;i in l&&ju(l[i],t,n,o+1,r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $c(e){if(typeof e!="string")throw new Error("fromImageBytes must be a string");return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function iC(e){const t={},n=a(e,["operationName"]);n!=null&&c(t,["operationName"],n);const o=a(e,["resourceName"]);return o!=null&&c(t,["_url","resourceName"],o),t}function sC(e){const t={},n=a(e,["name"]);n!=null&&c(t,["name"],n);const o=a(e,["metadata"]);o!=null&&c(t,["metadata"],o);const r=a(e,["done"]);r!=null&&c(t,["done"],r);const i=a(e,["error"]);i!=null&&c(t,["error"],i);const l=a(e,["response","generateVideoResponse"]);return l!=null&&c(t,["response"],aC(l)),t}function lC(e){const t={},n=a(e,["name"]);n!=null&&c(t,["name"],n);const o=a(e,["metadata"]);o!=null&&c(t,["metadata"],o);const r=a(e,["done"]);r!=null&&c(t,["done"],r);const i=a(e,["error"]);i!=null&&c(t,["error"],i);const l=a(e,["response"]);return l!=null&&c(t,["response"],uC(l)),t}function aC(e){const t={},n=a(e,["generatedSamples"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(l=>cC(l))),c(t,["generatedVideos"],i)}const o=a(e,["raiMediaFilteredCount"]);o!=null&&c(t,["raiMediaFilteredCount"],o);const r=a(e,["raiMediaFilteredReasons"]);return r!=null&&c(t,["raiMediaFilteredReasons"],r),t}function uC(e){const t={},n=a(e,["videos"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(l=>dC(l))),c(t,["generatedVideos"],i)}const o=a(e,["raiMediaFilteredCount"]);o!=null&&c(t,["raiMediaFilteredCount"],o);const r=a(e,["raiMediaFilteredReasons"]);return r!=null&&c(t,["raiMediaFilteredReasons"],r),t}function cC(e){const t={},n=a(e,["video"]);return n!=null&&c(t,["video"],yC(n)),t}function dC(e){const t={},n=a(e,["_self"]);return n!=null&&c(t,["video"],xC(n)),t}function fC(e){const t={},n=a(e,["operationName"]);return n!=null&&c(t,["_url","operationName"],n),t}function pC(e){const t={},n=a(e,["operationName"]);return n!=null&&c(t,["_url","operationName"],n),t}function hC(e){const t={},n=a(e,["name"]);n!=null&&c(t,["name"],n);const o=a(e,["metadata"]);o!=null&&c(t,["metadata"],o);const r=a(e,["done"]);r!=null&&c(t,["done"],r);const i=a(e,["error"]);i!=null&&c(t,["error"],i);const l=a(e,["response"]);return l!=null&&c(t,["response"],mC(l)),t}function mC(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&c(t,["sdkHttpResponse"],n);const o=a(e,["parent"]);o!=null&&c(t,["parent"],o);const r=a(e,["documentName"]);return r!=null&&c(t,["documentName"],r),t}function Ug(e){const t={},n=a(e,["name"]);n!=null&&c(t,["name"],n);const o=a(e,["metadata"]);o!=null&&c(t,["metadata"],o);const r=a(e,["done"]);r!=null&&c(t,["done"],r);const i=a(e,["error"]);i!=null&&c(t,["error"],i);const l=a(e,["response"]);return l!=null&&c(t,["response"],gC(l)),t}function gC(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&c(t,["sdkHttpResponse"],n);const o=a(e,["parent"]);o!=null&&c(t,["parent"],o);const r=a(e,["documentName"]);return r!=null&&c(t,["documentName"],r),t}function yC(e){const t={},n=a(e,["uri"]);n!=null&&c(t,["uri"],n);const o=a(e,["encodedVideo"]);o!=null&&c(t,["videoBytes"],$c(o));const r=a(e,["encoding"]);return r!=null&&c(t,["mimeType"],r),t}function xC(e){const t={},n=a(e,["gcsUri"]);n!=null&&c(t,["uri"],n);const o=a(e,["bytesBase64Encoded"]);o!=null&&c(t,["videoBytes"],$c(o));const r=a(e,["mimeType"]);return r!=null&&c(t,["mimeType"],r),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Rf;(function(e){e.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",e.OUTCOME_OK="OUTCOME_OK",e.OUTCOME_FAILED="OUTCOME_FAILED",e.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Rf||(Rf={}));var Df;(function(e){e.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",e.PYTHON="PYTHON"})(Df||(Df={}));var Lf;(function(e){e.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",e.SILENT="SILENT",e.WHEN_IDLE="WHEN_IDLE",e.INTERRUPT="INTERRUPT"})(Lf||(Lf={}));var no;(function(e){e.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",e.STRING="STRING",e.NUMBER="NUMBER",e.INTEGER="INTEGER",e.BOOLEAN="BOOLEAN",e.ARRAY="ARRAY",e.OBJECT="OBJECT",e.NULL="NULL"})(no||(no={}));var jf;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(jf||(jf={}));var Ff;(function(e){e.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",e.SIMPLE_SEARCH="SIMPLE_SEARCH",e.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Ff||(Ff={}));var Uf;(function(e){e.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",e.NO_AUTH="NO_AUTH",e.API_KEY_AUTH="API_KEY_AUTH",e.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",e.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",e.OAUTH="OAUTH",e.OIDC_AUTH="OIDC_AUTH"})(Uf||(Uf={}));var zf;(function(e){e.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",e.HTTP_IN_QUERY="HTTP_IN_QUERY",e.HTTP_IN_HEADER="HTTP_IN_HEADER",e.HTTP_IN_PATH="HTTP_IN_PATH",e.HTTP_IN_BODY="HTTP_IN_BODY",e.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(zf||(zf={}));var Vf;(function(e){e.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",e.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",e.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",e.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(Vf||(Vf={}));var $f;(function(e){e.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",e.LOW="LOW",e.HIGH="HIGH"})($f||($f={}));var Hf;(function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",e.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",e.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",e.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",e.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",e.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(Hf||(Hf={}));var Gf;(function(e){e.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",e.SEVERITY="SEVERITY",e.PROBABILITY="PROBABILITY"})(Gf||(Gf={}));var Bf;(function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE",e.OFF="OFF"})(Bf||(Bf={}));var qf;(function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.SPII="SPII",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.IMAGE_SAFETY="IMAGE_SAFETY",e.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",e.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",e.NO_IMAGE="NO_IMAGE"})(qf||(qf={}));var Of;(function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"})(Of||(Of={}));var Wf;(function(e){e.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",e.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",e.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",e.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",e.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Wf||(Wf={}));var Jf;(function(e){e.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",e.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",e.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",e.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",e.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Jf||(Jf={}));var Yf;(function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.IMAGE_SAFETY="IMAGE_SAFETY",e.MODEL_ARMOR="MODEL_ARMOR",e.JAILBREAK="JAILBREAK"})(Yf||(Yf={}));var Kf;(function(e){e.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",e.ON_DEMAND="ON_DEMAND",e.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Kf||(Kf={}));var wl;(function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.AUDIO="AUDIO"})(wl||(wl={}));var Xf;(function(e){e.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",e.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",e.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",e.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Xf||(Xf={}));var Qf;(function(e){e.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",e.TUNING_MODE_FULL="TUNING_MODE_FULL",e.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Qf||(Qf={}));var Zf;(function(e){e.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",e.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",e.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",e.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",e.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",e.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",e.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Zf||(Zf={}));var Fu;(function(e){e.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",e.JOB_STATE_QUEUED="JOB_STATE_QUEUED",e.JOB_STATE_PENDING="JOB_STATE_PENDING",e.JOB_STATE_RUNNING="JOB_STATE_RUNNING",e.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",e.JOB_STATE_FAILED="JOB_STATE_FAILED",e.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",e.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",e.JOB_STATE_PAUSED="JOB_STATE_PAUSED",e.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",e.JOB_STATE_UPDATING="JOB_STATE_UPDATING",e.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Fu||(Fu={}));var ep;(function(e){e.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",e.TUNING_TASK_I2V="TUNING_TASK_I2V",e.TUNING_TASK_T2V="TUNING_TASK_T2V",e.TUNING_TASK_R2V="TUNING_TASK_R2V"})(ep||(ep={}));var tp;(function(e){e.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",e.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",e.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",e.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(tp||(tp={}));var np;(function(e){e.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",e.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",e.BALANCED="BALANCED",e.PRIORITIZE_COST="PRIORITIZE_COST"})(np||(np={}));var op;(function(e){e.UNSPECIFIED="UNSPECIFIED",e.BLOCKING="BLOCKING",e.NON_BLOCKING="NON_BLOCKING"})(op||(op={}));var rp;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(rp||(rp={}));var ip;(function(e){e.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",e.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(ip||(ip={}));var sp;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE",e.VALIDATED="VALIDATED"})(sp||(sp={}));var lp;(function(e){e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"})(lp||(lp={}));var ap;(function(e){e.DONT_ALLOW="DONT_ALLOW",e.ALLOW_ADULT="ALLOW_ADULT",e.ALLOW_ALL="ALLOW_ALL"})(ap||(ap={}));var up;(function(e){e.auto="auto",e.en="en",e.ja="ja",e.ko="ko",e.hi="hi",e.zh="zh",e.pt="pt",e.es="es"})(up||(up={}));var cp;(function(e){e.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",e.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",e.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",e.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",e.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(cp||(cp={}));var dp;(function(e){e.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",e.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",e.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",e.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(dp||(dp={}));var fp;(function(e){e.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",e.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",e.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",e.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(fp||(fp={}));var pp;(function(e){e.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",e.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",e.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",e.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",e.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",e.EDIT_MODE_STYLE="EDIT_MODE_STYLE",e.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",e.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(pp||(pp={}));var hp;(function(e){e.FOREGROUND="FOREGROUND",e.BACKGROUND="BACKGROUND",e.PROMPT="PROMPT",e.SEMANTIC="SEMANTIC",e.INTERACTIVE="INTERACTIVE"})(hp||(hp={}));var mp;(function(e){e.ASSET="ASSET",e.STYLE="STYLE"})(mp||(mp={}));var gp;(function(e){e.INSERT="INSERT",e.REMOVE="REMOVE",e.REMOVE_STATIC="REMOVE_STATIC",e.OUTPAINT="OUTPAINT"})(gp||(gp={}));var yp;(function(e){e.OPTIMIZED="OPTIMIZED",e.LOSSLESS="LOSSLESS"})(yp||(yp={}));var xp;(function(e){e.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",e.PREFERENCE_TUNING="PREFERENCE_TUNING"})(xp||(xp={}));var vp;(function(e){e.STATE_UNSPECIFIED="STATE_UNSPECIFIED",e.STATE_PENDING="STATE_PENDING",e.STATE_ACTIVE="STATE_ACTIVE",e.STATE_FAILED="STATE_FAILED"})(vp||(vp={}));var wp;(function(e){e.STATE_UNSPECIFIED="STATE_UNSPECIFIED",e.PROCESSING="PROCESSING",e.ACTIVE="ACTIVE",e.FAILED="FAILED"})(wp||(wp={}));var bp;(function(e){e.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",e.UPLOADED="UPLOADED",e.GENERATED="GENERATED"})(bp||(bp={}));var Cp;(function(e){e.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.RESPONSE_REJECTED="RESPONSE_REJECTED",e.NEED_MORE_INPUT="NEED_MORE_INPUT"})(Cp||(Cp={}));var Sp;(function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.VIDEO="VIDEO",e.AUDIO="AUDIO",e.DOCUMENT="DOCUMENT"})(Sp||(Sp={}));var Np;(function(e){e.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",e.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",e.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Np||(Np={}));var Ep;(function(e){e.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",e.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",e.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Ep||(Ep={}));var Tp;(function(e){e.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",e.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",e.NO_INTERRUPTION="NO_INTERRUPTION"})(Tp||(Tp={}));var kp;(function(e){e.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",e.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",e.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(kp||(kp={}));var _p;(function(e){e.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",e.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",e.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",e.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",e.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",e.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",e.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",e.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",e.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",e.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",e.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",e.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",e.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(_p||(_p={}));var Ip;(function(e){e.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",e.QUALITY="QUALITY",e.DIVERSITY="DIVERSITY",e.VOCALIZATION="VOCALIZATION"})(Ip||(Ip={}));var Er;(function(e){e.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",e.PLAY="PLAY",e.PAUSE="PAUSE",e.STOP="STOP",e.RESET_CONTEXT="RESET_CONTEXT"})(Er||(Er={}));class Uu{constructor(t){const n={};for(const o of t.headers.entries())n[o[0]]=o[1];this.headers=n,this.responseInternal=t}json(){return this.responseInternal.json()}}class hi{get text(){var t,n,o,r,i,l,u,d;if(((r=(o=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let f="",p=!1;const h=[];for(const m of(d=(u=(l=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||l===void 0?void 0:l.content)===null||u===void 0?void 0:u.parts)!==null&&d!==void 0?d:[]){for(const[v,C]of Object.entries(m))v!=="text"&&v!=="thought"&&v!=="thoughtSignature"&&(C!==null||C!==void 0)&&h.push(v);if(typeof m.text=="string"){if(typeof m.thought=="boolean"&&m.thought)continue;p=!0,f+=m.text}}return h.length>0&&console.warn(`there are non-text parts ${h} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),p?f:void 0}get data(){var t,n,o,r,i,l,u,d;if(((r=(o=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let f="";const p=[];for(const h of(d=(u=(l=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||l===void 0?void 0:l.content)===null||u===void 0?void 0:u.parts)!==null&&d!==void 0?d:[]){for(const[m,v]of Object.entries(h))m!=="inlineData"&&(v!==null||v!==void 0)&&p.push(m);h.inlineData&&typeof h.inlineData.data=="string"&&(f+=atob(h.inlineData.data))}return p.length>0&&console.warn(`there are non-data parts ${p} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),f.length>0?btoa(f):void 0}get functionCalls(){var t,n,o,r,i,l,u,d;if(((r=(o=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const f=(d=(u=(l=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||l===void 0?void 0:l.content)===null||u===void 0?void 0:u.parts)===null||d===void 0?void 0:d.filter(p=>p.functionCall).map(p=>p.functionCall).filter(p=>p!==void 0);if((f==null?void 0:f.length)!==0)return f}get executableCode(){var t,n,o,r,i,l,u,d,f;if(((r=(o=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const p=(d=(u=(l=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||l===void 0?void 0:l.content)===null||u===void 0?void 0:u.parts)===null||d===void 0?void 0:d.filter(h=>h.executableCode).map(h=>h.executableCode).filter(h=>h!==void 0);if((p==null?void 0:p.length)!==0)return(f=p==null?void 0:p[0])===null||f===void 0?void 0:f.code}get codeExecutionResult(){var t,n,o,r,i,l,u,d,f;if(((r=(o=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const p=(d=(u=(l=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||l===void 0?void 0:l.content)===null||u===void 0?void 0:u.parts)===null||d===void 0?void 0:d.filter(h=>h.codeExecutionResult).map(h=>h.codeExecutionResult).filter(h=>h!==void 0);if((p==null?void 0:p.length)!==0)return(f=p==null?void 0:p[0])===null||f===void 0?void 0:f.output}}class Ap{}class Mp{}class vC{}class wC{}class bC{}class CC{}class Pp{}class Rp{}class Dp{}class SC{}class bl{_fromAPIResponse({apiResponse:t,_isVertexAI:n}){const o=new bl;let r;const i=t;return n?r=lC(i):r=sC(i),Object.assign(o,r),o}}class Lp{}class jp{}class Fp{}class NC{}class EC{}class TC{}class Hc{_fromAPIResponse({apiResponse:t,_isVertexAI:n}){const o=new Hc,i=hC(t);return Object.assign(o,i),o}}class kC{}class _C{}class IC{}class Up{}class AC{get text(){var t,n,o;let r="",i=!1;const l=[];for(const u of(o=(n=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&o!==void 0?o:[]){for(const[d,f]of Object.entries(u))d!=="text"&&d!=="thought"&&f!==null&&l.push(d);if(typeof u.text=="string"){if(typeof u.thought=="boolean"&&u.thought)continue;i=!0,r+=u.text}}return l.length>0&&console.warn(`there are non-text parts ${l} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),i?r:void 0}get data(){var t,n,o;let r="";const i=[];for(const l of(o=(n=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&o!==void 0?o:[]){for(const[u,d]of Object.entries(l))u!=="inlineData"&&d!==null&&i.push(u);l.inlineData&&typeof l.inlineData.data=="string"&&(r+=atob(l.inlineData.data))}return i.length>0&&console.warn(`there are non-data parts ${i} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class MC{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Gc{_fromAPIResponse({apiResponse:t,_isVertexAI:n}){const o=new Gc,i=Ug(t);return Object.assign(o,i),o}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function we(e,t){if(!t||typeof t!="string")throw new Error("model is required and must be a string");if(t.includes("..")||t.includes("?")||t.includes("&"))throw new Error("invalid model parameter");if(e.isVertexAI()){if(t.startsWith("publishers/")||t.startsWith("projects/")||t.startsWith("models/"))return t;if(t.indexOf("/")>=0){const n=t.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${t}`}else return t.startsWith("models/")||t.startsWith("tunedModels/")?t:`models/${t}`}function zg(e,t){const n=we(e,t);return n?n.startsWith("publishers/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/${n}`:n.startsWith("models/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/publishers/google/${n}`:n:""}function Vg(e){return Array.isArray(e)?e.map(t=>Cl(t)):[Cl(e)]}function Cl(e){if(typeof e=="object"&&e!==null)return e;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof e}`)}function $g(e){const t=Cl(e);if(t.mimeType&&t.mimeType.startsWith("image/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function Hg(e){const t=Cl(e);if(t.mimeType&&t.mimeType.startsWith("audio/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function zp(e){if(e==null)throw new Error("PartUnion is required");if(typeof e=="object")return e;if(typeof e=="string")return{text:e};throw new Error(`Unsupported part type: ${typeof e}`)}function Gg(e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("PartListUnion is required");return Array.isArray(e)?e.map(t=>zp(t)):[zp(e)]}function zu(e){return e!=null&&typeof e=="object"&&"parts"in e&&Array.isArray(e.parts)}function Vp(e){return e!=null&&typeof e=="object"&&"functionCall"in e}function $p(e){return e!=null&&typeof e=="object"&&"functionResponse"in e}function ht(e){if(e==null)throw new Error("ContentUnion is required");return zu(e)?e:{role:"user",parts:Gg(e)}}function Bc(e,t){if(!t)return[];if(e.isVertexAI()&&Array.isArray(t))return t.flatMap(n=>{const o=ht(n);return o.parts&&o.parts.length>0&&o.parts[0].text!==void 0?[o.parts[0].text]:[]});if(e.isVertexAI()){const n=ht(t);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(t)?t.map(n=>ht(n)):[ht(t)]}function Qt(e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("contents are required");if(!Array.isArray(e)){if(Vp(e)||$p(e))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[ht(e)]}const t=[],n=[],o=zu(e[0]);for(const r of e){const i=zu(r);if(i!=o)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(i)t.push(r);else{if(Vp(r)||$p(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(r)}}return o||t.push({role:"user",parts:Gg(n)}),t}function PC(e,t){e.includes("null")&&(t.nullable=!0);const n=e.filter(o=>o!=="null");if(n.length===1)t.type=Object.values(no).includes(n[0].toUpperCase())?n[0].toUpperCase():no.TYPE_UNSPECIFIED;else{t.anyOf=[];for(const o of n)t.anyOf.push({type:Object.values(no).includes(o.toUpperCase())?o.toUpperCase():no.TYPE_UNSPECIFIED})}}function Pr(e){const t={},n=["items"],o=["anyOf"],r=["properties"];if(e.type&&e.anyOf)throw new Error("type and anyOf cannot be both populated.");const i=e.anyOf;i!=null&&i.length==2&&(i[0].type==="null"?(t.nullable=!0,e=i[1]):i[1].type==="null"&&(t.nullable=!0,e=i[0])),e.type instanceof Array&&PC(e.type,t);for(const[l,u]of Object.entries(e))if(u!=null)if(l=="type"){if(u==="null")throw new Error("type: null can not be the only possible type for the field.");if(u instanceof Array)continue;t.type=Object.values(no).includes(u.toUpperCase())?u.toUpperCase():no.TYPE_UNSPECIFIED}else if(n.includes(l))t[l]=Pr(u);else if(o.includes(l)){const d=[];for(const f of u){if(f.type=="null"){t.nullable=!0;continue}d.push(Pr(f))}t[l]=d}else if(r.includes(l)){const d={};for(const[f,p]of Object.entries(u))d[f]=Pr(p);t[l]=d}else{if(l==="additionalProperties")continue;t[l]=u}return t}function qc(e){return Pr(e)}function Oc(e){if(typeof e=="object")return e;if(typeof e=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:e}}};throw new Error(`Unsupported speechConfig type: ${typeof e}`)}function Wc(e){if("multiSpeakerVoiceConfig"in e)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return e}function qr(e){if(e.functionDeclarations)for(const t of e.functionDeclarations)t.parameters&&(Object.keys(t.parameters).includes("$schema")?t.parametersJsonSchema||(t.parametersJsonSchema=t.parameters,delete t.parameters):t.parameters=Pr(t.parameters)),t.response&&(Object.keys(t.response).includes("$schema")?t.responseJsonSchema||(t.responseJsonSchema=t.response,delete t.response):t.response=Pr(t.response));return e}function Or(e){if(e==null)throw new Error("tools is required");if(!Array.isArray(e))throw new Error("tools is required and must be an array of Tools");const t=[];for(const n of e)t.push(n);return t}function RC(e,t,n,o=1){const r=!t.startsWith(`${n}/`)&&t.split("/").length===o;return e.isVertexAI()?t.startsWith("projects/")?t:t.startsWith("locations/")?`projects/${e.getProject()}/${t}`:t.startsWith(`${n}/`)?`projects/${e.getProject()}/locations/${e.getLocation()}/${t}`:r?`projects/${e.getProject()}/locations/${e.getLocation()}/${n}/${t}`:t:r?`${n}/${t}`:t}function Gn(e,t){if(typeof t!="string")throw new Error("name must be a string");return RC(e,t,"cachedContents")}function Bg(e){switch(e){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return e}}function xo(e){return $c(e)}function DC(e){return e!=null&&typeof e=="object"&&"name"in e}function LC(e){return e!=null&&typeof e=="object"&&"video"in e}function jC(e){return e!=null&&typeof e=="object"&&"uri"in e}function qg(e){var t;let n;if(DC(e)&&(n=e.name),!(jC(e)&&(n=e.uri,n===void 0))&&!(LC(e)&&(n=(t=e.video)===null||t===void 0?void 0:t.uri,n===void 0))){if(typeof e=="string"&&(n=e),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const r=n.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${n}`);n=r[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function Og(e,t){let n;return e.isVertexAI()?n=t?"publishers/google/models":"models":n=t?"models":"tunedModels",n}function Wg(e){for(const t of["models","tunedModels","publisherModels"])if(FC(e,t))return e[t];return[]}function FC(e,t){return e!==null&&typeof e=="object"&&t in e}function UC(e,t={}){const n=e,o={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(o.responseJsonSchema=n.outputSchema),t.behavior&&(o.behavior=t.behavior),{functionDeclarations:[o]}}function zC(e,t={}){const n=[],o=new Set;for(const r of e){const i=r.name;if(o.has(i))throw new Error(`Duplicate function name ${i} found in MCP tools. Please ensure function names are unique.`);o.add(i);const l=UC(r,t);l.functionDeclarations&&n.push(...l.functionDeclarations)}return{functionDeclarations:n}}function Jg(e,t){let n;if(typeof t=="string")if(e.isVertexAI())if(t.startsWith("gs://"))n={format:"jsonl",gcsUri:[t]};else if(t.startsWith("bq://"))n={format:"bigquery",bigqueryUri:t};else throw new Error(`Unsupported string source for Vertex AI: ${t}`);else if(t.startsWith("files/"))n={fileName:t};else throw new Error(`Unsupported string source for Gemini API: ${t}`);else if(Array.isArray(t)){if(e.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:t}}else n=t;const o=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,r=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(e.isVertexAI()){if(r>0||o!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(o>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function VC(e){if(typeof e!="string")return e;const t=e;if(t.startsWith("gs://"))return{format:"jsonl",gcsUri:t};if(t.startsWith("bq://"))return{format:"bigquery",bigqueryUri:t};throw new Error(`Unsupported destination: ${t}`)}function Yg(e){if(typeof e!="object"||e===null)return{};const t=e,n=t.inlinedResponses;if(typeof n!="object"||n===null)return e;const r=n.inlinedResponses;if(!Array.isArray(r)||r.length===0)return e;let i=!1;for(const l of r){if(typeof l!="object"||l===null)continue;const d=l.response;if(typeof d!="object"||d===null)continue;if(d.embedding!==void 0){i=!0;break}}return i&&(t.inlinedEmbedContentResponses=t.inlinedResponses,delete t.inlinedResponses),e}function Wr(e,t){const n=t;if(!e.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function Kg(e){const t=e;return t==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":t==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":t==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":t==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":t==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":t==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":t==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $C(e){const t={},n=a(e,["responsesFile"]);n!=null&&c(t,["fileName"],n);const o=a(e,["inlinedResponses","inlinedResponses"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(l=>bS(l))),c(t,["inlinedResponses"],i)}const r=a(e,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(l=>l)),c(t,["inlinedEmbedContentResponses"],i)}return t}function HC(e){const t={},n=a(e,["predictionsFormat"]);n!=null&&c(t,["format"],n);const o=a(e,["gcsDestination","outputUriPrefix"]);o!=null&&c(t,["gcsUri"],o);const r=a(e,["bigqueryDestination","outputUri"]);return r!=null&&c(t,["bigqueryUri"],r),t}function GC(e){const t={},n=a(e,["format"]);n!=null&&c(t,["predictionsFormat"],n);const o=a(e,["gcsUri"]);o!=null&&c(t,["gcsDestination","outputUriPrefix"],o);const r=a(e,["bigqueryUri"]);if(r!=null&&c(t,["bigqueryDestination","outputUri"],r),a(e,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(a(e,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(a(e,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return t}function Ws(e){const t={},n=a(e,["name"]);n!=null&&c(t,["name"],n);const o=a(e,["metadata","displayName"]);o!=null&&c(t,["displayName"],o);const r=a(e,["metadata","state"]);r!=null&&c(t,["state"],Kg(r));const i=a(e,["metadata","createTime"]);i!=null&&c(t,["createTime"],i);const l=a(e,["metadata","endTime"]);l!=null&&c(t,["endTime"],l);const u=a(e,["metadata","updateTime"]);u!=null&&c(t,["updateTime"],u);const d=a(e,["metadata","model"]);d!=null&&c(t,["model"],d);const f=a(e,["metadata","output"]);return f!=null&&c(t,["dest"],$C(Yg(f))),t}function Vu(e){const t={},n=a(e,["name"]);n!=null&&c(t,["name"],n);const o=a(e,["displayName"]);o!=null&&c(t,["displayName"],o);const r=a(e,["state"]);r!=null&&c(t,["state"],Kg(r));const i=a(e,["error"]);i!=null&&c(t,["error"],i);const l=a(e,["createTime"]);l!=null&&c(t,["createTime"],l);const u=a(e,["startTime"]);u!=null&&c(t,["startTime"],u);const d=a(e,["endTime"]);d!=null&&c(t,["endTime"],d);const f=a(e,["updateTime"]);f!=null&&c(t,["updateTime"],f);const p=a(e,["model"]);p!=null&&c(t,["model"],p);const h=a(e,["inputConfig"]);h!=null&&c(t,["src"],BC(h));const m=a(e,["outputConfig"]);m!=null&&c(t,["dest"],HC(Yg(m)));const v=a(e,["completionStats"]);return v!=null&&c(t,["completionStats"],v),t}function BC(e){const t={},n=a(e,["instancesFormat"]);n!=null&&c(t,["format"],n);const o=a(e,["gcsSource","uris"]);o!=null&&c(t,["gcsUri"],o);const r=a(e,["bigquerySource","inputUri"]);return r!=null&&c(t,["bigqueryUri"],r),t}function qC(e,t){const n={};if(a(t,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(a(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(a(t,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const o=a(t,["fileName"]);o!=null&&c(n,["fileName"],o);const r=a(t,["inlinedRequests"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(l=>wS(e,l))),c(n,["requests","requests"],i)}return n}function OC(e){const t={},n=a(e,["format"]);n!=null&&c(t,["instancesFormat"],n);const o=a(e,["gcsUri"]);o!=null&&c(t,["gcsSource","uris"],o);const r=a(e,["bigqueryUri"]);if(r!=null&&c(t,["bigquerySource","inputUri"],r),a(e,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(a(e,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return t}function WC(e){const t={},n=a(e,["data"]);if(n!=null&&c(t,["data"],n),a(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=a(e,["mimeType"]);return o!=null&&c(t,["mimeType"],o),t}function JC(e,t){const n={},o=a(t,["name"]);return o!=null&&c(n,["_url","name"],Wr(e,o)),n}function YC(e,t){const n={},o=a(t,["name"]);return o!=null&&c(n,["_url","name"],Wr(e,o)),n}function KC(e){const t={},n=a(e,["content"]);n!=null&&c(t,["content"],n);const o=a(e,["citationMetadata"]);o!=null&&c(t,["citationMetadata"],XC(o));const r=a(e,["tokenCount"]);r!=null&&c(t,["tokenCount"],r);const i=a(e,["finishReason"]);i!=null&&c(t,["finishReason"],i);const l=a(e,["avgLogprobs"]);l!=null&&c(t,["avgLogprobs"],l);const u=a(e,["groundingMetadata"]);u!=null&&c(t,["groundingMetadata"],u);const d=a(e,["index"]);d!=null&&c(t,["index"],d);const f=a(e,["logprobsResult"]);f!=null&&c(t,["logprobsResult"],f);const p=a(e,["safetyRatings"]);if(p!=null){let m=p;Array.isArray(m)&&(m=m.map(v=>v)),c(t,["safetyRatings"],m)}const h=a(e,["urlContextMetadata"]);return h!=null&&c(t,["urlContextMetadata"],h),t}function XC(e){const t={},n=a(e,["citationSources"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>r)),c(t,["citations"],o)}return t}function Xg(e){const t={},n=a(e,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>_S(i))),c(t,["parts"],r)}const o=a(e,["role"]);return o!=null&&c(t,["role"],o),t}function QC(e,t){const n={},o=a(e,["displayName"]);if(t!==void 0&&o!=null&&c(t,["batch","displayName"],o),a(e,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function ZC(e,t){const n={},o=a(e,["displayName"]);t!==void 0&&o!=null&&c(t,["displayName"],o);const r=a(e,["dest"]);return t!==void 0&&r!=null&&c(t,["outputConfig"],GC(VC(r))),n}function Hp(e,t){const n={},o=a(t,["model"]);o!=null&&c(n,["_url","model"],we(e,o));const r=a(t,["src"]);r!=null&&c(n,["batch","inputConfig"],qC(e,Jg(e,r)));const i=a(t,["config"]);return i!=null&&QC(i,n),n}function eS(e,t){const n={},o=a(t,["model"]);o!=null&&c(n,["model"],we(e,o));const r=a(t,["src"]);r!=null&&c(n,["inputConfig"],OC(Jg(e,r)));const i=a(t,["config"]);return i!=null&&ZC(i,n),n}function tS(e,t){const n={},o=a(e,["displayName"]);return t!==void 0&&o!=null&&c(t,["batch","displayName"],o),n}function nS(e,t){const n={},o=a(t,["model"]);o!=null&&c(n,["_url","model"],we(e,o));const r=a(t,["src"]);r!=null&&c(n,["batch","inputConfig"],uS(e,r));const i=a(t,["config"]);return i!=null&&tS(i,n),n}function oS(e,t){const n={},o=a(t,["name"]);return o!=null&&c(n,["_url","name"],Wr(e,o)),n}function rS(e,t){const n={},o=a(t,["name"]);return o!=null&&c(n,["_url","name"],Wr(e,o)),n}function iS(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&c(t,["sdkHttpResponse"],n);const o=a(e,["name"]);o!=null&&c(t,["name"],o);const r=a(e,["done"]);r!=null&&c(t,["done"],r);const i=a(e,["error"]);return i!=null&&c(t,["error"],i),t}function sS(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&c(t,["sdkHttpResponse"],n);const o=a(e,["name"]);o!=null&&c(t,["name"],o);const r=a(e,["done"]);r!=null&&c(t,["done"],r);const i=a(e,["error"]);return i!=null&&c(t,["error"],i),t}function lS(e,t){const n={},o=a(t,["contents"]);if(o!=null){let i=Bc(e,o);Array.isArray(i)&&(i=i.map(l=>l)),c(n,["requests[]","request","content"],i)}const r=a(t,["config"]);return r!=null&&(c(n,["_self"],aS(r,n)),rC(n,{"requests[].*":"requests[].request.*"})),n}function aS(e,t){const n={},o=a(e,["taskType"]);t!==void 0&&o!=null&&c(t,["requests[]","taskType"],o);const r=a(e,["title"]);t!==void 0&&r!=null&&c(t,["requests[]","title"],r);const i=a(e,["outputDimensionality"]);if(t!==void 0&&i!=null&&c(t,["requests[]","outputDimensionality"],i),a(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(a(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function uS(e,t){const n={},o=a(t,["fileName"]);o!=null&&c(n,["file_name"],o);const r=a(t,["inlinedRequests"]);return r!=null&&c(n,["requests"],lS(e,r)),n}function cS(e){const t={};if(a(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(e,["fileUri"]);n!=null&&c(t,["fileUri"],n);const o=a(e,["mimeType"]);return o!=null&&c(t,["mimeType"],o),t}function dS(e){const t={},n=a(e,["id"]);n!=null&&c(t,["id"],n);const o=a(e,["args"]);o!=null&&c(t,["args"],o);const r=a(e,["name"]);if(r!=null&&c(t,["name"],r),a(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function fS(e){const t={},n=a(e,["mode"]);n!=null&&c(t,["mode"],n);const o=a(e,["allowedFunctionNames"]);if(o!=null&&c(t,["allowedFunctionNames"],o),a(e,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function pS(e,t,n){const o={},r=a(t,["systemInstruction"]);n!==void 0&&r!=null&&c(n,["systemInstruction"],Xg(ht(r)));const i=a(t,["temperature"]);i!=null&&c(o,["temperature"],i);const l=a(t,["topP"]);l!=null&&c(o,["topP"],l);const u=a(t,["topK"]);u!=null&&c(o,["topK"],u);const d=a(t,["candidateCount"]);d!=null&&c(o,["candidateCount"],d);const f=a(t,["maxOutputTokens"]);f!=null&&c(o,["maxOutputTokens"],f);const p=a(t,["stopSequences"]);p!=null&&c(o,["stopSequences"],p);const h=a(t,["responseLogprobs"]);h!=null&&c(o,["responseLogprobs"],h);const m=a(t,["logprobs"]);m!=null&&c(o,["logprobs"],m);const v=a(t,["presencePenalty"]);v!=null&&c(o,["presencePenalty"],v);const C=a(t,["frequencyPenalty"]);C!=null&&c(o,["frequencyPenalty"],C);const S=a(t,["seed"]);S!=null&&c(o,["seed"],S);const D=a(t,["responseMimeType"]);D!=null&&c(o,["responseMimeType"],D);const b=a(t,["responseSchema"]);b!=null&&c(o,["responseSchema"],qc(b));const x=a(t,["responseJsonSchema"]);if(x!=null&&c(o,["responseJsonSchema"],x),a(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(a(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const g=a(t,["safetySettings"]);if(n!==void 0&&g!=null){let V=g;Array.isArray(V)&&(V=V.map(oe=>IS(oe))),c(n,["safetySettings"],V)}const N=a(t,["tools"]);if(n!==void 0&&N!=null){let V=Or(N);Array.isArray(V)&&(V=V.map(oe=>MS(qr(oe)))),c(n,["tools"],V)}const M=a(t,["toolConfig"]);if(n!==void 0&&M!=null&&c(n,["toolConfig"],AS(M)),a(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const T=a(t,["cachedContent"]);n!==void 0&&T!=null&&c(n,["cachedContent"],Gn(e,T));const P=a(t,["responseModalities"]);P!=null&&c(o,["responseModalities"],P);const R=a(t,["mediaResolution"]);R!=null&&c(o,["mediaResolution"],R);const j=a(t,["speechConfig"]);if(j!=null&&c(o,["speechConfig"],Oc(j)),a(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const U=a(t,["thinkingConfig"]);U!=null&&c(o,["thinkingConfig"],U);const q=a(t,["imageConfig"]);return q!=null&&c(o,["imageConfig"],vS(q)),o}function hS(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&c(t,["sdkHttpResponse"],n);const o=a(e,["candidates"]);if(o!=null){let d=o;Array.isArray(d)&&(d=d.map(f=>KC(f))),c(t,["candidates"],d)}const r=a(e,["modelVersion"]);r!=null&&c(t,["modelVersion"],r);const i=a(e,["promptFeedback"]);i!=null&&c(t,["promptFeedback"],i);const l=a(e,["responseId"]);l!=null&&c(t,["responseId"],l);const u=a(e,["usageMetadata"]);return u!=null&&c(t,["usageMetadata"],u),t}function mS(e,t){const n={},o=a(t,["name"]);return o!=null&&c(n,["_url","name"],Wr(e,o)),n}function gS(e,t){const n={},o=a(t,["name"]);return o!=null&&c(n,["_url","name"],Wr(e,o)),n}function yS(e){const t={};if(a(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=a(e,["enableWidget"]);return n!=null&&c(t,["enableWidget"],n),t}function xS(e){const t={};if(a(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=a(e,["timeRangeFilter"]);return n!=null&&c(t,["timeRangeFilter"],n),t}function vS(e){const t={},n=a(e,["aspectRatio"]);n!=null&&c(t,["aspectRatio"],n);const o=a(e,["imageSize"]);if(o!=null&&c(t,["imageSize"],o),a(e,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(a(e,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function wS(e,t){const n={},o=a(t,["model"]);o!=null&&c(n,["request","model"],we(e,o));const r=a(t,["contents"]);if(r!=null){let u=Qt(r);Array.isArray(u)&&(u=u.map(d=>Xg(d))),c(n,["request","contents"],u)}const i=a(t,["metadata"]);i!=null&&c(n,["metadata"],i);const l=a(t,["config"]);return l!=null&&c(n,["request","generationConfig"],pS(e,l,a(n,["request"],{}))),n}function bS(e){const t={},n=a(e,["response"]);n!=null&&c(t,["response"],hS(n));const o=a(e,["error"]);return o!=null&&c(t,["error"],o),t}function CS(e,t){const n={},o=a(e,["pageSize"]);t!==void 0&&o!=null&&c(t,["_query","pageSize"],o);const r=a(e,["pageToken"]);if(t!==void 0&&r!=null&&c(t,["_query","pageToken"],r),a(e,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function SS(e,t){const n={},o=a(e,["pageSize"]);t!==void 0&&o!=null&&c(t,["_query","pageSize"],o);const r=a(e,["pageToken"]);t!==void 0&&r!=null&&c(t,["_query","pageToken"],r);const i=a(e,["filter"]);return t!==void 0&&i!=null&&c(t,["_query","filter"],i),n}function NS(e){const t={},n=a(e,["config"]);return n!=null&&CS(n,t),t}function ES(e){const t={},n=a(e,["config"]);return n!=null&&SS(n,t),t}function TS(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&c(t,["sdkHttpResponse"],n);const o=a(e,["nextPageToken"]);o!=null&&c(t,["nextPageToken"],o);const r=a(e,["operations"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(l=>Ws(l))),c(t,["batchJobs"],i)}return t}function kS(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&c(t,["sdkHttpResponse"],n);const o=a(e,["nextPageToken"]);o!=null&&c(t,["nextPageToken"],o);const r=a(e,["batchPredictionJobs"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(l=>Vu(l))),c(t,["batchJobs"],i)}return t}function _S(e){const t={},n=a(e,["mediaResolution"]);n!=null&&c(t,["mediaResolution"],n);const o=a(e,["codeExecutionResult"]);o!=null&&c(t,["codeExecutionResult"],o);const r=a(e,["executableCode"]);r!=null&&c(t,["executableCode"],r);const i=a(e,["fileData"]);i!=null&&c(t,["fileData"],cS(i));const l=a(e,["functionCall"]);l!=null&&c(t,["functionCall"],dS(l));const u=a(e,["functionResponse"]);u!=null&&c(t,["functionResponse"],u);const d=a(e,["inlineData"]);d!=null&&c(t,["inlineData"],WC(d));const f=a(e,["text"]);f!=null&&c(t,["text"],f);const p=a(e,["thought"]);p!=null&&c(t,["thought"],p);const h=a(e,["thoughtSignature"]);h!=null&&c(t,["thoughtSignature"],h);const m=a(e,["videoMetadata"]);return m!=null&&c(t,["videoMetadata"],m),t}function IS(e){const t={},n=a(e,["category"]);if(n!=null&&c(t,["category"],n),a(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=a(e,["threshold"]);return o!=null&&c(t,["threshold"],o),t}function AS(e){const t={},n=a(e,["functionCallingConfig"]);n!=null&&c(t,["functionCallingConfig"],fS(n));const o=a(e,["retrievalConfig"]);return o!=null&&c(t,["retrievalConfig"],o),t}function MS(e){const t={},n=a(e,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(h=>h)),c(t,["functionDeclarations"],p)}if(a(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=a(e,["googleSearchRetrieval"]);o!=null&&c(t,["googleSearchRetrieval"],o);const r=a(e,["computerUse"]);r!=null&&c(t,["computerUse"],r);const i=a(e,["fileSearch"]);i!=null&&c(t,["fileSearch"],i);const l=a(e,["codeExecution"]);if(l!=null&&c(t,["codeExecution"],l),a(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=a(e,["googleMaps"]);u!=null&&c(t,["googleMaps"],yS(u));const d=a(e,["googleSearch"]);d!=null&&c(t,["googleSearch"],xS(d));const f=a(e,["urlContext"]);return f!=null&&c(t,["urlContext"],f),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Vn;(function(e){e.PAGED_ITEM_BATCH_JOBS="batchJobs",e.PAGED_ITEM_MODELS="models",e.PAGED_ITEM_TUNING_JOBS="tuningJobs",e.PAGED_ITEM_FILES="files",e.PAGED_ITEM_CACHED_CONTENTS="cachedContents",e.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",e.PAGED_ITEM_DOCUMENTS="documents"})(Vn||(Vn={}));class Bo{constructor(t,n,o,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(t,o,r)}init(t,n,o){var r,i;this.nameInternal=t,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let l={config:{}};!o||Object.keys(o).length===0?l={config:{}}:typeof o=="object"?l=Object.assign({},o):l=o,l.config&&(l.config.pageToken=n.nextPageToken),this.paramsInternal=l,this.pageInternalSize=(i=(r=l.config)===null||r===void 0?void 0:r.pageSize)!==null&&i!==void 0?i:this.pageInternal.length}initNextPage(t){this.init(this.nameInternal,t,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(t){return this.pageInternal[t]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const t=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:t,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const t=await this.requestInternal(this.params);return this.initNextPage(t),this.page}hasNextPage(){var t;return((t=this.params.config)===null||t===void 0?void 0:t.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class PS extends Hn{constructor(t){super(),this.apiClient=t,this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)},this.list=async(n={})=>new Bo(Vn.PAGED_ITEM_BATCH_JOBS,o=>this.listInternal(o),await this.listInternal(n),n)}createInlinedGenerateContentRequest(t){const n=Hp(this.apiClient,t),o=n._url,r=X("{model}:batchGenerateContent",o),u=n.batch.inputConfig.requests,d=u.requests,f=[];for(const p of d){const h=Object.assign({},p);if(h.systemInstruction){const m=h.systemInstruction;delete h.systemInstruction;const v=h.request;v.systemInstruction=m,h.request=v}f.push(h)}return u.requests=f,delete n.config,delete n._url,delete n._query,{path:r,body:n}}getGcsUri(t){if(typeof t=="string")return t.startsWith("gs://")?t:void 0;if(!Array.isArray(t)&&t.gcsUri&&t.gcsUri.length>0)return t.gcsUri[0]}getBigqueryUri(t){if(typeof t=="string")return t.startsWith("bq://")?t:void 0;if(!Array.isArray(t))return t.bigqueryUri}formatDestination(t,n){const o=n?Object.assign({},n):{},r=Date.now().toString();if(o.displayName||(o.displayName=`genaiBatchJob_${r}`),o.dest===void 0){const i=this.getGcsUri(t),l=this.getBigqueryUri(t);if(i)i.endsWith(".jsonl")?o.dest=`${i.slice(0,-6)}/dest`:o.dest=`${i}_dest_${r}`;else if(l)o.dest=`${l}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return o}async createInternal(t){var n,o,r,i;let l,u="",d={};if(this.apiClient.isVertexAI()){const f=eS(this.apiClient,t);return u=X("batchPredictionJobs",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),l.then(p=>Vu(p))}else{const f=Hp(this.apiClient,t);return u=X("{model}:batchGenerateContent",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>Ws(p))}}async createEmbeddingsInternal(t){var n,o;let r,i="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=nS(this.apiClient,t);return i=X("{model}:asyncBatchEmbedContent",u._url),l=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),r.then(d=>Ws(d))}}async get(t){var n,o,r,i;let l,u="",d={};if(this.apiClient.isVertexAI()){const f=gS(this.apiClient,t);return u=X("batchPredictionJobs/{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),l.then(p=>Vu(p))}else{const f=mS(this.apiClient,t);return u=X("batches/{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>Ws(p))}}async cancel(t){var n,o,r,i;let l="",u={};if(this.apiClient.isVertexAI()){const d=YC(this.apiClient,t);l=X("batchPredictionJobs/{name}:cancel",d._url),u=d._query,delete d._url,delete d._query,await this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal})}else{const d=JC(this.apiClient,t);l=X("batches/{name}:cancel",d._url),u=d._query,delete d._url,delete d._query,await this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(t){var n,o,r,i;let l,u="",d={};if(this.apiClient.isVertexAI()){const f=ES(t);return u=X("batchPredictionJobs",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:p.headers},m})),l.then(p=>{const h=kS(p),m=new Up;return Object.assign(m,h),m})}else{const f=NS(t);return u=X("batches",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:p.headers},m})),l.then(p=>{const h=TS(p),m=new Up;return Object.assign(m,h),m})}}async delete(t){var n,o,r,i;let l,u="",d={};if(this.apiClient.isVertexAI()){const f=rS(this.apiClient,t);return u=X("batchPredictionJobs/{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:p.headers},m})),l.then(p=>sS(p))}else{const f=oS(this.apiClient,t);return u=X("batches/{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:p.headers},m})),l.then(p=>iS(p))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function RS(e){const t={},n=a(e,["data"]);if(n!=null&&c(t,["data"],n),a(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=a(e,["mimeType"]);return o!=null&&c(t,["mimeType"],o),t}function Gp(e){const t={},n=a(e,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>nN(i))),c(t,["parts"],r)}const o=a(e,["role"]);return o!=null&&c(t,["role"],o),t}function DS(e,t){const n={},o=a(e,["ttl"]);t!==void 0&&o!=null&&c(t,["ttl"],o);const r=a(e,["expireTime"]);t!==void 0&&r!=null&&c(t,["expireTime"],r);const i=a(e,["displayName"]);t!==void 0&&i!=null&&c(t,["displayName"],i);const l=a(e,["contents"]);if(t!==void 0&&l!=null){let p=Qt(l);Array.isArray(p)&&(p=p.map(h=>Gp(h))),c(t,["contents"],p)}const u=a(e,["systemInstruction"]);t!==void 0&&u!=null&&c(t,["systemInstruction"],Gp(ht(u)));const d=a(e,["tools"]);if(t!==void 0&&d!=null){let p=d;Array.isArray(p)&&(p=p.map(h=>rN(h))),c(t,["tools"],p)}const f=a(e,["toolConfig"]);if(t!==void 0&&f!=null&&c(t,["toolConfig"],oN(f)),a(e,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function LS(e,t){const n={},o=a(e,["ttl"]);t!==void 0&&o!=null&&c(t,["ttl"],o);const r=a(e,["expireTime"]);t!==void 0&&r!=null&&c(t,["expireTime"],r);const i=a(e,["displayName"]);t!==void 0&&i!=null&&c(t,["displayName"],i);const l=a(e,["contents"]);if(t!==void 0&&l!=null){let h=Qt(l);Array.isArray(h)&&(h=h.map(m=>m)),c(t,["contents"],h)}const u=a(e,["systemInstruction"]);t!==void 0&&u!=null&&c(t,["systemInstruction"],ht(u));const d=a(e,["tools"]);if(t!==void 0&&d!=null){let h=d;Array.isArray(h)&&(h=h.map(m=>iN(m))),c(t,["tools"],h)}const f=a(e,["toolConfig"]);t!==void 0&&f!=null&&c(t,["toolConfig"],f);const p=a(e,["kmsKeyName"]);return t!==void 0&&p!=null&&c(t,["encryption_spec","kmsKeyName"],p),n}function jS(e,t){const n={},o=a(t,["model"]);o!=null&&c(n,["model"],zg(e,o));const r=a(t,["config"]);return r!=null&&DS(r,n),n}function FS(e,t){const n={},o=a(t,["model"]);o!=null&&c(n,["model"],zg(e,o));const r=a(t,["config"]);return r!=null&&LS(r,n),n}function US(e,t){const n={},o=a(t,["name"]);return o!=null&&c(n,["_url","name"],Gn(e,o)),n}function zS(e,t){const n={},o=a(t,["name"]);return o!=null&&c(n,["_url","name"],Gn(e,o)),n}function VS(e){const t={},n=a(e,["sdkHttpResponse"]);return n!=null&&c(t,["sdkHttpResponse"],n),t}function $S(e){const t={},n=a(e,["sdkHttpResponse"]);return n!=null&&c(t,["sdkHttpResponse"],n),t}function HS(e){const t={};if(a(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(e,["fileUri"]);n!=null&&c(t,["fileUri"],n);const o=a(e,["mimeType"]);return o!=null&&c(t,["mimeType"],o),t}function GS(e){const t={},n=a(e,["id"]);n!=null&&c(t,["id"],n);const o=a(e,["args"]);o!=null&&c(t,["args"],o);const r=a(e,["name"]);if(r!=null&&c(t,["name"],r),a(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function BS(e){const t={},n=a(e,["mode"]);n!=null&&c(t,["mode"],n);const o=a(e,["allowedFunctionNames"]);if(o!=null&&c(t,["allowedFunctionNames"],o),a(e,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function qS(e){const t={};if(a(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=a(e,["description"]);n!=null&&c(t,["description"],n);const o=a(e,["name"]);o!=null&&c(t,["name"],o);const r=a(e,["parameters"]);r!=null&&c(t,["parameters"],r);const i=a(e,["parametersJsonSchema"]);i!=null&&c(t,["parametersJsonSchema"],i);const l=a(e,["response"]);l!=null&&c(t,["response"],l);const u=a(e,["responseJsonSchema"]);return u!=null&&c(t,["responseJsonSchema"],u),t}function OS(e,t){const n={},o=a(t,["name"]);return o!=null&&c(n,["_url","name"],Gn(e,o)),n}function WS(e,t){const n={},o=a(t,["name"]);return o!=null&&c(n,["_url","name"],Gn(e,o)),n}function JS(e){const t={};if(a(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=a(e,["enableWidget"]);return n!=null&&c(t,["enableWidget"],n),t}function YS(e){const t={};if(a(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=a(e,["timeRangeFilter"]);return n!=null&&c(t,["timeRangeFilter"],n),t}function KS(e,t){const n={},o=a(e,["pageSize"]);t!==void 0&&o!=null&&c(t,["_query","pageSize"],o);const r=a(e,["pageToken"]);return t!==void 0&&r!=null&&c(t,["_query","pageToken"],r),n}function XS(e,t){const n={},o=a(e,["pageSize"]);t!==void 0&&o!=null&&c(t,["_query","pageSize"],o);const r=a(e,["pageToken"]);return t!==void 0&&r!=null&&c(t,["_query","pageToken"],r),n}function QS(e){const t={},n=a(e,["config"]);return n!=null&&KS(n,t),t}function ZS(e){const t={},n=a(e,["config"]);return n!=null&&XS(n,t),t}function eN(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&c(t,["sdkHttpResponse"],n);const o=a(e,["nextPageToken"]);o!=null&&c(t,["nextPageToken"],o);const r=a(e,["cachedContents"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(l=>l)),c(t,["cachedContents"],i)}return t}function tN(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&c(t,["sdkHttpResponse"],n);const o=a(e,["nextPageToken"]);o!=null&&c(t,["nextPageToken"],o);const r=a(e,["cachedContents"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(l=>l)),c(t,["cachedContents"],i)}return t}function nN(e){const t={},n=a(e,["mediaResolution"]);n!=null&&c(t,["mediaResolution"],n);const o=a(e,["codeExecutionResult"]);o!=null&&c(t,["codeExecutionResult"],o);const r=a(e,["executableCode"]);r!=null&&c(t,["executableCode"],r);const i=a(e,["fileData"]);i!=null&&c(t,["fileData"],HS(i));const l=a(e,["functionCall"]);l!=null&&c(t,["functionCall"],GS(l));const u=a(e,["functionResponse"]);u!=null&&c(t,["functionResponse"],u);const d=a(e,["inlineData"]);d!=null&&c(t,["inlineData"],RS(d));const f=a(e,["text"]);f!=null&&c(t,["text"],f);const p=a(e,["thought"]);p!=null&&c(t,["thought"],p);const h=a(e,["thoughtSignature"]);h!=null&&c(t,["thoughtSignature"],h);const m=a(e,["videoMetadata"]);return m!=null&&c(t,["videoMetadata"],m),t}function oN(e){const t={},n=a(e,["functionCallingConfig"]);n!=null&&c(t,["functionCallingConfig"],BS(n));const o=a(e,["retrievalConfig"]);return o!=null&&c(t,["retrievalConfig"],o),t}function rN(e){const t={},n=a(e,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(h=>h)),c(t,["functionDeclarations"],p)}if(a(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=a(e,["googleSearchRetrieval"]);o!=null&&c(t,["googleSearchRetrieval"],o);const r=a(e,["computerUse"]);r!=null&&c(t,["computerUse"],r);const i=a(e,["fileSearch"]);i!=null&&c(t,["fileSearch"],i);const l=a(e,["codeExecution"]);if(l!=null&&c(t,["codeExecution"],l),a(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=a(e,["googleMaps"]);u!=null&&c(t,["googleMaps"],JS(u));const d=a(e,["googleSearch"]);d!=null&&c(t,["googleSearch"],YS(d));const f=a(e,["urlContext"]);return f!=null&&c(t,["urlContext"],f),t}function iN(e){const t={},n=a(e,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(m=>qS(m))),c(t,["functionDeclarations"],h)}const o=a(e,["retrieval"]);o!=null&&c(t,["retrieval"],o);const r=a(e,["googleSearchRetrieval"]);r!=null&&c(t,["googleSearchRetrieval"],r);const i=a(e,["computerUse"]);if(i!=null&&c(t,["computerUse"],i),a(e,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=a(e,["codeExecution"]);l!=null&&c(t,["codeExecution"],l);const u=a(e,["enterpriseWebSearch"]);u!=null&&c(t,["enterpriseWebSearch"],u);const d=a(e,["googleMaps"]);d!=null&&c(t,["googleMaps"],d);const f=a(e,["googleSearch"]);f!=null&&c(t,["googleSearch"],f);const p=a(e,["urlContext"]);return p!=null&&c(t,["urlContext"],p),t}function sN(e,t){const n={},o=a(e,["ttl"]);t!==void 0&&o!=null&&c(t,["ttl"],o);const r=a(e,["expireTime"]);return t!==void 0&&r!=null&&c(t,["expireTime"],r),n}function lN(e,t){const n={},o=a(e,["ttl"]);t!==void 0&&o!=null&&c(t,["ttl"],o);const r=a(e,["expireTime"]);return t!==void 0&&r!=null&&c(t,["expireTime"],r),n}function aN(e,t){const n={},o=a(t,["name"]);o!=null&&c(n,["_url","name"],Gn(e,o));const r=a(t,["config"]);return r!=null&&sN(r,n),n}function uN(e,t){const n={},o=a(t,["name"]);o!=null&&c(n,["_url","name"],Gn(e,o));const r=a(t,["config"]);return r!=null&&lN(r,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class cN extends Hn{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new Bo(Vn.PAGED_ITEM_CACHED_CONTENTS,o=>this.listInternal(o),await this.listInternal(n),n)}async create(t){var n,o,r,i;let l,u="",d={};if(this.apiClient.isVertexAI()){const f=FS(this.apiClient,t);return u=X("cachedContents",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),l.then(p=>p)}else{const f=jS(this.apiClient,t);return u=X("cachedContents",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>p)}}async get(t){var n,o,r,i;let l,u="",d={};if(this.apiClient.isVertexAI()){const f=WS(this.apiClient,t);return u=X("{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),l.then(p=>p)}else{const f=OS(this.apiClient,t);return u=X("{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>p)}}async delete(t){var n,o,r,i;let l,u="",d={};if(this.apiClient.isVertexAI()){const f=zS(this.apiClient,t);return u=X("{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:p.headers},m})),l.then(p=>{const h=$S(p),m=new jp;return Object.assign(m,h),m})}else{const f=US(this.apiClient,t);return u=X("{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:p.headers},m})),l.then(p=>{const h=VS(p),m=new jp;return Object.assign(m,h),m})}}async update(t){var n,o,r,i;let l,u="",d={};if(this.apiClient.isVertexAI()){const f=uN(this.apiClient,t);return u=X("{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),l.then(p=>p)}else{const f=aN(this.apiClient,t);return u=X("{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>p)}}async listInternal(t){var n,o,r,i;let l,u="",d={};if(this.apiClient.isVertexAI()){const f=ZS(t);return u=X("cachedContents",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:p.headers},m})),l.then(p=>{const h=tN(p),m=new Fp;return Object.assign(m,h),m})}else{const f=QS(t);return u=X("cachedContents",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:p.headers},m})),l.then(p=>{const h=eN(p),m=new Fp;return Object.assign(m,h),m})}}}function Bp(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Pe(e){return this instanceof Pe?(this.v=e,this):new Pe(e)}function Rr(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=n.apply(e,t||[]),r,i=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",l),r[Symbol.asyncIterator]=function(){return this},r;function l(v){return function(C){return Promise.resolve(C).then(v,h)}}function u(v,C){o[v]&&(r[v]=function(S){return new Promise(function(D,b){i.push([v,S,D,b])>1||d(v,S)})},C&&(r[v]=C(r[v])))}function d(v,C){try{f(o[v](C))}catch(S){m(i[0][3],S)}}function f(v){v.value instanceof Pe?Promise.resolve(v.value.v).then(p,h):m(i[0][2],v)}function p(v){d("next",v)}function h(v){d("throw",v)}function m(v,C){v(C),i.shift(),i.length&&d(i[0][0],i[0][1])}}function Pi(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof Bp=="function"?Bp(e):e[Symbol.iterator](),n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n);function o(i){n[i]=e[i]&&function(l){return new Promise(function(u,d){l=e[i](l),r(u,d,l.done,l.value)})}}function r(i,l,u,d){Promise.resolve(d).then(function(f){i({value:f,done:u})},l)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function dN(e){var t;if(e.candidates==null||e.candidates.length===0)return!1;const n=(t=e.candidates[0])===null||t===void 0?void 0:t.content;return n===void 0?!1:Qg(n)}function Qg(e){if(e.parts===void 0||e.parts.length===0)return!1;for(const t of e.parts)if(t===void 0||Object.keys(t).length===0)return!1;return!0}function fN(e){if(e.length!==0){for(const t of e)if(t.role!=="user"&&t.role!=="model")throw new Error(`Role must be user or model, but got ${t.role}.`)}}function qp(e){if(e===void 0||e.length===0)return[];const t=[],n=e.length;let o=0;for(;o<n;)if(e[o].role==="user")t.push(e[o]),o++;else{const r=[];let i=!0;for(;o<n&&e[o].role==="model";)r.push(e[o]),i&&!Qg(e[o])&&(i=!1),o++;i?t.push(...r):t.pop()}return t}class pN{constructor(t,n){this.modelsModule=t,this.apiClient=n}create(t){return new hN(this.apiClient,this.modelsModule,t.model,t.config,structuredClone(t.history))}}class hN{constructor(t,n,o,r={},i=[]){this.apiClient=t,this.modelsModule=n,this.model=o,this.config=r,this.history=i,this.sendPromise=Promise.resolve(),fN(i)}async sendMessage(t){var n;await this.sendPromise;const o=ht(t.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(o),config:(n=t.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var i,l,u;const d=await r,f=(l=(i=d.candidates)===null||i===void 0?void 0:i[0])===null||l===void 0?void 0:l.content,p=d.automaticFunctionCallingHistory,h=this.getHistory(!0).length;let m=[];p!=null&&(m=(u=p.slice(h))!==null&&u!==void 0?u:[]);const v=f?[f]:[];this.recordHistory(o,v,m)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(t){var n;await this.sendPromise;const o=ht(t.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(o),config:(n=t.config)!==null&&n!==void 0?n:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const i=await r;return this.processStreamResponse(i,o)}getHistory(t=!1){const n=t?qp(this.history):this.history;return structuredClone(n)}processStreamResponse(t,n){var o,r;return Rr(this,arguments,function*(){var l,u,d,f;const p=[];try{for(var h=!0,m=Pi(t),v;v=yield Pe(m.next()),l=v.done,!l;h=!0){f=v.value,h=!1;const C=f;if(dN(C)){const S=(r=(o=C.candidates)===null||o===void 0?void 0:o[0])===null||r===void 0?void 0:r.content;S!==void 0&&p.push(S)}yield yield Pe(C)}}catch(C){u={error:C}}finally{try{!h&&!l&&(d=m.return)&&(yield Pe(d.call(m)))}finally{if(u)throw u.error}}this.recordHistory(n,p)})}recordHistory(t,n,o){let r=[];n.length>0&&n.every(i=>i.role!==void 0)?r=n:r.push({role:"model",parts:[]}),o&&o.length>0?this.history.push(...qp(o)):this.history.push(t),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Hl extends Error{constructor(t){super(t.message),this.name="ApiError",this.status=t.status,Object.setPrototypeOf(this,Hl.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function mN(e){const t={},n=a(e,["file"]);return n!=null&&c(t,["file"],n),t}function gN(e){const t={},n=a(e,["sdkHttpResponse"]);return n!=null&&c(t,["sdkHttpResponse"],n),t}function yN(e){const t={},n=a(e,["name"]);return n!=null&&c(t,["_url","file"],qg(n)),t}function xN(e){const t={},n=a(e,["sdkHttpResponse"]);return n!=null&&c(t,["sdkHttpResponse"],n),t}function vN(e){const t={},n=a(e,["name"]);return n!=null&&c(t,["_url","file"],qg(n)),t}function wN(e,t){const n={},o=a(e,["pageSize"]);t!==void 0&&o!=null&&c(t,["_query","pageSize"],o);const r=a(e,["pageToken"]);return t!==void 0&&r!=null&&c(t,["_query","pageToken"],r),n}function bN(e){const t={},n=a(e,["config"]);return n!=null&&wN(n,t),t}function CN(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&c(t,["sdkHttpResponse"],n);const o=a(e,["nextPageToken"]);o!=null&&c(t,["nextPageToken"],o);const r=a(e,["files"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(l=>l)),c(t,["files"],i)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class SN extends Hn{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new Bo(Vn.PAGED_ITEM_FILES,o=>this.listInternal(o),await this.listInternal(n),n)}async upload(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(t.file,t.config).then(n=>n)}async download(t){await this.apiClient.downloadFile(t)}async listInternal(t){var n,o;let r,i="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=bN(t);return i=X("files",u._url),l=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(f=>{const p=f;return p.sdkHttpResponse={headers:d.headers},p})),r.then(d=>{const f=CN(d),p=new kC;return Object.assign(p,f),p})}}async createInternal(t){var n,o;let r,i="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=mN(t);return i=X("upload/v1beta/files",u._url),l=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),r.then(d=>{const f=gN(d),p=new _C;return Object.assign(p,f),p})}}async get(t){var n,o;let r,i="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=vN(t);return i=X("files/{file}",u._url),l=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),r.then(d=>d)}}async delete(t){var n,o;let r,i="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=yN(t);return i=X("files/{file}",u._url),l=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(f=>{const p=f;return p.sdkHttpResponse={headers:d.headers},p})),r.then(d=>{const f=xN(d),p=new IC;return Object.assign(p,f),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Js(e){const t={},n=a(e,["data"]);if(n!=null&&c(t,["data"],n),a(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=a(e,["mimeType"]);return o!=null&&c(t,["mimeType"],o),t}function NN(e){const t={},n=a(e,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>VN(i))),c(t,["parts"],r)}const o=a(e,["role"]);return o!=null&&c(t,["role"],o),t}function EN(e){const t={};if(a(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(e,["fileUri"]);n!=null&&c(t,["fileUri"],n);const o=a(e,["mimeType"]);return o!=null&&c(t,["mimeType"],o),t}function TN(e){const t={},n=a(e,["id"]);n!=null&&c(t,["id"],n);const o=a(e,["args"]);o!=null&&c(t,["args"],o);const r=a(e,["name"]);if(r!=null&&c(t,["name"],r),a(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function kN(e){const t={};if(a(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=a(e,["description"]);n!=null&&c(t,["description"],n);const o=a(e,["name"]);o!=null&&c(t,["name"],o);const r=a(e,["parameters"]);r!=null&&c(t,["parameters"],r);const i=a(e,["parametersJsonSchema"]);i!=null&&c(t,["parametersJsonSchema"],i);const l=a(e,["response"]);l!=null&&c(t,["response"],l);const u=a(e,["responseJsonSchema"]);return u!=null&&c(t,["responseJsonSchema"],u),t}function _N(e){const t={},n=a(e,["modelSelectionConfig"]);n!=null&&c(t,["modelConfig"],n);const o=a(e,["responseJsonSchema"]);o!=null&&c(t,["responseJsonSchema"],o);const r=a(e,["audioTimestamp"]);r!=null&&c(t,["audioTimestamp"],r);const i=a(e,["candidateCount"]);i!=null&&c(t,["candidateCount"],i);const l=a(e,["enableAffectiveDialog"]);l!=null&&c(t,["enableAffectiveDialog"],l);const u=a(e,["frequencyPenalty"]);u!=null&&c(t,["frequencyPenalty"],u);const d=a(e,["logprobs"]);d!=null&&c(t,["logprobs"],d);const f=a(e,["maxOutputTokens"]);f!=null&&c(t,["maxOutputTokens"],f);const p=a(e,["mediaResolution"]);p!=null&&c(t,["mediaResolution"],p);const h=a(e,["presencePenalty"]);h!=null&&c(t,["presencePenalty"],h);const m=a(e,["responseLogprobs"]);m!=null&&c(t,["responseLogprobs"],m);const v=a(e,["responseMimeType"]);v!=null&&c(t,["responseMimeType"],v);const C=a(e,["responseModalities"]);C!=null&&c(t,["responseModalities"],C);const S=a(e,["responseSchema"]);S!=null&&c(t,["responseSchema"],S);const D=a(e,["routingConfig"]);D!=null&&c(t,["routingConfig"],D);const b=a(e,["seed"]);b!=null&&c(t,["seed"],b);const x=a(e,["speechConfig"]);x!=null&&c(t,["speechConfig"],Zg(x));const g=a(e,["stopSequences"]);g!=null&&c(t,["stopSequences"],g);const N=a(e,["temperature"]);N!=null&&c(t,["temperature"],N);const M=a(e,["thinkingConfig"]);M!=null&&c(t,["thinkingConfig"],M);const T=a(e,["topK"]);T!=null&&c(t,["topK"],T);const P=a(e,["topP"]);if(P!=null&&c(t,["topP"],P),a(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function IN(e){const t={};if(a(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=a(e,["enableWidget"]);return n!=null&&c(t,["enableWidget"],n),t}function AN(e){const t={};if(a(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=a(e,["timeRangeFilter"]);return n!=null&&c(t,["timeRangeFilter"],n),t}function MN(e,t){const n={},o=a(e,["generationConfig"]);t!==void 0&&o!=null&&c(t,["setup","generationConfig"],o);const r=a(e,["responseModalities"]);t!==void 0&&r!=null&&c(t,["setup","generationConfig","responseModalities"],r);const i=a(e,["temperature"]);t!==void 0&&i!=null&&c(t,["setup","generationConfig","temperature"],i);const l=a(e,["topP"]);t!==void 0&&l!=null&&c(t,["setup","generationConfig","topP"],l);const u=a(e,["topK"]);t!==void 0&&u!=null&&c(t,["setup","generationConfig","topK"],u);const d=a(e,["maxOutputTokens"]);t!==void 0&&d!=null&&c(t,["setup","generationConfig","maxOutputTokens"],d);const f=a(e,["mediaResolution"]);t!==void 0&&f!=null&&c(t,["setup","generationConfig","mediaResolution"],f);const p=a(e,["seed"]);t!==void 0&&p!=null&&c(t,["setup","generationConfig","seed"],p);const h=a(e,["speechConfig"]);t!==void 0&&h!=null&&c(t,["setup","generationConfig","speechConfig"],Wc(h));const m=a(e,["thinkingConfig"]);t!==void 0&&m!=null&&c(t,["setup","generationConfig","thinkingConfig"],m);const v=a(e,["enableAffectiveDialog"]);t!==void 0&&v!=null&&c(t,["setup","generationConfig","enableAffectiveDialog"],v);const C=a(e,["systemInstruction"]);t!==void 0&&C!=null&&c(t,["setup","systemInstruction"],NN(ht(C)));const S=a(e,["tools"]);if(t!==void 0&&S!=null){let T=Or(S);Array.isArray(T)&&(T=T.map(P=>HN(qr(P)))),c(t,["setup","tools"],T)}const D=a(e,["sessionResumption"]);t!==void 0&&D!=null&&c(t,["setup","sessionResumption"],$N(D));const b=a(e,["inputAudioTranscription"]);t!==void 0&&b!=null&&c(t,["setup","inputAudioTranscription"],b);const x=a(e,["outputAudioTranscription"]);t!==void 0&&x!=null&&c(t,["setup","outputAudioTranscription"],x);const g=a(e,["realtimeInputConfig"]);t!==void 0&&g!=null&&c(t,["setup","realtimeInputConfig"],g);const N=a(e,["contextWindowCompression"]);t!==void 0&&N!=null&&c(t,["setup","contextWindowCompression"],N);const M=a(e,["proactivity"]);return t!==void 0&&M!=null&&c(t,["setup","proactivity"],M),n}function PN(e,t){const n={},o=a(e,["generationConfig"]);t!==void 0&&o!=null&&c(t,["setup","generationConfig"],_N(o));const r=a(e,["responseModalities"]);t!==void 0&&r!=null&&c(t,["setup","generationConfig","responseModalities"],r);const i=a(e,["temperature"]);t!==void 0&&i!=null&&c(t,["setup","generationConfig","temperature"],i);const l=a(e,["topP"]);t!==void 0&&l!=null&&c(t,["setup","generationConfig","topP"],l);const u=a(e,["topK"]);t!==void 0&&u!=null&&c(t,["setup","generationConfig","topK"],u);const d=a(e,["maxOutputTokens"]);t!==void 0&&d!=null&&c(t,["setup","generationConfig","maxOutputTokens"],d);const f=a(e,["mediaResolution"]);t!==void 0&&f!=null&&c(t,["setup","generationConfig","mediaResolution"],f);const p=a(e,["seed"]);t!==void 0&&p!=null&&c(t,["setup","generationConfig","seed"],p);const h=a(e,["speechConfig"]);t!==void 0&&h!=null&&c(t,["setup","generationConfig","speechConfig"],Zg(Wc(h)));const m=a(e,["thinkingConfig"]);t!==void 0&&m!=null&&c(t,["setup","generationConfig","thinkingConfig"],m);const v=a(e,["enableAffectiveDialog"]);t!==void 0&&v!=null&&c(t,["setup","generationConfig","enableAffectiveDialog"],v);const C=a(e,["systemInstruction"]);t!==void 0&&C!=null&&c(t,["setup","systemInstruction"],ht(C));const S=a(e,["tools"]);if(t!==void 0&&S!=null){let T=Or(S);Array.isArray(T)&&(T=T.map(P=>GN(qr(P)))),c(t,["setup","tools"],T)}const D=a(e,["sessionResumption"]);t!==void 0&&D!=null&&c(t,["setup","sessionResumption"],D);const b=a(e,["inputAudioTranscription"]);t!==void 0&&b!=null&&c(t,["setup","inputAudioTranscription"],b);const x=a(e,["outputAudioTranscription"]);t!==void 0&&x!=null&&c(t,["setup","outputAudioTranscription"],x);const g=a(e,["realtimeInputConfig"]);t!==void 0&&g!=null&&c(t,["setup","realtimeInputConfig"],g);const N=a(e,["contextWindowCompression"]);t!==void 0&&N!=null&&c(t,["setup","contextWindowCompression"],N);const M=a(e,["proactivity"]);return t!==void 0&&M!=null&&c(t,["setup","proactivity"],M),n}function RN(e,t){const n={},o=a(t,["model"]);o!=null&&c(n,["setup","model"],we(e,o));const r=a(t,["config"]);return r!=null&&c(n,["config"],MN(r,n)),n}function DN(e,t){const n={},o=a(t,["model"]);o!=null&&c(n,["setup","model"],we(e,o));const r=a(t,["config"]);return r!=null&&c(n,["config"],PN(r,n)),n}function LN(e){const t={},n=a(e,["musicGenerationConfig"]);return n!=null&&c(t,["musicGenerationConfig"],n),t}function jN(e){const t={},n=a(e,["weightedPrompts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>r)),c(t,["weightedPrompts"],o)}return t}function FN(e){const t={},n=a(e,["media"]);if(n!=null){let f=Vg(n);Array.isArray(f)&&(f=f.map(p=>Js(p))),c(t,["mediaChunks"],f)}const o=a(e,["audio"]);o!=null&&c(t,["audio"],Js(Hg(o)));const r=a(e,["audioStreamEnd"]);r!=null&&c(t,["audioStreamEnd"],r);const i=a(e,["video"]);i!=null&&c(t,["video"],Js($g(i)));const l=a(e,["text"]);l!=null&&c(t,["text"],l);const u=a(e,["activityStart"]);u!=null&&c(t,["activityStart"],u);const d=a(e,["activityEnd"]);return d!=null&&c(t,["activityEnd"],d),t}function UN(e){const t={},n=a(e,["media"]);if(n!=null){let f=Vg(n);Array.isArray(f)&&(f=f.map(p=>p)),c(t,["mediaChunks"],f)}const o=a(e,["audio"]);o!=null&&c(t,["audio"],Hg(o));const r=a(e,["audioStreamEnd"]);r!=null&&c(t,["audioStreamEnd"],r);const i=a(e,["video"]);i!=null&&c(t,["video"],$g(i));const l=a(e,["text"]);l!=null&&c(t,["text"],l);const u=a(e,["activityStart"]);u!=null&&c(t,["activityStart"],u);const d=a(e,["activityEnd"]);return d!=null&&c(t,["activityEnd"],d),t}function zN(e){const t={},n=a(e,["setupComplete"]);n!=null&&c(t,["setupComplete"],n);const o=a(e,["serverContent"]);o!=null&&c(t,["serverContent"],o);const r=a(e,["toolCall"]);r!=null&&c(t,["toolCall"],r);const i=a(e,["toolCallCancellation"]);i!=null&&c(t,["toolCallCancellation"],i);const l=a(e,["usageMetadata"]);l!=null&&c(t,["usageMetadata"],BN(l));const u=a(e,["goAway"]);u!=null&&c(t,["goAway"],u);const d=a(e,["sessionResumptionUpdate"]);return d!=null&&c(t,["sessionResumptionUpdate"],d),t}function VN(e){const t={},n=a(e,["mediaResolution"]);n!=null&&c(t,["mediaResolution"],n);const o=a(e,["codeExecutionResult"]);o!=null&&c(t,["codeExecutionResult"],o);const r=a(e,["executableCode"]);r!=null&&c(t,["executableCode"],r);const i=a(e,["fileData"]);i!=null&&c(t,["fileData"],EN(i));const l=a(e,["functionCall"]);l!=null&&c(t,["functionCall"],TN(l));const u=a(e,["functionResponse"]);u!=null&&c(t,["functionResponse"],u);const d=a(e,["inlineData"]);d!=null&&c(t,["inlineData"],Js(d));const f=a(e,["text"]);f!=null&&c(t,["text"],f);const p=a(e,["thought"]);p!=null&&c(t,["thought"],p);const h=a(e,["thoughtSignature"]);h!=null&&c(t,["thoughtSignature"],h);const m=a(e,["videoMetadata"]);return m!=null&&c(t,["videoMetadata"],m),t}function $N(e){const t={},n=a(e,["handle"]);if(n!=null&&c(t,["handle"],n),a(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function Zg(e){const t={},n=a(e,["languageCode"]);n!=null&&c(t,["languageCode"],n);const o=a(e,["voiceConfig"]);if(o!=null&&c(t,["voiceConfig"],o),a(e,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return t}function HN(e){const t={},n=a(e,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(h=>h)),c(t,["functionDeclarations"],p)}if(a(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=a(e,["googleSearchRetrieval"]);o!=null&&c(t,["googleSearchRetrieval"],o);const r=a(e,["computerUse"]);r!=null&&c(t,["computerUse"],r);const i=a(e,["fileSearch"]);i!=null&&c(t,["fileSearch"],i);const l=a(e,["codeExecution"]);if(l!=null&&c(t,["codeExecution"],l),a(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=a(e,["googleMaps"]);u!=null&&c(t,["googleMaps"],IN(u));const d=a(e,["googleSearch"]);d!=null&&c(t,["googleSearch"],AN(d));const f=a(e,["urlContext"]);return f!=null&&c(t,["urlContext"],f),t}function GN(e){const t={},n=a(e,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(m=>kN(m))),c(t,["functionDeclarations"],h)}const o=a(e,["retrieval"]);o!=null&&c(t,["retrieval"],o);const r=a(e,["googleSearchRetrieval"]);r!=null&&c(t,["googleSearchRetrieval"],r);const i=a(e,["computerUse"]);if(i!=null&&c(t,["computerUse"],i),a(e,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=a(e,["codeExecution"]);l!=null&&c(t,["codeExecution"],l);const u=a(e,["enterpriseWebSearch"]);u!=null&&c(t,["enterpriseWebSearch"],u);const d=a(e,["googleMaps"]);d!=null&&c(t,["googleMaps"],d);const f=a(e,["googleSearch"]);f!=null&&c(t,["googleSearch"],f);const p=a(e,["urlContext"]);return p!=null&&c(t,["urlContext"],p),t}function BN(e){const t={},n=a(e,["promptTokenCount"]);n!=null&&c(t,["promptTokenCount"],n);const o=a(e,["cachedContentTokenCount"]);o!=null&&c(t,["cachedContentTokenCount"],o);const r=a(e,["candidatesTokenCount"]);r!=null&&c(t,["responseTokenCount"],r);const i=a(e,["toolUsePromptTokenCount"]);i!=null&&c(t,["toolUsePromptTokenCount"],i);const l=a(e,["thoughtsTokenCount"]);l!=null&&c(t,["thoughtsTokenCount"],l);const u=a(e,["totalTokenCount"]);u!=null&&c(t,["totalTokenCount"],u);const d=a(e,["promptTokensDetails"]);if(d!=null){let v=d;Array.isArray(v)&&(v=v.map(C=>C)),c(t,["promptTokensDetails"],v)}const f=a(e,["cacheTokensDetails"]);if(f!=null){let v=f;Array.isArray(v)&&(v=v.map(C=>C)),c(t,["cacheTokensDetails"],v)}const p=a(e,["candidatesTokensDetails"]);if(p!=null){let v=p;Array.isArray(v)&&(v=v.map(C=>C)),c(t,["responseTokensDetails"],v)}const h=a(e,["toolUsePromptTokensDetails"]);if(h!=null){let v=h;Array.isArray(v)&&(v=v.map(C=>C)),c(t,["toolUsePromptTokensDetails"],v)}const m=a(e,["trafficType"]);return m!=null&&c(t,["trafficType"],m),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function qN(e){const t={},n=a(e,["data"]);if(n!=null&&c(t,["data"],n),a(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=a(e,["mimeType"]);return o!=null&&c(t,["mimeType"],o),t}function ON(e){const t={},n=a(e,["content"]);n!=null&&c(t,["content"],n);const o=a(e,["citationMetadata"]);o!=null&&c(t,["citationMetadata"],WN(o));const r=a(e,["tokenCount"]);r!=null&&c(t,["tokenCount"],r);const i=a(e,["finishReason"]);i!=null&&c(t,["finishReason"],i);const l=a(e,["avgLogprobs"]);l!=null&&c(t,["avgLogprobs"],l);const u=a(e,["groundingMetadata"]);u!=null&&c(t,["groundingMetadata"],u);const d=a(e,["index"]);d!=null&&c(t,["index"],d);const f=a(e,["logprobsResult"]);f!=null&&c(t,["logprobsResult"],f);const p=a(e,["safetyRatings"]);if(p!=null){let m=p;Array.isArray(m)&&(m=m.map(v=>v)),c(t,["safetyRatings"],m)}const h=a(e,["urlContextMetadata"]);return h!=null&&c(t,["urlContextMetadata"],h),t}function WN(e){const t={},n=a(e,["citationSources"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>r)),c(t,["citations"],o)}return t}function JN(e,t){const n={},o=a(t,["model"]);o!=null&&c(n,["_url","model"],we(e,o));const r=a(t,["contents"]);if(r!=null){let i=Qt(r);Array.isArray(i)&&(i=i.map(l=>l)),c(n,["contents"],i)}return n}function YN(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&c(t,["sdkHttpResponse"],n);const o=a(e,["tokensInfo"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(i=>i)),c(t,["tokensInfo"],r)}return t}function KN(e){const t={},n=a(e,["values"]);n!=null&&c(t,["values"],n);const o=a(e,["statistics"]);return o!=null&&c(t,["statistics"],XN(o)),t}function XN(e){const t={},n=a(e,["truncated"]);n!=null&&c(t,["truncated"],n);const o=a(e,["token_count"]);return o!=null&&c(t,["tokenCount"],o),t}function Gl(e){const t={},n=a(e,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>sE(i))),c(t,["parts"],r)}const o=a(e,["role"]);return o!=null&&c(t,["role"],o),t}function QN(e){const t={},n=a(e,["controlType"]);n!=null&&c(t,["controlType"],n);const o=a(e,["enableControlImageComputation"]);return o!=null&&c(t,["computeControl"],o),t}function ZN(e){const t={};if(a(e,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(a(e,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(a(e,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return t}function e2(e,t){const n={},o=a(e,["systemInstruction"]);t!==void 0&&o!=null&&c(t,["systemInstruction"],ht(o));const r=a(e,["tools"]);if(t!==void 0&&r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>r0(u))),c(t,["tools"],l)}const i=a(e,["generationConfig"]);return t!==void 0&&i!=null&&c(t,["generationConfig"],q2(i)),n}function t2(e,t){const n={},o=a(t,["model"]);o!=null&&c(n,["_url","model"],we(e,o));const r=a(t,["contents"]);if(r!=null){let l=Qt(r);Array.isArray(l)&&(l=l.map(u=>Gl(u))),c(n,["contents"],l)}const i=a(t,["config"]);return i!=null&&ZN(i),n}function n2(e,t){const n={},o=a(t,["model"]);o!=null&&c(n,["_url","model"],we(e,o));const r=a(t,["contents"]);if(r!=null){let l=Qt(r);Array.isArray(l)&&(l=l.map(u=>u)),c(n,["contents"],l)}const i=a(t,["config"]);return i!=null&&e2(i,n),n}function o2(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&c(t,["sdkHttpResponse"],n);const o=a(e,["totalTokens"]);o!=null&&c(t,["totalTokens"],o);const r=a(e,["cachedContentTokenCount"]);return r!=null&&c(t,["cachedContentTokenCount"],r),t}function r2(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&c(t,["sdkHttpResponse"],n);const o=a(e,["totalTokens"]);return o!=null&&c(t,["totalTokens"],o),t}function i2(e,t){const n={},o=a(t,["model"]);return o!=null&&c(n,["_url","name"],we(e,o)),n}function s2(e,t){const n={},o=a(t,["model"]);return o!=null&&c(n,["_url","name"],we(e,o)),n}function l2(e){const t={},n=a(e,["sdkHttpResponse"]);return n!=null&&c(t,["sdkHttpResponse"],n),t}function a2(e){const t={},n=a(e,["sdkHttpResponse"]);return n!=null&&c(t,["sdkHttpResponse"],n),t}function u2(e,t){const n={},o=a(e,["outputGcsUri"]);t!==void 0&&o!=null&&c(t,["parameters","storageUri"],o);const r=a(e,["negativePrompt"]);t!==void 0&&r!=null&&c(t,["parameters","negativePrompt"],r);const i=a(e,["numberOfImages"]);t!==void 0&&i!=null&&c(t,["parameters","sampleCount"],i);const l=a(e,["aspectRatio"]);t!==void 0&&l!=null&&c(t,["parameters","aspectRatio"],l);const u=a(e,["guidanceScale"]);t!==void 0&&u!=null&&c(t,["parameters","guidanceScale"],u);const d=a(e,["seed"]);t!==void 0&&d!=null&&c(t,["parameters","seed"],d);const f=a(e,["safetyFilterLevel"]);t!==void 0&&f!=null&&c(t,["parameters","safetySetting"],f);const p=a(e,["personGeneration"]);t!==void 0&&p!=null&&c(t,["parameters","personGeneration"],p);const h=a(e,["includeSafetyAttributes"]);t!==void 0&&h!=null&&c(t,["parameters","includeSafetyAttributes"],h);const m=a(e,["includeRaiReason"]);t!==void 0&&m!=null&&c(t,["parameters","includeRaiReason"],m);const v=a(e,["language"]);t!==void 0&&v!=null&&c(t,["parameters","language"],v);const C=a(e,["outputMimeType"]);t!==void 0&&C!=null&&c(t,["parameters","outputOptions","mimeType"],C);const S=a(e,["outputCompressionQuality"]);t!==void 0&&S!=null&&c(t,["parameters","outputOptions","compressionQuality"],S);const D=a(e,["addWatermark"]);t!==void 0&&D!=null&&c(t,["parameters","addWatermark"],D);const b=a(e,["labels"]);t!==void 0&&b!=null&&c(t,["labels"],b);const x=a(e,["editMode"]);t!==void 0&&x!=null&&c(t,["parameters","editMode"],x);const g=a(e,["baseSteps"]);return t!==void 0&&g!=null&&c(t,["parameters","editConfig","baseSteps"],g),n}function c2(e,t){const n={},o=a(t,["model"]);o!=null&&c(n,["_url","model"],we(e,o));const r=a(t,["prompt"]);r!=null&&c(n,["instances[0]","prompt"],r);const i=a(t,["referenceImages"]);if(i!=null){let u=i;Array.isArray(u)&&(u=u.map(d=>fE(d))),c(n,["instances[0]","referenceImages"],u)}const l=a(t,["config"]);return l!=null&&u2(l,n),n}function d2(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&c(t,["sdkHttpResponse"],n);const o=a(e,["predictions"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(i=>Bl(i))),c(t,["generatedImages"],r)}return t}function f2(e,t){const n={},o=a(e,["taskType"]);t!==void 0&&o!=null&&c(t,["requests[]","taskType"],o);const r=a(e,["title"]);t!==void 0&&r!=null&&c(t,["requests[]","title"],r);const i=a(e,["outputDimensionality"]);if(t!==void 0&&i!=null&&c(t,["requests[]","outputDimensionality"],i),a(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(a(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function p2(e,t){const n={},o=a(e,["taskType"]);t!==void 0&&o!=null&&c(t,["instances[]","task_type"],o);const r=a(e,["title"]);t!==void 0&&r!=null&&c(t,["instances[]","title"],r);const i=a(e,["outputDimensionality"]);t!==void 0&&i!=null&&c(t,["parameters","outputDimensionality"],i);const l=a(e,["mimeType"]);t!==void 0&&l!=null&&c(t,["instances[]","mimeType"],l);const u=a(e,["autoTruncate"]);return t!==void 0&&u!=null&&c(t,["parameters","autoTruncate"],u),n}function h2(e,t){const n={},o=a(t,["model"]);o!=null&&c(n,["_url","model"],we(e,o));const r=a(t,["contents"]);if(r!=null){let u=Bc(e,r);Array.isArray(u)&&(u=u.map(d=>d)),c(n,["requests[]","content"],u)}const i=a(t,["config"]);i!=null&&f2(i,n);const l=a(t,["model"]);return l!==void 0&&c(n,["requests[]","model"],we(e,l)),n}function m2(e,t){const n={},o=a(t,["model"]);o!=null&&c(n,["_url","model"],we(e,o));const r=a(t,["contents"]);if(r!=null){let l=Bc(e,r);Array.isArray(l)&&(l=l.map(u=>u)),c(n,["instances[]","content"],l)}const i=a(t,["config"]);return i!=null&&p2(i,n),n}function g2(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&c(t,["sdkHttpResponse"],n);const o=a(e,["embeddings"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(l=>l)),c(t,["embeddings"],i)}const r=a(e,["metadata"]);return r!=null&&c(t,["metadata"],r),t}function y2(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&c(t,["sdkHttpResponse"],n);const o=a(e,["predictions[]","embeddings"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(l=>KN(l))),c(t,["embeddings"],i)}const r=a(e,["metadata"]);return r!=null&&c(t,["metadata"],r),t}function x2(e){const t={},n=a(e,["endpoint"]);n!=null&&c(t,["name"],n);const o=a(e,["deployedModelId"]);return o!=null&&c(t,["deployedModelId"],o),t}function v2(e){const t={};if(a(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(e,["fileUri"]);n!=null&&c(t,["fileUri"],n);const o=a(e,["mimeType"]);return o!=null&&c(t,["mimeType"],o),t}function w2(e){const t={},n=a(e,["id"]);n!=null&&c(t,["id"],n);const o=a(e,["args"]);o!=null&&c(t,["args"],o);const r=a(e,["name"]);if(r!=null&&c(t,["name"],r),a(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function b2(e){const t={},n=a(e,["mode"]);n!=null&&c(t,["mode"],n);const o=a(e,["allowedFunctionNames"]);if(o!=null&&c(t,["allowedFunctionNames"],o),a(e,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function C2(e){const t={};if(a(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=a(e,["description"]);n!=null&&c(t,["description"],n);const o=a(e,["name"]);o!=null&&c(t,["name"],o);const r=a(e,["parameters"]);r!=null&&c(t,["parameters"],r);const i=a(e,["parametersJsonSchema"]);i!=null&&c(t,["parametersJsonSchema"],i);const l=a(e,["response"]);l!=null&&c(t,["response"],l);const u=a(e,["responseJsonSchema"]);return u!=null&&c(t,["responseJsonSchema"],u),t}function S2(e,t,n){const o={},r=a(t,["systemInstruction"]);n!==void 0&&r!=null&&c(n,["systemInstruction"],Gl(ht(r)));const i=a(t,["temperature"]);i!=null&&c(o,["temperature"],i);const l=a(t,["topP"]);l!=null&&c(o,["topP"],l);const u=a(t,["topK"]);u!=null&&c(o,["topK"],u);const d=a(t,["candidateCount"]);d!=null&&c(o,["candidateCount"],d);const f=a(t,["maxOutputTokens"]);f!=null&&c(o,["maxOutputTokens"],f);const p=a(t,["stopSequences"]);p!=null&&c(o,["stopSequences"],p);const h=a(t,["responseLogprobs"]);h!=null&&c(o,["responseLogprobs"],h);const m=a(t,["logprobs"]);m!=null&&c(o,["logprobs"],m);const v=a(t,["presencePenalty"]);v!=null&&c(o,["presencePenalty"],v);const C=a(t,["frequencyPenalty"]);C!=null&&c(o,["frequencyPenalty"],C);const S=a(t,["seed"]);S!=null&&c(o,["seed"],S);const D=a(t,["responseMimeType"]);D!=null&&c(o,["responseMimeType"],D);const b=a(t,["responseSchema"]);b!=null&&c(o,["responseSchema"],qc(b));const x=a(t,["responseJsonSchema"]);if(x!=null&&c(o,["responseJsonSchema"],x),a(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(a(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const g=a(t,["safetySettings"]);if(n!==void 0&&g!=null){let V=g;Array.isArray(V)&&(V=V.map(oe=>pE(oe))),c(n,["safetySettings"],V)}const N=a(t,["tools"]);if(n!==void 0&&N!=null){let V=Or(N);Array.isArray(V)&&(V=V.map(oe=>wE(qr(oe)))),c(n,["tools"],V)}const M=a(t,["toolConfig"]);if(n!==void 0&&M!=null&&c(n,["toolConfig"],vE(M)),a(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const T=a(t,["cachedContent"]);n!==void 0&&T!=null&&c(n,["cachedContent"],Gn(e,T));const P=a(t,["responseModalities"]);P!=null&&c(o,["responseModalities"],P);const R=a(t,["mediaResolution"]);R!=null&&c(o,["mediaResolution"],R);const j=a(t,["speechConfig"]);if(j!=null&&c(o,["speechConfig"],Oc(j)),a(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const U=a(t,["thinkingConfig"]);U!=null&&c(o,["thinkingConfig"],U);const q=a(t,["imageConfig"]);return q!=null&&c(o,["imageConfig"],K2(q)),o}function N2(e,t,n){const o={},r=a(t,["systemInstruction"]);n!==void 0&&r!=null&&c(n,["systemInstruction"],ht(r));const i=a(t,["temperature"]);i!=null&&c(o,["temperature"],i);const l=a(t,["topP"]);l!=null&&c(o,["topP"],l);const u=a(t,["topK"]);u!=null&&c(o,["topK"],u);const d=a(t,["candidateCount"]);d!=null&&c(o,["candidateCount"],d);const f=a(t,["maxOutputTokens"]);f!=null&&c(o,["maxOutputTokens"],f);const p=a(t,["stopSequences"]);p!=null&&c(o,["stopSequences"],p);const h=a(t,["responseLogprobs"]);h!=null&&c(o,["responseLogprobs"],h);const m=a(t,["logprobs"]);m!=null&&c(o,["logprobs"],m);const v=a(t,["presencePenalty"]);v!=null&&c(o,["presencePenalty"],v);const C=a(t,["frequencyPenalty"]);C!=null&&c(o,["frequencyPenalty"],C);const S=a(t,["seed"]);S!=null&&c(o,["seed"],S);const D=a(t,["responseMimeType"]);D!=null&&c(o,["responseMimeType"],D);const b=a(t,["responseSchema"]);b!=null&&c(o,["responseSchema"],qc(b));const x=a(t,["responseJsonSchema"]);x!=null&&c(o,["responseJsonSchema"],x);const g=a(t,["routingConfig"]);g!=null&&c(o,["routingConfig"],g);const N=a(t,["modelSelectionConfig"]);N!=null&&c(o,["modelConfig"],N);const M=a(t,["safetySettings"]);if(n!==void 0&&M!=null){let Q=M;Array.isArray(Q)&&(Q=Q.map(Te=>Te)),c(n,["safetySettings"],Q)}const T=a(t,["tools"]);if(n!==void 0&&T!=null){let Q=Or(T);Array.isArray(Q)&&(Q=Q.map(Te=>r0(qr(Te)))),c(n,["tools"],Q)}const P=a(t,["toolConfig"]);n!==void 0&&P!=null&&c(n,["toolConfig"],P);const R=a(t,["labels"]);n!==void 0&&R!=null&&c(n,["labels"],R);const j=a(t,["cachedContent"]);n!==void 0&&j!=null&&c(n,["cachedContent"],Gn(e,j));const U=a(t,["responseModalities"]);U!=null&&c(o,["responseModalities"],U);const q=a(t,["mediaResolution"]);q!=null&&c(o,["mediaResolution"],q);const V=a(t,["speechConfig"]);V!=null&&c(o,["speechConfig"],o0(Oc(V)));const oe=a(t,["audioTimestamp"]);oe!=null&&c(o,["audioTimestamp"],oe);const ce=a(t,["thinkingConfig"]);ce!=null&&c(o,["thinkingConfig"],ce);const fe=a(t,["imageConfig"]);return fe!=null&&c(o,["imageConfig"],X2(fe)),o}function Op(e,t){const n={},o=a(t,["model"]);o!=null&&c(n,["_url","model"],we(e,o));const r=a(t,["contents"]);if(r!=null){let l=Qt(r);Array.isArray(l)&&(l=l.map(u=>Gl(u))),c(n,["contents"],l)}const i=a(t,["config"]);return i!=null&&c(n,["generationConfig"],S2(e,i,n)),n}function Wp(e,t){const n={},o=a(t,["model"]);o!=null&&c(n,["_url","model"],we(e,o));const r=a(t,["contents"]);if(r!=null){let l=Qt(r);Array.isArray(l)&&(l=l.map(u=>u)),c(n,["contents"],l)}const i=a(t,["config"]);return i!=null&&c(n,["generationConfig"],N2(e,i,n)),n}function Jp(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&c(t,["sdkHttpResponse"],n);const o=a(e,["candidates"]);if(o!=null){let d=o;Array.isArray(d)&&(d=d.map(f=>ON(f))),c(t,["candidates"],d)}const r=a(e,["modelVersion"]);r!=null&&c(t,["modelVersion"],r);const i=a(e,["promptFeedback"]);i!=null&&c(t,["promptFeedback"],i);const l=a(e,["responseId"]);l!=null&&c(t,["responseId"],l);const u=a(e,["usageMetadata"]);return u!=null&&c(t,["usageMetadata"],u),t}function Yp(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&c(t,["sdkHttpResponse"],n);const o=a(e,["candidates"]);if(o!=null){let f=o;Array.isArray(f)&&(f=f.map(p=>p)),c(t,["candidates"],f)}const r=a(e,["createTime"]);r!=null&&c(t,["createTime"],r);const i=a(e,["modelVersion"]);i!=null&&c(t,["modelVersion"],i);const l=a(e,["promptFeedback"]);l!=null&&c(t,["promptFeedback"],l);const u=a(e,["responseId"]);u!=null&&c(t,["responseId"],u);const d=a(e,["usageMetadata"]);return d!=null&&c(t,["usageMetadata"],d),t}function E2(e,t){const n={};if(a(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(a(e,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const o=a(e,["numberOfImages"]);t!==void 0&&o!=null&&c(t,["parameters","sampleCount"],o);const r=a(e,["aspectRatio"]);t!==void 0&&r!=null&&c(t,["parameters","aspectRatio"],r);const i=a(e,["guidanceScale"]);if(t!==void 0&&i!=null&&c(t,["parameters","guidanceScale"],i),a(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=a(e,["safetyFilterLevel"]);t!==void 0&&l!=null&&c(t,["parameters","safetySetting"],l);const u=a(e,["personGeneration"]);t!==void 0&&u!=null&&c(t,["parameters","personGeneration"],u);const d=a(e,["includeSafetyAttributes"]);t!==void 0&&d!=null&&c(t,["parameters","includeSafetyAttributes"],d);const f=a(e,["includeRaiReason"]);t!==void 0&&f!=null&&c(t,["parameters","includeRaiReason"],f);const p=a(e,["language"]);t!==void 0&&p!=null&&c(t,["parameters","language"],p);const h=a(e,["outputMimeType"]);t!==void 0&&h!=null&&c(t,["parameters","outputOptions","mimeType"],h);const m=a(e,["outputCompressionQuality"]);if(t!==void 0&&m!=null&&c(t,["parameters","outputOptions","compressionQuality"],m),a(e,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(a(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const v=a(e,["imageSize"]);if(t!==void 0&&v!=null&&c(t,["parameters","sampleImageSize"],v),a(e,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function T2(e,t){const n={},o=a(e,["outputGcsUri"]);t!==void 0&&o!=null&&c(t,["parameters","storageUri"],o);const r=a(e,["negativePrompt"]);t!==void 0&&r!=null&&c(t,["parameters","negativePrompt"],r);const i=a(e,["numberOfImages"]);t!==void 0&&i!=null&&c(t,["parameters","sampleCount"],i);const l=a(e,["aspectRatio"]);t!==void 0&&l!=null&&c(t,["parameters","aspectRatio"],l);const u=a(e,["guidanceScale"]);t!==void 0&&u!=null&&c(t,["parameters","guidanceScale"],u);const d=a(e,["seed"]);t!==void 0&&d!=null&&c(t,["parameters","seed"],d);const f=a(e,["safetyFilterLevel"]);t!==void 0&&f!=null&&c(t,["parameters","safetySetting"],f);const p=a(e,["personGeneration"]);t!==void 0&&p!=null&&c(t,["parameters","personGeneration"],p);const h=a(e,["includeSafetyAttributes"]);t!==void 0&&h!=null&&c(t,["parameters","includeSafetyAttributes"],h);const m=a(e,["includeRaiReason"]);t!==void 0&&m!=null&&c(t,["parameters","includeRaiReason"],m);const v=a(e,["language"]);t!==void 0&&v!=null&&c(t,["parameters","language"],v);const C=a(e,["outputMimeType"]);t!==void 0&&C!=null&&c(t,["parameters","outputOptions","mimeType"],C);const S=a(e,["outputCompressionQuality"]);t!==void 0&&S!=null&&c(t,["parameters","outputOptions","compressionQuality"],S);const D=a(e,["addWatermark"]);t!==void 0&&D!=null&&c(t,["parameters","addWatermark"],D);const b=a(e,["labels"]);t!==void 0&&b!=null&&c(t,["labels"],b);const x=a(e,["imageSize"]);t!==void 0&&x!=null&&c(t,["parameters","sampleImageSize"],x);const g=a(e,["enhancePrompt"]);return t!==void 0&&g!=null&&c(t,["parameters","enhancePrompt"],g),n}function k2(e,t){const n={},o=a(t,["model"]);o!=null&&c(n,["_url","model"],we(e,o));const r=a(t,["prompt"]);r!=null&&c(n,["instances[0]","prompt"],r);const i=a(t,["config"]);return i!=null&&E2(i,n),n}function _2(e,t){const n={},o=a(t,["model"]);o!=null&&c(n,["_url","model"],we(e,o));const r=a(t,["prompt"]);r!=null&&c(n,["instances[0]","prompt"],r);const i=a(t,["config"]);return i!=null&&T2(i,n),n}function I2(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&c(t,["sdkHttpResponse"],n);const o=a(e,["predictions"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(l=>$2(l))),c(t,["generatedImages"],i)}const r=a(e,["positivePromptSafetyAttributes"]);return r!=null&&c(t,["positivePromptSafetyAttributes"],t0(r)),t}function A2(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&c(t,["sdkHttpResponse"],n);const o=a(e,["predictions"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(l=>Bl(l))),c(t,["generatedImages"],i)}const r=a(e,["positivePromptSafetyAttributes"]);return r!=null&&c(t,["positivePromptSafetyAttributes"],n0(r)),t}function M2(e,t){const n={},o=a(e,["numberOfVideos"]);if(t!==void 0&&o!=null&&c(t,["parameters","sampleCount"],o),a(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(a(e,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=a(e,["durationSeconds"]);if(t!==void 0&&r!=null&&c(t,["parameters","durationSeconds"],r),a(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const i=a(e,["aspectRatio"]);t!==void 0&&i!=null&&c(t,["parameters","aspectRatio"],i);const l=a(e,["resolution"]);t!==void 0&&l!=null&&c(t,["parameters","resolution"],l);const u=a(e,["personGeneration"]);if(t!==void 0&&u!=null&&c(t,["parameters","personGeneration"],u),a(e,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const d=a(e,["negativePrompt"]);t!==void 0&&d!=null&&c(t,["parameters","negativePrompt"],d);const f=a(e,["enhancePrompt"]);if(t!==void 0&&f!=null&&c(t,["parameters","enhancePrompt"],f),a(e,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const p=a(e,["lastFrame"]);t!==void 0&&p!=null&&c(t,["instances[0]","lastFrame"],ql(p));const h=a(e,["referenceImages"]);if(t!==void 0&&h!=null){let m=h;Array.isArray(m)&&(m=m.map(v=>RE(v))),c(t,["instances[0]","referenceImages"],m)}if(a(e,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(a(e,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function P2(e,t){const n={},o=a(e,["numberOfVideos"]);t!==void 0&&o!=null&&c(t,["parameters","sampleCount"],o);const r=a(e,["outputGcsUri"]);t!==void 0&&r!=null&&c(t,["parameters","storageUri"],r);const i=a(e,["fps"]);t!==void 0&&i!=null&&c(t,["parameters","fps"],i);const l=a(e,["durationSeconds"]);t!==void 0&&l!=null&&c(t,["parameters","durationSeconds"],l);const u=a(e,["seed"]);t!==void 0&&u!=null&&c(t,["parameters","seed"],u);const d=a(e,["aspectRatio"]);t!==void 0&&d!=null&&c(t,["parameters","aspectRatio"],d);const f=a(e,["resolution"]);t!==void 0&&f!=null&&c(t,["parameters","resolution"],f);const p=a(e,["personGeneration"]);t!==void 0&&p!=null&&c(t,["parameters","personGeneration"],p);const h=a(e,["pubsubTopic"]);t!==void 0&&h!=null&&c(t,["parameters","pubsubTopic"],h);const m=a(e,["negativePrompt"]);t!==void 0&&m!=null&&c(t,["parameters","negativePrompt"],m);const v=a(e,["enhancePrompt"]);t!==void 0&&v!=null&&c(t,["parameters","enhancePrompt"],v);const C=a(e,["generateAudio"]);t!==void 0&&C!=null&&c(t,["parameters","generateAudio"],C);const S=a(e,["lastFrame"]);t!==void 0&&S!=null&&c(t,["instances[0]","lastFrame"],hn(S));const D=a(e,["referenceImages"]);if(t!==void 0&&D!=null){let g=D;Array.isArray(g)&&(g=g.map(N=>DE(N))),c(t,["instances[0]","referenceImages"],g)}const b=a(e,["mask"]);t!==void 0&&b!=null&&c(t,["instances[0]","mask"],PE(b));const x=a(e,["compressionQuality"]);return t!==void 0&&x!=null&&c(t,["parameters","compressionQuality"],x),n}function R2(e){const t={},n=a(e,["name"]);n!=null&&c(t,["name"],n);const o=a(e,["metadata"]);o!=null&&c(t,["metadata"],o);const r=a(e,["done"]);r!=null&&c(t,["done"],r);const i=a(e,["error"]);i!=null&&c(t,["error"],i);const l=a(e,["response","generateVideoResponse"]);return l!=null&&c(t,["response"],F2(l)),t}function D2(e){const t={},n=a(e,["name"]);n!=null&&c(t,["name"],n);const o=a(e,["metadata"]);o!=null&&c(t,["metadata"],o);const r=a(e,["done"]);r!=null&&c(t,["done"],r);const i=a(e,["error"]);i!=null&&c(t,["error"],i);const l=a(e,["response"]);return l!=null&&c(t,["response"],U2(l)),t}function L2(e,t){const n={},o=a(t,["model"]);o!=null&&c(n,["_url","model"],we(e,o));const r=a(t,["prompt"]);r!=null&&c(n,["instances[0]","prompt"],r);const i=a(t,["image"]);i!=null&&c(n,["instances[0]","image"],ql(i));const l=a(t,["video"]);l!=null&&c(n,["instances[0]","video"],i0(l));const u=a(t,["source"]);u!=null&&z2(u,n);const d=a(t,["config"]);return d!=null&&M2(d,n),n}function j2(e,t){const n={},o=a(t,["model"]);o!=null&&c(n,["_url","model"],we(e,o));const r=a(t,["prompt"]);r!=null&&c(n,["instances[0]","prompt"],r);const i=a(t,["image"]);i!=null&&c(n,["instances[0]","image"],hn(i));const l=a(t,["video"]);l!=null&&c(n,["instances[0]","video"],s0(l));const u=a(t,["source"]);u!=null&&V2(u,n);const d=a(t,["config"]);return d!=null&&P2(d,n),n}function F2(e){const t={},n=a(e,["generatedSamples"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(l=>G2(l))),c(t,["generatedVideos"],i)}const o=a(e,["raiMediaFilteredCount"]);o!=null&&c(t,["raiMediaFilteredCount"],o);const r=a(e,["raiMediaFilteredReasons"]);return r!=null&&c(t,["raiMediaFilteredReasons"],r),t}function U2(e){const t={},n=a(e,["videos"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(l=>B2(l))),c(t,["generatedVideos"],i)}const o=a(e,["raiMediaFilteredCount"]);o!=null&&c(t,["raiMediaFilteredCount"],o);const r=a(e,["raiMediaFilteredReasons"]);return r!=null&&c(t,["raiMediaFilteredReasons"],r),t}function z2(e,t){const n={},o=a(e,["prompt"]);t!==void 0&&o!=null&&c(t,["instances[0]","prompt"],o);const r=a(e,["image"]);t!==void 0&&r!=null&&c(t,["instances[0]","image"],ql(r));const i=a(e,["video"]);return t!==void 0&&i!=null&&c(t,["instances[0]","video"],i0(i)),n}function V2(e,t){const n={},o=a(e,["prompt"]);t!==void 0&&o!=null&&c(t,["instances[0]","prompt"],o);const r=a(e,["image"]);t!==void 0&&r!=null&&c(t,["instances[0]","image"],hn(r));const i=a(e,["video"]);return t!==void 0&&i!=null&&c(t,["instances[0]","video"],s0(i)),n}function $2(e){const t={},n=a(e,["_self"]);n!=null&&c(t,["image"],Q2(n));const o=a(e,["raiFilteredReason"]);o!=null&&c(t,["raiFilteredReason"],o);const r=a(e,["_self"]);return r!=null&&c(t,["safetyAttributes"],t0(r)),t}function Bl(e){const t={},n=a(e,["_self"]);n!=null&&c(t,["image"],e0(n));const o=a(e,["raiFilteredReason"]);o!=null&&c(t,["raiFilteredReason"],o);const r=a(e,["_self"]);r!=null&&c(t,["safetyAttributes"],n0(r));const i=a(e,["prompt"]);return i!=null&&c(t,["enhancedPrompt"],i),t}function H2(e){const t={},n=a(e,["_self"]);n!=null&&c(t,["mask"],e0(n));const o=a(e,["labels"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(i=>i)),c(t,["labels"],r)}return t}function G2(e){const t={},n=a(e,["video"]);return n!=null&&c(t,["video"],AE(n)),t}function B2(e){const t={},n=a(e,["_self"]);return n!=null&&c(t,["video"],ME(n)),t}function q2(e){const t={},n=a(e,["modelSelectionConfig"]);n!=null&&c(t,["modelConfig"],n);const o=a(e,["responseJsonSchema"]);o!=null&&c(t,["responseJsonSchema"],o);const r=a(e,["audioTimestamp"]);r!=null&&c(t,["audioTimestamp"],r);const i=a(e,["candidateCount"]);i!=null&&c(t,["candidateCount"],i);const l=a(e,["enableAffectiveDialog"]);l!=null&&c(t,["enableAffectiveDialog"],l);const u=a(e,["frequencyPenalty"]);u!=null&&c(t,["frequencyPenalty"],u);const d=a(e,["logprobs"]);d!=null&&c(t,["logprobs"],d);const f=a(e,["maxOutputTokens"]);f!=null&&c(t,["maxOutputTokens"],f);const p=a(e,["mediaResolution"]);p!=null&&c(t,["mediaResolution"],p);const h=a(e,["presencePenalty"]);h!=null&&c(t,["presencePenalty"],h);const m=a(e,["responseLogprobs"]);m!=null&&c(t,["responseLogprobs"],m);const v=a(e,["responseMimeType"]);v!=null&&c(t,["responseMimeType"],v);const C=a(e,["responseModalities"]);C!=null&&c(t,["responseModalities"],C);const S=a(e,["responseSchema"]);S!=null&&c(t,["responseSchema"],S);const D=a(e,["routingConfig"]);D!=null&&c(t,["routingConfig"],D);const b=a(e,["seed"]);b!=null&&c(t,["seed"],b);const x=a(e,["speechConfig"]);x!=null&&c(t,["speechConfig"],o0(x));const g=a(e,["stopSequences"]);g!=null&&c(t,["stopSequences"],g);const N=a(e,["temperature"]);N!=null&&c(t,["temperature"],N);const M=a(e,["thinkingConfig"]);M!=null&&c(t,["thinkingConfig"],M);const T=a(e,["topK"]);T!=null&&c(t,["topK"],T);const P=a(e,["topP"]);if(P!=null&&c(t,["topP"],P),a(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function O2(e,t){const n={},o=a(t,["model"]);return o!=null&&c(n,["_url","name"],we(e,o)),n}function W2(e,t){const n={},o=a(t,["model"]);return o!=null&&c(n,["_url","name"],we(e,o)),n}function J2(e){const t={};if(a(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=a(e,["enableWidget"]);return n!=null&&c(t,["enableWidget"],n),t}function Y2(e){const t={};if(a(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=a(e,["timeRangeFilter"]);return n!=null&&c(t,["timeRangeFilter"],n),t}function K2(e){const t={},n=a(e,["aspectRatio"]);n!=null&&c(t,["aspectRatio"],n);const o=a(e,["imageSize"]);if(o!=null&&c(t,["imageSize"],o),a(e,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(a(e,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function X2(e){const t={},n=a(e,["aspectRatio"]);n!=null&&c(t,["aspectRatio"],n);const o=a(e,["imageSize"]);o!=null&&c(t,["imageSize"],o);const r=a(e,["outputMimeType"]);r!=null&&c(t,["imageOutputOptions","mimeType"],r);const i=a(e,["outputCompressionQuality"]);return i!=null&&c(t,["imageOutputOptions","compressionQuality"],i),t}function Q2(e){const t={},n=a(e,["bytesBase64Encoded"]);n!=null&&c(t,["imageBytes"],xo(n));const o=a(e,["mimeType"]);return o!=null&&c(t,["mimeType"],o),t}function e0(e){const t={},n=a(e,["gcsUri"]);n!=null&&c(t,["gcsUri"],n);const o=a(e,["bytesBase64Encoded"]);o!=null&&c(t,["imageBytes"],xo(o));const r=a(e,["mimeType"]);return r!=null&&c(t,["mimeType"],r),t}function ql(e){const t={};if(a(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=a(e,["imageBytes"]);n!=null&&c(t,["bytesBase64Encoded"],xo(n));const o=a(e,["mimeType"]);return o!=null&&c(t,["mimeType"],o),t}function hn(e){const t={},n=a(e,["gcsUri"]);n!=null&&c(t,["gcsUri"],n);const o=a(e,["imageBytes"]);o!=null&&c(t,["bytesBase64Encoded"],xo(o));const r=a(e,["mimeType"]);return r!=null&&c(t,["mimeType"],r),t}function Z2(e,t,n){const o={},r=a(t,["pageSize"]);n!==void 0&&r!=null&&c(n,["_query","pageSize"],r);const i=a(t,["pageToken"]);n!==void 0&&i!=null&&c(n,["_query","pageToken"],i);const l=a(t,["filter"]);n!==void 0&&l!=null&&c(n,["_query","filter"],l);const u=a(t,["queryBase"]);return n!==void 0&&u!=null&&c(n,["_url","models_url"],Og(e,u)),o}function eE(e,t,n){const o={},r=a(t,["pageSize"]);n!==void 0&&r!=null&&c(n,["_query","pageSize"],r);const i=a(t,["pageToken"]);n!==void 0&&i!=null&&c(n,["_query","pageToken"],i);const l=a(t,["filter"]);n!==void 0&&l!=null&&c(n,["_query","filter"],l);const u=a(t,["queryBase"]);return n!==void 0&&u!=null&&c(n,["_url","models_url"],Og(e,u)),o}function tE(e,t){const n={},o=a(t,["config"]);return o!=null&&Z2(e,o,n),n}function nE(e,t){const n={},o=a(t,["config"]);return o!=null&&eE(e,o,n),n}function oE(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&c(t,["sdkHttpResponse"],n);const o=a(e,["nextPageToken"]);o!=null&&c(t,["nextPageToken"],o);const r=a(e,["_self"]);if(r!=null){let i=Wg(r);Array.isArray(i)&&(i=i.map(l=>$u(l))),c(t,["models"],i)}return t}function rE(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&c(t,["sdkHttpResponse"],n);const o=a(e,["nextPageToken"]);o!=null&&c(t,["nextPageToken"],o);const r=a(e,["_self"]);if(r!=null){let i=Wg(r);Array.isArray(i)&&(i=i.map(l=>Hu(l))),c(t,["models"],i)}return t}function iE(e){const t={},n=a(e,["maskMode"]);n!=null&&c(t,["maskMode"],n);const o=a(e,["segmentationClasses"]);o!=null&&c(t,["maskClasses"],o);const r=a(e,["maskDilation"]);return r!=null&&c(t,["dilation"],r),t}function $u(e){const t={},n=a(e,["name"]);n!=null&&c(t,["name"],n);const o=a(e,["displayName"]);o!=null&&c(t,["displayName"],o);const r=a(e,["description"]);r!=null&&c(t,["description"],r);const i=a(e,["version"]);i!=null&&c(t,["version"],i);const l=a(e,["_self"]);l!=null&&c(t,["tunedModelInfo"],bE(l));const u=a(e,["inputTokenLimit"]);u!=null&&c(t,["inputTokenLimit"],u);const d=a(e,["outputTokenLimit"]);d!=null&&c(t,["outputTokenLimit"],d);const f=a(e,["supportedGenerationMethods"]);f!=null&&c(t,["supportedActions"],f);const p=a(e,["temperature"]);p!=null&&c(t,["temperature"],p);const h=a(e,["maxTemperature"]);h!=null&&c(t,["maxTemperature"],h);const m=a(e,["topP"]);m!=null&&c(t,["topP"],m);const v=a(e,["topK"]);v!=null&&c(t,["topK"],v);const C=a(e,["thinking"]);return C!=null&&c(t,["thinking"],C),t}function Hu(e){const t={},n=a(e,["name"]);n!=null&&c(t,["name"],n);const o=a(e,["displayName"]);o!=null&&c(t,["displayName"],o);const r=a(e,["description"]);r!=null&&c(t,["description"],r);const i=a(e,["versionId"]);i!=null&&c(t,["version"],i);const l=a(e,["deployedModels"]);if(l!=null){let h=l;Array.isArray(h)&&(h=h.map(m=>x2(m))),c(t,["endpoints"],h)}const u=a(e,["labels"]);u!=null&&c(t,["labels"],u);const d=a(e,["_self"]);d!=null&&c(t,["tunedModelInfo"],CE(d));const f=a(e,["defaultCheckpointId"]);f!=null&&c(t,["defaultCheckpointId"],f);const p=a(e,["checkpoints"]);if(p!=null){let h=p;Array.isArray(h)&&(h=h.map(m=>m)),c(t,["checkpoints"],h)}return t}function sE(e){const t={},n=a(e,["mediaResolution"]);n!=null&&c(t,["mediaResolution"],n);const o=a(e,["codeExecutionResult"]);o!=null&&c(t,["codeExecutionResult"],o);const r=a(e,["executableCode"]);r!=null&&c(t,["executableCode"],r);const i=a(e,["fileData"]);i!=null&&c(t,["fileData"],v2(i));const l=a(e,["functionCall"]);l!=null&&c(t,["functionCall"],w2(l));const u=a(e,["functionResponse"]);u!=null&&c(t,["functionResponse"],u);const d=a(e,["inlineData"]);d!=null&&c(t,["inlineData"],qN(d));const f=a(e,["text"]);f!=null&&c(t,["text"],f);const p=a(e,["thought"]);p!=null&&c(t,["thought"],p);const h=a(e,["thoughtSignature"]);h!=null&&c(t,["thoughtSignature"],h);const m=a(e,["videoMetadata"]);return m!=null&&c(t,["videoMetadata"],m),t}function lE(e){const t={},n=a(e,["productImage"]);return n!=null&&c(t,["image"],hn(n)),t}function aE(e,t){const n={},o=a(e,["numberOfImages"]);t!==void 0&&o!=null&&c(t,["parameters","sampleCount"],o);const r=a(e,["baseSteps"]);t!==void 0&&r!=null&&c(t,["parameters","baseSteps"],r);const i=a(e,["outputGcsUri"]);t!==void 0&&i!=null&&c(t,["parameters","storageUri"],i);const l=a(e,["seed"]);t!==void 0&&l!=null&&c(t,["parameters","seed"],l);const u=a(e,["safetyFilterLevel"]);t!==void 0&&u!=null&&c(t,["parameters","safetySetting"],u);const d=a(e,["personGeneration"]);t!==void 0&&d!=null&&c(t,["parameters","personGeneration"],d);const f=a(e,["addWatermark"]);t!==void 0&&f!=null&&c(t,["parameters","addWatermark"],f);const p=a(e,["outputMimeType"]);t!==void 0&&p!=null&&c(t,["parameters","outputOptions","mimeType"],p);const h=a(e,["outputCompressionQuality"]);t!==void 0&&h!=null&&c(t,["parameters","outputOptions","compressionQuality"],h);const m=a(e,["enhancePrompt"]);t!==void 0&&m!=null&&c(t,["parameters","enhancePrompt"],m);const v=a(e,["labels"]);return t!==void 0&&v!=null&&c(t,["labels"],v),n}function uE(e,t){const n={},o=a(t,["model"]);o!=null&&c(n,["_url","model"],we(e,o));const r=a(t,["source"]);r!=null&&dE(r,n);const i=a(t,["config"]);return i!=null&&aE(i,n),n}function cE(e){const t={},n=a(e,["predictions"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>Bl(r))),c(t,["generatedImages"],o)}return t}function dE(e,t){const n={},o=a(e,["prompt"]);t!==void 0&&o!=null&&c(t,["instances[0]","prompt"],o);const r=a(e,["personImage"]);t!==void 0&&r!=null&&c(t,["instances[0]","personImage","image"],hn(r));const i=a(e,["productImages"]);if(t!==void 0&&i!=null){let l=i;Array.isArray(l)&&(l=l.map(u=>lE(u))),c(t,["instances[0]","productImages"],l)}return n}function fE(e){const t={},n=a(e,["referenceImage"]);n!=null&&c(t,["referenceImage"],hn(n));const o=a(e,["referenceId"]);o!=null&&c(t,["referenceId"],o);const r=a(e,["referenceType"]);r!=null&&c(t,["referenceType"],r);const i=a(e,["maskImageConfig"]);i!=null&&c(t,["maskImageConfig"],iE(i));const l=a(e,["controlImageConfig"]);l!=null&&c(t,["controlImageConfig"],QN(l));const u=a(e,["styleImageConfig"]);u!=null&&c(t,["styleImageConfig"],u);const d=a(e,["subjectImageConfig"]);return d!=null&&c(t,["subjectImageConfig"],d),t}function t0(e){const t={},n=a(e,["safetyAttributes","categories"]);n!=null&&c(t,["categories"],n);const o=a(e,["safetyAttributes","scores"]);o!=null&&c(t,["scores"],o);const r=a(e,["contentType"]);return r!=null&&c(t,["contentType"],r),t}function n0(e){const t={},n=a(e,["safetyAttributes","categories"]);n!=null&&c(t,["categories"],n);const o=a(e,["safetyAttributes","scores"]);o!=null&&c(t,["scores"],o);const r=a(e,["contentType"]);return r!=null&&c(t,["contentType"],r),t}function pE(e){const t={},n=a(e,["category"]);if(n!=null&&c(t,["category"],n),a(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=a(e,["threshold"]);return o!=null&&c(t,["threshold"],o),t}function hE(e){const t={},n=a(e,["image"]);return n!=null&&c(t,["image"],hn(n)),t}function mE(e,t){const n={},o=a(e,["mode"]);t!==void 0&&o!=null&&c(t,["parameters","mode"],o);const r=a(e,["maxPredictions"]);t!==void 0&&r!=null&&c(t,["parameters","maxPredictions"],r);const i=a(e,["confidenceThreshold"]);t!==void 0&&i!=null&&c(t,["parameters","confidenceThreshold"],i);const l=a(e,["maskDilation"]);t!==void 0&&l!=null&&c(t,["parameters","maskDilation"],l);const u=a(e,["binaryColorThreshold"]);t!==void 0&&u!=null&&c(t,["parameters","binaryColorThreshold"],u);const d=a(e,["labels"]);return t!==void 0&&d!=null&&c(t,["labels"],d),n}function gE(e,t){const n={},o=a(t,["model"]);o!=null&&c(n,["_url","model"],we(e,o));const r=a(t,["source"]);r!=null&&xE(r,n);const i=a(t,["config"]);return i!=null&&mE(i,n),n}function yE(e){const t={},n=a(e,["predictions"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>H2(r))),c(t,["generatedMasks"],o)}return t}function xE(e,t){const n={},o=a(e,["prompt"]);t!==void 0&&o!=null&&c(t,["instances[0]","prompt"],o);const r=a(e,["image"]);t!==void 0&&r!=null&&c(t,["instances[0]","image"],hn(r));const i=a(e,["scribbleImage"]);return t!==void 0&&i!=null&&c(t,["instances[0]","scribble"],hE(i)),n}function o0(e){const t={},n=a(e,["languageCode"]);n!=null&&c(t,["languageCode"],n);const o=a(e,["voiceConfig"]);if(o!=null&&c(t,["voiceConfig"],o),a(e,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return t}function vE(e){const t={},n=a(e,["functionCallingConfig"]);n!=null&&c(t,["functionCallingConfig"],b2(n));const o=a(e,["retrievalConfig"]);return o!=null&&c(t,["retrievalConfig"],o),t}function wE(e){const t={},n=a(e,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(h=>h)),c(t,["functionDeclarations"],p)}if(a(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=a(e,["googleSearchRetrieval"]);o!=null&&c(t,["googleSearchRetrieval"],o);const r=a(e,["computerUse"]);r!=null&&c(t,["computerUse"],r);const i=a(e,["fileSearch"]);i!=null&&c(t,["fileSearch"],i);const l=a(e,["codeExecution"]);if(l!=null&&c(t,["codeExecution"],l),a(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=a(e,["googleMaps"]);u!=null&&c(t,["googleMaps"],J2(u));const d=a(e,["googleSearch"]);d!=null&&c(t,["googleSearch"],Y2(d));const f=a(e,["urlContext"]);return f!=null&&c(t,["urlContext"],f),t}function r0(e){const t={},n=a(e,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(m=>C2(m))),c(t,["functionDeclarations"],h)}const o=a(e,["retrieval"]);o!=null&&c(t,["retrieval"],o);const r=a(e,["googleSearchRetrieval"]);r!=null&&c(t,["googleSearchRetrieval"],r);const i=a(e,["computerUse"]);if(i!=null&&c(t,["computerUse"],i),a(e,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=a(e,["codeExecution"]);l!=null&&c(t,["codeExecution"],l);const u=a(e,["enterpriseWebSearch"]);u!=null&&c(t,["enterpriseWebSearch"],u);const d=a(e,["googleMaps"]);d!=null&&c(t,["googleMaps"],d);const f=a(e,["googleSearch"]);f!=null&&c(t,["googleSearch"],f);const p=a(e,["urlContext"]);return p!=null&&c(t,["urlContext"],p),t}function bE(e){const t={},n=a(e,["baseModel"]);n!=null&&c(t,["baseModel"],n);const o=a(e,["createTime"]);o!=null&&c(t,["createTime"],o);const r=a(e,["updateTime"]);return r!=null&&c(t,["updateTime"],r),t}function CE(e){const t={},n=a(e,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&c(t,["baseModel"],n);const o=a(e,["createTime"]);o!=null&&c(t,["createTime"],o);const r=a(e,["updateTime"]);return r!=null&&c(t,["updateTime"],r),t}function SE(e,t){const n={},o=a(e,["displayName"]);t!==void 0&&o!=null&&c(t,["displayName"],o);const r=a(e,["description"]);t!==void 0&&r!=null&&c(t,["description"],r);const i=a(e,["defaultCheckpointId"]);return t!==void 0&&i!=null&&c(t,["defaultCheckpointId"],i),n}function NE(e,t){const n={},o=a(e,["displayName"]);t!==void 0&&o!=null&&c(t,["displayName"],o);const r=a(e,["description"]);t!==void 0&&r!=null&&c(t,["description"],r);const i=a(e,["defaultCheckpointId"]);return t!==void 0&&i!=null&&c(t,["defaultCheckpointId"],i),n}function EE(e,t){const n={},o=a(t,["model"]);o!=null&&c(n,["_url","name"],we(e,o));const r=a(t,["config"]);return r!=null&&SE(r,n),n}function TE(e,t){const n={},o=a(t,["model"]);o!=null&&c(n,["_url","model"],we(e,o));const r=a(t,["config"]);return r!=null&&NE(r,n),n}function kE(e,t){const n={},o=a(e,["outputGcsUri"]);t!==void 0&&o!=null&&c(t,["parameters","storageUri"],o);const r=a(e,["safetyFilterLevel"]);t!==void 0&&r!=null&&c(t,["parameters","safetySetting"],r);const i=a(e,["personGeneration"]);t!==void 0&&i!=null&&c(t,["parameters","personGeneration"],i);const l=a(e,["includeRaiReason"]);t!==void 0&&l!=null&&c(t,["parameters","includeRaiReason"],l);const u=a(e,["outputMimeType"]);t!==void 0&&u!=null&&c(t,["parameters","outputOptions","mimeType"],u);const d=a(e,["outputCompressionQuality"]);t!==void 0&&d!=null&&c(t,["parameters","outputOptions","compressionQuality"],d);const f=a(e,["enhanceInputImage"]);t!==void 0&&f!=null&&c(t,["parameters","upscaleConfig","enhanceInputImage"],f);const p=a(e,["imagePreservationFactor"]);t!==void 0&&p!=null&&c(t,["parameters","upscaleConfig","imagePreservationFactor"],p);const h=a(e,["labels"]);t!==void 0&&h!=null&&c(t,["labels"],h);const m=a(e,["numberOfImages"]);t!==void 0&&m!=null&&c(t,["parameters","sampleCount"],m);const v=a(e,["mode"]);return t!==void 0&&v!=null&&c(t,["parameters","mode"],v),n}function _E(e,t){const n={},o=a(t,["model"]);o!=null&&c(n,["_url","model"],we(e,o));const r=a(t,["image"]);r!=null&&c(n,["instances[0]","image"],hn(r));const i=a(t,["upscaleFactor"]);i!=null&&c(n,["parameters","upscaleConfig","upscaleFactor"],i);const l=a(t,["config"]);return l!=null&&kE(l,n),n}function IE(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&c(t,["sdkHttpResponse"],n);const o=a(e,["predictions"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(i=>Bl(i))),c(t,["generatedImages"],r)}return t}function AE(e){const t={},n=a(e,["uri"]);n!=null&&c(t,["uri"],n);const o=a(e,["encodedVideo"]);o!=null&&c(t,["videoBytes"],xo(o));const r=a(e,["encoding"]);return r!=null&&c(t,["mimeType"],r),t}function ME(e){const t={},n=a(e,["gcsUri"]);n!=null&&c(t,["uri"],n);const o=a(e,["bytesBase64Encoded"]);o!=null&&c(t,["videoBytes"],xo(o));const r=a(e,["mimeType"]);return r!=null&&c(t,["mimeType"],r),t}function PE(e){const t={},n=a(e,["image"]);n!=null&&c(t,["_self"],hn(n));const o=a(e,["maskMode"]);return o!=null&&c(t,["maskMode"],o),t}function RE(e){const t={},n=a(e,["image"]);n!=null&&c(t,["image"],ql(n));const o=a(e,["referenceType"]);return o!=null&&c(t,["referenceType"],o),t}function DE(e){const t={},n=a(e,["image"]);n!=null&&c(t,["image"],hn(n));const o=a(e,["referenceType"]);return o!=null&&c(t,["referenceType"],o),t}function i0(e){const t={},n=a(e,["uri"]);n!=null&&c(t,["uri"],n);const o=a(e,["videoBytes"]);o!=null&&c(t,["encodedVideo"],xo(o));const r=a(e,["mimeType"]);return r!=null&&c(t,["encoding"],r),t}function s0(e){const t={},n=a(e,["uri"]);n!=null&&c(t,["gcsUri"],n);const o=a(e,["videoBytes"]);o!=null&&c(t,["bytesBase64Encoded"],xo(o));const r=a(e,["mimeType"]);return r!=null&&c(t,["mimeType"],r),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const LE="Content-Type",jE="X-Server-Timeout",FE="User-Agent",Gu="x-goog-api-client",UE="1.30.0",zE=`google-genai-sdk/${UE}`,VE="v1beta1",$E="v1beta",Kp=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class HE{constructor(t){var n,o;this.clientOptions=Object.assign(Object.assign({},t),{project:t.project,location:t.location,apiKey:t.apiKey,vertexai:t.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:VE,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:$E,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,t.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,t.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var t;return(t=this.clientOptions.vertexai)!==null&&t!==void 0?t:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(t){if(!t||t.baseUrl===void 0||t.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const o=[t.baseUrl.endsWith("/")?t.baseUrl.slice(0,-1):t.baseUrl];return t.apiVersion&&t.apiVersion!==""&&o.push(t.apiVersion),o.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const t=this.getBaseUrl(),n=new URL(t);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(t){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=t;else throw new Error("HTTP options are not correctly set.")}constructUrl(t,n,o){const r=[this.getRequestUrlInternal(n)];return o&&r.push(this.getBaseResourcePath()),t!==""&&r.push(t),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(t){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||t.path.startsWith("projects/")||t.httpMethod==="GET"&&t.path.startsWith("publishers/google/models"))}async request(t){let n=this.clientOptions.httpOptions;t.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const o=this.shouldPrependVertexProjectPath(t),r=this.constructUrl(t.path,n,o);if(t.queryParams)for(const[l,u]of Object.entries(t.queryParams))r.searchParams.append(l,String(u));let i={};if(t.httpMethod==="GET"){if(t.body&&t.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else i.body=t.body;return i=await this.includeExtraHttpOptionsToRequestInit(i,n,r.toString(),t.abortSignal),this.unaryApiCall(r,i,t.httpMethod)}patchHttpOptions(t,n){const o=JSON.parse(JSON.stringify(t));for(const[r,i]of Object.entries(n))typeof i=="object"?o[r]=Object.assign(Object.assign({},o[r]),i):i!==void 0&&(o[r]=i);return o}async requestStream(t){let n=this.clientOptions.httpOptions;t.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const o=this.shouldPrependVertexProjectPath(t),r=this.constructUrl(t.path,n,o);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let i={};return i.body=t.body,i=await this.includeExtraHttpOptionsToRequestInit(i,n,r.toString(),t.abortSignal),this.streamApiCall(r,i,t.httpMethod)}async includeExtraHttpOptionsToRequestInit(t,n,o,r){if(n&&n.timeout||r){const i=new AbortController,l=i.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const u=setTimeout(()=>i.abort(),n.timeout);u&&typeof u.unref=="function"&&u.unref()}r&&r.addEventListener("abort",()=>{i.abort()}),t.signal=l}return n&&n.extraBody!==null&&GE(t,n.extraBody),t.headers=await this.getHeadersInternal(n,o),t}async unaryApiCall(t,n,o){return this.apiCall(t.toString(),Object.assign(Object.assign({},n),{method:o})).then(async r=>(await Xp(r),new Uu(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(t,n,o){return this.apiCall(t.toString(),Object.assign(Object.assign({},n),{method:o})).then(async r=>(await Xp(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(t){var n;return Rr(this,arguments,function*(){const r=(n=t==null?void 0:t.body)===null||n===void 0?void 0:n.getReader(),i=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let l="";for(;;){const{done:u,value:d}=yield Pe(r.read());if(u){if(l.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const f=i.decode(d,{stream:!0});try{const h=JSON.parse(f);if("error"in h){const m=JSON.parse(JSON.stringify(h.error)),v=m.status,C=m.code,S=`got status: ${v}. ${JSON.stringify(h)}`;if(C>=400&&C<600)throw new Hl({message:S,status:C})}}catch(h){if(h.name==="ApiError")throw h}l+=f;let p=l.match(Kp);for(;p;){const h=p[1];try{const m=new Response(h,{headers:t==null?void 0:t.headers,status:t==null?void 0:t.status,statusText:t==null?void 0:t.statusText});yield yield Pe(new Uu(m)),l=l.slice(p[0].length),p=l.match(Kp)}catch(m){throw new Error(`exception parsing stream chunk ${h}. ${m}`)}}}}finally{r.releaseLock()}})}async apiCall(t,n){return fetch(t,n).catch(o=>{throw new Error(`exception ${o} sending request`)})}getDefaultHeaders(){const t={},n=zE+" "+this.clientOptions.userAgentExtra;return t[FE]=n,t[Gu]=n,t[LE]="application/json",t}async getHeadersInternal(t,n){const o=new Headers;if(t&&t.headers){for(const[r,i]of Object.entries(t.headers))o.append(r,i);t.timeout&&t.timeout>0&&o.append(jE,String(Math.ceil(t.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(o,n),o}getFileName(t){var n;let o="";return typeof t=="string"&&(o=t.replace(/[/\\]+$/,""),o=(n=o.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),o}async uploadFile(t,n){var o;const r={};n!=null&&(r.mimeType=n.mimeType,r.name=n.name,r.displayName=n.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const i=this.clientOptions.uploader,l=await i.stat(t);r.sizeBytes=String(l.size);const u=(o=n==null?void 0:n.mimeType)!==null&&o!==void 0?o:l.type;if(u===void 0||u==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=u;const d={file:r},f=this.getFileName(t),p=X("upload/v1beta/files",d._url),h=await this.fetchUploadUrl(p,r.sizeBytes,r.mimeType,f,d,n==null?void 0:n.httpOptions);return i.upload(t,h,this)}async uploadFileToFileSearchStore(t,n,o){var r;const i=this.clientOptions.uploader,l=await i.stat(n),u=String(l.size),d=(r=o==null?void 0:o.mimeType)!==null&&r!==void 0?r:l.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const f=`upload/v1beta/${t}:uploadToFileSearchStore`,p=this.getFileName(n),h={};o!=null&&o.customMetadata&&(h.customMetadata=o.customMetadata),o!=null&&o.chunkingConfig&&(h.chunkingConfig=o.chunkingConfig);const m=await this.fetchUploadUrl(f,u,d,p,h,o==null?void 0:o.httpOptions);return i.uploadToFileSearchStore(n,m,this)}async downloadFile(t){await this.clientOptions.downloader.download(t,this)}async fetchUploadUrl(t,n,o,r,i,l){var u;let d={};l?d=l:d={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${o}`},r?{"X-Goog-Upload-File-Name":r}:{})};const f=await this.request({path:t,body:JSON.stringify(i),httpMethod:"POST",httpOptions:d});if(!f||!(f!=null&&f.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const p=(u=f==null?void 0:f.headers)===null||u===void 0?void 0:u["x-goog-upload-url"];if(p===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return p}}async function Xp(e){var t;if(e===void 0)throw new Error("response is undefined");if(!e.ok){const n=e.status;let o;!((t=e.headers.get("content-type"))===null||t===void 0)&&t.includes("application/json")?o=await e.json():o={error:{message:await e.text(),code:e.status,status:e.statusText}};const r=JSON.stringify(o);throw n>=400&&n<600?new Hl({message:r,status:n}):new Error(r)}}function GE(e,t){if(!t||Object.keys(t).length===0)return;if(e.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof e.body=="string"&&e.body.length>0)try{const i=JSON.parse(e.body);if(typeof i=="object"&&i!==null&&!Array.isArray(i))n=i;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function o(i,l){const u=Object.assign({},i);for(const d in l)if(Object.prototype.hasOwnProperty.call(l,d)){const f=l[d],p=u[d];f&&typeof f=="object"&&!Array.isArray(f)&&p&&typeof p=="object"&&!Array.isArray(p)?u[d]=o(p,f):(p&&f&&typeof p!=typeof f&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${d}". Original type: ${typeof p}, New type: ${typeof f}. Overwriting.`),u[d]=f)}return u}const r=o(n,t);e.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const BE="mcp_used/unknown";let qE=!1;function l0(e){for(const t of e)if(OE(t)||typeof t=="object"&&"inputSchema"in t)return!0;return qE}function a0(e){var t;const n=(t=e[Gu])!==null&&t!==void 0?t:"";e[Gu]=(n+` ${BE}`).trimStart()}function OE(e){return e!==null&&typeof e=="object"&&e instanceof Jc}function WE(e,t=100){return Rr(this,arguments,function*(){let o,r=0;for(;r<t;){const i=yield Pe(e.listTools({cursor:o}));for(const l of i.tools)yield yield Pe(l),r++;if(!i.nextCursor)break;o=i.nextCursor}})}class Jc{constructor(t=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=t,this.config=n}static create(t,n){return new Jc(t,n)}async initialize(){var t,n,o,r;if(this.mcpTools.length>0)return;const i={},l=[];for(const p of this.mcpClients)try{for(var u=!0,d=(n=void 0,Pi(WE(p))),f;f=await d.next(),t=f.done,!t;u=!0){r=f.value,u=!1;const h=r;l.push(h);const m=h.name;if(i[m])throw new Error(`Duplicate function name ${m} found in MCP tools. Please ensure function names are unique.`);i[m]=p}}catch(h){n={error:h}}finally{try{!u&&!t&&(o=d.return)&&await o.call(d)}finally{if(n)throw n.error}}this.mcpTools=l,this.functionNameToMcpClient=i}async tool(){return await this.initialize(),zC(this.mcpTools,this.config)}async callTool(t){await this.initialize();const n=[];for(const o of t)if(o.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[o.name];let i;this.config.timeout&&(i={timeout:this.config.timeout});const l=await r.callTool({name:o.name,arguments:o.args},void 0,i);n.push({functionResponse:{name:o.name,response:l.isError?{error:l}:l}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function JE(e,t,n){const o=new MC;let r;n.data instanceof Blob?r=JSON.parse(await n.data.text()):r=JSON.parse(n.data),Object.assign(o,r),t(o)}class YE{constructor(t,n,o){this.apiClient=t,this.auth=n,this.webSocketFactory=o}async connect(t){var n,o;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),i=this.apiClient.getApiVersion(),l=QE(this.apiClient.getDefaultHeaders()),u=this.apiClient.getApiKey(),d=`${r}/ws/google.ai.generativelanguage.${i}.GenerativeService.BidiGenerateMusic?key=${u}`;let f=()=>{};const p=new Promise(g=>{f=g}),h=t.callbacks,m=function(){f({})},v=this.apiClient,C={onopen:m,onmessage:g=>{JE(v,h.onmessage,g)},onerror:(n=h==null?void 0:h.onerror)!==null&&n!==void 0?n:function(g){},onclose:(o=h==null?void 0:h.onclose)!==null&&o!==void 0?o:function(g){}},S=this.webSocketFactory.create(d,XE(l),C);S.connect(),await p;const x={setup:{model:we(this.apiClient,t.model)}};return S.send(JSON.stringify(x)),new KE(S,this.apiClient)}}class KE{constructor(t,n){this.conn=t,this.apiClient=n}async setWeightedPrompts(t){if(!t.weightedPrompts||Object.keys(t.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=jN(t);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(t){t.musicGenerationConfig||(t.musicGenerationConfig={});const n=LN(t);this.conn.send(JSON.stringify(n))}sendPlaybackControl(t){const n={playbackControl:t};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(Er.PLAY)}pause(){this.sendPlaybackControl(Er.PAUSE)}stop(){this.sendPlaybackControl(Er.STOP)}resetContext(){this.sendPlaybackControl(Er.RESET_CONTEXT)}close(){this.conn.close()}}function XE(e){const t={};return e.forEach((n,o)=>{t[o]=n}),t}function QE(e){const t=new Headers;for(const[n,o]of Object.entries(e))t.append(n,o);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ZE="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function eT(e,t,n){const o=new AC;let r;n.data instanceof Blob?r=await n.data.text():n.data instanceof ArrayBuffer?r=new TextDecoder().decode(n.data):r=n.data;const i=JSON.parse(r);if(e.isVertexAI()){const l=zN(i);Object.assign(o,l)}else Object.assign(o,i);t(o)}class tT{constructor(t,n,o){this.apiClient=t,this.auth=n,this.webSocketFactory=o,this.music=new YE(this.apiClient,this.auth,this.webSocketFactory)}async connect(t){var n,o,r,i,l,u;if(t.config&&t.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const d=this.apiClient.getWebsocketBaseUrl(),f=this.apiClient.getApiVersion();let p;const h=this.apiClient.getHeaders();t.config&&t.config.tools&&l0(t.config.tools)&&a0(h);const m=iT(h);if(this.apiClient.isVertexAI())p=`${d}/ws/google.cloud.aiplatform.${f}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(m,p);else{const j=this.apiClient.getApiKey();let U="BidiGenerateContent",q="key";j!=null&&j.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),f!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),U="BidiGenerateContentConstrained",q="access_token"),p=`${d}/ws/google.ai.generativelanguage.${f}.GenerativeService.${U}?${q}=${j}`}let v=()=>{};const C=new Promise(j=>{v=j}),S=t.callbacks,D=function(){var j;(j=S==null?void 0:S.onopen)===null||j===void 0||j.call(S),v({})},b=this.apiClient,x={onopen:D,onmessage:j=>{eT(b,S.onmessage,j)},onerror:(n=S==null?void 0:S.onerror)!==null&&n!==void 0?n:function(j){},onclose:(o=S==null?void 0:S.onclose)!==null&&o!==void 0?o:function(j){}},g=this.webSocketFactory.create(p,rT(m),x);g.connect(),await C;let N=we(this.apiClient,t.model);if(this.apiClient.isVertexAI()&&N.startsWith("publishers/")){const j=this.apiClient.getProject(),U=this.apiClient.getLocation();N=`projects/${j}/locations/${U}/`+N}let M={};this.apiClient.isVertexAI()&&((r=t.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(t.config===void 0?t.config={responseModalities:[wl.AUDIO]}:t.config.responseModalities=[wl.AUDIO]),!((i=t.config)===null||i===void 0)&&i.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const T=(u=(l=t.config)===null||l===void 0?void 0:l.tools)!==null&&u!==void 0?u:[],P=[];for(const j of T)if(this.isCallableTool(j)){const U=j;P.push(await U.tool())}else P.push(j);P.length>0&&(t.config.tools=P);const R={model:N,config:t.config,callbacks:t.callbacks};return this.apiClient.isVertexAI()?M=DN(this.apiClient,R):M=RN(this.apiClient,R),delete M.config,g.send(JSON.stringify(M)),new oT(g,this.apiClient)}isCallableTool(t){return"callTool"in t&&typeof t.callTool=="function"}}const nT={turnComplete:!0};class oT{constructor(t,n){this.conn=t,this.apiClient=n}tLiveClientContent(t,n){if(n.turns!==null&&n.turns!==void 0){let o=[];try{o=Qt(n.turns),t.isVertexAI()||(o=o.map(r=>Gl(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:o,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(t,n){let o=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?o=n.functionResponses:o=[n.functionResponses],o.length===0)throw new Error("functionResponses is required.");for(const i of o){if(typeof i!="object"||i===null||!("name"in i)||!("response"in i))throw new Error(`Could not parse function response, type '${typeof i}'.`);if(!t.isVertexAI()&&!("id"in i))throw new Error(ZE)}return{toolResponse:{functionResponses:o}}}sendClientContent(t){t=Object.assign(Object.assign({},nT),t);const n=this.tLiveClientContent(this.apiClient,t);this.conn.send(JSON.stringify(n))}sendRealtimeInput(t){let n={};this.apiClient.isVertexAI()?n={realtimeInput:UN(t)}:n={realtimeInput:FN(t)},this.conn.send(JSON.stringify(n))}sendToolResponse(t){if(t.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,t);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function rT(e){const t={};return e.forEach((n,o)=>{t[o]=n}),t}function iT(e){const t=new Headers;for(const[n,o]of Object.entries(e))t.append(n,o);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Qp=10;function Zp(e){var t,n,o;if(!((t=e==null?void 0:e.automaticFunctionCalling)===null||t===void 0)&&t.disable)return!0;let r=!1;for(const l of(n=e==null?void 0:e.tools)!==null&&n!==void 0?n:[])if(Dr(l)){r=!0;break}if(!r)return!0;const i=(o=e==null?void 0:e.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls;return i&&(i<0||!Number.isInteger(i))||i==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",i),!0):!1}function Dr(e){return"callTool"in e&&typeof e.callTool=="function"}function sT(e){var t,n,o;return(o=(n=(t=e.config)===null||t===void 0?void 0:t.tools)===null||n===void 0?void 0:n.some(r=>Dr(r)))!==null&&o!==void 0?o:!1}function eh(e){var t;const n=[];return!((t=e==null?void 0:e.config)===null||t===void 0)&&t.tools&&e.config.tools.forEach((o,r)=>{if(Dr(o))return;const i=o;i.functionDeclarations&&i.functionDeclarations.length>0&&n.push(r)}),n}function th(e){var t;return!(!((t=e==null?void 0:e.automaticFunctionCalling)===null||t===void 0)&&t.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class lT extends Hn{constructor(t){super(),this.apiClient=t,this.generateContent=async n=>{var o,r,i,l,u;const d=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!sT(n)||Zp(n.config))return await this.generateContentInternal(d);const f=eh(n);if(f.length>0){const S=f.map(D=>`tools[${D}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${S}.`)}let p,h;const m=Qt(d.contents),v=(i=(r=(o=d.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&i!==void 0?i:Qp;let C=0;for(;C<v&&(p=await this.generateContentInternal(d),!(!p.functionCalls||p.functionCalls.length===0));){const S=p.candidates[0].content,D=[];for(const b of(u=(l=n.config)===null||l===void 0?void 0:l.tools)!==null&&u!==void 0?u:[])if(Dr(b)){const g=await b.callTool(p.functionCalls);D.push(...g)}C++,h={role:"user",parts:D},d.contents=Qt(d.contents),d.contents.push(S),d.contents.push(h),th(d.config)&&(m.push(S),m.push(h))}return th(d.config)&&(p.automaticFunctionCallingHistory=m),p},this.generateContentStream=async n=>{var o,r,i,l,u;if(this.maybeMoveToResponseJsonSchem(n),Zp(n.config)){const h=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(h)}const d=eh(n);if(d.length>0){const h=d.map(m=>`tools[${m}]`).join(", ");throw new Error(`Incompatible tools found at ${h}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const f=(i=(r=(o=n==null?void 0:n.config)===null||o===void 0?void 0:o.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||i===void 0?void 0:i.streamFunctionCallArguments,p=(u=(l=n==null?void 0:n.config)===null||l===void 0?void 0:l.automaticFunctionCalling)===null||u===void 0?void 0:u.disable;if(f&&!p)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(o=>{var r;let i;const l=[];if(o!=null&&o.generatedImages)for(const d of o.generatedImages)d&&(d!=null&&d.safetyAttributes)&&((r=d==null?void 0:d.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?i=d==null?void 0:d.safetyAttributes:l.push(d);let u;return i?u={generatedImages:l,positivePromptSafetyAttributes:i,sdkHttpResponse:o.sdkHttpResponse}:u={generatedImages:l,sdkHttpResponse:o.sdkHttpResponse},u}),this.list=async n=>{var o;const l={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!l.config.queryBase){if(!((o=l.config)===null||o===void 0)&&o.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");l.config.filter="labels.tune-type:*"}return new Bo(Vn.PAGED_ITEM_MODELS,u=>this.listInternal(u),await this.listInternal(l),l)},this.editImage=async n=>{const o={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(o.referenceImages=n.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(o)},this.upscaleImage=async n=>{let o={numberOfImages:1,mode:"upscale"};n.config&&(o=Object.assign(Object.assign({},o),n.config));const r={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:o};return await this.upscaleImageInternal(r)},this.generateVideos=async n=>{var o,r,i,l,u,d;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((o=n.video)===null||o===void 0)&&o.uri&&(!((r=n.video)===null||r===void 0)&&r.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((l=(i=n.source)===null||i===void 0?void 0:i.video)===null||l===void 0)&&l.uri&&(!((d=(u=n.source)===null||u===void 0?void 0:u.video)===null||d===void 0)&&d.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(t){t.config&&t.config.responseSchema&&(t.config.responseJsonSchema||Object.keys(t.config.responseSchema).includes("$schema")&&(t.config.responseJsonSchema=t.config.responseSchema,delete t.config.responseSchema))}async processParamsMaybeAddMcpUsage(t){var n,o,r;const i=(n=t.config)===null||n===void 0?void 0:n.tools;if(!i)return t;const l=await Promise.all(i.map(async d=>Dr(d)?await d.tool():d)),u={model:t.model,contents:t.contents,config:Object.assign(Object.assign({},t.config),{tools:l})};if(u.config.tools=l,t.config&&t.config.tools&&l0(t.config.tools)){const d=(r=(o=t.config.httpOptions)===null||o===void 0?void 0:o.headers)!==null&&r!==void 0?r:{};let f=Object.assign({},d);Object.keys(f).length===0&&(f=this.apiClient.getDefaultHeaders()),a0(f),u.config.httpOptions=Object.assign(Object.assign({},t.config.httpOptions),{headers:f})}return u}async initAfcToolsMap(t){var n,o,r;const i=new Map;for(const l of(o=(n=t.config)===null||n===void 0?void 0:n.tools)!==null&&o!==void 0?o:[])if(Dr(l)){const u=l,d=await u.tool();for(const f of(r=d.functionDeclarations)!==null&&r!==void 0?r:[]){if(!f.name)throw new Error("Function declaration name is required.");if(i.has(f.name))throw new Error(`Duplicate tool declaration name: ${f.name}`);i.set(f.name,u)}}return i}async processAfcStream(t){var n,o,r;const i=(r=(o=(n=t.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&r!==void 0?r:Qp;let l=!1,u=0;const d=await this.initAfcToolsMap(t);return function(f,p,h){var m,v;return Rr(this,arguments,function*(){for(var C,S,D,b;u<i;){l&&(u++,l=!1);const M=yield Pe(f.processParamsMaybeAddMcpUsage(h)),T=yield Pe(f.generateContentStreamInternal(M)),P=[],R=[];try{for(var x=!0,g=(S=void 0,Pi(T)),N;N=yield Pe(g.next()),C=N.done,!C;x=!0){b=N.value,x=!1;const j=b;if(yield yield Pe(j),j.candidates&&(!((m=j.candidates[0])===null||m===void 0)&&m.content)){R.push(j.candidates[0].content);for(const U of(v=j.candidates[0].content.parts)!==null&&v!==void 0?v:[])if(u<i&&U.functionCall){if(!U.functionCall.name)throw new Error("Function call name was not returned by the model.");if(p.has(U.functionCall.name)){const q=yield Pe(p.get(U.functionCall.name).callTool([U.functionCall]));P.push(...q)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${p.keys()}, mising tool: ${U.functionCall.name}`)}}}}catch(j){S={error:j}}finally{try{!x&&!C&&(D=g.return)&&(yield Pe(D.call(g)))}finally{if(S)throw S.error}}if(P.length>0){l=!0;const j=new hi;j.candidates=[{content:{role:"user",parts:P}}],yield yield Pe(j);const U=[];U.push(...R),U.push({role:"user",parts:P});const q=Qt(h.contents).concat(U);h.contents=q}else break}})}(this,d,t)}async generateContentInternal(t){var n,o,r,i;let l,u="",d={};if(this.apiClient.isVertexAI()){const f=Wp(this.apiClient,t);return u=X("{model}:generateContent",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:p.headers},m})),l.then(p=>{const h=Yp(p),m=new hi;return Object.assign(m,h),m})}else{const f=Op(this.apiClient,t);return u=X("{model}:generateContent",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:p.headers},m})),l.then(p=>{const h=Jp(p),m=new hi;return Object.assign(m,h),m})}}async generateContentStreamInternal(t){var n,o,r,i;let l,u="",d={};if(this.apiClient.isVertexAI()){const f=Wp(this.apiClient,t);return u=X("{model}:streamGenerateContent?alt=sse",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.requestStream({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}),l.then(function(h){return Rr(this,arguments,function*(){var m,v,C,S;try{for(var D=!0,b=Pi(h),x;x=yield Pe(b.next()),m=x.done,!m;D=!0){S=x.value,D=!1;const g=S,N=Yp(yield Pe(g.json()));N.sdkHttpResponse={headers:g.headers};const M=new hi;Object.assign(M,N),yield yield Pe(M)}}catch(g){v={error:g}}finally{try{!D&&!m&&(C=b.return)&&(yield Pe(C.call(b)))}finally{if(v)throw v.error}}})})}else{const f=Op(this.apiClient,t);return u=X("{model}:streamGenerateContent?alt=sse",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.requestStream({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}),l.then(function(h){return Rr(this,arguments,function*(){var m,v,C,S;try{for(var D=!0,b=Pi(h),x;x=yield Pe(b.next()),m=x.done,!m;D=!0){S=x.value,D=!1;const g=S,N=Jp(yield Pe(g.json()));N.sdkHttpResponse={headers:g.headers};const M=new hi;Object.assign(M,N),yield yield Pe(M)}}catch(g){v={error:g}}finally{try{!D&&!m&&(C=b.return)&&(yield Pe(C.call(b)))}finally{if(v)throw v.error}}})})}}async embedContent(t){var n,o,r,i;let l,u="",d={};if(this.apiClient.isVertexAI()){const f=m2(this.apiClient,t);return u=X("{model}:predict",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:p.headers},m})),l.then(p=>{const h=y2(p),m=new Ap;return Object.assign(m,h),m})}else{const f=h2(this.apiClient,t);return u=X("{model}:batchEmbedContents",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:p.headers},m})),l.then(p=>{const h=g2(p),m=new Ap;return Object.assign(m,h),m})}}async generateImagesInternal(t){var n,o,r,i;let l,u="",d={};if(this.apiClient.isVertexAI()){const f=_2(this.apiClient,t);return u=X("{model}:predict",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:p.headers},m})),l.then(p=>{const h=A2(p),m=new Mp;return Object.assign(m,h),m})}else{const f=k2(this.apiClient,t);return u=X("{model}:predict",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:p.headers},m})),l.then(p=>{const h=I2(p),m=new Mp;return Object.assign(m,h),m})}}async editImageInternal(t){var n,o;let r,i="",l={};if(this.apiClient.isVertexAI()){const u=c2(this.apiClient,t);return i=X("{model}:predict",u._url),l=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(f=>{const p=f;return p.sdkHttpResponse={headers:d.headers},p})),r.then(d=>{const f=d2(d),p=new vC;return Object.assign(p,f),p})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(t){var n,o;let r,i="",l={};if(this.apiClient.isVertexAI()){const u=_E(this.apiClient,t);return i=X("{model}:predict",u._url),l=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(f=>{const p=f;return p.sdkHttpResponse={headers:d.headers},p})),r.then(d=>{const f=IE(d),p=new wC;return Object.assign(p,f),p})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(t){var n,o;let r,i="",l={};if(this.apiClient.isVertexAI()){const u=uE(this.apiClient,t);return i=X("{model}:predict",u._url),l=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),r.then(d=>{const f=cE(d),p=new bC;return Object.assign(p,f),p})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(t){var n,o;let r,i="",l={};if(this.apiClient.isVertexAI()){const u=gE(this.apiClient,t);return i=X("{model}:predict",u._url),l=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),r.then(d=>{const f=yE(d),p=new CC;return Object.assign(p,f),p})}else throw new Error("This method is only supported by the Vertex AI.")}async get(t){var n,o,r,i;let l,u="",d={};if(this.apiClient.isVertexAI()){const f=W2(this.apiClient,t);return u=X("{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),l.then(p=>Hu(p))}else{const f=O2(this.apiClient,t);return u=X("{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>$u(p))}}async listInternal(t){var n,o,r,i;let l,u="",d={};if(this.apiClient.isVertexAI()){const f=nE(this.apiClient,t);return u=X("{models_url}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:p.headers},m})),l.then(p=>{const h=rE(p),m=new Pp;return Object.assign(m,h),m})}else{const f=tE(this.apiClient,t);return u=X("{models_url}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:p.headers},m})),l.then(p=>{const h=oE(p),m=new Pp;return Object.assign(m,h),m})}}async update(t){var n,o,r,i;let l,u="",d={};if(this.apiClient.isVertexAI()){const f=TE(this.apiClient,t);return u=X("{model}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),l.then(p=>Hu(p))}else{const f=EE(this.apiClient,t);return u=X("{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>$u(p))}}async delete(t){var n,o,r,i;let l,u="",d={};if(this.apiClient.isVertexAI()){const f=s2(this.apiClient,t);return u=X("{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:p.headers},m})),l.then(p=>{const h=a2(p),m=new Rp;return Object.assign(m,h),m})}else{const f=i2(this.apiClient,t);return u=X("{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:p.headers},m})),l.then(p=>{const h=l2(p),m=new Rp;return Object.assign(m,h),m})}}async countTokens(t){var n,o,r,i;let l,u="",d={};if(this.apiClient.isVertexAI()){const f=n2(this.apiClient,t);return u=X("{model}:countTokens",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:p.headers},m})),l.then(p=>{const h=r2(p),m=new Dp;return Object.assign(m,h),m})}else{const f=t2(this.apiClient,t);return u=X("{model}:countTokens",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:p.headers},m})),l.then(p=>{const h=o2(p),m=new Dp;return Object.assign(m,h),m})}}async computeTokens(t){var n,o;let r,i="",l={};if(this.apiClient.isVertexAI()){const u=JN(this.apiClient,t);return i=X("{model}:computeTokens",u._url),l=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(f=>{const p=f;return p.sdkHttpResponse={headers:d.headers},p})),r.then(d=>{const f=YN(d),p=new SC;return Object.assign(p,f),p})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(t){var n,o,r,i;let l,u="",d={};if(this.apiClient.isVertexAI()){const f=j2(this.apiClient,t);return u=X("{model}:predictLongRunning",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),l.then(p=>{const h=D2(p),m=new bl;return Object.assign(m,h),m})}else{const f=L2(this.apiClient,t);return u=X("{model}:predictLongRunning",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>{const h=R2(p),m=new bl;return Object.assign(m,h),m})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class aT extends Hn{constructor(t){super(),this.apiClient=t}async getVideosOperation(t){const n=t.operation,o=t.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let i;o&&"httpOptions"in o&&(i=o.httpOptions);const l=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:i}});return n._fromAPIResponse({apiResponse:l,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:o});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(t){const n=t.operation,o=t.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let i;o&&"httpOptions"in o&&(i=o.httpOptions);const l=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:i}});return n._fromAPIResponse({apiResponse:l,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:o});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(t){var n,o,r,i;let l,u="",d={};if(this.apiClient.isVertexAI()){const f=pC(t);return u=X("{operationName}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),l}else{const f=fC(t);return u=X("{operationName}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l}}async fetchPredictVideosOperationInternal(t){var n,o;let r,i="",l={};if(this.apiClient.isVertexAI()){const u=iC(t);return i=X("{resourceName}:fetchPredictOperation",u._url),l=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function uT(e){const t={},n=a(e,["data"]);if(n!=null&&c(t,["data"],n),a(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=a(e,["mimeType"]);return o!=null&&c(t,["mimeType"],o),t}function cT(e){const t={},n=a(e,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>vT(i))),c(t,["parts"],r)}const o=a(e,["role"]);return o!=null&&c(t,["role"],o),t}function dT(e,t,n){const o={},r=a(t,["expireTime"]);n!==void 0&&r!=null&&c(n,["expireTime"],r);const i=a(t,["newSessionExpireTime"]);n!==void 0&&i!=null&&c(n,["newSessionExpireTime"],i);const l=a(t,["uses"]);n!==void 0&&l!=null&&c(n,["uses"],l);const u=a(t,["liveConnectConstraints"]);n!==void 0&&u!=null&&c(n,["bidiGenerateContentSetup"],xT(e,u));const d=a(t,["lockAdditionalFields"]);return n!==void 0&&d!=null&&c(n,["fieldMask"],d),o}function fT(e,t){const n={},o=a(t,["config"]);return o!=null&&c(n,["config"],dT(e,o,n)),n}function pT(e){const t={};if(a(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(e,["fileUri"]);n!=null&&c(t,["fileUri"],n);const o=a(e,["mimeType"]);return o!=null&&c(t,["mimeType"],o),t}function hT(e){const t={},n=a(e,["id"]);n!=null&&c(t,["id"],n);const o=a(e,["args"]);o!=null&&c(t,["args"],o);const r=a(e,["name"]);if(r!=null&&c(t,["name"],r),a(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function mT(e){const t={};if(a(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=a(e,["enableWidget"]);return n!=null&&c(t,["enableWidget"],n),t}function gT(e){const t={};if(a(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=a(e,["timeRangeFilter"]);return n!=null&&c(t,["timeRangeFilter"],n),t}function yT(e,t){const n={},o=a(e,["generationConfig"]);t!==void 0&&o!=null&&c(t,["setup","generationConfig"],o);const r=a(e,["responseModalities"]);t!==void 0&&r!=null&&c(t,["setup","generationConfig","responseModalities"],r);const i=a(e,["temperature"]);t!==void 0&&i!=null&&c(t,["setup","generationConfig","temperature"],i);const l=a(e,["topP"]);t!==void 0&&l!=null&&c(t,["setup","generationConfig","topP"],l);const u=a(e,["topK"]);t!==void 0&&u!=null&&c(t,["setup","generationConfig","topK"],u);const d=a(e,["maxOutputTokens"]);t!==void 0&&d!=null&&c(t,["setup","generationConfig","maxOutputTokens"],d);const f=a(e,["mediaResolution"]);t!==void 0&&f!=null&&c(t,["setup","generationConfig","mediaResolution"],f);const p=a(e,["seed"]);t!==void 0&&p!=null&&c(t,["setup","generationConfig","seed"],p);const h=a(e,["speechConfig"]);t!==void 0&&h!=null&&c(t,["setup","generationConfig","speechConfig"],Wc(h));const m=a(e,["thinkingConfig"]);t!==void 0&&m!=null&&c(t,["setup","generationConfig","thinkingConfig"],m);const v=a(e,["enableAffectiveDialog"]);t!==void 0&&v!=null&&c(t,["setup","generationConfig","enableAffectiveDialog"],v);const C=a(e,["systemInstruction"]);t!==void 0&&C!=null&&c(t,["setup","systemInstruction"],cT(ht(C)));const S=a(e,["tools"]);if(t!==void 0&&S!=null){let T=Or(S);Array.isArray(T)&&(T=T.map(P=>bT(qr(P)))),c(t,["setup","tools"],T)}const D=a(e,["sessionResumption"]);t!==void 0&&D!=null&&c(t,["setup","sessionResumption"],wT(D));const b=a(e,["inputAudioTranscription"]);t!==void 0&&b!=null&&c(t,["setup","inputAudioTranscription"],b);const x=a(e,["outputAudioTranscription"]);t!==void 0&&x!=null&&c(t,["setup","outputAudioTranscription"],x);const g=a(e,["realtimeInputConfig"]);t!==void 0&&g!=null&&c(t,["setup","realtimeInputConfig"],g);const N=a(e,["contextWindowCompression"]);t!==void 0&&N!=null&&c(t,["setup","contextWindowCompression"],N);const M=a(e,["proactivity"]);return t!==void 0&&M!=null&&c(t,["setup","proactivity"],M),n}function xT(e,t){const n={},o=a(t,["model"]);o!=null&&c(n,["setup","model"],we(e,o));const r=a(t,["config"]);return r!=null&&c(n,["config"],yT(r,n)),n}function vT(e){const t={},n=a(e,["mediaResolution"]);n!=null&&c(t,["mediaResolution"],n);const o=a(e,["codeExecutionResult"]);o!=null&&c(t,["codeExecutionResult"],o);const r=a(e,["executableCode"]);r!=null&&c(t,["executableCode"],r);const i=a(e,["fileData"]);i!=null&&c(t,["fileData"],pT(i));const l=a(e,["functionCall"]);l!=null&&c(t,["functionCall"],hT(l));const u=a(e,["functionResponse"]);u!=null&&c(t,["functionResponse"],u);const d=a(e,["inlineData"]);d!=null&&c(t,["inlineData"],uT(d));const f=a(e,["text"]);f!=null&&c(t,["text"],f);const p=a(e,["thought"]);p!=null&&c(t,["thought"],p);const h=a(e,["thoughtSignature"]);h!=null&&c(t,["thoughtSignature"],h);const m=a(e,["videoMetadata"]);return m!=null&&c(t,["videoMetadata"],m),t}function wT(e){const t={},n=a(e,["handle"]);if(n!=null&&c(t,["handle"],n),a(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function bT(e){const t={},n=a(e,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(h=>h)),c(t,["functionDeclarations"],p)}if(a(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=a(e,["googleSearchRetrieval"]);o!=null&&c(t,["googleSearchRetrieval"],o);const r=a(e,["computerUse"]);r!=null&&c(t,["computerUse"],r);const i=a(e,["fileSearch"]);i!=null&&c(t,["fileSearch"],i);const l=a(e,["codeExecution"]);if(l!=null&&c(t,["codeExecution"],l),a(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=a(e,["googleMaps"]);u!=null&&c(t,["googleMaps"],mT(u));const d=a(e,["googleSearch"]);d!=null&&c(t,["googleSearch"],gT(d));const f=a(e,["urlContext"]);return f!=null&&c(t,["urlContext"],f),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function CT(e){const t=[];for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){const o=e[n];if(typeof o=="object"&&o!=null&&Object.keys(o).length>0){const r=Object.keys(o).map(i=>`${n}.${i}`);t.push(...r)}else t.push(n)}return t.join(",")}function ST(e,t){let n=null;const o=e.bidiGenerateContentSetup;if(typeof o=="object"&&o!==null&&"setup"in o){const i=o.setup;typeof i=="object"&&i!==null?(e.bidiGenerateContentSetup=i,n=i):delete e.bidiGenerateContentSetup}else o!==void 0&&delete e.bidiGenerateContentSetup;const r=e.fieldMask;if(n){const i=CT(n);if(Array.isArray(t==null?void 0:t.lockAdditionalFields)&&(t==null?void 0:t.lockAdditionalFields.length)===0)i?e.fieldMask=i:delete e.fieldMask;else if(t!=null&&t.lockAdditionalFields&&t.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const l=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let u=[];r.length>0&&(u=r.map(f=>l.includes(f)?`generationConfig.${f}`:f));const d=[];i&&d.push(i),u.length>0&&d.push(...u),d.length>0?e.fieldMask=d.join(","):delete e.fieldMask}else delete e.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?e.fieldMask=r.join(","):delete e.fieldMask;return e}class NT extends Hn{constructor(t){super(),this.apiClient=t}async create(t){var n,o;let r,i="",l={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const u=fT(this.apiClient,t);i=X("auth_tokens",u._url),l=u._query,delete u.config,delete u._url,delete u._query;const d=ST(u,t.config);return r=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),r.then(f=>f)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ET(e,t){const n={},o=a(e,["displayName"]);return t!==void 0&&o!=null&&c(t,["displayName"],o),n}function TT(e){const t={},n=a(e,["config"]);return n!=null&&ET(n,t),t}function kT(e,t){const n={},o=a(e,["force"]);return t!==void 0&&o!=null&&c(t,["_query","force"],o),n}function _T(e){const t={},n=a(e,["name"]);n!=null&&c(t,["_url","name"],n);const o=a(e,["config"]);return o!=null&&kT(o,t),t}function IT(e){const t={},n=a(e,["name"]);return n!=null&&c(t,["_url","name"],n),t}function AT(e,t){const n={},o=a(e,["customMetadata"]);if(t!==void 0&&o!=null){let i=o;Array.isArray(i)&&(i=i.map(l=>l)),c(t,["customMetadata"],i)}const r=a(e,["chunkingConfig"]);return t!==void 0&&r!=null&&c(t,["chunkingConfig"],r),n}function MT(e){const t={},n=a(e,["name"]);n!=null&&c(t,["name"],n);const o=a(e,["metadata"]);o!=null&&c(t,["metadata"],o);const r=a(e,["done"]);r!=null&&c(t,["done"],r);const i=a(e,["error"]);i!=null&&c(t,["error"],i);const l=a(e,["response"]);return l!=null&&c(t,["response"],RT(l)),t}function PT(e){const t={},n=a(e,["fileSearchStoreName"]);n!=null&&c(t,["_url","file_search_store_name"],n);const o=a(e,["fileName"]);o!=null&&c(t,["fileName"],o);const r=a(e,["config"]);return r!=null&&AT(r,t),t}function RT(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&c(t,["sdkHttpResponse"],n);const o=a(e,["parent"]);o!=null&&c(t,["parent"],o);const r=a(e,["documentName"]);return r!=null&&c(t,["documentName"],r),t}function DT(e,t){const n={},o=a(e,["pageSize"]);t!==void 0&&o!=null&&c(t,["_query","pageSize"],o);const r=a(e,["pageToken"]);return t!==void 0&&r!=null&&c(t,["_query","pageToken"],r),n}function LT(e){const t={},n=a(e,["config"]);return n!=null&&DT(n,t),t}function jT(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&c(t,["sdkHttpResponse"],n);const o=a(e,["nextPageToken"]);o!=null&&c(t,["nextPageToken"],o);const r=a(e,["fileSearchStores"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(l=>l)),c(t,["fileSearchStores"],i)}return t}function FT(e,t){const n={},o=a(e,["mimeType"]);t!==void 0&&o!=null&&c(t,["mimeType"],o);const r=a(e,["displayName"]);t!==void 0&&r!=null&&c(t,["displayName"],r);const i=a(e,["customMetadata"]);if(t!==void 0&&i!=null){let u=i;Array.isArray(u)&&(u=u.map(d=>d)),c(t,["customMetadata"],u)}const l=a(e,["chunkingConfig"]);return t!==void 0&&l!=null&&c(t,["chunkingConfig"],l),n}function UT(e){const t={},n=a(e,["fileSearchStoreName"]);n!=null&&c(t,["_url","file_search_store_name"],n);const o=a(e,["config"]);return o!=null&&FT(o,t),t}function zT(e){const t={},n=a(e,["sdkHttpResponse"]);return n!=null&&c(t,["sdkHttpResponse"],n),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function VT(e,t){const n={},o=a(e,["force"]);return t!==void 0&&o!=null&&c(t,["_query","force"],o),n}function $T(e){const t={},n=a(e,["name"]);n!=null&&c(t,["_url","name"],n);const o=a(e,["config"]);return o!=null&&VT(o,t),t}function HT(e){const t={},n=a(e,["name"]);return n!=null&&c(t,["_url","name"],n),t}function GT(e,t){const n={},o=a(e,["pageSize"]);t!==void 0&&o!=null&&c(t,["_query","pageSize"],o);const r=a(e,["pageToken"]);return t!==void 0&&r!=null&&c(t,["_query","pageToken"],r),n}function BT(e){const t={},n=a(e,["parent"]);n!=null&&c(t,["_url","parent"],n);const o=a(e,["config"]);return o!=null&&GT(o,t),t}function qT(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&c(t,["sdkHttpResponse"],n);const o=a(e,["nextPageToken"]);o!=null&&c(t,["nextPageToken"],o);const r=a(e,["documents"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(l=>l)),c(t,["documents"],i)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class OT extends Hn{constructor(t){super(),this.apiClient=t,this.list=async n=>new Bo(Vn.PAGED_ITEM_DOCUMENTS,o=>this.listInternal({parent:n.parent,config:o.config}),await this.listInternal(n),n)}async get(t){var n,o;let r,i="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=HT(t);return i=X("{name}",u._url),l=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),r.then(d=>d)}}async delete(t){var n,o;let r="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=$T(t);r=X("{name}",l._url),i=l._query,delete l._url,delete l._query,await this.apiClient.request({path:r,queryParams:i,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(t){var n,o;let r,i="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=BT(t);return i=X("{parent}/documents",u._url),l=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),r.then(d=>{const f=qT(d),p=new NC;return Object.assign(p,f),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class WT extends Hn{constructor(t,n=new OT(t)){super(),this.apiClient=t,this.documents=n,this.list=async(o={})=>new Bo(Vn.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(o),o)}async uploadToFileSearchStore(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(t.fileSearchStoreName,t.file,t.config)}async create(t){var n,o;let r,i="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=TT(t);return i=X("fileSearchStores",u._url),l=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),r.then(d=>d)}}async get(t){var n,o;let r,i="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=IT(t);return i=X("{name}",u._url),l=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),r.then(d=>d)}}async delete(t){var n,o;let r="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=_T(t);r=X("{name}",l._url),i=l._query,delete l._url,delete l._query,await this.apiClient.request({path:r,queryParams:i,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(t){var n,o;let r,i="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=LT(t);return i=X("fileSearchStores",u._url),l=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),r.then(d=>{const f=jT(d),p=new EC;return Object.assign(p,f),p})}}async uploadToFileSearchStoreInternal(t){var n,o;let r,i="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=UT(t);return i=X("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",u._url),l=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),r.then(d=>{const f=zT(d),p=new TC;return Object.assign(p,f),p})}}async importFile(t){var n,o;let r,i="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=PT(t);return i=X("{file_search_store_name}:importFile",u._url),l=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),r.then(d=>{const f=MT(d),p=new Hc;return Object.assign(p,f),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function JT(e,t){const n={},o=a(e,["name"]);return o!=null&&c(n,["_url","name"],o),n}function YT(e,t){const n={},o=a(e,["name"]);return o!=null&&c(n,["_url","name"],o),n}function KT(e,t,n){const o={};if(a(e,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=a(e,["tunedModelDisplayName"]);if(t!==void 0&&r!=null&&c(t,["displayName"],r),a(e,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const i=a(e,["epochCount"]);t!==void 0&&i!=null&&c(t,["tuningTask","hyperparameters","epochCount"],i);const l=a(e,["learningRateMultiplier"]);if(l!=null&&c(o,["tuningTask","hyperparameters","learningRateMultiplier"],l),a(e,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(a(e,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(a(e,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const u=a(e,["batchSize"]);t!==void 0&&u!=null&&c(t,["tuningTask","hyperparameters","batchSize"],u);const d=a(e,["learningRate"]);if(t!==void 0&&d!=null&&c(t,["tuningTask","hyperparameters","learningRate"],d),a(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(a(e,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return o}function XT(e,t,n){const o={};let r=a(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const v=a(e,["validationDataset"]);t!==void 0&&v!=null&&c(t,["supervisedTuningSpec"],nh(v))}else if(r==="PREFERENCE_TUNING"){const v=a(e,["validationDataset"]);t!==void 0&&v!=null&&c(t,["preferenceOptimizationSpec"],nh(v))}const i=a(e,["tunedModelDisplayName"]);t!==void 0&&i!=null&&c(t,["tunedModelDisplayName"],i);const l=a(e,["description"]);t!==void 0&&l!=null&&c(t,["description"],l);let u=a(n,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const v=a(e,["epochCount"]);t!==void 0&&v!=null&&c(t,["supervisedTuningSpec","hyperParameters","epochCount"],v)}else if(u==="PREFERENCE_TUNING"){const v=a(e,["epochCount"]);t!==void 0&&v!=null&&c(t,["preferenceOptimizationSpec","hyperParameters","epochCount"],v)}let d=a(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const v=a(e,["learningRateMultiplier"]);t!==void 0&&v!=null&&c(t,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],v)}else if(d==="PREFERENCE_TUNING"){const v=a(e,["learningRateMultiplier"]);t!==void 0&&v!=null&&c(t,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],v)}let f=a(n,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const v=a(e,["exportLastCheckpointOnly"]);t!==void 0&&v!=null&&c(t,["supervisedTuningSpec","exportLastCheckpointOnly"],v)}else if(f==="PREFERENCE_TUNING"){const v=a(e,["exportLastCheckpointOnly"]);t!==void 0&&v!=null&&c(t,["preferenceOptimizationSpec","exportLastCheckpointOnly"],v)}let p=a(n,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const v=a(e,["adapterSize"]);t!==void 0&&v!=null&&c(t,["supervisedTuningSpec","hyperParameters","adapterSize"],v)}else if(p==="PREFERENCE_TUNING"){const v=a(e,["adapterSize"]);t!==void 0&&v!=null&&c(t,["preferenceOptimizationSpec","hyperParameters","adapterSize"],v)}if(a(e,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(a(e,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const h=a(e,["labels"]);t!==void 0&&h!=null&&c(t,["labels"],h);const m=a(e,["beta"]);return t!==void 0&&m!=null&&c(t,["preferenceOptimizationSpec","hyperParameters","beta"],m),o}function QT(e,t){const n={},o=a(e,["baseModel"]);o!=null&&c(n,["baseModel"],o);const r=a(e,["preTunedModel"]);r!=null&&c(n,["preTunedModel"],r);const i=a(e,["trainingDataset"]);i!=null&&uk(i);const l=a(e,["config"]);return l!=null&&KT(l,n),n}function ZT(e,t){const n={},o=a(e,["baseModel"]);o!=null&&c(n,["baseModel"],o);const r=a(e,["preTunedModel"]);r!=null&&c(n,["preTunedModel"],r);const i=a(e,["trainingDataset"]);i!=null&&ck(i,n,t);const l=a(e,["config"]);return l!=null&&XT(l,n,t),n}function ek(e,t){const n={},o=a(e,["name"]);return o!=null&&c(n,["_url","name"],o),n}function tk(e,t){const n={},o=a(e,["name"]);return o!=null&&c(n,["_url","name"],o),n}function nk(e,t,n){const o={},r=a(e,["pageSize"]);t!==void 0&&r!=null&&c(t,["_query","pageSize"],r);const i=a(e,["pageToken"]);t!==void 0&&i!=null&&c(t,["_query","pageToken"],i);const l=a(e,["filter"]);return t!==void 0&&l!=null&&c(t,["_query","filter"],l),o}function ok(e,t,n){const o={},r=a(e,["pageSize"]);t!==void 0&&r!=null&&c(t,["_query","pageSize"],r);const i=a(e,["pageToken"]);t!==void 0&&i!=null&&c(t,["_query","pageToken"],i);const l=a(e,["filter"]);return t!==void 0&&l!=null&&c(t,["_query","filter"],l),o}function rk(e,t){const n={},o=a(e,["config"]);return o!=null&&nk(o,n),n}function ik(e,t){const n={},o=a(e,["config"]);return o!=null&&ok(o,n),n}function sk(e,t){const n={},o=a(e,["sdkHttpResponse"]);o!=null&&c(n,["sdkHttpResponse"],o);const r=a(e,["nextPageToken"]);r!=null&&c(n,["nextPageToken"],r);const i=a(e,["tunedModels"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(u=>u0(u))),c(n,["tuningJobs"],l)}return n}function lk(e,t){const n={},o=a(e,["sdkHttpResponse"]);o!=null&&c(n,["sdkHttpResponse"],o);const r=a(e,["nextPageToken"]);r!=null&&c(n,["nextPageToken"],r);const i=a(e,["tuningJobs"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(u=>Bu(u))),c(n,["tuningJobs"],l)}return n}function ak(e,t){const n={},o=a(e,["name"]);o!=null&&c(n,["model"],o);const r=a(e,["name"]);return r!=null&&c(n,["endpoint"],r),n}function uk(e,t){const n={};if(a(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(a(e,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const o=a(e,["examples"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(i=>i)),c(n,["examples","examples"],r)}return n}function ck(e,t,n){const o={};let r=a(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const l=a(e,["gcsUri"]);t!==void 0&&l!=null&&c(t,["supervisedTuningSpec","trainingDatasetUri"],l)}else if(r==="PREFERENCE_TUNING"){const l=a(e,["gcsUri"]);t!==void 0&&l!=null&&c(t,["preferenceOptimizationSpec","trainingDatasetUri"],l)}let i=a(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const l=a(e,["vertexDatasetResource"]);t!==void 0&&l!=null&&c(t,["supervisedTuningSpec","trainingDatasetUri"],l)}else if(i==="PREFERENCE_TUNING"){const l=a(e,["vertexDatasetResource"]);t!==void 0&&l!=null&&c(t,["preferenceOptimizationSpec","trainingDatasetUri"],l)}if(a(e,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return o}function u0(e,t){const n={},o=a(e,["sdkHttpResponse"]);o!=null&&c(n,["sdkHttpResponse"],o);const r=a(e,["name"]);r!=null&&c(n,["name"],r);const i=a(e,["state"]);i!=null&&c(n,["state"],Bg(i));const l=a(e,["createTime"]);l!=null&&c(n,["createTime"],l);const u=a(e,["tuningTask","startTime"]);u!=null&&c(n,["startTime"],u);const d=a(e,["tuningTask","completeTime"]);d!=null&&c(n,["endTime"],d);const f=a(e,["updateTime"]);f!=null&&c(n,["updateTime"],f);const p=a(e,["description"]);p!=null&&c(n,["description"],p);const h=a(e,["baseModel"]);h!=null&&c(n,["baseModel"],h);const m=a(e,["_self"]);return m!=null&&c(n,["tunedModel"],ak(m)),n}function Bu(e,t){const n={},o=a(e,["sdkHttpResponse"]);o!=null&&c(n,["sdkHttpResponse"],o);const r=a(e,["name"]);r!=null&&c(n,["name"],r);const i=a(e,["state"]);i!=null&&c(n,["state"],Bg(i));const l=a(e,["createTime"]);l!=null&&c(n,["createTime"],l);const u=a(e,["startTime"]);u!=null&&c(n,["startTime"],u);const d=a(e,["endTime"]);d!=null&&c(n,["endTime"],d);const f=a(e,["updateTime"]);f!=null&&c(n,["updateTime"],f);const p=a(e,["error"]);p!=null&&c(n,["error"],p);const h=a(e,["description"]);h!=null&&c(n,["description"],h);const m=a(e,["baseModel"]);m!=null&&c(n,["baseModel"],m);const v=a(e,["tunedModel"]);v!=null&&c(n,["tunedModel"],v);const C=a(e,["preTunedModel"]);C!=null&&c(n,["preTunedModel"],C);const S=a(e,["supervisedTuningSpec"]);S!=null&&c(n,["supervisedTuningSpec"],S);const D=a(e,["preferenceOptimizationSpec"]);D!=null&&c(n,["preferenceOptimizationSpec"],D);const b=a(e,["tuningDataStats"]);b!=null&&c(n,["tuningDataStats"],b);const x=a(e,["encryptionSpec"]);x!=null&&c(n,["encryptionSpec"],x);const g=a(e,["partnerModelTuningSpec"]);g!=null&&c(n,["partnerModelTuningSpec"],g);const N=a(e,["customBaseModel"]);N!=null&&c(n,["customBaseModel"],N);const M=a(e,["experiment"]);M!=null&&c(n,["experiment"],M);const T=a(e,["labels"]);T!=null&&c(n,["labels"],T);const P=a(e,["outputUri"]);P!=null&&c(n,["outputUri"],P);const R=a(e,["pipelineJob"]);R!=null&&c(n,["pipelineJob"],R);const j=a(e,["serviceAccount"]);j!=null&&c(n,["serviceAccount"],j);const U=a(e,["tunedModelDisplayName"]);U!=null&&c(n,["tunedModelDisplayName"],U);const q=a(e,["veoTuningSpec"]);return q!=null&&c(n,["veoTuningSpec"],q),n}function dk(e,t){const n={},o=a(e,["sdkHttpResponse"]);o!=null&&c(n,["sdkHttpResponse"],o);const r=a(e,["name"]);r!=null&&c(n,["name"],r);const i=a(e,["metadata"]);i!=null&&c(n,["metadata"],i);const l=a(e,["done"]);l!=null&&c(n,["done"],l);const u=a(e,["error"]);return u!=null&&c(n,["error"],u),n}function nh(e,t){const n={},o=a(e,["gcsUri"]);o!=null&&c(n,["validationDatasetUri"],o);const r=a(e,["vertexDatasetResource"]);return r!=null&&c(n,["validationDatasetUri"],r),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class fk extends Hn{constructor(t){super(),this.apiClient=t,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new Bo(Vn.PAGED_ITEM_TUNING_JOBS,o=>this.listInternal(o),await this.listInternal(n),n),this.tune=async n=>{var o;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const r={tunedModelName:n.baseModel};!((o=n.config)===null||o===void 0)&&o.preTunedModelCheckpointId&&(r.checkpointId=n.config.preTunedModelCheckpointId);const i=Object.assign(Object.assign({},n),{preTunedModel:r});return i.baseModel=void 0,await this.tuneInternal(i)}else{const r=Object.assign({},n);return await this.tuneInternal(r)}else{const r=Object.assign({},n),i=await this.tuneMldevInternal(r);let l="";return i.metadata!==void 0&&i.metadata.tunedModel!==void 0?l=i.metadata.tunedModel:i.name!==void 0&&i.name.includes("/operations/")&&(l=i.name.split("/operations/")[0]),{name:l,state:Fu.JOB_STATE_QUEUED}}}}async getInternal(t){var n,o,r,i;let l,u="",d={};if(this.apiClient.isVertexAI()){const f=tk(t);return u=X("{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:p.headers},m})),l.then(p=>Bu(p))}else{const f=ek(t);return u=X("{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:p.headers},m})),l.then(p=>u0(p))}}async listInternal(t){var n,o,r,i;let l,u="",d={};if(this.apiClient.isVertexAI()){const f=ik(t);return u=X("tuningJobs",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:p.headers},m})),l.then(p=>{const h=lk(p),m=new Lp;return Object.assign(m,h),m})}else{const f=rk(t);return u=X("tunedModels",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:p.headers},m})),l.then(p=>{const h=sk(p),m=new Lp;return Object.assign(m,h),m})}}async cancel(t){var n,o,r,i;let l="",u={};if(this.apiClient.isVertexAI()){const d=YT(t);l=X("{name}:cancel",d._url),u=d._query,delete d._url,delete d._query,await this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal})}else{const d=JT(t);l=X("{name}:cancel",d._url),u=d._query,delete d._url,delete d._query,await this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal})}}async tuneInternal(t){var n,o;let r,i="",l={};if(this.apiClient.isVertexAI()){const u=ZT(t,t);return i=X("tuningJobs",u._url),l=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(f=>{const p=f;return p.sdkHttpResponse={headers:d.headers},p})),r.then(d=>Bu(d))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(t){var n,o;let r,i="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=QT(t);return i=X("tunedModels",u._url),l=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(f=>{const p=f;return p.sdkHttpResponse={headers:d.headers},p})),r.then(d=>dk(d))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class pk{async download(t,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const hk=1024*1024*8,mk=3,gk=1e3,yk=2,Sl="x-goog-upload-status";async function xk(e,t,n){var o;const r=await c0(e,t,n),i=await(r==null?void 0:r.json());if(((o=r==null?void 0:r.headers)===null||o===void 0?void 0:o[Sl])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return i.file}async function vk(e,t,n){var o;const r=await c0(e,t,n),i=await(r==null?void 0:r.json());if(((o=r==null?void 0:r.headers)===null||o===void 0?void 0:o[Sl])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const l=Ug(i),u=new Gc;return Object.assign(u,l),u}async function c0(e,t,n){var o,r;let i=0,l=0,u=new Uu(new Response),d="upload";for(i=e.size;l<i;){const f=Math.min(hk,i-l),p=e.slice(l,l+f);l+f>=i&&(d+=", finalize");let h=0,m=gk;for(;h<mk&&(u=await n.request({path:"",body:p,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:t,headers:{"X-Goog-Upload-Command":d,"X-Goog-Upload-Offset":String(l),"Content-Length":String(f)}}}),!(!((o=u==null?void 0:u.headers)===null||o===void 0)&&o[Sl]));)h++,await bk(m),m=m*yk;if(l+=f,((r=u==null?void 0:u.headers)===null||r===void 0?void 0:r[Sl])!=="active")break;if(i<=l)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return u}async function wk(e){return{size:e.size,type:e.type}}function bk(e){return new Promise(t=>setTimeout(t,e))}class Ck{async upload(t,n,o){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await xk(t,n,o)}async uploadToFileSearchStore(t,n,o){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await vk(t,n,o)}async stat(t){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await wk(t)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Sk{create(t,n,o){return new Nk(t,n,o)}}class Nk{constructor(t,n,o){this.url=t,this.headers=n,this.callbacks=o}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(t){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(t)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const oh="x-goog-api-key";class Ek{constructor(t){this.apiKey=t}async addAuthHeaders(t,n){if(t.get(oh)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");t.append(oh,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Tk="gl-node/";class kk{constructor(t){var n;if(t.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(t.project||t.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=t.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=t.apiKey;const o=oC(t.httpOptions,t.vertexai,void 0,void 0);o&&(t.httpOptions?t.httpOptions.baseUrl=o:t.httpOptions={baseUrl:o}),this.apiVersion=t.apiVersion;const r=new Ek(this.apiKey);this.apiClient=new HE({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:t.httpOptions,userAgentExtra:Tk+"web",uploader:new Ck,downloader:new pk}),this.models=new lT(this.apiClient),this.live=new tT(this.apiClient,r,new Sk),this.batches=new PS(this.apiClient),this.chats=new pN(this.models,this.apiClient),this.caches=new cN(this.apiClient),this.files=new SN(this.apiClient),this.operations=new aT(this.apiClient),this.authTokens=new NT(this.apiClient),this.tunings=new fk(this.apiClient),this.fileSearchStores=new WT(this.apiClient)}}const _k="";new kk({apiKey:_k});const Ik=async e=>(console.error("API_KEY is missing"),null),Ak=async(e,t,n,o)=>[],Mk=async(e,t="professional")=>e,Pk=async e=>null,Rk=async(e,t)=>"API Key missing.",Dk=async(e,t,n)=>({text:"API Key missing."}),Lk=async(e,t,n)=>null;function jk(e,t){if(e.match(/^[a-z]+:\/\//i))return e;if(e.match(/^\/\//))return window.location.protocol+e;if(e.match(/^[a-z]+:/i))return e;const n=document.implementation.createHTMLDocument(),o=n.createElement("base"),r=n.createElement("a");return n.head.appendChild(o),n.body.appendChild(r),t&&(o.href=t),r.href=e,r.href}const Fk=(()=>{let e=0;const t=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(e+=1,`u${t()}${e}`)})();function fo(e){const t=[];for(let n=0,o=e.length;n<o;n++)t.push(e[n]);return t}let cr=null;function d0(e={}){return cr||(e.includeStyleProperties?(cr=e.includeStyleProperties,cr):(cr=fo(window.getComputedStyle(document.documentElement)),cr))}function Nl(e,t){const o=(e.ownerDocument.defaultView||window).getComputedStyle(e).getPropertyValue(t);return o?parseFloat(o.replace("px","")):0}function Uk(e){const t=Nl(e,"border-left-width"),n=Nl(e,"border-right-width");return e.clientWidth+t+n}function zk(e){const t=Nl(e,"border-top-width"),n=Nl(e,"border-bottom-width");return e.clientHeight+t+n}function f0(e,t={}){const n=t.width||Uk(e),o=t.height||zk(e);return{width:n,height:o}}function Vk(){let e,t;try{t=process}catch{}const n=t&&t.env?t.env.devicePixelRatio:null;return n&&(e=parseInt(n,10),Number.isNaN(e)&&(e=1)),e||window.devicePixelRatio||1}const Ft=16384;function $k(e){(e.width>Ft||e.height>Ft)&&(e.width>Ft&&e.height>Ft?e.width>e.height?(e.height*=Ft/e.width,e.width=Ft):(e.width*=Ft/e.height,e.height=Ft):e.width>Ft?(e.height*=Ft/e.width,e.width=Ft):(e.width*=Ft/e.height,e.height=Ft))}function El(e){return new Promise((t,n)=>{const o=new Image;o.onload=()=>{o.decode().then(()=>{requestAnimationFrame(()=>t(o))})},o.onerror=n,o.crossOrigin="anonymous",o.decoding="async",o.src=e})}async function Hk(e){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(e)).then(encodeURIComponent).then(t=>`data:image/svg+xml;charset=utf-8,${t}`)}async function Gk(e,t,n){const o="http://www.w3.org/2000/svg",r=document.createElementNS(o,"svg"),i=document.createElementNS(o,"foreignObject");return r.setAttribute("width",`${t}`),r.setAttribute("height",`${n}`),r.setAttribute("viewBox",`0 0 ${t} ${n}`),i.setAttribute("width","100%"),i.setAttribute("height","100%"),i.setAttribute("x","0"),i.setAttribute("y","0"),i.setAttribute("externalResourcesRequired","true"),r.appendChild(i),i.appendChild(e),Hk(r)}const Dt=(e,t)=>{if(e instanceof t)return!0;const n=Object.getPrototypeOf(e);return n===null?!1:n.constructor.name===t.name||Dt(n,t)};function Bk(e){const t=e.getPropertyValue("content");return`${e.cssText} content: '${t.replace(/'|"/g,"")}';`}function qk(e,t){return d0(t).map(n=>{const o=e.getPropertyValue(n),r=e.getPropertyPriority(n);return`${n}: ${o}${r?" !important":""};`}).join(" ")}function Ok(e,t,n,o){const r=`.${e}:${t}`,i=n.cssText?Bk(n):qk(n,o);return document.createTextNode(`${r}{${i}}`)}function rh(e,t,n,o){const r=window.getComputedStyle(e,n),i=r.getPropertyValue("content");if(i===""||i==="none")return;const l=Fk();try{t.className=`${t.className} ${l}`}catch{return}const u=document.createElement("style");u.appendChild(Ok(l,n,r,o)),t.appendChild(u)}function Wk(e,t,n){rh(e,t,":before",n),rh(e,t,":after",n)}const ih="application/font-woff",sh="image/jpeg",Jk={woff:ih,woff2:ih,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:sh,jpeg:sh,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function Yk(e){const t=/\.([^./]*?)$/g.exec(e);return t?t[1]:""}function Yc(e){const t=Yk(e).toLowerCase();return Jk[t]||""}function Kk(e){return e.split(/,/)[1]}function qu(e){return e.search(/^(data:)/)!==-1}function Xk(e,t){return`data:${t};base64,${e}`}async function p0(e,t,n){const o=await fetch(e,t);if(o.status===404)throw new Error(`Resource "${o.url}" not found`);const r=await o.blob();return new Promise((i,l)=>{const u=new FileReader;u.onerror=l,u.onloadend=()=>{try{i(n({res:o,result:u.result}))}catch(d){l(d)}},u.readAsDataURL(r)})}const ja={};function Qk(e,t,n){let o=e.replace(/\?.*/,"");return n&&(o=e),/ttf|otf|eot|woff2?/i.test(o)&&(o=o.replace(/.*\//,"")),t?`[${t}]${o}`:o}async function Kc(e,t,n){const o=Qk(e,t,n.includeQueryParams);if(ja[o]!=null)return ja[o];n.cacheBust&&(e+=(/\?/.test(e)?"&":"?")+new Date().getTime());let r;try{const i=await p0(e,n.fetchRequestInit,({res:l,result:u})=>(t||(t=l.headers.get("Content-Type")||""),Kk(u)));r=Xk(i,t)}catch(i){r=n.imagePlaceholder||"";let l=`Failed to fetch resource: ${e}`;i&&(l=typeof i=="string"?i:i.message),l&&console.warn(l)}return ja[o]=r,r}async function Zk(e){const t=e.toDataURL();return t==="data:,"?e.cloneNode(!1):El(t)}async function e_(e,t){if(e.currentSrc){const i=document.createElement("canvas"),l=i.getContext("2d");i.width=e.clientWidth,i.height=e.clientHeight,l==null||l.drawImage(e,0,0,i.width,i.height);const u=i.toDataURL();return El(u)}const n=e.poster,o=Yc(n),r=await Kc(n,o,t);return El(r)}async function t_(e,t){var n;try{if(!((n=e==null?void 0:e.contentDocument)===null||n===void 0)&&n.body)return await Ol(e.contentDocument.body,t,!0)}catch{}return e.cloneNode(!1)}async function n_(e,t){return Dt(e,HTMLCanvasElement)?Zk(e):Dt(e,HTMLVideoElement)?e_(e,t):Dt(e,HTMLIFrameElement)?t_(e,t):e.cloneNode(h0(e))}const o_=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SLOT",h0=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SVG";async function r_(e,t,n){var o,r;if(h0(t))return t;let i=[];return o_(e)&&e.assignedNodes?i=fo(e.assignedNodes()):Dt(e,HTMLIFrameElement)&&(!((o=e.contentDocument)===null||o===void 0)&&o.body)?i=fo(e.contentDocument.body.childNodes):i=fo(((r=e.shadowRoot)!==null&&r!==void 0?r:e).childNodes),i.length===0||Dt(e,HTMLVideoElement)||await i.reduce((l,u)=>l.then(()=>Ol(u,n)).then(d=>{d&&t.appendChild(d)}),Promise.resolve()),t}function i_(e,t,n){const o=t.style;if(!o)return;const r=window.getComputedStyle(e);r.cssText?(o.cssText=r.cssText,o.transformOrigin=r.transformOrigin):d0(n).forEach(i=>{let l=r.getPropertyValue(i);i==="font-size"&&l.endsWith("px")&&(l=`${Math.floor(parseFloat(l.substring(0,l.length-2)))-.1}px`),Dt(e,HTMLIFrameElement)&&i==="display"&&l==="inline"&&(l="block"),i==="d"&&t.getAttribute("d")&&(l=`path(${t.getAttribute("d")})`),o.setProperty(i,l,r.getPropertyPriority(i))})}function s_(e,t){Dt(e,HTMLTextAreaElement)&&(t.innerHTML=e.value),Dt(e,HTMLInputElement)&&t.setAttribute("value",e.value)}function l_(e,t){if(Dt(e,HTMLSelectElement)){const n=t,o=Array.from(n.children).find(r=>e.value===r.getAttribute("value"));o&&o.setAttribute("selected","")}}function a_(e,t,n){return Dt(t,Element)&&(i_(e,t,n),Wk(e,t,n),s_(e,t),l_(e,t)),t}async function u_(e,t){const n=e.querySelectorAll?e.querySelectorAll("use"):[];if(n.length===0)return e;const o={};for(let i=0;i<n.length;i++){const u=n[i].getAttribute("xlink:href");if(u){const d=e.querySelector(u),f=document.querySelector(u);!d&&f&&!o[u]&&(o[u]=await Ol(f,t,!0))}}const r=Object.values(o);if(r.length){const i="http://www.w3.org/1999/xhtml",l=document.createElementNS(i,"svg");l.setAttribute("xmlns",i),l.style.position="absolute",l.style.width="0",l.style.height="0",l.style.overflow="hidden",l.style.display="none";const u=document.createElementNS(i,"defs");l.appendChild(u);for(let d=0;d<r.length;d++)u.appendChild(r[d]);e.appendChild(l)}return e}async function Ol(e,t,n){return!n&&t.filter&&!t.filter(e)?null:Promise.resolve(e).then(o=>n_(o,t)).then(o=>r_(e,o,t)).then(o=>a_(e,o,t)).then(o=>u_(o,t))}const m0=/url\((['"]?)([^'"]+?)\1\)/g,c_=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,d_=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function f_(e){const t=e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${t})(['"]?\\))`,"g")}function p_(e){const t=[];return e.replace(m0,(n,o,r)=>(t.push(r),n)),t.filter(n=>!qu(n))}async function h_(e,t,n,o,r){try{const i=n?jk(t,n):t,l=Yc(t);let u;return r||(u=await Kc(i,l,o)),e.replace(f_(t),`$1${u}$3`)}catch{}return e}function m_(e,{preferredFontFormat:t}){return t?e.replace(d_,n=>{for(;;){const[o,,r]=c_.exec(n)||[];if(!r)return"";if(r===t)return`src: ${o};`}}):e}function g0(e){return e.search(m0)!==-1}async function y0(e,t,n){if(!g0(e))return e;const o=m_(e,n);return p_(o).reduce((i,l)=>i.then(u=>h_(u,l,t,n)),Promise.resolve(o))}async function dr(e,t,n){var o;const r=(o=t.style)===null||o===void 0?void 0:o.getPropertyValue(e);if(r){const i=await y0(r,null,n);return t.style.setProperty(e,i,t.style.getPropertyPriority(e)),!0}return!1}async function g_(e,t){await dr("background",e,t)||await dr("background-image",e,t),await dr("mask",e,t)||await dr("-webkit-mask",e,t)||await dr("mask-image",e,t)||await dr("-webkit-mask-image",e,t)}async function y_(e,t){const n=Dt(e,HTMLImageElement);if(!(n&&!qu(e.src))&&!(Dt(e,SVGImageElement)&&!qu(e.href.baseVal)))return;const o=n?e.src:e.href.baseVal,r=await Kc(o,Yc(o),t);await new Promise((i,l)=>{e.onload=i,e.onerror=t.onImageErrorHandler?(...d)=>{try{i(t.onImageErrorHandler(...d))}catch(f){l(f)}}:l;const u=e;u.decode&&(u.decode=i),u.loading==="lazy"&&(u.loading="eager"),n?(e.srcset="",e.src=r):e.href.baseVal=r})}async function x_(e,t){const o=fo(e.childNodes).map(r=>x0(r,t));await Promise.all(o).then(()=>e)}async function x0(e,t){Dt(e,Element)&&(await g_(e,t),await y_(e,t),await x_(e,t))}function v_(e,t){const{style:n}=e;t.backgroundColor&&(n.backgroundColor=t.backgroundColor),t.width&&(n.width=`${t.width}px`),t.height&&(n.height=`${t.height}px`);const o=t.style;return o!=null&&Object.keys(o).forEach(r=>{n[r]=o[r]}),e}const lh={};async function ah(e){let t=lh[e];if(t!=null)return t;const o=await(await fetch(e)).text();return t={url:e,cssText:o},lh[e]=t,t}async function uh(e,t){let n=e.cssText;const o=/url\(["']?([^"')]+)["']?\)/g,i=(n.match(/url\([^)]+\)/g)||[]).map(async l=>{let u=l.replace(o,"$1");return u.startsWith("https://")||(u=new URL(u,e.url).href),p0(u,t.fetchRequestInit,({result:d})=>(n=n.replace(l,`url(${d})`),[l,d]))});return Promise.all(i).then(()=>n)}function ch(e){if(e==null)return[];const t=[],n=/(\/\*[\s\S]*?\*\/)/gi;let o=e.replace(n,"");const r=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const d=r.exec(o);if(d===null)break;t.push(d[0])}o=o.replace(r,"");const i=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,l="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",u=new RegExp(l,"gi");for(;;){let d=i.exec(o);if(d===null){if(d=u.exec(o),d===null)break;i.lastIndex=u.lastIndex}else u.lastIndex=i.lastIndex;t.push(d[0])}return t}async function w_(e,t){const n=[],o=[];return e.forEach(r=>{if("cssRules"in r)try{fo(r.cssRules||[]).forEach((i,l)=>{if(i.type===CSSRule.IMPORT_RULE){let u=l+1;const d=i.href,f=ah(d).then(p=>uh(p,t)).then(p=>ch(p).forEach(h=>{try{r.insertRule(h,h.startsWith("@import")?u+=1:r.cssRules.length)}catch(m){console.error("Error inserting rule from remote css",{rule:h,error:m})}})).catch(p=>{console.error("Error loading remote css",p.toString())});o.push(f)}})}catch(i){const l=e.find(u=>u.href==null)||document.styleSheets[0];r.href!=null&&o.push(ah(r.href).then(u=>uh(u,t)).then(u=>ch(u).forEach(d=>{l.insertRule(d,l.cssRules.length)})).catch(u=>{console.error("Error loading remote stylesheet",u)})),console.error("Error inlining remote css file",i)}}),Promise.all(o).then(()=>(e.forEach(r=>{if("cssRules"in r)try{fo(r.cssRules||[]).forEach(i=>{n.push(i)})}catch(i){console.error(`Error while reading CSS rules from ${r.href}`,i)}}),n))}function b_(e){return e.filter(t=>t.type===CSSRule.FONT_FACE_RULE).filter(t=>g0(t.style.getPropertyValue("src")))}async function C_(e,t){if(e.ownerDocument==null)throw new Error("Provided element is not within a Document");const n=fo(e.ownerDocument.styleSheets),o=await w_(n,t);return b_(o)}function v0(e){return e.trim().replace(/["']/g,"")}function S_(e){const t=new Set;function n(o){(o.style.fontFamily||getComputedStyle(o).fontFamily).split(",").forEach(i=>{t.add(v0(i))}),Array.from(o.children).forEach(i=>{i instanceof HTMLElement&&n(i)})}return n(e),t}async function N_(e,t){const n=await C_(e,t),o=S_(e);return(await Promise.all(n.filter(i=>o.has(v0(i.style.fontFamily))).map(i=>{const l=i.parentStyleSheet?i.parentStyleSheet.href:null;return y0(i.cssText,l,t)}))).join(`
`)}async function E_(e,t){const n=t.fontEmbedCSS!=null?t.fontEmbedCSS:t.skipFonts?null:await N_(e,t);if(n){const o=document.createElement("style"),r=document.createTextNode(n);o.appendChild(r),e.firstChild?e.insertBefore(o,e.firstChild):e.appendChild(o)}}async function w0(e,t={}){const{width:n,height:o}=f0(e,t),r=await Ol(e,t,!0);return await E_(r,t),await x0(r,t),v_(r,t),await Gk(r,n,o)}async function b0(e,t={}){const{width:n,height:o}=f0(e,t),r=await w0(e,t),i=await El(r),l=document.createElement("canvas"),u=l.getContext("2d"),d=t.pixelRatio||Vk(),f=t.canvasWidth||n,p=t.canvasHeight||o;return l.width=f*d,l.height=p*d,t.skipAutoScale||$k(l),l.style.width=`${f}`,l.style.height=`${p}`,t.backgroundColor&&(u.fillStyle=t.backgroundColor,u.fillRect(0,0,l.width,l.height)),u.drawImage(i,0,0,l.width,l.height),l}async function T_(e,t={}){return(await b0(e,t)).toDataURL()}async function k_(e,t={}){return(await b0(e,t)).toDataURL("image/jpeg",t.quality||1)}const __=(e,t=100)=>{if(e.length===0)return{x:0,y:0,width:800,height:600};let n=1/0,o=1/0,r=-1/0,i=-1/0;return e.forEach(l=>{const u=l.type==="ROOT"?300:250,d=200;n=Math.min(n,l.position.x-u/2),o=Math.min(o,l.position.y-d/2),r=Math.max(r,l.position.x+u/2),i=Math.max(i,l.position.y+d/2)}),{x:n-t,y:o-t,width:r-n+t*2,height:i-o+t*2}},C0=async(e,t,n,o,r=1)=>{const i=document.getElementById(n);if(!i)return console.error("Export element not found"),null;const l=__(e,o.padding),u=o.backgroundStyle||"#f0f4f8",d={width:l.width,height:l.height,style:{transform:`translate(${-l.x}px, ${-l.y}px) scale(1)`,transformOrigin:"top left",width:`${l.width}px`,height:`${l.height}px`,background:u},pixelRatio:r,backgroundColor:u.startsWith("#")||u.startsWith("rgb")?u:void 0,fontEmbedCSS:"",skipAutoScale:!0,filter:f=>{var p;return!((p=f.className)!=null&&p.toString().includes("no-export"))},onClone:f=>{const p=document.createElement("div");p.style.position="absolute",p.style.top="0",p.style.left="0",p.style.width="100%",p.style.height="100%",p.style.pointerEvents="none",p.style.zIndex="9999",p.style.display="flex",p.style.flexDirection="column",p.style.justifyContent="space-between",p.style.padding="40px",p.style.boxSizing="border-box";const h=document.createElement("div");h.style.display="flex",h.style.flexDirection="column",h.style.gap="15px",h.style.alignItems="flex-start";const m=document.createElement("div");if(m.innerHTML=`
                <div style="display:flex; align-items:center; gap:12px; background: rgba(255,255,255,0.95); padding: 12px 24px; border-radius: 50px; box-shadow: 0 10px 25px -5px rgba(0,0,0,0.1), 0 8px 10px -6px rgba(0,0,0,0.1); border: 1px solid rgba(255,255,255,0.5); backdrop-filter: blur(12px);">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#4F46E5" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2z"></path>
                        <path d="M12 8a4 4 0 1 0 0 8 4 4 0 1 0 0-8z"></path>
                    </svg>
                    <span style="font-family: 'Fredoka', 'Nunito', sans-serif; font-weight: 700; font-size: 18px; color: #1e293b; letter-spacing: 0.5px; white-space: nowrap;">Generated by Singularity Mind Map</span>
                </div>
            `,h.appendChild(m),o.showTitle&&o.projectName){const D=document.createElement("div");D.style.cssText=`
                    background: rgba(255, 255, 255, 0.7);
                    backdrop-filter: blur(4px);
                    padding: 10px 20px;
                    border-radius: 12px;
                    border-left: 5px solid #4F46E5;
                    margin-left: 5px;
                `;const b=document.createElement("h1");b.innerText=o.projectName,b.style.cssText=`
                    font-family: 'Nunito', sans-serif; 
                    font-weight: 900; 
                    font-size: 42px; 
                    color: #0f172a; 
                    margin: 0; 
                    line-height: 1.1;
                    text-shadow: 0 2px 0 rgba(255,255,255,0.8);
                `,D.appendChild(b),h.appendChild(D)}p.appendChild(h);let v="Date Error",C="--:--:--";try{const D=new Date;if(!isNaN(D.getTime())){const b=["January","February","March","April","May","June","July","August","September","October","November","December"],x=T=>T.toString().padStart(2,"0"),g=D.getDate(),N=b[D.getMonth()],M=D.getFullYear();v=`${g}, ${N}, ${M}`,C=`${x(D.getHours())}:${x(D.getMinutes())}:${x(D.getSeconds())}`}}catch(D){console.error("Date formatting failed during export",D)}const S=document.createElement("div");S.innerHTML=`
                <div style="font-family: 'Nunito', sans-serif; font-size: 14px; color: #475569; background: rgba(255,255,255,0.9); padding: 12px 20px; border-radius: 12px; backdrop-filter: blur(8px); display: inline-flex; flex-direction: column; gap: 4px; border: 1px solid rgba(203, 213, 225, 0.5); box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);">
                    <div style="display: flex; align-items: center; gap: 8px;">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#64748b" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>
                        <span style="font-weight: 800; color: #0f172a;">${v}</span>
                    </div>
                    <div style="display: flex; align-items: center; gap: 8px;">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#64748b" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg>
                        <span style="font-family: monospace; letter-spacing: 0.5px; font-weight: 600;">${C}</span>
                    </div>
                </div>
            `,p.appendChild(S),f.appendChild(p)}};try{return t==="SVG"?await w0(i,d):t==="JPEG"?await k_(i,d):await T_(i,d)}catch(f){return console.error("Image Generation Failed:",f),null}},I_=async(e,t,n,o,r)=>{const i=n==="SVG"?1:2,l={...r,projectName:t},u=await C0(e,n,o,l,i);if(u){const d=document.createElement("a");d.download=`${t.replace(/\s+/g,"_")}.${n.toLowerCase()}`,d.href=u,d.click()}else alert("Export failed. Please check the console for details.")},A_=(e,t,n,o)=>{const r=JSON.stringify({nodes:e,edgeData:t,theme:o}).replace(/<\/script>/g,"<\\/script>"),i=`
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>${n} - Interactive View</title>
    <script src="https://cdn.tailwindcss.com"><\/script>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&family=Fredoka:wght@400;600&display=swap" rel="stylesheet">
    <style>
        body { margin: 0; overflow: hidden; background-color: ${o.bg}; font-family: 'Nunito', sans-serif; }
        #canvas-container { width: 100vw; height: 100vh; cursor: grab; touch-action: none; }
        #canvas-container.grabbing { cursor: grabbing; }
        #canvas-content { transform-origin: 0 0; position: absolute; top: 0; left: 0; will-change: transform; }
        .node { position: absolute; transform: translate(-50%, -50%); transition: all 0.3s ease; box-shadow: 5px 5px 15px rgba(0,0,0,0.1); display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center; }
        .node:hover { z-index: 50; transform: translate(-50%, -50%) scale(1.05); }
        .edge-path { fill: none; stroke-linecap: round; stroke-linejoin: round; transition: opacity 0.3s; }
        .toggle-btn { position: absolute; right: -12px; top: 50%; transform: translateY(-50%); width: 20px; height: 20px; background: white; border-radius: 50%; border: 1px solid #ccc; display: flex; align-items: center; justify-content: center; cursor: pointer; font-size: 10px; z-index: 60; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .toggle-btn:hover { background: #eee; }
        .shape-circle { border-radius: 50%; aspect-ratio: 1/1; }
        .shape-rounded { border-radius: 2rem; }
        .shape-rectangle { border-radius: 0.5rem; }
        .shape-diamond { transform: translate(-50%, -50%) rotate(45deg); }
        .shape-diamond > div { transform: rotate(-45deg); }
    </style>
</head>
<body>
    <div id="canvas-container">
        <div id="canvas-content">
            <svg id="edges-layer" style="position: absolute; top: -50000px; left: -50000px; width: 100000px; height: 100000px; overflow: visible; pointer-events: none;"></svg>
            <div id="nodes-layer"></div>
        </div>
    </div>
    
    <div class="fixed bottom-4 right-4 bg-white/90 backdrop-blur px-4 py-2 rounded-full shadow-lg border border-gray-200 text-xs font-bold text-gray-600 select-none pointer-events-none">
        Read-Only Viewer  Singularity
    </div>

    <script>
        const DATA = ${r};
        const nodes = DATA.nodes;
        const edgeData = DATA.edgeData;
        
        let collapsed = new Set();
        let viewport = { x: window.innerWidth / 2, y: window.innerHeight / 2, zoom: 1 };
        let isDragging = false;
        let lastPos = { x: 0, y: 0 };

        const container = document.getElementById('canvas-container');
        const content = document.getElementById('canvas-content');
        const nodesLayer = document.getElementById('nodes-layer');
        const edgesLayer = document.getElementById('edges-layer');

        function render() {
            nodesLayer.innerHTML = '';
            edgesLayer.innerHTML = '';
            
            const visibleIds = new Set();
            const roots = nodes.filter(n => !n.parentId);
            const queue = [...roots.map(n => n.id)];
            
            while(queue.length > 0) {
                const id = queue.shift();
                visibleIds.add(id);
                if (!collapsed.has(id)) {
                    const node = nodes.find(n => n.id === id);
                    if(node && node.childrenIds) {
                        node.childrenIds.forEach(cid => queue.push(cid));
                    }
                }
            }

            const OFFSET = 50000; 

            nodes.forEach(node => {
                if (!visibleIds.has(node.id)) return;
                node.childrenIds.forEach(childId => {
                    if (!visibleIds.has(childId)) return;
                    const child = nodes.find(n => n.id === childId);
                    if (!child) return;

                    const edgeKey = node.id + '-' + child.id;
                    const opts = edgeData[edgeKey] || { color: '#cbd5e1', width: 2 };
                    
                    const path = document.createElementNS("http://www.w3.org/2000/svg", "path");
                    const start = { x: node.position.x + OFFSET, y: node.position.y + OFFSET };
                    const end = { x: child.position.x + OFFSET, y: child.position.y + OFFSET };
                    const dx = end.x - start.x;
                    const cp1 = { x: start.x + Math.min(Math.abs(dx)*0.8, 150), y: start.y };
                    const cp2 = { x: end.x - Math.min(Math.abs(dx)*0.8, 150), y: end.y };
                    const d = \`M \${start.x} \${start.y} C \${cp1.x} \${cp1.y}, \${cp2.x} \${cp2.y}, \${end.x} \${end.y}\`;
                    
                    path.setAttribute("d", d);
                    path.setAttribute("stroke", opts.color || '#cbd5e1');
                    path.setAttribute("stroke-width", opts.width || 2);
                    path.setAttribute("fill", "none");
                    path.classList.add("edge-path");
                    edgesLayer.appendChild(path);
                });
            });

            nodes.forEach(node => {
                if (!visibleIds.has(node.id)) return;
                const el = document.createElement('div');
                el.className = \`node shape-\${node.shape || 'rounded'}\`;
                const isRoot = node.type === 'ROOT';
                el.style.left = node.position.x + 'px';
                el.style.top = node.position.y + 'px';
                el.style.backgroundColor = node.color || '#ffffff';
                if (isRoot) { el.style.padding = '20px 40px'; el.style.fontSize = '24px'; el.style.fontWeight = '800'; el.style.color = 'white'; }
                else { el.style.padding = '12px 24px'; el.style.fontSize = '14px'; el.style.fontWeight = 'bold'; }
                const label = document.createElement('div');
                label.innerText = node.label;
                el.appendChild(label);
                if (node.childrenIds.length > 0) {
                    const btn = document.createElement('div');
                    btn.className = 'toggle-btn';
                    btn.innerText = collapsed.has(node.id) ? '+' : '-';
                    btn.onclick = (e) => { e.stopPropagation(); if (collapsed.has(node.id)) collapsed.delete(node.id); else collapsed.add(node.id); render(); };
                    el.appendChild(btn);
                }
                nodesLayer.appendChild(el);
            });
        }

        function updateTransform() { content.style.transform = \`translate(\${viewport.x}px, \${viewport.y}px) scale(\${viewport.zoom})\`; }
        container.addEventListener('mousedown', (e) => { isDragging = true; lastPos = { x: e.clientX, y: e.clientY }; container.classList.add('grabbing'); });
        window.addEventListener('mousemove', (e) => { if (!isDragging) return; const dx = e.clientX - lastPos.x; const dy = e.clientY - lastPos.y; viewport.x += dx; viewport.y += dy; lastPos = { x: e.clientX, y: e.clientY }; updateTransform(); });
        window.addEventListener('mouseup', () => { isDragging = false; container.classList.remove('grabbing'); });
        container.addEventListener('wheel', (e) => { e.preventDefault(); const s = Math.pow(1.001, -e.deltaY); viewport.zoom = Math.max(0.1, Math.min(5, viewport.zoom * s)); updateTransform(); }, { passive: false });
        render(); updateTransform();
    <\/script>
</body>
</html>`,l=new Blob([i],{type:"text/html;charset=utf-8;"}),u=document.createElement("a"),d=URL.createObjectURL(l);u.setAttribute("href",d),u.setAttribute("download",`${n.replace(/\s+/g,"_")}_interactive.html`),document.body.appendChild(u),u.click(),document.body.removeChild(u)},M_=(e,t)=>{let o="\uFEFF"+`Level 1,Level 2,Level 3,Level 4,Level 5,Type,Status,Notes
`;const r=(f,p,h)=>{var D,b;const m=e.find(x=>x.id===f);if(!m)return;const v=`"${m.label.replace(/"/g,'""')}"`,C=[...h];C.push(v);for(let x=C.length;x<5;x++)C.push("");C.push(m.type),C.push(m.checked!==void 0?m.checked?"Done":"Pending":"");let S="";(D=m.data)!=null&&D.description&&(S+=`[Desc: ${m.data.description}] `),(b=m.data)!=null&&b.items&&(S+=`[Items: ${m.data.items.join(", ")}]`),C.push(`"${S.replace(/"/g,'""')}"`),o+=C.join(",")+`
`,m.childrenIds.forEach(x=>{r(x,p+1,new Array(p+1).fill(""))})};e.filter(f=>!f.parentId).forEach(f=>r(f.id,0,[]));const l=new Blob([o],{type:"text/csv;charset=utf-8;"}),u=document.createElement("a"),d=URL.createObjectURL(l);u.setAttribute("href",d),u.setAttribute("download",`${t.replace(/\s+/g,"_")}.csv`),document.body.appendChild(u),u.click(),document.body.removeChild(u)},dh=(e,t)=>{const n=f=>f.replace(/[<>&'"]/g,p=>{switch(p){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";case"'":return"&apos;";case'"':return"&quot;";default:return p}}),o=f=>{var C;const p=e.find(S=>S.id===f);if(!p)return"";const h=n(p.label),m=(C=p.data)!=null&&C.description?` _note="${n(p.data.description)}"`:"";let v="";return p.childrenIds.length>0&&(v=p.childrenIds.map(S=>o(S)).join("")),`<outline text="${h}"${m}>
${v}</outline>
`},r=e.filter(f=>!f.parentId),i=`<?xml version="1.0" encoding="UTF-8"?>
<opml version="2.0">
<head>
<title>${n(t)}</title>
<dateCreated>${new Date().toUTCString()}</dateCreated>
</head>
<body>
${r.map(f=>o(f.id)).join("")}</body>
</opml>`,l=new Blob([i],{type:"text/xml;charset=utf-8;"}),u=document.createElement("a"),d=URL.createObjectURL(l);u.setAttribute("href",d),u.setAttribute("download",`${t.replace(/\s+/g,"_")}.opml`),document.body.appendChild(u),u.click(),document.body.removeChild(u)},fh=(e,t)=>{const n=e.filter(d=>!d.parentId),o=d=>{var h,m;const f=e.find(v=>v.id===d);if(!f)return"";let p=`<li style="margin-bottom: 10px;"><span style="font-size: ${f.parentId?"12pt":"16pt"}; font-weight: ${f.parentId?"normal":"bold"}; font-family: Arial, sans-serif;">${f.label}</span>`;return(h=f.data)!=null&&h.description&&(p+=`<br/><span style="color: #555; font-style: italic; font-size: 10pt;">${f.data.description}</span>`),(m=f.data)!=null&&m.items&&f.data.items.length>0&&(p+=`<ul style="list-style-type: square; margin-top: 5px; color: #444;">${f.data.items.map(v=>`<li>${v}</li>`).join("")}</ul>`),f.childrenIds.length>0&&(p+=`<ul>${f.childrenIds.map(v=>o(v)).join("")}</ul>`),p+="</li>",p},r=`<html xmlns:o='urn:schemas-microsoft-com:office:office' xmlns:w='urn:schemas-microsoft-com:office:word' xmlns='http://www.w3.org/TR/REC-html40'><head><meta charset='utf-8'><title>${t}</title><style>body { font-family: 'Calibri', 'Arial', sans-serif; line-height: 1.6; } ul { list-style-type: disc; } h1 { color: #4F46E5; font-size: 24pt; border-bottom: 2px solid #eee; padding-bottom: 10px; } .footer { font-size: 9pt; color: #888; margin-top: 50px; text-align: center; border-top: 1px solid #eee; padding-top: 10px; }</style></head><body><h1>${t}</h1><ul>${n.map(d=>o(d.id)).join("")}</ul><div class="footer">Generated by Singularity  MindMap</div></body></html>`,i=new Blob(["\uFEFF",r],{type:"application/msword"}),l=URL.createObjectURL(i),u=document.createElement("a");u.href=l,u.download=`${t.replace(/\s+/g,"_")}.doc`,document.body.appendChild(u),u.click(),document.body.removeChild(u)},P_=e=>{const t=document.title;if(document.title=e,!document.getElementById("print-style-override")){const n=document.createElement("style");n.id="print-style-override",n.innerHTML="@media print { body * { visibility: hidden; } #root, #root * { visibility: visible; } .no-print, button, .fixed, nav, .sidebar, .toolbar, .minimap, .creation-bar { display: none !important; } canvas { display: block !important; width: 100% !important; height: auto !important; } body { background: white !important; } }",document.head.appendChild(n)}window.print(),document.title=t},R_=({isOpen:e,onClose:t,commands:n})=>{const[o,r]=I.useState(""),[i,l]=I.useState(0),u=I.useRef(null),d=n.filter(f=>f.label.toLowerCase().includes(o.toLowerCase()));return I.useEffect(()=>{e&&(r(""),l(0),setTimeout(()=>{var f;return(f=u.current)==null?void 0:f.focus()},50))},[e]),I.useEffect(()=>{const f=p=>{e&&(p.key==="ArrowDown"?(p.preventDefault(),l(h=>(h+1)%d.length)):p.key==="ArrowUp"?(p.preventDefault(),l(h=>(h-1+d.length)%d.length)):p.key==="Enter"?(p.preventDefault(),d[i]&&(d[i].action(),t())):p.key==="Escape"&&t())};return window.addEventListener("keydown",f),()=>window.removeEventListener("keydown",f)},[e,d,i,t]),e?s.jsx("div",{className:"fixed inset-0 z-[9999] bg-black/60 backdrop-blur-sm flex items-start justify-center pt-[15vh]",onClick:t,children:s.jsxs("div",{className:"w-full max-w-2xl bg-[#353956] border-[3px] border-white/10 rounded-2xl shadow-clay-xl overflow-hidden animate-pop",onClick:f=>f.stopPropagation(),children:[s.jsxs("div",{className:"p-4 border-b border-white/5 flex items-center gap-3",children:[s.jsx(w.Search,{className:"text-white/50",size:24}),s.jsx("input",{ref:u,value:o,onChange:f=>{r(f.target.value),l(0)},placeholder:"Type a command...",className:"bg-transparent text-white text-xl font-display font-semibold w-full outline-none placeholder-white/30"}),s.jsx("div",{className:"text-xs font-bold text-white/30 border border-white/20 rounded px-2 py-1",children:"ESC"})]}),s.jsx("div",{className:"max-h-[60vh] overflow-y-auto py-2",children:d.length===0?s.jsx("div",{className:"p-6 text-center text-white/40 font-medium",children:"No commands found"}):d.map((f,p)=>s.jsxs("button",{onClick:()=>{f.action(),t()},className:`w-full px-5 py-3 flex items-center justify-between transition-colors text-left
                  ${p===i?"bg-white/10":"hover:bg-white/5"}
                `,children:[s.jsxs("div",{className:"flex items-center gap-4 text-white",children:[s.jsx("div",{className:`p-2 rounded-lg ${p===i?"bg-pink-500 shadow-clay-sm":"bg-white/5"}`,children:f.icon}),s.jsx("span",{className:"font-bold text-lg",children:f.label})]}),f.shortcut&&s.jsx("span",{className:"text-xs font-mono text-white/40 bg-black/20 px-2 py-1 rounded border border-white/10",children:f.shortcut})]},f.id))}),s.jsxs("div",{className:"px-4 py-2 bg-black/20 flex items-center justify-between text-[10px] text-white/30 uppercase font-bold tracking-wider",children:[s.jsx("span",{children:"Singularity Command"}),s.jsx("span",{children:"Select: "})]})]})}):null},Is=[{id:"cmd_palette",keys:["Ctrl","K"],label:"Command Palette",category:"ESSENTIAL",details:{how:"Press Ctrl + K to open the global search bar.",when:"When you need to find a tool but don't know where it is in the UI.",why:"The fastest way to access ANY feature (Themes, Layouts, Export) without clicking through menus."}},{id:"escape",keys:["Esc"],label:"Cancel / Deselect",category:"ESSENTIAL",details:{how:"Press Esc.",when:"To close modals, stop drawing, exit presentation, or clear selection.",why:"The universal 'Get me out of here' button."}},{id:"delete",keys:["Del","Backspace"],label:"Delete Selection",category:"ESSENTIAL",details:{how:"Select one or more nodes/links and press Delete.",when:"Removing unwanted ideas or connections.",why:"Works for bulk selection tooclean up your map instantly."}},{id:"add_child",keys:["Tab"],label:"Add Child Node",category:"CREATION",details:{how:"Select a node and press Tab.",when:"When you want to expand a thought deeper (create a sub-branch).",why:"Allows for rapid-fire brainstorming without moving your mouse. Just type, Tab, type."}},{id:"add_sibling",keys:["Enter"],label:"Add Sibling Node",category:"CREATION",details:{how:"Select a node and press Enter.",when:"When listing multiple items at the same level (e.g., a list of pros/cons).",why:"Keeps you in the 'flow' of listing ideas horizontally or vertically without interruption."}},{id:"pan_tool_toggle",keys:["Space"],label:"Toggle Tools",category:"NAVIGATION",details:{how:"Press Space to cycle between Select, Hand (Pan), and Link tools.",when:"Switching quickly between editing and moving.",why:"Faster than clicking sidebar icons."}},{id:"pan_right_click",keys:["Right-Click","Drag"],label:"Quick Pan",category:"NAVIGATION",details:{how:"Hold Right Mouse Button and drag on the canvas.",when:"Moving around large maps without switching tools.",why:"Standard navigation for power users."}},{id:"zoom",keys:["Ctrl","Scroll"],label:"Zoom In/Out",category:"NAVIGATION",details:{how:"Hold Ctrl and scroll your mouse wheel.",when:"Navigating between the 'Big Picture' and specific details.",why:"Fluid zooming focuses exactly where your mouse pointer is."}},{id:"center_view",keys:["C"],label:"Center View",category:"NAVIGATION",details:{how:"Press C.",when:"You've lost track of where your map is.",why:"Instantly brings the content back to the center of your screen."}},{id:"fit_view",keys:["L"],label:"Auto Layout",category:"NAVIGATION",details:{how:"Press L.",when:"When your map gets messy or nodes overlap.",why:"Instantly organizes the entire chaos into a structured Mind Map layout."}},{id:"find",keys:["Ctrl","F"],label:"Find Node",category:"NAVIGATION",details:{how:"Press Ctrl + F to open the search bar.",when:"Locating a specific idea in a massive diagram.",why:"Jumps directly to the node and highlights it."}},{id:"tool_select",keys:["V"],label:"Select Tool",category:"TOOLS",details:{how:"Press V.",when:"To switch back to default selection mode after drawing or panning.",why:"Standard shortcut across all design apps (Figma, Photoshop, etc)."}},{id:"tool_hand",keys:["H"],label:"Hand Tool",category:"TOOLS",details:{how:"Press H.",when:"You want to pan around without accidentally moving nodes.",why:"Locks interaction to movement only."}},{id:"tool_draw",keys:["D"],label:"Draw Tool",category:"TOOLS",details:{how:"Press D.",when:"You want to annotate or sketch freely on the canvas.",why:"Quick access to the pen for circling ideas or drawing arrows."}},{id:"multi_select",keys:["Ctrl","Click"],label:"Multi-Select",category:"SELECTION",details:{how:"Hold Ctrl (or Cmd) and click multiple nodes or links.",when:"Applying the same color/shape to a group, or moving a cluster together.",why:"Batch editing saves minutes of repetitive clicking."}},{id:"branch_select",keys:["Alt","Click"],label:"Select Entire Branch",category:"SELECTION",details:{how:"Hold Alt and click a parent node.",when:"You want to move or style a topic AND all its sub-points.",why:"Extremely powerful for rearranging large sections of your map at once."}},{id:"select_all",keys:["Ctrl","A"],label:"Select All",category:"SELECTION",details:{how:"Press Ctrl + A.",when:"Global changes like changing font or clearing the canvas.",why:"The nuclear option for selection."}},{id:"cycle_shape",keys:["Shift","Click"],label:"Cycle Shape",category:"STYLING",details:{how:"Hold Shift and click a node.",when:"Quickly changing a node's shape without opening menus.",why:"Cycles through: Rectangle -> Rounded -> Circle -> Diamond -> etc."}},{id:"copy_style",keys:["Ctrl","Alt","C"],label:"Copy Style",category:"STYLING",details:{how:"Select a styled node, press Ctrl+Alt+C.",when:"You created a perfect look (color + shape) and want to reuse it.",why:"Style Clipboard works independently of text content."}},{id:"paste_style",keys:["Ctrl","Alt","V"],label:"Paste Style",category:"STYLING",details:{how:"Select target nodes, press Ctrl+Alt+V.",when:"Applying your copied look to other nodes.",why:"Combine with Multi-Select to theme dozens of nodes in seconds."}},{id:"magic_style",keys:["Alt","M"],label:"Magic Auto-Style",category:"STYLING",details:{how:"Select a node and press Alt+M.",when:"You want AI to guess the best color/shape based on the text content.",why:"Automatically turns 'ToDo' into checkboxes or 'Warning' into red diamonds."}},{id:"present_mode",keys:["Shift","F"],label:"Start Presentation",category:"PRESENTATION",details:{how:"Click the Present button or use the Action Menu.",when:"You want to showcase your map step-by-step.",why:"Automatically creates a walkthrough path from root to leaves."}},{id:"present_nav",keys:["Arrows"],label:"Next/Prev Slide",category:"PRESENTATION",details:{how:"Use Left/Right arrow keys or Spacebar.",when:"Navigating through nodes in Presentation Mode.",why:"Smoothly flies the camera to the next logical point."}}],As={ESSENTIAL:{label:"Essentials",icon:w.Zap},CREATION:{label:"Create",icon:w.Plus},TOOLS:{label:"Tools",icon:w.Pen},NAVIGATION:{label:"Navigate",icon:w.Navigation},SELECTION:{label:"Select",icon:w.Select},STYLING:{label:"Style",icon:w.Palette},PRESENTATION:{label:"Present",icon:w.Present}},vt=({label:e,color:t="bg-white",border:n="border-gray-300",active:o,scale:r=1,dashed:i})=>s.jsx("div",{className:`px-4 py-2 rounded-xl border-2 ${t} ${n} shadow-sm text-xs font-bold text-gray-700 flex items-center justify-center min-w-[80px] transition-all duration-500 ${o?"ring-2 ring-blue-400 scale-105":""} ${i?"border-dashed opacity-70":""}`,style:{transform:`scale(${r})`},children:e}),Fa=({label:e})=>s.jsxs("div",{className:"w-12 h-0.5 bg-gray-300 relative flex items-center justify-center",children:[s.jsx("div",{className:"absolute right-0 -top-1 w-2 h-2 border-r-2 border-t-2 border-gray-300 rotate-45"}),e&&s.jsx("span",{className:"absolute -top-4 text-[9px] text-gray-400 font-bold bg-white px-1",children:e})]}),D_=({x:e,y:t,label:n})=>s.jsxs("div",{className:"absolute z-20 flex items-start",style:{left:e,top:t},children:[s.jsx(w.Select,{className:"text-black fill-black stroke-white stroke-2 drop-shadow-md",size:24}),n&&s.jsx("div",{className:"ml-2 bg-black text-white text-[10px] font-bold px-2 py-1 rounded shadow-lg whitespace-nowrap",children:n})]}),Ua=({icon:e,label:t,text:n,color:o})=>s.jsxs("div",{className:`p-4 rounded-xl border border-transparent flex gap-4 ${o}`,children:[s.jsx("div",{className:"p-2 bg-white/20 rounded-lg h-fit",children:s.jsx(e,{size:20})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-sm uppercase tracking-wide opacity-80 mb-1",children:t}),s.jsx("p",{className:"text-sm sm:text-base font-medium leading-relaxed",children:n})]})]}),Ms=({k:e,desc:t,sub:n})=>s.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg bg-gray-50 border border-gray-100 dark:bg-black/20 dark:border-white/10",children:[s.jsx("kbd",{className:"px-2 py-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded text-xs font-mono font-bold text-gray-700 dark:text-gray-300 shadow-sm shrink-0 h-fit mt-0.5",children:e}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-bold text-gray-800 dark:text-gray-200",children:t}),s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5 leading-relaxed",children:n})]})]}),fr=({title:e,icon:t,description:n,visual:o,content:r})=>s.jsxs("div",{className:"space-y-6 scroll-mt-20",children:[s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"p-3 bg-indigo-50 dark:bg-indigo-500/20 rounded-xl text-indigo-600 dark:text-indigo-400 shrink-0",children:s.jsx(t,{size:24})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-display font-bold text-gray-900 dark:text-white",children:e}),s.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1 max-w-2xl text-sm leading-relaxed",children:n})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 items-start",children:[s.jsx("div",{className:"order-2 lg:order-1",children:r}),s.jsx("div",{className:"order-1 lg:order-2",children:o})]})]}),L_=({isOpen:e,onClose:t})=>{const[n,o]=I.useState("SHORTCUTS"),[r,i]=I.useState(Is[0].id),l=Is.find(u=>u.id===r)||Is[0];return e?s.jsx("div",{className:"fixed inset-0 z-[200] bg-black/70 backdrop-blur-sm flex items-center justify-center p-4 sm:p-8 animate-fade-in font-sans",onClick:t,children:s.jsxs("div",{className:"bg-white dark:bg-[#1e2030] rounded-3xl shadow-2xl w-full max-w-6xl h-[85vh] flex flex-col overflow-hidden border border-white/10 relative",onClick:u=>u.stopPropagation(),children:[s.jsx("button",{onClick:t,className:"absolute top-4 right-4 p-2 hover:bg-gray-100 dark:hover:bg-white/10 rounded-full text-gray-400 transition-colors z-50",children:s.jsx(w.Close,{size:24})}),s.jsxs("div",{className:"flex px-8 py-6 border-b border-gray-200 dark:border-gray-700 items-center justify-between bg-gray-50 dark:bg-[#161722]",children:[s.jsxs("h2",{className:"text-2xl font-display font-black text-gray-800 dark:text-white flex items-center gap-3",children:[s.jsx(w.Help,{size:28,className:"text-indigo-500"}),"Help Center"]}),s.jsxs("div",{className:"flex bg-gray-200 dark:bg-black/20 p-1 rounded-xl",children:[s.jsx("button",{onClick:()=>o("SHORTCUTS"),className:`px-6 py-2 rounded-lg text-sm font-bold transition-all ${n==="SHORTCUTS"?"bg-white text-indigo-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:"Keyboard Shortcuts"}),s.jsx("button",{onClick:()=>o("GUIDE"),className:`px-6 py-2 rounded-lg text-sm font-bold transition-all ${n==="GUIDE"?"bg-white text-indigo-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:"Interactive Guide"})]})]}),s.jsx("div",{className:"flex-1 overflow-hidden flex",children:n==="SHORTCUTS"?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-1/3 min-w-[300px] bg-gray-50 dark:bg-[#161722] border-r border-gray-200 dark:border-gray-700 flex flex-col",children:s.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-4 space-y-6",children:Object.keys(As).map(u=>{const d=Is.filter(p=>p.category===u);if(d.length===0)return null;const f=As[u].icon;return s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 px-3 mb-2 text-xs font-black text-gray-400 uppercase tracking-widest",children:[s.jsx(f,{size:12})," ",As[u].label]}),s.jsx("div",{className:"space-y-1",children:d.map(p=>s.jsxs("button",{onClick:()=>i(p.id),onMouseEnter:()=>i(p.id),className:`w-full flex items-center justify-between px-3 py-2.5 rounded-xl text-sm font-bold transition-all ${r===p.id?"bg-white dark:bg-indigo-500/20 text-indigo-600 dark:text-indigo-300 shadow-sm ring-1 ring-black/5 dark:ring-white/10":"text-gray-600 dark:text-gray-400 hover:bg-gray-200/50 dark:hover:bg-white/5"}`,children:[s.jsx("span",{children:p.label}),s.jsx("div",{className:"flex gap-1",children:p.keys.map((h,m)=>s.jsx("span",{className:"bg-gray-200 dark:bg-black/40 px-1.5 py-0.5 rounded text-[10px] min-w-[20px] text-center border border-gray-300 dark:border-white/10",children:h},m))})]},p.id))})]},u)})})}),s.jsx("div",{className:"flex-1 bg-white dark:bg-[#1e2030] p-8 sm:p-12 flex flex-col relative overflow-y-auto",children:s.jsxs("div",{className:"flex-1 flex flex-col justify-center max-w-2xl mx-auto w-full animate-slide-up",children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs("span",{className:"inline-block py-1 px-3 rounded-full bg-indigo-50 dark:bg-indigo-500/20 text-indigo-600 dark:text-indigo-300 text-xs font-black uppercase tracking-widest mb-4 border border-indigo-100 dark:border-indigo-500/30",children:[As[l.category].label," Action"]}),s.jsx("h1",{className:"text-4xl sm:text-5xl font-display font-black text-gray-900 dark:text-white mb-6",children:l.label}),s.jsx("div",{className:"flex gap-2 mb-8",children:l.keys.map((u,d)=>s.jsx("kbd",{className:"px-4 py-2 bg-gray-100 dark:bg-gray-800 border-b-4 border-gray-300 dark:border-black rounded-lg text-xl font-mono font-bold text-gray-700 dark:text-gray-200 shadow-sm",children:u},d))})]}),s.jsxs("div",{className:"grid gap-6",children:[s.jsx(Ua,{icon:w.Zap,label:"How to use",text:l.details.how,color:"bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300"}),s.jsx(Ua,{icon:w.Navigation,label:"When to use",text:l.details.when,color:"bg-orange-50 dark:bg-orange-900/20 text-orange-700 dark:text-orange-300"}),s.jsx(Ua,{icon:w.Sparkles,label:"Pro Tip (Why)",text:l.details.why,color:"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-300"})]})]})})]}):s.jsx("div",{className:"w-full h-full overflow-y-auto custom-scrollbar p-8 bg-white dark:bg-[#1e2030]",children:s.jsxs("div",{className:"max-w-5xl mx-auto space-y-16 pb-12",children:[s.jsx(fr,{title:"1. Rapid Flow Creation",icon:w.Brain,description:"Singularity is designed for speed. Keep your hands on the keyboard to create structures instantly without drag-and-drop.",visual:s.jsxs("div",{className:"flex items-center gap-4 p-8 bg-gray-50 rounded-2xl justify-center h-48 border border-dashed border-gray-200",children:[s.jsxs("div",{className:"flex flex-col items-center gap-2",children:[s.jsx(vt,{label:"Main Idea",active:!0}),s.jsx("div",{className:"text-[10px] text-gray-400 font-mono mt-2",children:"Selected"})]}),s.jsxs("div",{className:"flex flex-col items-center gap-1 animate-pulse",children:[s.jsx("span",{className:"text-xs font-bold text-blue-500",children:"Press TAB"}),s.jsx(Fa,{})]}),s.jsx(vt,{label:"New Child",color:"bg-blue-50",border:"border-blue-200"})]}),content:s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsx(Ms,{k:"TAB",desc:"Create Child Branch",sub:"Expands deeper into detail. Use this to break down a complex topic."}),s.jsx(Ms,{k:"ENTER",desc:"Create Sibling Node",sub:"Adds another item at same level. Perfect for lists or features."})]})}),s.jsx(fr,{title:"2. Smart Styling & Inheritance",icon:w.Palette,description:"Don't manually style every node. Enable 'Smart Styling' in the Right Panel to have children inherit properties.",visual:s.jsxs("div",{className:"flex items-center gap-6 p-8 bg-gray-50 rounded-2xl justify-center h-48 border border-gray-200 relative overflow-hidden",children:[s.jsx("div",{className:"absolute top-2 right-2 bg-green-100 text-green-700 text-[10px] font-bold px-2 py-1 rounded-full",children:"Smart Style: ON"}),s.jsxs("div",{className:"flex flex-col items-center gap-1",children:[s.jsx(vt,{label:"Parent",color:"bg-red-500",border:"border-red-600 text-white"}),s.jsx("span",{className:"text-[10px] text-gray-400",children:"Red Diamond"})]}),s.jsx(Fa,{label:"Inherits"}),s.jsxs("div",{className:"flex flex-col items-center gap-1",children:[s.jsx(vt,{label:"Child",color:"bg-red-500",border:"border-red-600 text-white"}),s.jsx("span",{className:"text-[10px] text-green-600 font-bold",children:"Auto-Red"})]})]}),content:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"text-sm text-gray-600",children:["Go to ",s.jsx("b",{children:"Preferences > Actions > Smart Styling"})," to toggle."]}),s.jsxs("ul",{className:"space-y-2 text-sm text-gray-600 list-disc pl-4",children:[s.jsxs("li",{children:[s.jsx("b",{children:"Sibling Inheritance:"})," New nodes copy the style of the previous sibling (great for consistent lists)."]}),s.jsxs("li",{children:[s.jsx("b",{children:"Child Inheritance:"})," New children copy the parent's color/shape (great for color-coded branches)."]}),s.jsxs("li",{children:[s.jsx("b",{children:"Edge Inheritance:"})," Connections copy the style of the parent connection."]})]})]})}),s.jsx(fr,{title:"3. Advanced Selection",icon:w.Select,description:"Managing large maps requires powerful selection tools. Use modifiers to select entire logic trees.",visual:s.jsx("div",{className:"relative flex flex-col items-center justify-center p-8 bg-gray-900 rounded-2xl h-56 overflow-hidden",children:s.jsxs("div",{className:"flex flex-col items-center gap-4 scale-90",children:[s.jsxs("div",{className:"relative",children:[s.jsx(D_,{x:20,y:20,label:"Alt + Click"}),s.jsx(vt,{label:"Root Topic",active:!0,color:"bg-blue-500",border:"border-blue-400 text-white"})]}),s.jsxs("div",{className:"flex gap-8",children:[s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx("div",{className:"w-0.5 h-4 bg-blue-400 mb-2"}),s.jsx(vt,{label:"Sub A",active:!0,color:"bg-blue-500",border:"border-blue-400 text-white"})]}),s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx("div",{className:"w-0.5 h-4 bg-blue-400 mb-2"}),s.jsx(vt,{label:"Sub B",active:!0,color:"bg-blue-500",border:"border-blue-400 text-white"}),s.jsx("div",{className:"w-0.5 h-4 bg-blue-400 my-2"}),s.jsx(vt,{label:"Leaf",active:!0,color:"bg-blue-500",border:"border-blue-400 text-white"})]})]})]})}),content:s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsx(Ms,{k:"Alt + Click",desc:"Branch Select",sub:"Selects the clicked node AND all its descendants instantly."}),s.jsx(Ms,{k:"Shift + Drag",desc:"Link Paint",sub:"Drag across connection lines to select them."})]})}),s.jsx(fr,{title:"4. Focus Mode",icon:w.Zap,description:"Isolate complex branches to work without distraction. Everything else fades away.",visual:s.jsxs("div",{className:"relative flex items-center justify-center p-8 bg-gray-900 rounded-2xl h-48 overflow-hidden",children:[s.jsx("div",{className:"absolute top-4 left-4 opacity-20 grayscale",children:s.jsx(vt,{label:"Distraction"})}),s.jsx("div",{className:"absolute bottom-4 right-4 opacity-20 grayscale",children:s.jsx(vt,{label:"Noise"})}),s.jsxs("div",{className:"flex gap-4 items-center relative z-10",children:[s.jsx(vt,{label:"Focused Topic",color:"bg-indigo-500",border:"border-indigo-400 text-white"}),s.jsx(Fa,{}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx(vt,{label:"Detail A"}),s.jsx(vt,{label:"Detail B"})]})]}),s.jsx("div",{className:"absolute top-2 left-1/2 -translate-x-1/2 bg-indigo-600 text-white text-[10px] font-bold px-3 py-1 rounded-full shadow-lg",children:"Focus Active"})]}),content:s.jsxs("ul",{className:"space-y-2 text-sm text-gray-600",children:[s.jsxs("li",{children:[" ",s.jsx("b",{children:"Right-click"})," a node and select ",s.jsx("b",{children:"Focus Branch"}),"."]}),s.jsx("li",{children:" Only the focused branch remains fully visible and selectable."}),s.jsxs("li",{children:[" Click ",s.jsx("b",{children:"Exit Focus"})," at the top or press ",s.jsx("b",{children:"ESC"})," to return."]})]})}),s.jsx(fr,{title:"5. Link Selection (Paint Mode)",icon:w.Connect,description:"Select multiple connections easily without accidentally moving nodes.",visual:s.jsxs("div",{className:"flex items-center justify-center p-8 bg-gray-50 rounded-2xl h-48 border border-gray-200 relative overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(#e5e7eb_1px,transparent_1px)] [background-size:16px_16px]"}),s.jsx("div",{className:"absolute left-10 top-10 opacity-50",children:s.jsx(vt,{label:"A"})}),s.jsx("div",{className:"absolute right-10 bottom-10 opacity-50",children:s.jsx(vt,{label:"B"})}),s.jsx("svg",{className:"absolute inset-0 w-full h-full pointer-events-none",children:s.jsx("path",{d:"M 80 55 C 150 55, 200 130, 270 130",fill:"none",stroke:"#ef4444",strokeWidth:"3",strokeDasharray:"5,5",className:"animate-pulse"})}),s.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:s.jsx("div",{className:"w-32 h-32 border-2 border-green-400 bg-green-400/10 rounded-full flex items-center justify-center",children:s.jsx("div",{className:"bg-white px-2 py-1 rounded text-xs font-bold shadow text-green-600",children:"Drag to Select Links"})})})]}),content:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-green-50 border border-green-100 p-4 rounded-xl text-green-800 text-sm",children:[s.jsx("strong",{children:"How to Enable:"})," Hold ",s.jsx("b",{children:"Shift + Drag"})," anywhere on the canvas or toggle ",s.jsx("b",{children:"Link Paint Mode"})," in Actions."]}),s.jsxs("ul",{className:"space-y-2 text-sm text-gray-600",children:[s.jsxs("li",{children:[" ",s.jsx("b",{children:"Click & Drag"})," over connections to select them."]}),s.jsx("li",{children:" Nodes are ignored in this mode, preventing accidental moves."}),s.jsx("li",{children:" Selected links will pulse. Use the toolbar to style them in bulk."})]})]})}),s.jsx(fr,{title:"6. AI Power Tools",icon:w.Sparkles,description:"Don't start from scratch. Let AI structure your thoughts.",visual:s.jsxs("div",{className:"grid grid-cols-3 gap-4 h-32",children:[s.jsxs("div",{className:"bg-purple-50 border border-purple-100 rounded-xl p-4 flex flex-col items-center justify-center text-center gap-2",children:[s.jsx(w.Brain,{className:"text-purple-500"}),s.jsx("span",{className:"text-xs font-bold text-purple-700",children:"Expand Idea"})]}),s.jsxs("div",{className:"bg-blue-50 border border-blue-100 rounded-xl p-4 flex flex-col items-center justify-center text-center gap-2",children:[s.jsx(w.Magic,{className:"text-blue-500"}),s.jsx("span",{className:"text-xs font-bold text-blue-700",children:"Magic Style"})]}),s.jsxs("div",{className:"bg-orange-50 border border-orange-100 rounded-xl p-4 flex flex-col items-center justify-center text-center gap-2",children:[s.jsx(w.Flowchart,{className:"text-orange-500"}),s.jsx("span",{className:"text-xs font-bold text-orange-700",children:"Flowchart"})]})]}),content:s.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[s.jsxs("p",{children:["Select any node and click the ",s.jsx("b",{children:"AI Sparkle"})," icon to:"]}),s.jsxs("ul",{className:"list-disc pl-5",children:[s.jsxs("li",{children:[s.jsx("b",{children:"Expand:"})," Generate 3-5 sub-concepts automatically."]}),s.jsxs("li",{children:[s.jsx("b",{children:"Flowchart:"})," Convert a concept into a step-by-step process."]}),s.jsxs("li",{children:[s.jsx("b",{children:"Chat:"}),' Ask the AI Co-Pilot to "Organize this map" or "Find duplicates".']})]})]})})]})})})]})}):null},_t=({icon:e,label:t,isActive:n,onClick:o,hasSub:r,shortcut:i})=>s.jsxs("button",{onClick:o,className:`
      relative w-full aspect-square flex flex-col items-center justify-center rounded-xl transition-all duration-200 border
      ${n?"bg-white shadow-md text-blue-600 border-blue-200 ring-2 ring-blue-50 scale-105 z-10":"bg-white border-gray-200 text-gray-500 hover:border-gray-300 hover:text-gray-700 hover:shadow-sm"}
    `,title:i?`${t} (${i})`:t,children:[s.jsx(e,{size:20,strokeWidth:n?2.5:2}),s.jsx("span",{className:"text-[9px] font-bold mt-1",children:t}),r&&s.jsx("div",{className:"absolute top-1 right-1 w-1.5 h-1.5 rounded-full bg-blue-400 opacity-50"})]}),j_=({isOpen:e,setIsOpen:t,activeMode:n,setMode:o,onAction:r,appMode:i,setAppMode:l,drawingSettings:u,setDrawingSettings:d,defaultEdgeOptions:f,setDefaultEdgeOptions:p,isSelectionMode:h,onToolSelect:m})=>{const[v,C]=I.useState(null),[S,D]=I.useState({rows:3,cols:3}),[b,x]=I.useState("LR"),g=P=>{C(R=>R===P?null:P)},N=P=>{o(P)},M=async()=>{if(window.EyeDropper)try{const j=(await new window.EyeDropper().open()).sRGBHex;v==="CONNECT"&&p&&f?p({...f,color:j}):v==="DRAW"&&d&&u&&d({...u,color:j})}catch(P){console.error(P)}},T=({id:P,label:R,iconName:j,onClick:U,children:q,...V})=>{const oe=fe=>{fe.dataTransfer.setData("singularity-tool",JSON.stringify({id:P,label:R,iconName:j})),fe.dataTransfer.effectAllowed="copy"},ce=fe=>{h&&m?(fe.stopPropagation(),m(P,R,j)):U&&U(fe)};return s.jsx("div",{draggable:!0,onDragStart:oe,onClick:ce,className:h?"ring-2 ring-indigo-400 ring-offset-1 rounded-xl cursor-copy animate-pulse":"",...V,children:q})};return s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>t(!e),className:`fixed left-4 top-20 z-[60] bg-white p-2.5 rounded-lg shadow-clay-md border border-gray-200 hover:border-blue-400 hover:text-blue-600 transition-all group
          ${e?"translate-x-[260px] md:translate-x-[250px] opacity-0 pointer-events-none":"translate-x-0 opacity-100"}
        `,title:"Expand Tools",children:s.jsx(w.Grid,{size:20})}),s.jsxs("div",{className:`
          fixed left-0 top-[60px] z-[60] bg-[#f8f9fa] border-r border-gray-200 shadow-xl
          transition-transform duration-300 ease-in-out flex flex-col w-[260px] 
          h-[calc(100dvh-60px)] overflow-hidden
          ${e?"translate-x-0":"-translate-x-full"}
        `,children:[s.jsxs("div",{className:`p-3 flex items-center justify-between border-b border-gray-200 ${h?"bg-indigo-50":"bg-white/50"}`,children:[s.jsx("span",{className:`text-[10px] font-black uppercase tracking-widest ${h?"text-indigo-600":"text-gray-400"}`,children:h?"Select a Tool to Add":"Toolbar"}),s.jsx("button",{onClick:()=>t(!1),className:"p-1.5 hover:bg-gray-200 rounded text-gray-500",title:"Collapse",children:s.jsx(w.Minus,{size:16})})]}),s.jsxs("div",{className:"flex-1 flex flex-col px-3 py-4 gap-4 overflow-y-auto custom-scrollbar",children:[s.jsxs("div",{className:"shrink-0",children:[s.jsx("h3",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest mb-2 pl-1",children:"Essentials"}),s.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[s.jsx(T,{id:"tool:SELECT",label:"Select",iconName:"Select",onClick:()=>N(xe.SELECT),children:s.jsx(_t,{icon:w.Select,label:"Select",isActive:n===xe.SELECT,shortcut:"V"})}),s.jsx(T,{id:"tool:HAND",label:"Pan",iconName:"Hand",onClick:()=>N(xe.HAND),children:s.jsx(_t,{icon:w.Hand,label:"Pan",isActive:n===xe.HAND,shortcut:"H"})}),s.jsx(T,{id:"tool:CONNECT",label:"Link",iconName:"Connect",onClick:()=>{g("CONNECT"),N(xe.CONNECT)},children:s.jsx(_t,{icon:w.Connect,label:"Link",isActive:n===xe.CONNECT,hasSub:!0})}),s.jsx(T,{id:"action:search",label:"Find",iconName:"Search",onClick:()=>r("search"),children:s.jsx(_t,{icon:w.Search,label:"Find",shortcut:"Ctrl+F"})})]})]}),s.jsx("div",{className:`overflow-hidden transition-all duration-300 ease-in-out shrink-0 ${v==="CONNECT"?"max-h-96 opacity-100 mt-1":"max-h-0 opacity-0 mt-0"}`,children:v==="CONNECT"&&f&&p&&s.jsxs("div",{className:"bg-white rounded-xl p-3 border border-gray-200 shadow-sm relative z-30 space-y-3",children:[s.jsxs("div",{className:"text-[10px] text-blue-600 font-medium italic pb-2 border-b border-gray-100 bg-blue-50/50 -mx-3 px-3 pt-2 -mt-3 rounded-t-xl",children:[" Tip: Hold ",s.jsx("b",{children:"Shift + Click"})," to select multiple connection lines."]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Line Style"}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx("button",{onClick:M,className:"p-1 hover:bg-gray-100 rounded text-gray-500",children:s.jsx(w.Pipette,{size:14})}),s.jsxs("label",{className:"p-1 hover:bg-gray-100 rounded text-gray-500 cursor-pointer relative",children:[s.jsx(w.Palette,{size:14}),s.jsx("input",{type:"color",className:"opacity-0 absolute inset-0 w-full h-full cursor-pointer",value:f.color,onChange:P=>p({...f,color:P.target.value})})]})]})]}),s.jsx("div",{className:"flex gap-1.5 flex-wrap",children:["#cbd5e1","#ef4444","#3b82f6","#10b981","#f59e0b"].map(P=>s.jsx("button",{onClick:()=>p({...f,color:P}),className:`w-5 h-5 rounded-full shadow-sm border border-black/10 transition-transform hover:scale-110 ${f.color===P?"ring-2 ring-blue-400":""}`,style:{backgroundColor:P}},P))}),s.jsx("div",{className:"grid grid-cols-3 gap-1",children:["solid","dashed","dotted"].map(P=>s.jsx("button",{onClick:()=>p({...f,stroke:P}),className:`h-7 flex items-center justify-center rounded border ${f.stroke===P?"bg-blue-50 border-blue-200":"bg-gray-50 border-gray-100 hover:bg-gray-100"}`,children:s.jsx("div",{className:`w-6 h-0.5 bg-gray-400 ${P==="dashed"?"border-b-2 border-dashed border-gray-400 bg-transparent":P==="dotted"?"border-b-2 border-dotted border-gray-400 bg-transparent":""}`})},P))})]})}),s.jsxs("div",{className:"shrink-0 flex flex-col",children:[s.jsx("h3",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest mb-2 pl-1",children:"Create"}),s.jsxs("div",{className:"grid grid-cols-4 gap-2 relative z-20",children:[s.jsx(_t,{icon:w.ShapeRect,label:"Node",isActive:v==="NODE",onClick:()=>g("NODE"),hasSub:!0}),s.jsx(T,{id:"create:note",label:"Note",iconName:"StickyNote",onClick:()=>g("STICKY"),children:s.jsx(_t,{icon:w.StickyNote,label:"Note",isActive:v==="STICKY",hasSub:!0})}),s.jsx(T,{id:"action:open-media-modal",label:"Media",iconName:"Image",onClick:()=>r("open-media-modal"),children:s.jsx(_t,{icon:w.Image,label:"Media"})}),s.jsx(T,{id:"tool:DRAW",label:"Draw",iconName:"Pen",onClick:()=>{g("DRAW"),N(xe.DRAW)},children:s.jsx(_t,{icon:w.Pen,label:"Draw",isActive:v==="DRAW",hasSub:!0,shortcut:"D"})}),s.jsx(T,{id:"create:code",label:"Code",iconName:"Code",onClick:()=>g("CODE"),children:s.jsx(_t,{icon:w.Code,label:"Code",isActive:v==="CODE",hasSub:!0})}),s.jsx(T,{id:"create:table",label:"Table",iconName:"Table",onClick:()=>g("TABLE"),children:s.jsx(_t,{icon:w.Table,label:"Table",isActive:v==="TABLE",hasSub:!0})})]}),s.jsx("div",{className:`overflow-hidden transition-all duration-300 ease-in-out ${v&&v!=="CONNECT"&&v!=="LAYOUT"?"max-h-[500px] opacity-100 mt-3":"max-h-0 opacity-0 mt-0"}`,children:s.jsxs("div",{className:"bg-white rounded-xl p-3 border border-gray-200 shadow-sm relative z-30",children:[v==="NODE"&&s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsxs("div",{className:"text-[10px] text-gray-400 font-medium italic pb-2 mb-2 border-b border-gray-100",children:[s.jsx("b",{children:"Enter"})," adds sibling, ",s.jsx("b",{children:"Tab"})," adds child."]}),s.jsx("span",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest block mb-2",children:"Default Shape"}),[{id:"rectangle",label:"Rectangle",icon:w.ShapeRect},{id:"rounded",label:"Rounded",icon:()=>s.jsx("div",{className:"w-3 h-2 border-2 border-current rounded-md"})},{id:"circle",label:"Circle",icon:w.ShapeCircle},{id:"diamond",label:"Diamond",icon:()=>s.jsx("div",{className:"w-2.5 h-2.5 border-2 border-current rotate-45"})},{id:"triangle",label:"Triangle",icon:w.ShapeTriangle},{id:"hexagon",label:"Hexagon",icon:w.ShapeHexagon},{id:"cloud",label:"Cloud",icon:w.ShapeCloud},{id:"default",label:"Default Node",icon:w.Plus,action:"add-node"}].map(P=>s.jsx(T,{id:`shape:${P.id}`,label:P.label,iconName:P.id==="default"?"Plus":"ShapeRect",onClick:()=>P.action?r(P.action):r("add-node-shape",P.id),children:s.jsxs("button",{className:"w-full flex items-center gap-3 p-2 hover:bg-blue-50 rounded text-sm text-gray-600 transition-colors text-left",children:[s.jsx(P.icon,{size:16,className:"text-gray-400"}),s.jsx("span",{children:P.label})]})},P.id))]}),v==="STICKY"&&s.jsxs("div",{className:"space-y-3",children:[s.jsx("span",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest block",children:"Note Color"}),s.jsx("div",{className:"flex justify-between gap-1",children:[{c:"#fef3c7"},{c:"#fce7f3"},{c:"#dbeafe"},{c:"#dcfce7"}].map(P=>s.jsx("button",{onClick:()=>r("new-sticky-color",P.c),className:"w-8 h-8 rounded-full border border-black/10 shadow-sm hover:scale-110 transition-transform",style:{backgroundColor:P.c}},P.c))})]}),v==="DRAW"&&d&&u&&s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest block",children:"Ink Color"}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx("button",{onClick:M,className:"p-1 hover:bg-gray-100 rounded text-gray-500",children:s.jsx(w.Pipette,{size:14})}),s.jsx("input",{type:"color",value:u.color,onChange:P=>d({...u,color:P.target.value}),className:"w-6 h-6 rounded cursor-pointer"})]})]}),s.jsx("div",{className:"flex bg-gray-100 p-1 rounded-lg",children:["pen","highlighter","eraser"].map(P=>s.jsxs("button",{onClick:()=>d({...u,tool:P}),className:`flex-1 py-1 rounded flex justify-center ${u.tool===P?"bg-white shadow text-blue-600":"text-gray-500"}`,children:[P==="pen"&&s.jsx(w.Pen,{size:16}),P==="highlighter"&&s.jsx(w.Highlighter,{size:16}),P==="eraser"&&s.jsx(w.Eraser,{size:16})]},P))})]}),v==="CODE"&&s.jsx("div",{className:"space-y-2",children:s.jsx("button",{onClick:()=>{r("code-node","JavaScript"),C(null)},className:"w-full py-2 text-[10px] font-bold uppercase bg-gray-100 hover:bg-gray-200 rounded text-gray-600",children:"Add Code Block"})}),v==="TABLE"&&s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex gap-2 items-center",children:[s.jsx("input",{type:"number",value:S.rows,onChange:P=>D({...S,rows:parseInt(P.target.value)}),className:"w-full p-1.5 text-xs border rounded bg-gray-50"}),s.jsx("span",{children:"x"}),s.jsx("input",{type:"number",value:S.cols,onChange:P=>D({...S,cols:parseInt(P.target.value)}),className:"w-full p-1.5 text-xs border rounded bg-gray-50"})]}),s.jsx("button",{onClick:()=>{r("table-node",S),C(null)},className:"w-full py-2 bg-blue-50 text-blue-600 rounded-lg text-xs font-bold border border-blue-200",children:"Insert Table"})]})]})})]}),s.jsxs("div",{className:"shrink-0",children:[s.jsx("h3",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest mb-2 pl-1",children:"Actions"}),s.jsxs("div",{className:"grid grid-cols-4 gap-2 relative",children:[s.jsx(T,{id:"action:undo",label:"Undo",iconName:"Undo",onClick:()=>r("undo"),children:s.jsx(_t,{icon:w.Undo,label:"Undo",shortcut:"Ctrl+Z"})}),s.jsx(T,{id:"action:redo",label:"Redo",iconName:"Redo",onClick:()=>r("redo"),children:s.jsx(_t,{icon:w.Redo,label:"Redo",shortcut:"Ctrl+Y"})}),s.jsx(T,{id:"action:fit",label:"Auto Layout",iconName:"Layout",onClick:()=>g("LAYOUT"),children:s.jsx(_t,{icon:w.Layout,label:"Auto",isActive:v==="LAYOUT",hasSub:!0,shortcut:"L"})}),s.jsx(T,{id:"action:center",label:"Center",iconName:"Navigation",onClick:()=>r("center"),children:s.jsx(_t,{icon:w.Navigation,label:"Center",shortcut:"C"})})]}),s.jsx("div",{className:`overflow-hidden transition-all duration-300 ease-in-out ${v==="LAYOUT"?"max-h-96 opacity-100 mt-3":"max-h-0 opacity-0 mt-0"}`,children:s.jsxs("div",{className:"bg-white rounded-xl p-3 border border-gray-200 shadow-sm relative z-30 space-y-2",children:[s.jsxs("button",{onClick:()=>{x(P=>P==="LR"?"RL":"LR"),r("layout",b==="LR"?"MINDMAP_RL":"MINDMAP_LR")},className:"w-full text-left flex items-center gap-2 p-2 hover:bg-blue-50 rounded-lg text-xs font-bold text-gray-600",children:[s.jsx(w.Brain,{size:16})," ",s.jsxs("span",{children:["Mind Map (",b,")"]})]}),s.jsxs("button",{onClick:()=>r("layout","TREE"),className:"w-full text-left flex items-center gap-2 p-2 hover:bg-blue-50 rounded-lg text-xs font-bold text-gray-600",children:[s.jsx(w.Layout,{size:16})," ",s.jsx("span",{children:"Tree (Top-Down)"})]}),s.jsxs("button",{onClick:()=>r("layout","RADIAL"),className:"w-full text-left flex items-center gap-2 p-2 hover:bg-blue-50 rounded-lg text-xs font-bold text-gray-600",children:[s.jsx(w.Sun,{size:16})," ",s.jsx("span",{children:"Radial Star"})]}),s.jsxs("button",{onClick:()=>r("layout","FLOWCHART"),className:"w-full text-left flex items-center gap-2 p-2 hover:bg-blue-50 rounded-lg text-xs font-bold text-gray-600",children:[s.jsx(w.Flowchart,{size:16})," ",s.jsx("span",{children:"Flowchart"})]}),s.jsxs("button",{onClick:()=>r("layout","FLOWER"),className:"w-full text-left flex items-center gap-2 p-2 hover:bg-pink-50 rounded-lg text-xs font-bold text-pink-600",children:[s.jsx("div",{className:"w-4 h-4 rounded-full border-2 border-pink-500 flex items-center justify-center",children:s.jsx("div",{className:"w-1 h-1 bg-pink-500 rounded-full"})}),s.jsx("span",{children:"Flower (Organic)"})]})]})})]})]})]})]})},ph=[{id:"rectangle",label:"Rectangle",icon:w.ShapeRect},{id:"rounded",label:"Rounded",icon:()=>s.jsx("div",{className:"w-3 h-2 border-2 border-current rounded-md"})},{id:"circle",label:"Circle",icon:w.ShapeCircle},{id:"diamond",label:"Diamond",icon:()=>s.jsx("div",{className:"w-2.5 h-2.5 border-2 border-current rotate-45"})},{id:"triangle",label:"Triangle",icon:w.ShapeTriangle},{id:"hexagon",label:"Hexagon",icon:w.ShapeHexagon},{id:"octagon",label:"Octagon",icon:w.ShapeOctagon},{id:"cloud",label:"Cloud",icon:w.ShapeCloud},{id:"parallelogram",label:"Parallelogram",icon:w.ShapePara}],Ps=["#cbd5e1","#94a3b8","#ef4444","#f59e0b","#10b981","#3b82f6","#8b5cf6","#ec4899","#000000"],F_=["#ffffff","#fef3c7","#dbeafe","#fce7f3","#dcfce7","#ef4444","#f59e0b","#10b981","#3b82f6","#8b5cf6"],U_=async e=>{if(!window.EyeDropper){alert("Eyedropper is not supported in this browser.");return}try{const n=await new window.EyeDropper().open();e(n.sRGBHex)}catch(t){console.log("Eyedropper cancelled",t)}},mi=({icon:e,title:t,text:n})=>s.jsxs("div",{className:"bg-indigo-50 border border-indigo-100 rounded-lg p-3 flex gap-3 items-start",children:[s.jsx(e,{size:16,className:"text-indigo-500 mt-0.5 shrink-0"}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-xs font-bold text-indigo-700 mb-0.5",children:t}),s.jsx("p",{className:"text-[10px] text-indigo-600 leading-relaxed",children:n})]})]}),z_=({theme:e,selected:t,onClick:n})=>s.jsxs("button",{onClick:n,className:`w-full p-3 rounded-xl border-2 transition-all flex items-center gap-3 relative overflow-hidden group
        ${t?"border-blue-500 ring-2 ring-blue-100 bg-gray-50":"border-gray-200 hover:border-gray-400 bg-white"}
      `,children:[s.jsx("div",{className:"w-8 h-8 rounded-full border shadow-sm shrink-0",style:{backgroundColor:e.bg}}),s.jsxs("div",{className:"flex flex-col items-start",children:[s.jsx("span",{className:"text-xs font-bold text-gray-700",children:e.name}),s.jsx("span",{className:"text-[10px] text-gray-400 uppercase",children:e.isDark?"Dark":"Light"})]}),t&&s.jsx("div",{className:"absolute right-3 text-blue-500",children:s.jsx(w.Task,{size:16})})]}),Rs=({label:e,checked:t,onChange:n})=>s.jsxs("div",{className:"flex items-center justify-between py-1.5 cursor-pointer",onClick:n,children:[s.jsx("span",{className:"text-xs font-medium text-gray-600 select-none",children:e}),s.jsx("button",{className:`w-8 h-4 rounded-full relative transition-colors ${t?"bg-green-500":"bg-gray-300"}`,children:s.jsx("div",{className:`absolute top-0.5 w-3 h-3 bg-white rounded-full shadow-sm transition-all ${t?"left-4.5":"left-0.5"}`,style:{left:t?"18px":"2px"}})})]}),Io=({selected:e,onChange:t,allowAny:n=!1,label:o,colors:r=F_})=>s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-wider",children:o}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx("button",{onClick:()=>U_(t),className:"w-6 h-6 flex items-center justify-center rounded-md border border-gray-200 bg-white text-gray-500 hover:bg-gray-50 hover:text-blue-600 transition-colors shadow-sm",title:"Pick color",children:s.jsx(w.Pipette,{size:14})}),s.jsxs("div",{className:"w-6 h-6 flex items-center justify-center rounded-md border border-gray-200 bg-white text-gray-500 hover:bg-gray-50 transition-colors shadow-sm cursor-pointer relative overflow-hidden",children:[s.jsx("input",{type:"color",value:e==="any"?"#ffffff":e,onChange:i=>t(i.target.value),className:"opacity-0 absolute inset-0 w-full h-full cursor-pointer z-10"}),s.jsx("div",{className:"w-3 h-3 rounded-full border border-gray-300",style:{backgroundColor:e==="any"?"transparent":e,backgroundImage:e==="any"?"linear-gradient(to bottom right, transparent 45%, red 50%, transparent 55%)":"none"}})]})]})]}),s.jsxs("div",{className:"flex flex-wrap gap-1.5",children:[n&&s.jsx("button",{onClick:()=>t("any"),className:`w-6 h-6 rounded-md border flex items-center justify-center text-[8px] font-bold bg-gray-50 text-gray-500 ${e==="any"?"ring-2 ring-blue-400 border-blue-400 text-blue-600":"border-gray-200 hover:border-blue-300"}`,children:"ANY"}),r.map(i=>s.jsx("button",{onClick:()=>t(i),className:`w-6 h-6 rounded-md border border-black/5 shadow-sm transition-all ${e===i?"ring-2 ring-blue-400 scale-110 z-10":"hover:scale-105"}`,style:{backgroundColor:i}},i))]})]}),za=({selected:e,onChange:t,allowAny:n=!1,label:o})=>{const[r,i]=I.useState(!1),l=ph.find(u=>u.id===e);return s.jsxs("div",{className:"space-y-1 relative",children:[s.jsx("span",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-wider",children:o}),s.jsxs("button",{onClick:()=>i(!r),className:"w-full text-xs p-2 bg-white border border-gray-200 rounded-lg outline-none font-medium text-gray-700 flex items-center justify-between hover:border-blue-300",children:[s.jsx("div",{className:"flex items-center gap-2",children:e==="any"?s.jsx("span",{children:"Any Shape"}):s.jsxs(s.Fragment,{children:[l&&s.jsx(l.icon,{size:14}),s.jsx("span",{children:(l==null?void 0:l.label)||e})]})}),s.jsx(w.Arrow,{size:14,className:`transition-transform ${r?"rotate-180":""}`})]}),r&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 z-[100]",onClick:()=>i(!1)}),s.jsxs("div",{className:"absolute top-full left-0 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-xl z-[101] max-h-48 overflow-y-auto custom-scrollbar p-1",children:[n&&s.jsx("button",{onClick:()=>{t("any"),i(!1)},className:"w-full text-left px-2 py-1.5 text-xs rounded hover:bg-gray-50 text-gray-700 font-medium flex items-center gap-2",children:s.jsx("span",{children:"Any Shape"})}),ph.map(u=>s.jsxs("button",{onClick:()=>{t(u.id),i(!1)},className:`w-full text-left px-2 py-1.5 text-xs rounded hover:bg-gray-50 text-gray-700 font-medium flex items-center gap-2 ${e===u.id?"bg-blue-50 text-blue-600":""}`,children:[s.jsx(u.icon,{size:14}),s.jsx("span",{children:u.label})]},u.id))]})]})]})},V_=({isOpen:e,setIsOpen:t,canvasSettings:n,setCanvasSettings:o,isDarkMode:r,toggleTheme:i,onShowShortcuts:l,onExport:u,smartRules:d,setSmartRules:f,onAction:p,selectedEdgeIds:h,linkSelectionMode:m,setLinkSelectionMode:v,defaultEdgeOptions:C,setDefaultEdgeOptions:S,defaultNodeShape:D,setDefaultNodeShape:b,defaultNodeColor:x,setDefaultNodeColor:g,isSelectionMode:N,onToolSelect:M,selectedNode:T})=>{var Cn,vo,nn,wo,qo,Oo,Bn,qn;const[P,R]=I.useState("SETTINGS"),[j,U]=I.useState("any"),[q,V]=I.useState("any"),[oe,ce]=I.useState("any"),[fe,Q]=I.useState("any"),[Te,W]=I.useState("any"),[re,se]=I.useState("any"),[ye,be]=I.useState("idle"),[Ce,De]=I.useState(""),[at,He]=I.useState("text"),Et=()=>{p&&(p("replace-global-style",{find:{shape:j==="any"?void 0:j,color:q==="any"?void 0:q,linkColor:oe==="any"?void 0:oe},replace:{shape:fe==="any"?void 0:fe,color:Te==="any"?void 0:Te,linkColor:re==="any"?void 0:re}}),be("success"),setTimeout(()=>be("idle"),2e3))},Bt=()=>{var ae;if(!(!Ce.trim()||!p)&&T){const Ge=((ae=T.data)==null?void 0:ae.presentationItems)||[];if(Ge.length>=9){alert("Maximum 9 items allowed per node.");return}const Be={id:Math.random().toString(36).substr(2,9),type:at,content:Ce},gt=[...Ge,Be];p("update-node-data",{id:T.id,data:{...T.data,presentationItems:gt}}),De("")}},Jr=ae=>{var Ge;if(T&&p){const Be=[...((Ge=T.data)==null?void 0:Ge.presentationItems)||[]];Be.splice(ae,1),p("update-node-data",{id:T.id,data:{...T.data,presentationItems:Be}})}},tn=({id:ae,label:Ge,iconName:Be,onClick:gt,children:mn,className:bo,...Co})=>{const Lt=Xe=>{Xe.dataTransfer.setData("singularity-tool",JSON.stringify({id:ae,label:Ge,iconName:Be})),Xe.dataTransfer.effectAllowed="copy"},yt=Xe=>{N&&M?(Xe.stopPropagation(),M(ae,Ge,Be)):gt&&gt(Xe)};return s.jsx("div",{draggable:!0,onDragStart:Lt,onClick:yt,className:N?`ring-2 ring-indigo-400 ring-offset-1 rounded-xl cursor-copy animate-pulse ${bo}`:bo,...Co,children:mn})},tt=({id:ae,label:Ge,icon:Be,action:gt})=>s.jsx(tn,{id:`export:${gt}`,label:Ge,iconName:"Download",onClick:()=>u(gt),className:"h-full",children:s.jsxs("button",{className:"w-full h-full px-3 py-2 bg-gray-50 hover:bg-gray-100 rounded-lg text-xs font-bold text-gray-600 border border-gray-200 flex flex-col items-center justify-center gap-1.5 text-center transition-all hover:border-blue-300 hover:text-blue-600",children:[Ku.createElement(Be,{size:18}),s.jsx("span",{className:"text-[9px] leading-tight",children:Ge})]})});return s.jsxs("div",{className:`
        fixed z-[60] bg-white shadow-2xl transition-transform duration-300 ease-in-out flex flex-col
        
        /* Mobile: Bottom Sheet */
        inset-x-0 bottom-0 h-[85vh] w-full rounded-t-3xl border-t border-gray-300
        ${e?"translate-y-0":"translate-y-full"}

        /* Desktop: Side Panel */
        md:inset-auto md:right-0 md:top-[60px] md:bottom-0 md:w-[320px] md:h-auto md:rounded-none md:border-l md:border-t-0
        md:translate-y-0
        ${e?"md:translate-x-0":"md:translate-x-full"}
      `,children:[s.jsxs("div",{className:`h-14 flex items-center justify-between px-6 border-b border-gray-200 shrink-0 ${N?"bg-indigo-50":"bg-gray-50"}`,children:[s.jsx("h2",{className:`font-display font-black text-lg tracking-wide ${N?"text-indigo-600":"text-gray-800"}`,children:N?"SELECT ACTION":"PREFERENCES"}),s.jsx("button",{onClick:()=>t(!1),className:"p-2 hover:bg-gray-200 rounded-lg text-gray-500 transition-colors",children:s.jsx(w.Close,{size:20})})]}),s.jsx("div",{className:"px-6 pt-6 pb-2 shrink-0",children:s.jsxs("div",{className:"flex p-1 bg-gray-100 rounded-xl",children:[s.jsx("button",{onClick:()=>R("SETTINGS"),className:`flex-1 py-2 text-xs font-bold uppercase rounded-lg transition-all ${P==="SETTINGS"?"bg-white shadow text-blue-600":"text-gray-500 hover:text-gray-700"}`,children:"Design"}),s.jsx("button",{onClick:()=>R("ACTIONS"),className:`flex-1 py-2 text-xs font-bold uppercase rounded-lg transition-all ${P==="ACTIONS"?"bg-white shadow text-blue-600":"text-gray-500 hover:text-gray-700"}`,children:"Actions"})]})}),s.jsxs("div",{className:"flex-1 overflow-y-auto px-6 py-4 space-y-8 custom-scrollbar pb-32",children:[P==="SETTINGS"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest mb-4 flex items-center gap-2",children:[s.jsx(w.Navigation,{size:12})," Navigation & View"]}),s.jsxs("div",{className:"space-y-3 bg-gray-50 p-3 rounded-xl border border-gray-100",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between mb-1",children:[s.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Zoom Speed"}),s.jsxs("span",{className:"text-[10px] font-mono bg-gray-200 px-1.5 rounded text-gray-600",children:[((Cn=n.zoomSensitivity)==null?void 0:Cn.toFixed(1))||1,"x"]})]}),s.jsx("input",{type:"range",min:"0.1",max:"3.0",step:"0.1",value:n.zoomSensitivity||1,onChange:ae=>o({...n,zoomSensitivity:parseFloat(ae.target.value)}),className:"w-full h-1.5 bg-gray-300 rounded-lg appearance-none cursor-pointer accent-blue-500"})]}),s.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-gray-200",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(w.Move,{size:14,className:"text-gray-500"}),s.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Smooth Inertia"})]}),s.jsx(Rs,{label:"",checked:n.zoomInertia||!1,onChange:()=>o({...n,zoomInertia:!n.zoomInertia})})]}),s.jsx("p",{className:"text-[9px] text-gray-400 leading-tight pt-1",children:"Enables smooth momentum when zooming in or out."})]})]}),T&&s.jsxs("div",{className:"bg-indigo-50 rounded-xl border border-indigo-100 p-4 space-y-4 animate-fade-in",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h3",{className:"text-[10px] font-black text-indigo-500 uppercase tracking-widest flex items-center gap-2",children:[s.jsx(w.MonitorPlay,{size:12})," Presentation Deck"]}),s.jsxs("span",{className:"text-[10px] font-bold text-indigo-400",children:[((nn=(vo=T.data)==null?void 0:vo.presentationItems)==null?void 0:nn.length)||0," / 9"]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("select",{value:at,onChange:ae=>He(ae.target.value),className:"bg-white text-xs font-bold border border-indigo-200 rounded-lg px-2 py-1.5 outline-none focus:border-indigo-400",children:[s.jsx("option",{value:"text",children:"Text"}),s.jsx("option",{value:"image",children:"Image"})]}),s.jsx("input",{type:"text",value:Ce,onChange:ae=>De(ae.target.value),placeholder:at==="image"?"Image URL...":"Short note...",className:"flex-1 bg-white text-xs px-2 py-1.5 rounded-lg border border-indigo-200 outline-none focus:border-indigo-400"}),s.jsx("button",{onClick:Bt,disabled:(((qo=(wo=T.data)==null?void 0:wo.presentationItems)==null?void 0:qo.length)||0)>=9,className:"bg-indigo-500 hover:bg-indigo-600 text-white p-1.5 rounded-lg disabled:opacity-50 transition-colors",children:s.jsx(w.Plus,{size:16})})]}),s.jsxs("div",{className:"space-y-1 max-h-[150px] overflow-y-auto custom-scrollbar",children:[(Bn=(Oo=T.data)==null?void 0:Oo.presentationItems)==null?void 0:Bn.map((ae,Ge)=>s.jsxs("div",{className:"flex items-center gap-2 bg-white p-2 rounded-lg border border-indigo-100 text-xs",children:[s.jsx("div",{className:"text-gray-400",children:ae.type==="image"?s.jsx(w.Image,{size:12}):s.jsx(w.Type,{size:12})}),s.jsx("div",{className:"flex-1 truncate text-gray-600 font-medium",title:ae.content,children:ae.content}),s.jsx("button",{onClick:()=>Jr(Ge),className:"text-red-400 hover:text-red-600",children:s.jsx(w.Trash,{size:12})})]},Ge)),(!((qn=T.data)!=null&&qn.presentationItems)||T.data.presentationItems.length===0)&&s.jsx("div",{className:"text-center text-[10px] text-indigo-300 py-2 italic",children:"No items in deck"})]}),s.jsx("div",{className:"text-[9px] text-indigo-400 leading-tight",children:"These items will appear in the drawer ('v' icon) during presentation mode."})]})]}),h&&h.size>0&&p&&s.jsxs("div",{className:"bg-blue-50 rounded-xl border border-blue-100 p-4 space-y-4 animate-fade-in",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h3",{className:"text-[10px] font-black text-blue-500 uppercase tracking-widest flex items-center gap-2",children:[s.jsx(w.Connect,{size:12})," Connection Settings (",h.size,")"]}),s.jsx("span",{className:"bg-blue-100 text-blue-600 text-[9px] font-bold px-1.5 py-0.5 rounded",children:"BULK"})]}),s.jsx(mi,{icon:w.Select,title:"Multi-Select Trick",text:s.jsxs("span",{children:["Hold ",s.jsx("b",{children:"Shift + Click"})," on edges to select multiple links at once."]})}),s.jsx(Io,{selected:"any",onChange:ae=>p("edge-bulk-update",{color:ae}),label:"Line Color",colors:Ps}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("span",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-wider",children:"Routing"}),s.jsxs("div",{className:"grid grid-cols-3 gap-1",children:[s.jsx("button",{onClick:()=>p("edge-bulk-update",{routingType:"straight"}),className:"py-1.5 bg-white border border-blue-200 text-blue-600 text-[10px] font-bold rounded hover:bg-blue-100",children:"STR"}),s.jsx("button",{onClick:()=>p("edge-bulk-update",{routingType:"curved"}),className:"py-1.5 bg-white border border-blue-200 text-blue-600 text-[10px] font-bold rounded hover:bg-blue-100",children:"CRV"}),s.jsx("button",{onClick:()=>p("edge-bulk-update",{routingType:"orthogonal"}),className:"py-1.5 bg-white border border-blue-200 text-blue-600 text-[10px] font-bold rounded hover:bg-blue-100",children:"90"})]})]}),s.jsxs("div",{className:"space-y-2 pt-2 border-t border-blue-100",children:[s.jsx("span",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-wider",children:"Global Alignment"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>p("edge-align-horizontal"),className:"flex-1 py-2 bg-white border border-gray-200 rounded text-xs font-bold text-gray-600 hover:text-blue-600",children:"Align Horiz."}),s.jsx("button",{onClick:()=>p("edge-align-vertical"),className:"flex-1 py-2 bg-white border border-gray-200 rounded text-xs font-bold text-gray-600 hover:text-blue-600",children:"Align Vert."})]})]})]}),d&&f&&s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("h3",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest flex items-center gap-2",children:[s.jsx(w.Magic,{size:12,className:d.active?"text-green-500":""})," Smart Styling"]}),s.jsx("button",{onClick:()=>f({...d,active:!d.active}),className:`text-[10px] font-bold px-2 py-1 rounded border transition-colors ${d.active?"bg-green-50 text-green-600 border-green-200":"bg-gray-100 text-gray-500 border-gray-200"}`,children:d.active?"ACTIVE":"DISABLED"})]}),d.active&&s.jsxs("div",{className:"space-y-4 bg-gray-50 p-3 rounded-xl border border-gray-100 animate-fade-in",children:[s.jsx(mi,{icon:w.Sparkles,title:"Inheritance",text:"New nodes will automatically copy color/shape from their parent or sibling."}),s.jsxs("div",{children:[s.jsx("div",{className:"text-[10px] font-bold text-gray-400 uppercase mb-1 border-b border-gray-200 pb-1",children:"Sibling Inheritance (Enter)"}),s.jsx(tn,{id:"toggle:smart-sibling-color",label:"Sibling Color",iconName:"Palette",onClick:()=>f({...d,sibling:{...d.sibling,color:!d.sibling.color}}),children:s.jsx("div",{className:N?"pointer-events-none":"",children:s.jsx(Rs,{label:"Copy Color",checked:d.sibling.color,onChange:()=>{}})})}),s.jsx(tn,{id:"toggle:smart-sibling-shape",label:"Sibling Shape",iconName:"ShapeRect",onClick:()=>f({...d,sibling:{...d.sibling,shape:!d.sibling.shape}}),children:s.jsx("div",{className:N?"pointer-events-none":"",children:s.jsx(Rs,{label:"Copy Shape",checked:d.sibling.shape,onChange:()=>{}})})})]})]})]}),p&&s.jsxs("div",{children:[s.jsxs("h3",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest mb-4 flex items-center gap-2",children:[s.jsx(w.Palette,{size:12})," Global Style Swap"]}),s.jsxs("div",{className:"bg-gray-50 rounded-xl border border-gray-100 p-4 space-y-5",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsx("div",{className:"text-[10px] font-bold text-blue-600 mb-2 flex justify-between items-center border-b border-blue-100 pb-1",children:s.jsx("span",{children:"FIND MATCHES"})}),s.jsxs("div",{className:"space-y-3 pl-1",children:[s.jsx(za,{selected:j,onChange:U,allowAny:!0,label:"Node Shape"}),s.jsx(Io,{selected:q,onChange:V,allowAny:!0,label:"Node Color"}),s.jsx(Io,{selected:oe,onChange:ce,allowAny:!0,label:"Link Color",colors:Ps})]})]}),s.jsx("div",{className:"flex justify-center -my-1",children:s.jsx("div",{className:"bg-white p-1.5 rounded-full border border-gray-200 shadow-sm z-10",children:s.jsx(w.Arrow,{size:16,className:"text-gray-400 rotate-90"})})}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("div",{className:"text-[10px] font-bold text-green-600 mb-2 flex justify-between items-center border-b border-green-100 pb-1",children:s.jsx("span",{children:"REPLACE WITH"})}),s.jsxs("div",{className:"space-y-3 pl-1",children:[s.jsx(za,{selected:fe,onChange:Q,allowAny:!0,label:"New Shape"}),s.jsx(Io,{selected:Te,onChange:W,allowAny:!0,label:"New Node Color"}),s.jsx(Io,{selected:re,onChange:se,allowAny:!0,label:"New Link Color",colors:Ps})]})]}),s.jsx("button",{onClick:Et,className:`w-full py-2.5 text-xs font-bold rounded-lg transition-colors shadow-md active:scale-95 ${ye==="success"?"bg-green-500 hover:bg-green-600 text-white":"bg-blue-600 hover:bg-blue-700 text-white"}`,children:ye==="success"?"Matches Replaced!":"Run Replace"})]})]}),s.jsxs("div",{children:[s.jsxs("h3",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest mb-4 flex items-center gap-2",children:[s.jsx(w.Palette,{size:12})," Pro Themes"]}),s.jsx("div",{className:"space-y-3",children:Object.values(Ki).map(ae=>s.jsx(z_,{theme:ae,selected:n.theme===ae.id,onClick:()=>o({...n,theme:ae.id})},ae.id))})]})]}),P==="ACTIONS"&&s.jsxs("div",{className:"space-y-6",children:[C&&S&&D&&b&&x&&g&&s.jsxs("div",{className:"bg-white rounded-2xl border border-gray-200 shadow-sm overflow-hidden animate-fade-in",children:[s.jsxs("div",{className:"bg-red-50 px-4 py-3 border-b border-red-100 flex items-center justify-between",children:[s.jsx("h3",{className:"text-[10px] font-black text-red-600 uppercase tracking-widest",children:"DEFAULT CREATION STYLES"}),s.jsx(w.Settings,{size:14,className:"text-red-400"})]}),s.jsxs("div",{className:"p-4 space-y-6",children:[s.jsxs("div",{className:"space-y-3 relative",children:[s.jsx("div",{className:"absolute -left-4 top-2 w-1 h-8 bg-green-500 rounded-r-full"}),s.jsxs("h4",{className:"text-[10px] font-bold text-green-600 uppercase tracking-wider pl-2 flex items-center gap-2",children:[s.jsx(w.Connect,{size:12})," New Links"]}),s.jsxs("div",{className:"space-y-3 pl-2",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx("span",{className:"text-[9px] font-bold text-gray-400 uppercase",children:"Default Routing"}),s.jsxs("div",{className:"grid grid-cols-3 gap-1",children:[s.jsx("button",{onClick:()=>S({...C,routingType:"straight"}),className:`py-2 text-[10px] font-bold rounded border transition-all ${C.routingType==="straight"?"bg-green-500 text-white border-green-600 shadow-md":"bg-white border-gray-200 text-gray-500 hover:bg-gray-50"}`,children:"STR"}),s.jsx("button",{onClick:()=>S({...C,routingType:"curved"}),className:`py-2 text-[10px] font-bold rounded border transition-all ${C.routingType==="curved"?"bg-green-500 text-white border-green-600 shadow-md":"bg-white border-gray-200 text-gray-500 hover:bg-gray-50"}`,children:"CRV"}),s.jsx("button",{onClick:()=>S({...C,routingType:"orthogonal"}),className:`py-2 text-[10px] font-bold rounded border transition-all ${C.routingType==="orthogonal"?"bg-green-500 text-white border-green-600 shadow-md":"bg-white border-gray-200 text-gray-500 hover:bg-gray-50"}`,children:"90"})]})]}),s.jsx(Io,{selected:C.color||"#cbd5e1",onChange:ae=>S({...C,color:ae}),label:"Link Color",colors:Ps})]})]}),s.jsx("div",{className:"h-px bg-gray-100 mx-2"}),s.jsxs("div",{className:"space-y-3 relative",children:[s.jsx("div",{className:"absolute -left-4 top-2 w-1 h-8 bg-pink-500 rounded-r-full"}),s.jsxs("h4",{className:"text-[10px] font-bold text-pink-500 uppercase tracking-wider pl-2 flex items-center gap-2",children:[s.jsx(w.ShapeRect,{size:12})," New Nodes"]}),s.jsxs("div",{className:"space-y-3 pl-2",children:[s.jsx(za,{selected:D,onChange:ae=>b(ae),label:"Default Shape"}),s.jsx(Io,{selected:x,onChange:ae=>g(ae),label:"Node Color"})]})]})]})]}),v&&m!==void 0&&s.jsxs("div",{className:"bg-gray-50 p-4 rounded-xl border border-gray-100",children:[s.jsx("h3",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest mb-3",children:"Input Mode"}),s.jsx(tn,{id:"toggle:link-paint",label:"Link Paint Mode",iconName:"Connect",onClick:()=>v(!m),children:s.jsx("div",{className:N?"pointer-events-none":"",children:s.jsx(Rs,{label:"Link Paint Mode",checked:m,onChange:()=>{}})})}),s.jsxs("div",{className:"mt-2 text-[10px] text-gray-500 leading-relaxed border-l-2 border-blue-300 pl-2",children:["When active, click & drag to paint over links to select them. Nodes will not be selected in this mode. ",s.jsx("span",{className:"font-bold text-indigo-500",children:"Shortcut: Shift + Drag"})]}),m&&s.jsxs("div",{className:"mt-2 text-[10px] text-green-600 font-bold flex items-center gap-1",children:[s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-green-500 animate-pulse"})," Active"]})]}),p&&s.jsx(tn,{id:"action:present",label:"Present",iconName:"Present",onClick:()=>p("present"),children:s.jsxs("button",{className:"w-full py-3 bg-pink-50 hover:bg-pink-100 text-pink-700 font-bold text-xs rounded-xl flex items-center justify-center gap-2 border border-pink-200",children:[s.jsx(w.Present,{size:18})," Dynamic Narrative Mode"]})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest mb-4",children:"Universal Output"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"text-[9px] font-bold text-gray-400 px-1 flex items-center gap-2",children:[s.jsx(w.Image,{size:10})," Visual & Print"]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsx(tt,{id:"export:PNG",label:"8K Image",icon:w.Image,action:"PNG"}),s.jsx(tt,{id:"export:SVG",label:"SVG Vector",icon:w.Pen,action:"SVG"}),s.jsx(tt,{id:"export:PDF",label:"PDF (Print)",icon:w.FileText,action:"PDF"}),s.jsx(tt,{id:"export:JPEG",label:"JPEG",icon:w.Image,action:"JPEG"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"text-[9px] font-bold text-gray-400 px-1 flex items-center gap-2",children:[s.jsx(w.Globe,{size:10})," Web & Interactive"]}),s.jsx("div",{className:"grid grid-cols-1",children:s.jsx(tt,{id:"export:HTML",label:"Interactive HTML Viewer",icon:w.Globe,action:"HTML"})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"text-[9px] font-bold text-gray-400 px-1 flex items-center gap-2",children:[s.jsx(w.FileText,{size:10})," Documentation"]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsx(tt,{id:"export:DOC",label:"Word Doc",icon:w.FileText,action:"DOC"}),s.jsx(tt,{id:"export:MD",label:"Markdown",icon:w.Code,action:"MD"}),s.jsx(tt,{id:"export:TXT",label:"Text Outline",icon:w.AlignLeft,action:"TXT"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"text-[9px] font-bold text-gray-400 px-1 flex items-center gap-2",children:[s.jsx(w.Database,{size:10})," Data & Integration"]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsx(tt,{id:"export:EXCEL",label:"Excel / CSV",icon:w.Table,action:"EXCEL"}),s.jsx(tt,{id:"export:JSON",label:"JSON",icon:w.Code,action:"JSON"}),s.jsx(tt,{id:"export:OPML",label:"OPML",icon:w.Layers,action:"OPML"}),s.jsx(tt,{id:"export:VIDEO",label:"Record Video",icon:w.Camera,action:"VIDEO"})]})]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest mb-4",children:"Quick Reference"}),s.jsxs("div",{className:"space-y-3",children:[s.jsx(mi,{icon:w.Navigation,title:"Navigation",text:s.jsxs("span",{children:["Hold ",s.jsx("b",{children:"SPACE"})," and drag to pan around large maps without switching tools."]})}),s.jsx(mi,{icon:w.Select,title:"Selection",text:s.jsxs("span",{children:[s.jsx("b",{children:"Shift + Click"})," to select multiple items. ",s.jsx("b",{children:"Alt + Click"})," a node to select its entire branch."]})}),s.jsx(mi,{icon:w.Zap,title:"Fast Creation",text:s.jsxs("span",{children:["Press ",s.jsx("b",{children:"TAB"})," for child nodes, ",s.jsx("b",{children:"ENTER"})," for sibling nodes."]})})]}),s.jsxs("button",{onClick:l,className:"w-full mt-6 py-3 text-blue-600 font-bold text-xs bg-blue-50 hover:bg-blue-100 rounded-xl transition-colors flex items-center justify-center gap-2",children:[s.jsx(w.Keyboard,{size:16})," Open Knowledge Base"]})]})]})]})]})},$_=({nodes:e,viewport:t,windowSize:n,setViewport:o})=>{const r=I.useRef(null),[i,l]=I.useState(!1),[u,d]=I.useState(n);I.useEffect(()=>{const j=()=>{d({w:window.innerWidth,h:window.innerHeight})};return j(),window.addEventListener("resize",j),()=>window.removeEventListener("resize",j)},[]);const f=6e3,p=u.w<768,h=p?120:240,m=h/f,v=f/2,C=(j,U)=>{const q=j/m-v,V=U/m-v;return{wx:q,wy:V}},S=(j,U)=>{const q=(j+v)*m,V=(U+v)*m;return{mx:q,my:V}},D=(j,U)=>{const q=u.w/2-j*t.zoom,V=u.h/2-U*t.zoom;o(oe=>({...oe,x:q,y:V}))},b=j=>{var fe;if(i)return;const U=(fe=r.current)==null?void 0:fe.getBoundingClientRect();if(!U)return;const q=j.clientX-U.left,V=j.clientY-U.top,{wx:oe,wy:ce}=C(q,V);D(oe,ce)},x=j=>{j.stopPropagation(),l(!0)};I.useEffect(()=>{const j=q=>{if(!i||!r.current)return;const V=r.current.getBoundingClientRect(),oe=q.clientX-V.left,ce=q.clientY-V.top,{wx:fe,wy:Q}=C(oe,ce);D(fe,Q)},U=()=>{l(!1)};return i&&(window.addEventListener("mousemove",j),window.addEventListener("mouseup",U)),()=>{window.removeEventListener("mousemove",j),window.removeEventListener("mouseup",U)}},[i,t.zoom,u,m]);const g=(u.w/2-t.x)/t.zoom,N=(u.h/2-t.y)/t.zoom,{mx:M,my:T}=S(g,N),P=u.w/t.zoom*m,R=u.h/t.zoom*m;return s.jsxs("div",{ref:r,className:`fixed z-50 bg-white/95 dark:bg-[#1e2030]/95 backdrop-blur-md rounded-xl shadow-2xl overflow-hidden group transition-all duration-300 cursor-crosshair select-none hover:border-indigo-600 dark:hover:border-indigo-400
        ${p?"bottom-24 right-4 border-[2px] border-slate-800/50 dark:border-slate-200/50":"bottom-8 right-8 border-[4px] border-slate-800 dark:border-slate-200"}
      `,style:{width:h,height:h},onMouseDown:b,children:[s.jsx("div",{className:"absolute inset-0 opacity-10 dark:opacity-20 pointer-events-none",style:{backgroundImage:"linear-gradient(#64748b 1px, transparent 1px), linear-gradient(90deg, #64748b 1px, transparent 1px)",backgroundSize:"20px 20px",backgroundPosition:"center"}}),s.jsxs("svg",{className:"absolute inset-0 w-full h-full pointer-events-none opacity-50",children:[s.jsx("defs",{children:s.jsx("marker",{id:"axis-arrow",viewBox:"0 0 10 10",refX:"9",refY:"5",markerWidth:"6",markerHeight:"6",orient:"auto",children:s.jsx("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:"currentColor",className:"text-slate-600 dark:text-slate-300"})})}),[-33,-16,16,33].map(j=>s.jsx("line",{x1:`${50+j}%`,y1:"48%",x2:`${50+j}%`,y2:"52%",stroke:"currentColor",strokeWidth:"1",className:"text-slate-400 dark:text-slate-500"},`tick-x-${j}`)),[-33,-16,16,33].map(j=>s.jsx("line",{x1:"48%",y1:`${50+j}%`,x2:"52%",y2:`${50+j}%`,stroke:"currentColor",strokeWidth:"1",className:"text-slate-400 dark:text-slate-500"},`tick-y-${j}`)),s.jsx("line",{x1:"0",y1:"50%",x2:"100%",y2:"50%",stroke:"currentColor",strokeWidth:"1.5",className:"text-slate-600 dark:text-slate-300",markerEnd:"url(#axis-arrow)"}),s.jsx("line",{x1:"50%",y1:"100%",x2:"50%",y2:"0",stroke:"currentColor",strokeWidth:"1.5",className:"text-slate-600 dark:text-slate-300",markerEnd:"url(#axis-arrow)"}),!p&&s.jsxs(s.Fragment,{children:[s.jsx("text",{x:"94%",y:"46%",className:"text-[10px] font-black fill-slate-700 dark:fill-slate-200",textAnchor:"middle",children:"X"}),s.jsx("text",{x:"54%",y:"8%",className:"text-[10px] font-black fill-slate-700 dark:fill-slate-200",textAnchor:"middle",children:"Y"})]})]}),s.jsx("div",{className:"absolute top-1/2 left-1/2 w-2 h-2 bg-indigo-600 rounded-full -translate-x-1/2 -translate-y-1/2 shadow-sm z-10 ring-2 ring-white"}),e.map(j=>{const{mx:U,my:q}=S(j.position.x,j.position.y);return U<0||U>h||q<0||q>h?null:s.jsx("div",{className:`absolute w-1.5 h-1.5 rounded-full z-20 transition-colors ${j.type==="ROOT"?"bg-red-500 w-2.5 h-2.5 ring-1 ring-white":"bg-slate-600 dark:bg-slate-400"}`,style:{left:U-1,top:q-1}},j.id)}),s.jsx("div",{onMouseDown:x,className:`absolute border-2 cursor-move active:cursor-grabbing transition-colors z-30 rounded-sm ${i?"border-indigo-600 bg-indigo-500/20":"border-indigo-400/70 hover:border-indigo-500 hover:bg-indigo-500/10"}`,style:{left:M-P/2,top:T-R/2,width:P,height:R}}),!p&&s.jsx("div",{className:"absolute bottom-1 right-2 text-[8px] font-black text-slate-400/50 uppercase select-none pointer-events-none tracking-widest",children:"NAVIGATOR"})]})},H_=(e,t,n,o,r=.5)=>{const i={x:(n.x-e.x)*r,y:(n.y-e.y)*r},l={x:(o.x-t.x)*r,y:(o.y-t.y)*r};return{cp1:{x:t.x+i.x/3,y:t.y+i.y/3},cp2:{x:n.x-l.x/3,y:n.y-l.y/3}}},S0=({start:e,end:t,onDelete:n,onContextMenu:o,onHandleMouseDown:r,onLineClick:i,onPointContextMenu:l,options:u,themeColor:d,isSelected:f,edgeId:p})=>{const[h,m]=I.useState(!1),v=(u==null?void 0:u.color)||d||"#cbd5e1",C=(u==null?void 0:u.width)||2,S=(u==null?void 0:u.endMarker)??"arrow",D=(u==null?void 0:u.routingType)||"curved",b=(u==null?void 0:u.controlPoints)||[],x=I.useMemo(()=>{const P=[e,...b,t];if(D==="straight")return`M ${P.map(R=>`${R.x} ${R.y}`).join(" L ")}`;if(D==="orthogonal"){let R=`M ${e.x} ${e.y}`;for(let j=0;j<P.length-1;j++){const U=P[j],q=P[j+1],V=(U.x+q.x)/2;R+=` L ${V} ${U.y} L ${V} ${q.y} L ${q.x} ${q.y}`}return R}if(b.length===0){const R=t.x-e.x;t.y-e.y;const j=Math.min(Math.abs(R)*.8,150),U=e.x+j,q=e.y,V=t.x-j,oe=t.y;return`M ${e.x} ${e.y} C ${U} ${q}, ${V} ${oe}, ${t.x} ${t.y}`}else{let R=`M ${e.x} ${e.y}`;const j={x:e.x-(b[0].x-e.x),y:e.y-(b[0].y-e.y)},U={x:t.x+(t.x-b[b.length-1].x),y:t.y+(t.y-b[b.length-1].y)},q=[j,e,...b,t,U];for(let V=1;V<q.length-2;V++){const oe=q[V-1],ce=q[V],fe=q[V+1],Q=q[V+2],{cp1:Te,cp2:W}=H_(oe,ce,fe,Q);R+=` C ${Te.x} ${Te.y}, ${W.x} ${W.y}, ${fe.x} ${fe.y}`}return R}},[e,t,D,b]),g=I.useMemo(()=>{if(b.length>0){const j=Math.floor(b.length/2);return b[j]}const P=(e.x+t.x)/2,R=(e.y+t.y)/2;return{x:P,y:R}},[e,t,b]),N=`edge-${Math.round(e.x)}-${Math.round(e.y)}-${Math.round(t.x)}-${Math.round(t.y)}`,M=u!=null&&u.animated?"animate-flow":"",T=(u==null?void 0:u.stroke)==="dashed"?"5,5":(u==null?void 0:u.stroke)==="dotted"?"2,2":"none";return s.jsxs("g",{onMouseEnter:()=>m(!0),onMouseLeave:()=>m(!1),onContextMenu:o,className:"group",children:[s.jsxs("defs",{children:[s.jsx("marker",{id:`${N}-arrow`,markerWidth:"6",markerHeight:"6",refX:"5",refY:"3",orient:"auto",children:s.jsx("path",{d:"M0,0 L6,3 L0,6",fill:h||f?"#ef4444":v})}),s.jsx("marker",{id:`${N}-dot`,markerWidth:"6",markerHeight:"6",refX:"3",refY:"3",orient:"auto",children:s.jsx("circle",{cx:"3",cy:"3",r:"2",fill:h||f?"#ef4444":v})})]}),s.jsx("path",{d:x,fill:"none",stroke:"transparent",strokeWidth:Math.max(C+14,20),className:"cursor-pointer",onClick:P=>{P.stopPropagation(),i&&i(P)},"data-edge-id":p,pointerEvents:"auto"}),f&&s.jsx("path",{d:x,fill:"none",stroke:"#3b82f6",strokeWidth:C+6,strokeLinecap:"round",strokeLinejoin:"round",opacity:.5,className:"animate-pulse"}),s.jsx("path",{d:x,fill:"none",stroke:h||f?"#ef4444":v,strokeWidth:h?C+1:C,strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:M?"5":T,markerEnd:S==="arrow"?`url(#${N}-arrow)`:S==="dot"?`url(#${N}-dot)`:void 0,className:`${M} pointer-events-none transition-colors duration-200`}),(h||b.length>0||f)&&b.map((P,R)=>s.jsx("g",{transform:`translate(${P.x}, ${P.y})`,children:s.jsx("circle",{r:f?6:5,fill:"white",stroke:f?"#ef4444":v,strokeWidth:2,className:"cursor-move hover:scale-125 transition-transform",onMouseDown:j=>{j.stopPropagation(),r&&r(R,j)},onContextMenu:j=>{j.stopPropagation(),j.preventDefault(),l&&l(R,j)}})},R)),(u==null?void 0:u.label)&&s.jsx("foreignObject",{x:g.x-60,y:g.y-15,width:"120",height:"30",className:"pointer-events-none",children:s.jsx("div",{className:"w-full h-full flex items-center justify-center",children:s.jsx("span",{className:"bg-white/90 backdrop-blur text-[10px] font-bold text-slate-700 px-2 py-0.5 rounded-full border border-slate-200 shadow-sm truncate max-w-full pointer-events-auto cursor-text select-none",title:u.label,children:u.label})})})]})},G_=["#cbd5e1","#94a3b8","#ef4444","#f59e0b","#10b981","#3b82f6","#8b5cf6","#ec4899","#000000"],B_=({anchorRect:e,nodeId:t,activeNodeType:n,isEdge:o,isControlPoint:r,onClose:i,onAction:l})=>{const u=I.useRef(null),[d,f]=I.useState({x:0,y:0}),[p,h]=I.useState(!1),[m,v]=I.useState(!1),C=I.useRef(null);I.useEffect(()=>{const N=M=>{u.current&&!u.current.contains(M.target)&&i()};return window.addEventListener("mousedown",N),()=>window.removeEventListener("mousedown",N)},[i]);const S=()=>{C.current&&(clearTimeout(C.current),C.current=null),h(!0)},D=()=>{m||(C.current=setTimeout(()=>{h(!1)},300))},b=N=>{N.stopPropagation(),v(!m),h(!0)};I.useLayoutEffect(()=>{if(u.current){const N=u.current.getBoundingClientRect(),{innerWidth:M,innerHeight:T}=window,P=12;let R=e.right+P,j=e.top;!t&&!o&&!r&&(R=e.left,j=e.top),R+N.width>M&&(R=e.left-N.width-P),j+N.height>T&&(j=T-N.height-P),j<P&&(j=P),R<P&&(R=P),f({x:R,y:j})}},[e,t,o,r]);const x=({icon:N,label:M,action:T,hasSub:P,onHover:R})=>s.jsxs("button",{onClick:j=>{P||(j.stopPropagation(),l(T),i())},onMouseEnter:R,className:"w-full flex items-center justify-between px-3 py-2 rounded-lg hover:bg-gray-100 transition-all text-sm font-bold text-gray-700 group relative",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[N&&s.jsx(N,{size:16,className:"text-gray-400 group-hover:text-blue-500"}),s.jsx("span",{children:M})]}),P&&s.jsx(w.CornerDownRight,{size:12,className:"opacity-30 -rotate-90"})]}),g=async()=>{if(!window.EyeDropper){alert("Eyedropper not supported in this browser.");return}try{const T=(await new window.EyeDropper().open()).sRGBHex;l(o?"edge-color":"color-hex",T),i()}catch(N){console.error(N)}};return r?s.jsxs("div",{ref:u,className:"fixed z-[100] min-w-[200px] bg-white/95 backdrop-blur-xl border border-white/20 rounded-2xl shadow-clay-xl flex flex-col origin-top-left p-2",style:{left:d.x,top:d.y},onMouseDown:N=>N.stopPropagation(),onContextMenu:N=>N.preventDefault(),children:[s.jsx("div",{className:"px-3 py-2 text-[10px] font-black text-gray-400 uppercase tracking-widest border-b border-gray-100 mb-1",children:"Control Point"}),s.jsx(x,{icon:w.Trash,label:"Delete Point",action:"delete-control-point"})]}):o?s.jsxs("div",{ref:u,className:"fixed z-[100] min-w-[240px] bg-white/95 backdrop-blur-xl border border-white/20 rounded-2xl shadow-clay-xl flex flex-col origin-top-left p-3",style:{left:d.x,top:d.y},onMouseDown:N=>N.stopPropagation(),onContextMenu:N=>N.preventDefault(),children:[s.jsxs("div",{className:"flex items-center justify-between px-1 mb-2",children:[s.jsx("span",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Connection"}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx("button",{onClick:g,className:"p-1.5 hover:bg-gray-100 rounded text-gray-500",title:"Pick Color",children:s.jsx(w.Pipette,{size:14})}),s.jsxs("label",{className:"p-1.5 hover:bg-gray-100 rounded text-gray-500 cursor-pointer relative",children:[s.jsx(w.Palette,{size:14}),s.jsx("input",{type:"color",className:"opacity-0 absolute inset-0 w-full h-full cursor-pointer",onChange:N=>l("edge-color",N.target.value)})]})]})]}),s.jsx("div",{className:"flex flex-wrap gap-2 mb-3 px-1",children:G_.map(N=>s.jsx("button",{onClick:()=>l("edge-color",N),className:"w-5 h-5 rounded-full shadow-sm hover:scale-125 transition-transform ring-1 ring-black/5",style:{backgroundColor:N}},N))}),s.jsxs("div",{className:"grid grid-cols-3 gap-1 mb-2",children:[s.jsx("button",{onClick:()=>l("edge-routing-straight"),className:"h-8 flex items-center justify-center bg-gray-50 hover:bg-gray-100 rounded border border-gray-100 text-[10px] font-bold text-gray-500 uppercase",title:"Straight",children:"STR"}),s.jsx("button",{onClick:()=>l("edge-routing-curved"),className:"h-8 flex items-center justify-center bg-gray-50 hover:bg-gray-100 rounded border border-gray-100 text-[10px] font-bold text-gray-500 uppercase",title:"Curved",children:"CRV"}),s.jsx("button",{onClick:()=>l("edge-routing-orthogonal"),className:"h-8 flex items-center justify-center bg-gray-50 hover:bg-gray-100 rounded border border-gray-100 text-[10px] font-bold text-gray-500 uppercase",title:"Orthogonal",children:"90"})]}),s.jsx("div",{className:"grid grid-cols-3 gap-1 mb-2",children:["solid","dashed","dotted"].map(N=>s.jsx("button",{onClick:()=>l("edge-style",N),className:"h-8 flex items-center justify-center bg-gray-50 hover:bg-gray-100 rounded border border-gray-100",title:N,children:s.jsx("div",{className:`w-6 h-0.5 bg-gray-500 ${N==="dashed"?"border-b-2 border-dashed border-gray-500 bg-transparent":N==="dotted"?"border-b-2 border-dotted border-gray-500 bg-transparent":""}`})},N))}),s.jsx("div",{className:"h-px bg-gray-100 my-2"}),s.jsx(x,{icon:w.Plus,label:"Add Control Point",action:"edge-add-point"}),s.jsx(x,{icon:w.Edit,label:"Edit Label",action:"edge-label"}),s.jsx(x,{icon:w.Zap,label:"Toggle Animation",action:"edge-animate"}),s.jsx("div",{className:"h-px bg-gray-100 my-2"}),s.jsx(x,{icon:w.Trash,label:"Delete Connection",action:"edge-delete"})]}):t?null:s.jsxs("div",{ref:u,className:"fixed z-[100] min-w-[220px] bg-white/95 backdrop-blur-xl border border-white/20 rounded-2xl shadow-clay-xl flex flex-col origin-top-left p-2",style:{left:d.x,top:d.y},onMouseDown:N=>N.stopPropagation(),onContextMenu:N=>N.preventDefault(),children:[s.jsx("div",{className:"px-3 py-2 text-[10px] font-black text-gray-400 uppercase tracking-widest border-b border-gray-100 mb-1",children:"Canvas Actions"}),s.jsxs("div",{className:"relative",onMouseEnter:S,onMouseLeave:D,onClick:b,children:[s.jsx(x,{icon:w.Plus,label:"Add Node",hasSub:!0}),p&&s.jsx("div",{className:"absolute left-full top-[-8px] pl-2 pt-2 z-[110] min-w-[200px]",onMouseEnter:S,onMouseLeave:D,children:s.jsxs("div",{className:"bg-white rounded-xl shadow-xl border border-gray-100 p-2 grid grid-cols-1 gap-1",children:[s.jsx("div",{className:"text-[10px] font-bold text-gray-400 px-2 py-1 uppercase",children:"Shapes"}),s.jsxs("button",{onClick:()=>l("add-node-shape","rectangle"),className:"flex items-center gap-3 p-2 hover:bg-blue-50 rounded text-sm text-gray-600",children:[s.jsx(w.ShapeRect,{size:14})," Rectangle"]}),s.jsxs("button",{onClick:()=>l("add-node-shape","rounded"),className:"flex items-center gap-3 p-2 hover:bg-blue-50 rounded text-sm text-gray-600",children:[s.jsx("div",{className:"w-3 h-3 border-2 border-gray-500 rounded-sm"})," Rounded"]}),s.jsxs("button",{onClick:()=>l("add-node-shape","circle"),className:"flex items-center gap-3 p-2 hover:bg-blue-50 rounded text-sm text-gray-600",children:[s.jsx(w.ShapeCircle,{size:14})," Circle"]}),s.jsxs("button",{onClick:()=>l("add-node-shape","diamond"),className:"flex items-center gap-3 p-2 hover:bg-blue-50 rounded text-sm text-gray-600",children:[s.jsx("div",{className:"w-3 h-3 border-2 border-gray-500 rotate-45"})," Diamond"]}),s.jsxs("button",{onClick:()=>l("add-node-shape","triangle"),className:"flex items-center gap-3 p-2 hover:bg-blue-50 rounded text-sm text-gray-600",children:[s.jsx(w.ShapeTriangle,{size:14})," Triangle"]}),s.jsxs("button",{onClick:()=>l("add-node-shape","hexagon"),className:"flex items-center gap-3 p-2 hover:bg-blue-50 rounded text-sm text-gray-600",children:[s.jsx(w.ShapeHexagon,{size:14})," Hexagon"]}),s.jsxs("button",{onClick:()=>l("add-node-shape","cloud"),className:"flex items-center gap-3 p-2 hover:bg-blue-50 rounded text-sm text-gray-600",children:[s.jsx(w.ShapeCloud,{size:14})," Cloud"]}),s.jsx("div",{className:"h-px bg-gray-100 my-1"}),s.jsxs("button",{onClick:()=>l("add-node"),className:"flex items-center gap-2 p-2 hover:bg-blue-50 rounded text-sm font-bold text-blue-600",children:[s.jsx(w.Plus,{size:14})," Default Node"]})]})})]}),s.jsx(x,{icon:w.StickyNote,label:"Add Note",action:"new-sticky-color"}),s.jsx(x,{icon:w.Image,label:"Paste Media",action:"open-media-modal"}),s.jsx("div",{className:"h-px bg-gray-100 my-1"}),s.jsx(x,{icon:w.Pen,label:"Start Drawing",action:"start-drawing"}),s.jsx(x,{icon:w.Code,label:"Insert Code Block",action:"insert-code"}),s.jsx(x,{icon:w.Table,label:"Insert Table",action:"insert-table"}),s.jsx("div",{className:"h-px bg-gray-100 my-1"}),s.jsx(x,{icon:w.Layout,label:"Auto Layout",action:"fit"})]})},q_=({isOpen:e,onClose:t,nodes:n,onAction:o})=>{const[r,i]=I.useState([]),[l,u]=I.useState(""),[d,f]=I.useState(!1),p=I.useRef(null),h=I.useRef(null),m=()=>{var S;(S=p.current)==null||S.scrollIntoView({behavior:"smooth"})};I.useEffect(()=>{m(),e&&setTimeout(()=>{var S;return(S=h.current)==null?void 0:S.focus()},100)},[r,e]);const v=async()=>{if(!l.trim())return;const S=l;i(D=>[...D,{role:"user",text:S}]),u(""),f(!0);try{const D=r.slice(-6).map(x=>`${x.role}: ${x.text}`).join(`
`),b=await Dk(S,D,n);b.text&&i(x=>[...x,{role:"model",text:b.text}]),b.actions&&b.actions.length>0&&(o(b.actions),i(x=>{var g;return[...x,{role:"model",text:` Executed ${(g=b.actions)==null?void 0:g.length} automated actions.`}]}))}catch(D){console.error(D),i(b=>[...b,{role:"model",text:"Sorry, I encountered an error connecting to the AI."}])}finally{f(!1)}},C=S=>{S.key==="Enter"&&!S.shiftKey&&(S.preventDefault(),v())};return e?s.jsxs("div",{className:"fixed right-4 bottom-24 z-[150] w-96 h-[500px] bg-white rounded-2xl shadow-2xl border border-gray-200 flex flex-col animate-slide-up overflow-hidden font-sans",children:[s.jsxs("div",{className:"bg-gradient-to-r from-indigo-500 to-purple-600 p-4 flex items-center justify-between text-white shrink-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"relative",children:s.jsx(w.Sparkles,{size:20,className:"animate-pulse text-yellow-300"})}),s.jsx("span",{className:"font-bold text-lg",children:"AI Co-Pilot"})]}),s.jsx("button",{onClick:t,className:"p-1 hover:bg-white/20 rounded-full transition-colors",children:s.jsx(w.Close,{size:18})})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-gray-50",children:[r.length===0&&s.jsxs("div",{className:"text-center text-gray-400 mt-10 text-sm",children:[s.jsx(w.Brain,{className:"mx-auto mb-2 opacity-50",size:32}),s.jsx("p",{className:"font-bold text-gray-500",children:"Context Aware Mode Active"}),s.jsx("p",{className:"text-xs mt-1",children:`Try "Link 'Idea' to 'Project'" or "Find duplicate nodes"`})]}),r.map((S,D)=>s.jsx("div",{className:`flex ${S.role==="user"?"justify-end":"justify-start"}`,children:s.jsx("div",{className:`max-w-[85%] p-3 rounded-2xl text-sm whitespace-pre-wrap ${S.role==="user"?"bg-blue-500 text-white rounded-tr-none":"bg-white border border-gray-200 text-gray-800 rounded-tl-none shadow-sm"}`,children:S.text})},D)),d&&s.jsx("div",{className:"flex justify-start",children:s.jsxs("div",{className:"bg-white border border-gray-200 p-3 rounded-2xl rounded-tl-none shadow-sm flex gap-1",children:[s.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),s.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce delay-75"}),s.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce delay-150"})]})}),s.jsx("div",{ref:p})]}),s.jsx("div",{className:"p-3 bg-white border-t border-gray-200 shrink-0",children:s.jsxs("div",{className:"relative flex items-center",children:[s.jsx("textarea",{ref:h,value:l,onChange:S=>u(S.target.value),onKeyDown:C,placeholder:"Ask AI to edit map...",className:"w-full bg-gray-100 border-0 rounded-xl pl-4 pr-12 py-3 text-sm focus:ring-2 focus:ring-blue-500 focus:outline-none resize-none h-12 max-h-24 custom-scrollbar"}),s.jsx("button",{onClick:v,disabled:!l.trim()||d,className:"absolute right-2 p-2 bg-blue-500 hover:bg-blue-600 disabled:bg-gray-300 text-white rounded-lg transition-colors",children:s.jsx(w.Send,{size:16})})]})})]}):null},O_=({projectName:e,setProjectName:t,activeToolName:n,onShare:o,onSettings:r,onAction:i,isSettingsOpen:l,isDarkMode:u,onBack:d,isVoiceActive:f,onToggleVoice:p})=>{const[h,m]=I.useState(!1),[v,C]=I.useState("saved"),[S,D]=I.useState(null),b=I.useRef(null);I.useEffect(()=>{C("saving");const g=setTimeout(()=>C("saved"),1e3);return()=>clearTimeout(g)},[e]),I.useEffect(()=>{const g=N=>{b.current&&!b.current.contains(N.target)&&D(null)};return document.addEventListener("mousedown",g),()=>document.removeEventListener("mousedown",g)},[]);const x=({title:g,items:N})=>s.jsxs("div",{className:"relative",children:[s.jsx("button",{onClick:()=>D(S===g?null:g),className:`hover:bg-gray-100 px-2 py-1 rounded transition-colors text-sm font-medium ${S===g?"bg-gray-100 text-black":"text-gray-700"}`,children:g}),S===g&&s.jsx("div",{className:"absolute top-full left-0 mt-1 w-56 bg-white rounded-lg shadow-xl border border-gray-200 py-1 z-[60] animate-fade-in",children:N.map((M,T)=>M.isDivider?s.jsx("div",{className:"h-px bg-gray-100 my-1"},T):s.jsxs("button",{onClick:()=>{M.action(),D(null)},className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-blue-50 hover:text-blue-600 flex items-center justify-between group",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[M.icon&&s.jsx(M.icon,{size:14,className:"text-gray-400 group-hover:text-blue-500"}),s.jsx("span",{children:M.label})]}),M.shortcut&&s.jsx("span",{className:"text-xs text-gray-400 font-mono",children:M.shortcut})]},T))})]});return s.jsxs("div",{className:"fixed top-0 left-0 right-0 z-50 h-[60px] bg-white border-b border-gray-200 flex items-center justify-between px-4 shadow-sm select-none",children:[s.jsxs("div",{className:"flex items-center gap-4 pointer-events-auto min-w-0",ref:b,children:[s.jsx("button",{onClick:d,className:"p-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg transition-colors shadow-sm shrink-0",title:"Back to Home",children:s.jsx(w.Brain,{size:20})}),s.jsxs("div",{className:"flex flex-col justify-center min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[h?s.jsx("input",{autoFocus:!0,className:"font-sans font-bold text-lg text-gray-800 bg-transparent outline-none border-b-2 border-indigo-500 px-1 min-w-[150px]",value:e,onChange:g=>t(g.target.value),onBlur:()=>m(!1),onKeyDown:g=>g.key==="Enter"&&m(!1)}):s.jsx("button",{className:"font-sans font-bold text-lg text-gray-800 hover:bg-gray-100 px-2 rounded -ml-2 text-left truncate max-w-[300px]",onClick:()=>m(!0),title:"Rename Project",children:e}),s.jsxs("div",{className:"flex items-center gap-1 text-gray-400",title:v==="saved"?"All changes saved":"Saving...",children:[v==="saved"?s.jsx(w.ShapeCloud,{size:14,className:"text-gray-400"}):s.jsx(w.Sparkles,{size:14,className:"text-blue-400 animate-pulse"}),v==="saved"&&s.jsx("span",{className:"text-[10px] font-medium hidden sm:inline",children:"Saved"})]})]}),s.jsxs("div",{className:"flex items-center gap-1 mt-0.5",children:[s.jsx(x,{title:"File",items:[{label:"New Map (Clear)",action:()=>i("new-map"),icon:w.Plus},{label:"Save",action:()=>C("saving"),shortcut:"Ctrl+S",icon:w.Cloud},{label:"",action:()=>{},isDivider:!0},{label:"Export PNG Image",action:()=>i("export-image"),icon:w.Image},{label:"Export JPEG Image",action:()=>i("export-jpeg"),icon:w.Image},{label:"Export Text Outline",action:()=>i("export-text"),icon:w.FileText},{label:"Export JSON Backup",action:()=>i("export-json"),icon:w.Download},{label:"",action:()=>{},isDivider:!0},{label:"Exit to Home",action:()=>d&&d(),icon:w.Close}]}),s.jsx(x,{title:"Edit",items:[{label:"Undo",action:()=>i("undo"),shortcut:"Ctrl+Z",icon:w.Undo},{label:"Redo",action:()=>i("redo"),shortcut:"Ctrl+Y",icon:w.Redo},{label:"Select All",action:()=>i("select-all"),shortcut:"Ctrl+A",icon:w.Select}]}),s.jsx(x,{title:"View",items:[{label:"Zoom In",action:()=>i("zoom-in"),icon:w.Plus},{label:"Zoom Out",action:()=>i("zoom-out"),icon:w.Minus},{label:"Fit to Screen",action:()=>i("fit"),shortcut:"L",icon:w.Maximize},{label:"Center View",action:()=>i("center"),shortcut:"C",icon:w.Navigation},{label:"",action:()=>{},isDivider:!0},{label:"Start Presentation",action:()=>i("present"),icon:w.Present}]}),s.jsx(x,{title:"Help",items:[{label:"Keyboard Shortcuts",action:()=>i("shortcuts"),shortcut:"?",icon:w.Keyboard},{label:"About Singularity",action:()=>alert("Singularity MindMap v1.0"),icon:w.Help}]})]})]})]}),s.jsxs("div",{className:"flex items-center gap-4 shrink-0 pointer-events-auto ml-4",children:[p&&s.jsxs("button",{onClick:p,className:`flex items-center gap-2 px-3 py-1.5 rounded-full border transition-all duration-300 ${f?"bg-red-50 border-red-200 text-red-600 shadow-inner":"bg-white border-gray-200 text-gray-500 hover:border-gray-300 hover:text-gray-700"}`,title:f?"Listening... (Click to stop)":"Enable Voice Control",children:[s.jsx(w.Mic,{size:16,className:f?"animate-pulse":""}),f&&s.jsx("span",{className:"text-xs font-bold animate-pulse",children:"Listening"})]}),s.jsxs("div",{className:"hidden md:flex items-center gap-2 bg-gray-100 px-3 py-1.5 rounded-full border border-gray-200",children:[s.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse"}),s.jsx("span",{className:"text-xs font-mono font-bold text-gray-500 uppercase",children:n})]}),s.jsx("div",{className:"h-8 w-px bg-gray-200 mx-2 hidden sm:block"}),s.jsxs("button",{onClick:()=>i("present"),className:"flex items-center gap-2 px-4 py-2 bg-white hover:bg-gray-50 text-gray-700 border border-gray-200 rounded-full font-bold text-sm shadow-sm transition-all",title:"Start Presentation Mode",children:[s.jsx(w.Present,{size:16,className:"text-pink-500"}),s.jsx("span",{className:"hidden sm:inline",children:"Present"})]}),s.jsxs("button",{onClick:o,className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white hover:bg-indigo-700 rounded-full font-bold text-sm shadow-md hover:shadow-lg transition-all transform active:scale-95",children:[s.jsx(w.Share,{size:16}),s.jsx("span",{className:"hidden sm:inline",children:"Share"})]}),s.jsx("button",{onClick:r,className:`p-2 rounded-full transition-all duration-300 transform ${l?"bg-blue-100 text-blue-600 rotate-90 shadow-inner scale-110":"text-gray-500 hover:bg-gray-100 hover:text-gray-800 hover:rotate-45"}`,title:"Settings",children:s.jsx(w.Settings,{size:22})}),s.jsx("button",{className:"w-9 h-9 rounded-full bg-gradient-to-tr from-pink-500 to-orange-400 p-0.5 shadow-sm hover:shadow-md transition-shadow",children:s.jsx("div",{className:"w-full h-full rounded-full bg-white flex items-center justify-center",children:s.jsx("span",{className:"font-bold text-xs text-orange-500",children:"ME"})})})]})]})},W_=({zoom:e,onZoomIn:t,onZoomOut:n,onZoomChange:o,onFitView:r,onUndo:i,onRedo:l,canUndo:u,canRedo:d,onExpandAll:f,onCollapseAll:p})=>s.jsx("div",{className:"fixed bottom-6 left-1/2 -translate-x-1/2 z-50 flex items-center gap-2 pointer-events-auto select-none origin-bottom scale-90 md:scale-100 transition-transform",children:s.jsxs("div",{className:"bg-white/80 backdrop-blur-xl border border-white/40 rounded-2xl shadow-clay-lg p-1.5 flex items-center gap-1 max-w-[95vw] overflow-x-auto custom-scrollbar md:overflow-visible",children:[s.jsxs("div",{className:"flex items-center shrink-0",children:[s.jsx("button",{onClick:i,disabled:!u,className:"p-2 rounded-xl hover:bg-gray-100 disabled:opacity-30 transition-colors text-gray-600",title:"Undo (Ctrl+Z)",children:s.jsx(w.Undo,{size:18})}),s.jsx("button",{onClick:l,disabled:!d,className:"p-2 rounded-xl hover:bg-gray-100 disabled:opacity-30 transition-colors text-gray-600",title:"Redo (Ctrl+Y)",children:s.jsx(w.Redo,{size:18})})]}),s.jsx("div",{className:"w-px h-6 bg-gray-200 mx-1 shrink-0"}),s.jsxs("div",{className:"flex items-center shrink-0",children:[p&&s.jsx("button",{onClick:p,className:"p-2 rounded-xl hover:bg-gray-100 text-gray-600 transition-colors",title:"Collapse All (<<)",children:s.jsx(w.ChevronsLeft,{size:18})}),f&&s.jsx("button",{onClick:f,className:"p-2 rounded-xl hover:bg-gray-100 text-gray-600 transition-colors",title:"Expand All (>>)",children:s.jsx(w.ChevronsRight,{size:18})})]}),s.jsx("div",{className:"w-px h-6 bg-gray-200 mx-1 hidden sm:block shrink-0"}),s.jsxs("div",{className:"flex items-center gap-2 px-1 shrink-0",children:[s.jsx("button",{onClick:n,className:"w-8 h-8 flex items-center justify-center rounded-xl hover:bg-gray-100 text-gray-600 transition-colors",children:s.jsx(w.Minus,{size:16})}),s.jsxs("div",{className:"flex items-center gap-2 bg-gray-100/50 rounded-lg px-3 py-1 border border-gray-200/50 h-8",children:[s.jsx("input",{type:"range",min:"0.1",max:"5",step:"0.1",value:e,onChange:h=>o(parseFloat(h.target.value)),className:"w-24 h-1.5 bg-gray-300 rounded-lg appearance-none cursor-pointer accent-gray-600 hover:accent-blue-600 transition-all hidden md:block",title:"Zoom Scale"}),s.jsxs("div",{className:"w-9 text-right font-mono font-bold text-xs text-gray-600 select-none",children:[Math.round(e*100),"%"]})]}),s.jsx("button",{onClick:t,className:"w-8 h-8 flex items-center justify-center rounded-xl hover:bg-gray-100 text-gray-600 transition-colors",children:s.jsx(w.Plus,{size:16})})]}),s.jsx("div",{className:"w-px h-6 bg-gray-200 mx-1 shrink-0"}),s.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-100 rounded-xl text-gray-600 transition-colors shrink-0",title:"Fit to Screen (L)",children:s.jsx(w.Maximize,{size:18})})]})}),J_=["#ffffff","#fef3c7","#dbeafe","#fce7f3","#dcfce7","#ef4444","#f59e0b","#10b981","#3b82f6"],Y_=[{id:"rectangle",icon:w.ShapeRect},{id:"rounded",icon:()=>s.jsx("div",{className:"w-3 h-2 border-2 border-current rounded-md"})},{id:"circle",icon:w.ShapeCircle},{id:"diamond",icon:()=>s.jsx("div",{className:"w-2.5 h-2.5 border-2 border-current rotate-45"})},{id:"triangle",icon:w.ShapeTriangle},{id:"hexagon",icon:w.ShapeHexagon},{id:"cloud",icon:w.ShapeCloud}],K_=({isOpen:e,onClose:t,onGenerate:n,nodeLabel:o,onLabelChange:r})=>{const[i,l]=I.useState("CONTENT"),[u,d]=I.useState(3),[f,p]=I.useState(!0),[h,m]=I.useState(1),[v,C]=I.useState("standard"),[S,D]=I.useState("MINDMAP"),[b,x]=I.useState(""),[g,N]=I.useState(!1),[M,T]=I.useState({inheritNodeColor:!0,customNodeColor:"#ffffff",inheritNodeShape:!0,customNodeShape:"rounded",inheritLinkColor:!0,customLinkColor:"#cbd5e1",inheritLinkStyle:!0,customLinkStyle:"curved"}),[P,R]=I.useState(!1),[j,U]=I.useState(o),q=I.useRef(null);I.useEffect(()=>{e&&(U(o),x(""),m(1),l("CONTENT"),N(!1))},[e,o]),I.useEffect(()=>{P&&q.current&&q.current.focus()},[P]);const V=()=>{j.trim()!==""?r(j):U(o),R(!1)},oe=Q=>{Q.key==="Enter"&&V(),Q.key==="Escape"&&(U(o),R(!1))},ce=Q=>{const Te=Math.max(1,Math.min(5,Q));m(Te),Te>3?N(!0):N(!1)},fe=({selected:Q,onChange:Te})=>s.jsxs("div",{className:"flex flex-wrap gap-2 p-2 bg-gray-50 rounded-xl border border-gray-100",children:[J_.map(W=>s.jsx("button",{onClick:()=>Te(W),className:`w-6 h-6 rounded-full border border-black/10 transition-transform hover:scale-110 ${Q===W?"ring-2 ring-indigo-400 scale-110":""}`,style:{backgroundColor:W}},W)),s.jsxs("div",{className:"relative w-6 h-6 rounded-full overflow-hidden border border-gray-300",children:[s.jsx("input",{type:"color",value:Q,onChange:W=>Te(W.target.value),className:"opacity-0 absolute inset-0 w-full h-full cursor-pointer"}),s.jsx("div",{className:"w-full h-full",style:{backgroundColor:Q}})]})]});return e?s.jsx("div",{className:"fixed inset-0 z-[200] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",children:s.jsxs("div",{className:"bg-white dark:bg-[#1e2030] w-full max-w-lg rounded-2xl shadow-clay-xl overflow-hidden border border-white/20 relative flex flex-col max-h-[90vh]",children:[s.jsxs("div",{className:"p-6 pb-2 border-b border-gray-100 dark:border-white/5 relative",children:[s.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 transition-colors",children:s.jsx(w.Close,{size:20})}),s.jsxs("div",{className:"flex items-center gap-2 mb-1 text-indigo-500",children:[s.jsx(w.Sparkles,{size:20,fill:"currentColor"}),s.jsx("h2",{className:"text-lg font-display font-bold",children:"Expand Idea"})]}),s.jsx("div",{children:s.jsxs("div",{className:"flex items-center gap-2 group",children:[P?s.jsx("input",{ref:q,value:j,onChange:Q=>U(Q.target.value),onBlur:V,onKeyDown:oe,className:"text-2xl font-black text-gray-800 dark:text-white bg-transparent border-b-2 border-indigo-500 outline-none w-full py-1"}):s.jsx("h1",{onClick:()=>R(!0),className:"text-2xl font-black text-gray-800 dark:text-white cursor-pointer border-b-2 border-transparent hover:border-gray-200 transition-colors truncate",title:"Click to edit node name",children:o}),!P&&s.jsx(w.Edit,{size:16,className:"text-gray-400 opacity-0 group-hover:opacity-100 cursor-pointer transition-opacity",onClick:()=>R(!0)})]})})]}),s.jsxs("div",{className:"flex px-6 pt-4 pb-2 gap-4",children:[s.jsx("button",{onClick:()=>l("CONTENT"),className:`pb-2 text-sm font-bold border-b-2 transition-colors ${i==="CONTENT"?"text-indigo-600 border-indigo-600":"text-gray-400 border-transparent hover:text-gray-600"}`,children:"1. Content & Logic"}),s.jsx("button",{onClick:()=>l("STYLE"),className:`pb-2 text-sm font-bold border-b-2 transition-colors ${i==="STYLE"?"text-indigo-600 border-indigo-600":"text-gray-400 border-transparent hover:text-gray-600"}`,children:"2. Visual Style"})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-6 space-y-6",children:[i==="CONTENT"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex bg-gray-100 p-1 rounded-lg",children:[s.jsxs("button",{onClick:()=>D("MINDMAP"),className:`flex-1 py-2 text-xs font-bold rounded-md transition-all flex items-center justify-center gap-2 ${S==="MINDMAP"?"bg-white shadow text-indigo-600":"text-gray-500"}`,children:[s.jsx(w.Brain,{size:14})," Mind Map"]}),s.jsxs("button",{onClick:()=>D("FLOWCHART"),className:`flex-1 py-2 text-xs font-bold rounded-md transition-all flex items-center justify-center gap-2 ${S==="FLOWCHART"?"bg-white shadow text-blue-600":"text-gray-500"}`,children:[s.jsx(w.Flowchart,{size:14})," Flowchart"]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase mb-1 block",children:"Context / Motive"}),s.jsx("input",{type:"text",value:b,onChange:Q=>x(Q.target.value),placeholder:S==="MINDMAP"?"e.g. 'Classifications', 'Pros & Cons'":"e.g. 'User Login Process'",className:"w-full bg-gray-50 dark:bg-white/5 border border-gray-200 dark:border-white/10 rounded-xl px-4 py-3 text-sm font-medium outline-none focus:ring-2 focus:ring-indigo-500 transition-all text-gray-700 dark:text-gray-200 placeholder-gray-400",autoFocus:!0})]}),S==="MINDMAP"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center justify-between bg-gray-50 dark:bg-white/5 p-3 rounded-xl border border-gray-100 dark:border-white/10",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(w.Zap,{size:16,className:f?"text-indigo-500":"text-gray-400"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-bold text-gray-700 dark:text-gray-200",children:"Auto-Detect Quantity"}),s.jsx("div",{className:"text-[10px] text-gray-400",children:"Let AI decide how many branches to create"})]})]}),s.jsx("button",{onClick:()=>p(!f),className:`w-10 h-6 rounded-full transition-colors relative ${f?"bg-indigo-500":"bg-gray-300 dark:bg-gray-600"}`,children:s.jsx("div",{className:`absolute top-1 w-4 h-4 bg-white rounded-full shadow transition-transform ${f?"left-5":"left-1"}`})})]}),s.jsxs("div",{className:`transition-opacity duration-300 ${f?"opacity-40 pointer-events-none grayscale":"opacity-100"}`,children:[s.jsxs("div",{className:"flex justify-between mb-2",children:[s.jsx("label",{className:"text-sm font-bold text-gray-600 dark:text-gray-300",children:"Branches (Siblings)"}),s.jsx("span",{className:"text-sm font-black text-indigo-500 bg-indigo-50 dark:bg-indigo-900/30 px-2 rounded",children:u})]}),s.jsx("input",{type:"range",min:"1",max:"10",value:u,onChange:Q=>d(parseInt(Q.target.value)),className:"w-full h-2 bg-gray-200 dark:bg-gray-700 rounded-lg appearance-none cursor-pointer accent-indigo-500"})]}),s.jsxs("div",{className:"pt-4 border-t border-gray-100",children:[s.jsxs("div",{className:"flex justify-between mb-2 items-center",children:[s.jsxs("label",{className:"text-sm font-bold text-gray-600 dark:text-gray-300 flex items-center gap-2",children:[s.jsx(w.Layers,{size:16,className:"text-purple-500"})," Recursion Depth"]}),s.jsx("input",{type:"number",min:"1",max:"5",value:h,onChange:Q=>ce(parseInt(Q.target.value)),className:"w-16 text-center border border-gray-200 rounded-lg text-sm font-bold focus:border-purple-500 outline-none p-1"})]}),s.jsx("input",{type:"range",min:"1",max:"5",value:h,onChange:Q=>ce(parseInt(Q.target.value)),className:"w-full h-2 bg-gray-200 dark:bg-gray-700 rounded-lg appearance-none cursor-pointer accent-purple-500"}),s.jsxs("div",{className:"flex justify-between text-[10px] text-gray-400 mt-1 px-1",children:[s.jsx("span",{children:"1 (Flat)"}),s.jsx("span",{children:"2"}),s.jsx("span",{children:"3 (Recommended)"}),s.jsx("span",{children:"4"}),s.jsx("span",{children:"5 (Deep)"})]}),g&&s.jsxs("div",{className:"mt-3 p-3 bg-orange-50 border border-orange-200 rounded-lg flex gap-3 animate-fade-in",children:[s.jsx(w.Help,{size:20,className:"text-orange-500 shrink-0"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-bold text-orange-700",children:"Deep Structure Warning"}),s.jsxs("p",{className:"text-[10px] text-orange-600 leading-tight mt-1",children:["Generating ",h," levels recursively creates complexity. Are you sure you want to exceed the recommended limit of 3?"]}),s.jsxs("div",{className:"flex gap-2 mt-2",children:[s.jsx("button",{onClick:()=>m(3),className:"px-2 py-1 bg-white border border-orange-200 text-orange-600 text-[10px] font-bold rounded hover:bg-orange-100",children:"Limit to 3"}),s.jsx("button",{onClick:()=>N(!1),className:"px-2 py-1 bg-orange-200 text-orange-800 text-[10px] font-bold rounded hover:bg-orange-300",children:"Proceed Anyway"})]})]})]})]})]})]}),i==="STYLE"&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider flex items-center gap-2",children:[s.jsx(w.Palette,{size:14})," Node Color"]}),s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer bg-gray-50 px-2 py-1 rounded-lg hover:bg-gray-100 transition-colors",children:[s.jsx("span",{className:"text-[10px] font-bold text-gray-500",children:"Inherit Parent"}),s.jsx("input",{type:"checkbox",checked:M.inheritNodeColor,onChange:Q=>T({...M,inheritNodeColor:Q.target.checked}),className:"accent-indigo-500 w-4 h-4 cursor-pointer"})]})]}),!M.inheritNodeColor&&s.jsx(fe,{selected:M.customNodeColor||"#ffffff",onChange:Q=>T({...M,customNodeColor:Q})})]}),s.jsx("div",{className:"h-px bg-gray-100 w-full"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider flex items-center gap-2",children:[s.jsx(w.ShapeRect,{size:14})," Node Shape"]}),s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer bg-gray-50 px-2 py-1 rounded-lg hover:bg-gray-100 transition-colors",children:[s.jsx("span",{className:"text-[10px] font-bold text-gray-500",children:"Inherit Parent"}),s.jsx("input",{type:"checkbox",checked:M.inheritNodeShape,onChange:Q=>T({...M,inheritNodeShape:Q.target.checked}),className:"accent-indigo-500 w-4 h-4 cursor-pointer"})]})]}),!M.inheritNodeShape&&s.jsx("div",{className:"grid grid-cols-4 gap-2 bg-gray-50 p-2 rounded-xl border border-gray-100",children:Y_.map(Q=>s.jsx("button",{onClick:()=>T({...M,customNodeShape:Q.id}),className:`p-2 rounded-lg flex justify-center hover:bg-white transition-colors ${M.customNodeShape===Q.id?"bg-white shadow text-indigo-600 ring-1 ring-indigo-100":"text-gray-400"}`,children:s.jsx(Q.icon,{size:20})},Q.id))})]}),s.jsx("div",{className:"h-px bg-gray-100 w-full"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider flex items-center gap-2",children:[s.jsx(w.Connect,{size:14})," Connection"]}),s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer bg-gray-50 px-2 py-1 rounded-lg hover:bg-gray-100 transition-colors",children:[s.jsx("span",{className:"text-[10px] font-bold text-gray-500",children:"Inherit Parent"}),s.jsx("input",{type:"checkbox",checked:M.inheritLinkStyle&&M.inheritLinkColor,onChange:Q=>{const Te=Q.target.checked;T({...M,inheritLinkStyle:Te,inheritLinkColor:Te})},className:"accent-indigo-500 w-4 h-4 cursor-pointer"})]})]}),(!M.inheritLinkStyle||!M.inheritLinkColor)&&s.jsxs("div",{className:"space-y-3 p-3 bg-gray-50 rounded-xl border border-gray-100",children:[!M.inheritLinkStyle&&s.jsx("div",{className:"flex gap-2",children:["straight","curved","orthogonal"].map(Q=>s.jsx("button",{onClick:()=>T({...M,customLinkStyle:Q}),className:`flex-1 py-2 text-[10px] font-bold uppercase rounded-lg border transition-all ${M.customLinkStyle===Q?"bg-white border-indigo-500 text-indigo-700 shadow-sm":"bg-gray-100 border-transparent text-gray-500"}`,children:Q==="orthogonal"?"90":Q},Q))}),!M.inheritLinkColor&&s.jsxs("div",{children:[s.jsx("div",{className:"text-[10px] font-bold text-gray-400 mb-2 uppercase",children:"Link Color"}),s.jsx(fe,{selected:M.customLinkColor||"#cbd5e1",onChange:Q=>T({...M,customLinkColor:Q})})]})]})]})]})]}),s.jsx("div",{className:"p-6 pt-2 border-t border-gray-100 dark:border-white/5 bg-gray-50/50",children:s.jsxs("button",{onClick:()=>{n({count:f?"auto":u,tone:v,context:b,mode:S,depth:h,style:M}),t()},className:"w-full py-3 bg-gradient-to-r from-indigo-500 to-purple-600 hover:from-indigo-600 hover:to-purple-700 text-white font-bold rounded-xl shadow-lg transform transition-all active:scale-95 flex items-center justify-center gap-2",children:[s.jsx(w.Zap,{size:18}),S==="FLOWCHART"?"Construct Flowchart":`Generate ${f?"Ideas":"Structure"}`]})})]})}):null},X_=({isOpen:e,onClose:t,onImageAdd:n})=>{const[o,r]=I.useState("UPLOAD"),[i,l]=I.useState(""),[u,d]=I.useState(null),f=I.useRef(null),p=I.useRef(null),[h,m]=I.useState(null);I.useEffect(()=>(e&&o==="CAMERA"?v():C(),()=>C()),[e,o]);const v=async()=>{try{const x=await navigator.mediaDevices.getUserMedia({video:!0});m(x),f.current&&(f.current.srcObject=x)}catch(x){console.error("Camera Error:",x)}},C=()=>{h&&(h.getTracks().forEach(x=>x.stop()),m(null))},S=()=>{if(f.current&&p.current){const x=f.current,g=p.current;g.width=x.videoWidth,g.height=x.videoHeight;const N=g.getContext("2d");if(N){N.drawImage(x,0,0);const M=g.toDataURL("image/png");n(M,"Captured Photo"),t()}}},D=x=>{var N;const g=(N=x.target.files)==null?void 0:N[0];if(g){if(g.size>5*1024*1024){d("File is too large (Max 5MB)");return}const M=new FileReader;M.onload=T=>{var P;(P=T.target)!=null&&P.result&&(n(T.target.result,g.name),t())},M.readAsDataURL(g)}},b=x=>{x.preventDefault(),i.trim()&&(n(i,"Linked Image"),t())};return e?s.jsx("div",{className:"fixed inset-0 z-[200] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",onClick:t,children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-lg overflow-hidden flex flex-col",onClick:x=>x.stopPropagation(),children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 bg-gray-50",children:[s.jsxs("h3",{className:"font-bold text-lg text-gray-800 flex items-center gap-2",children:[s.jsx(w.Image,{className:"text-blue-500"})," Add Media"]}),s.jsx("button",{onClick:t,className:"p-1 hover:bg-gray-200 rounded-full text-gray-500",children:s.jsx(w.Close,{size:20})})]}),s.jsx("div",{className:"flex p-2 gap-2 border-b border-gray-100",children:[{id:"UPLOAD",label:"Upload",icon:w.Download},{id:"URL",label:"From URL",icon:w.Connect},{id:"CAMERA",label:"Camera",icon:w.Camera}].map(x=>s.jsxs("button",{onClick:()=>r(x.id),className:`flex-1 py-2 flex items-center justify-center gap-2 text-sm font-bold rounded-lg transition-colors
                ${o===x.id?"bg-blue-50 text-blue-600":"text-gray-500 hover:bg-gray-50"}
              `,children:[s.jsx(x.icon,{size:16})," ",x.label]},x.id))}),s.jsxs("div",{className:"p-6 min-h-[200px] flex flex-col justify-center",children:[o==="UPLOAD"&&s.jsxs("div",{className:"text-center",children:[s.jsxs("label",{className:"block w-full border-2 border-dashed border-gray-300 hover:border-blue-400 rounded-xl p-8 cursor-pointer transition-colors bg-gray-50 hover:bg-blue-50 group",children:[s.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:D}),s.jsx("div",{className:"w-12 h-12 bg-white rounded-full shadow-sm mx-auto mb-3 flex items-center justify-center group-hover:scale-110 transition-transform",children:s.jsx(w.Download,{className:"text-blue-500",size:24})}),s.jsx("p",{className:"text-sm font-bold text-gray-600 mb-1",children:"Click to upload image"}),s.jsx("p",{className:"text-xs text-gray-400",children:"SVG, PNG, JPG or GIF (Max 5MB)"})]}),u&&s.jsx("p",{className:"text-red-500 text-xs font-bold mt-2",children:u})]}),o==="URL"&&s.jsxs("form",{onSubmit:b,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase tracking-wider mb-2",children:"Image Link"}),s.jsx("input",{type:"url",autoFocus:!0,value:i,onChange:x=>l(x.target.value),placeholder:"Paste image link here (e.g., https://example.com/photo.jpg)",className:"w-full bg-gray-100 border border-gray-200 rounded-xl px-4 py-3 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:bg-white transition-all"})]}),s.jsx("button",{type:"submit",disabled:!i.trim(),className:"w-full py-3 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed text-white font-bold rounded-xl shadow-md transition-transform active:scale-95",children:"Embed Image"})]}),o==="CAMERA"&&s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsxs("div",{className:"relative w-full aspect-video bg-black rounded-lg overflow-hidden mb-4 shadow-inner",children:[s.jsx("video",{ref:f,autoPlay:!0,playsInline:!0,className:"w-full h-full object-cover"}),s.jsx("canvas",{ref:p,className:"hidden"})]}),s.jsx("button",{onClick:S,className:"w-14 h-14 bg-red-500 border-4 border-white shadow-lg rounded-full flex items-center justify-center hover:scale-110 transition-transform",children:s.jsx("div",{className:"w-12 h-12 rounded-full border-2 border-white/20"})})]})]})]})}):null},hh=[{id:"cyberpunk",label:"Cyberpunk",desc:"Neon, futuristic, high contrast"},{id:"watercolor",label:"Watercolor",desc:"Soft, artistic, fluid"},{id:"sketch",label:"Sketch",desc:"Hand-drawn, pencil, technical"},{id:"minimalist",label:"Minimalist",desc:"Clean, simple shapes, flat"},{id:"3d-render",label:"3D Render",desc:"Polished, glossy, realistic lighting"},{id:"isometric",label:"Isometric",desc:"Geometric, architectural view"},{id:"oil-painting",label:"Oil Painting",desc:"Rich textures, classic art"},{id:"pixel-art",label:"Pixel Art",desc:"Retro, blocky, 8-bit"}],Q_=({isOpen:e,onClose:t,onConfirm:n,nodeLabel:o})=>{const[r,i]=I.useState("cyberpunk"),[l,u]=I.useState("");if(!e)return null;const d=()=>{var p;const f=l.trim()?l:((p=hh.find(h=>h.id===r))==null?void 0:p.label)||"Illustration";n(f),t()};return s.jsx("div",{className:"fixed inset-0 z-[200] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",children:s.jsxs("div",{className:"bg-white dark:bg-[#1e2030] w-full max-w-lg rounded-2xl shadow-clay-xl overflow-hidden border border-white/20 p-6 relative",children:[s.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 transition-colors",children:s.jsx(w.Close,{size:20})}),s.jsxs("div",{className:"flex items-center gap-2 mb-2 text-purple-500",children:[s.jsx(w.Sparkles,{size:24,fill:"currentColor"}),s.jsx("h2",{className:"text-xl font-display font-bold text-gray-800 dark:text-white",children:"Dream Node"})]}),s.jsxs("p",{className:"text-sm text-gray-500 mb-6",children:["Generate visual representation for ",s.jsxs("b",{children:['"',o,'"']})," using Gemini Image Generation."]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Choose Style"}),s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:hh.map(f=>s.jsxs("button",{onClick:()=>{i(f.id),u("")},className:`
                       p-3 rounded-xl border text-left transition-all relative overflow-hidden group
                       ${r===f.id&&!l?"border-purple-500 bg-purple-50 text-purple-700 ring-2 ring-purple-200":"border-gray-200 bg-gray-50 text-gray-600 hover:border-purple-300"}
                    `,children:[s.jsx("div",{className:"font-bold text-xs mb-1",children:f.label}),s.jsx("div",{className:"text-[10px] opacity-70 leading-tight",children:f.desc})]},f.id))}),s.jsx("div",{className:"pt-2",children:s.jsx("input",{type:"text",placeholder:"Or type custom style (e.g. 'Origami', 'Noir')...",value:l,onChange:f=>u(f.target.value),className:`w-full bg-gray-50 border rounded-xl px-4 py-3 text-sm focus:outline-none focus:ring-2 focus:ring-purple-500 transition-all ${l?"border-purple-500 ring-1 ring-purple-200":"border-gray-200"}`})}),s.jsxs("button",{onClick:d,className:"w-full py-3 mt-4 bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700 text-white font-bold rounded-xl shadow-lg transform transition-all active:scale-95 flex items-center justify-center gap-2",children:[s.jsx(w.Image,{size:18}),"Dream It"]})]})]})})},Z_=["#ffffff","#f8f9fa","#0f172a","#1e293b","#000000"],mh=["linear-gradient(to right, #4facfe 0%, #00f2fe 100%)","linear-gradient(to top, #cfd9df 0%, #e2ebf0 100%)","linear-gradient(120deg, #f093fb 0%, #f5576c 100%)","linear-gradient(to top, #30cfd0 0%, #330867 100%)","radial-gradient(circle at 50% 50%, #1a2a6c, #b21f1f, #fdbb2d)"],Va=[{label:"Dots Light",style:"radial-gradient(rgba(0,0,0,0.1) 1px, transparent 1px), #f0f4f8",size:"20px 20px"},{label:"Dots Dark",style:"radial-gradient(rgba(255,255,255,0.1) 1px, transparent 1px), #0f172a",size:"20px 20px"},{label:"Grid Light",style:"linear-gradient(to right, rgba(0,0,0,0.05) 1px, transparent 1px), linear-gradient(to bottom, rgba(0,0,0,0.05) 1px, transparent 1px), #f8fafc",size:"20px 20px"}],eI=({isOpen:e,onClose:t,nodes:n,projectName:o,format:r,elementId:i})=>{const[l,u]=I.useState("SOLID"),[d,f]=I.useState("#f0f4f8"),[p,h]=I.useState(!0),[m,v]=I.useState(null),[C,S]=I.useState(!1);I.useEffect(()=>{e&&b()},[e,d,r,p]);const D=()=>{let g=d;if(l==="PATTERN"){const N=Va.find(M=>M.style.includes(d)||M.style===d);N&&(g=`${d} 0 0 / ${N.size}`)}return g},b=async()=>{S(!0),setTimeout(async()=>{const g=await C0(n,r,i,{backgroundStyle:D(),padding:50,showTitle:p,projectName:o},.8);v(g),S(!1)},100)},x=()=>{I_(n,o,r,i,{backgroundStyle:D(),padding:100,showTitle:p,projectName:o}),t()};return e?s.jsx("div",{className:"fixed inset-0 z-[200] bg-black/80 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",children:s.jsxs("div",{className:"bg-white dark:bg-[#1e2030] w-full max-w-4xl h-[80vh] rounded-3xl shadow-2xl border border-white/20 flex overflow-hidden",children:[s.jsxs("div",{className:"flex-1 bg-gray-100 dark:bg-black/50 relative flex items-center justify-center p-8 overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:s.jsx("div",{className:"bg-[radial-gradient(#cbd5e1_1px,transparent_1px)] [background-size:20px_20px] opacity-20 w-full h-full"})}),C?s.jsxs("div",{className:"flex flex-col items-center gap-4",children:[s.jsx("div",{className:"w-12 h-12 border-4 border-indigo-500 border-t-transparent rounded-full animate-spin"}),s.jsx("span",{className:"text-gray-500 font-bold animate-pulse",children:"Rendering Preview..."})]}):m?s.jsx("img",{src:m,alt:"Map Preview",className:"max-w-full max-h-full object-contain shadow-2xl rounded-lg border border-white/20"}):s.jsx("div",{className:"text-red-400 font-bold",children:"Preview Failed"})]}),s.jsxs("div",{className:"w-80 bg-white dark:bg-[#1e2030] border-l border-gray-200 dark:border-white/10 flex flex-col",children:[s.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-white/10",children:[s.jsxs("h2",{className:"text-xl font-display font-bold text-gray-800 dark:text-white mb-1",children:["Export ",r]}),s.jsx("p",{className:"text-sm text-gray-500",children:"Customize appearance before downloading."})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-8",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider mb-3 block",children:"Background Type"}),s.jsx("div",{className:"flex bg-gray-100 dark:bg-white/5 p-1 rounded-xl",children:["SOLID","GRADIENT","PATTERN","THEME"].map(g=>s.jsx("button",{onClick:()=>{u(g),f(g==="PATTERN"?Va[0].style:g==="GRADIENT"?mh[0]:g==="THEME"?Ki.default.bg:"#ffffff")},className:`flex-1 py-2 text-[8px] sm:text-[10px] font-bold rounded-lg transition-all ${l===g?"bg-white dark:bg-indigo-500 text-indigo-600 dark:text-white shadow-sm":"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300"}`,children:g},g))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider mb-3 block",children:"Select Style"}),s.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[l==="SOLID"&&Z_.map(g=>s.jsx("button",{onClick:()=>f(g),className:`aspect-square rounded-full border border-gray-200 shadow-sm transition-transform hover:scale-110 ${d===g?"ring-2 ring-indigo-500 ring-offset-2":""}`,style:{backgroundColor:g}},g)),l==="SOLID"&&s.jsxs("label",{className:"aspect-square rounded-full border border-dashed border-gray-300 flex items-center justify-center cursor-pointer hover:bg-gray-50",children:[s.jsx(w.Plus,{size:16,className:"text-gray-400"}),s.jsx("input",{type:"color",className:"hidden",onChange:g=>f(g.target.value)})]}),l==="GRADIENT"&&mh.map(g=>s.jsx("button",{onClick:()=>f(g),className:`aspect-square rounded-full border border-gray-200 shadow-sm transition-transform hover:scale-110 ${d===g?"ring-2 ring-indigo-500 ring-offset-2":""}`,style:{background:g}},g)),l==="PATTERN"&&Va.map((g,N)=>s.jsx("button",{onClick:()=>f(g.style),className:`aspect-square rounded-lg border border-gray-200 shadow-sm transition-transform hover:scale-110 ${d===g.style?"ring-2 ring-indigo-500 ring-offset-2":""}`,style:{background:g.style,backgroundSize:g.size},title:g.label},N)),l==="THEME"&&Object.values(Ki).map(g=>s.jsx("button",{onClick:()=>f(g.bg),className:`aspect-square rounded-full border border-gray-200 shadow-sm transition-transform hover:scale-110 ${d===g.bg?"ring-2 ring-indigo-500 ring-offset-2":""}`,style:{backgroundColor:g.bg},title:g.name},g.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider mb-3 block",children:"Overlay Options"}),s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-white/5 rounded-xl border border-gray-200 dark:border-white/10",children:[s.jsx("span",{className:"text-sm font-bold text-gray-700 dark:text-gray-300",children:"Include Project Title"}),s.jsx("div",{onClick:()=>h(!p),className:`w-10 h-6 rounded-full relative cursor-pointer transition-colors ${p?"bg-green-500":"bg-gray-300"}`,children:s.jsx("div",{className:`absolute top-1 w-4 h-4 bg-white rounded-full shadow-sm transition-all ${p?"left-5":"left-1"}`})})]}),s.jsx("p",{className:"text-[10px] text-gray-400 mt-2",children:"Watermark logo and metadata will always be included."})]})]}),s.jsxs("div",{className:"p-6 border-t border-gray-200 dark:border-white/10 flex flex-col gap-3",children:[s.jsxs("button",{onClick:x,className:"w-full py-3 bg-indigo-600 hover:bg-indigo-700 text-white font-bold rounded-xl shadow-lg shadow-indigo-200 transition-all active:scale-95 flex items-center justify-center gap-2",children:[s.jsx(w.Download,{size:18})," Download High-Res"]}),s.jsx("button",{onClick:t,className:"w-full py-3 text-gray-500 hover:bg-gray-100 dark:hover:bg-white/5 rounded-xl font-bold transition-colors",children:"Cancel"})]})]})]})}):null},gh=({selectedCount:e,onAction:t,isEdgeMode:n})=>e<1?null:n?s.jsxs("div",{className:"fixed top-24 left-1/2 -translate-x-1/2 z-40 flex items-center gap-2 bg-white/90 backdrop-blur-md border border-blue-500/30 p-1.5 rounded-xl shadow-clay-lg animate-fade-in",children:[s.jsxs("div",{className:"px-3 flex items-center gap-2 border-r border-gray-200",children:[s.jsx("div",{className:"w-6 h-6 rounded-full bg-blue-500 text-white flex items-center justify-center text-xs font-bold shadow-sm",children:e}),s.jsx("span",{className:"text-xs font-bold text-gray-500 hidden sm:inline",children:"Links"})]}),s.jsxs("div",{className:"flex items-center gap-1.5 px-2 border-r border-gray-200",children:[s.jsxs("button",{className:"relative w-5 h-5 rounded-full overflow-hidden border border-black/5 hover:scale-110 transition-transform shadow-sm flex items-center justify-center bg-gray-100 group",title:"Custom Color",children:[s.jsx(w.Palette,{size:10,className:"text-gray-500 absolute pointer-events-none group-hover:text-blue-500"}),s.jsx("input",{type:"color",className:"opacity-0 absolute inset-0 w-full h-full cursor-pointer",onChange:o=>t("edge-bulk-update",{color:o.target.value})})]}),["#cbd5e1","#ef4444","#3b82f6","#10b981"].map(o=>s.jsx("button",{onClick:()=>t("edge-bulk-update",{color:o}),className:"w-5 h-5 rounded-full border border-black/5 hover:scale-110 transition-transform shadow-sm",style:{backgroundColor:o},title:"Set Color"},o))]}),s.jsxs("div",{className:"flex items-center gap-1 px-2 border-r border-gray-200",children:[s.jsx("button",{onClick:()=>t("edge-bulk-update",{routingType:"straight"}),className:"p-1 text-[10px] font-bold uppercase rounded hover:bg-gray-100 text-gray-600",children:"STR"}),s.jsx("button",{onClick:()=>t("edge-bulk-update",{routingType:"curved"}),className:"p-1 text-[10px] font-bold uppercase rounded hover:bg-gray-100 text-gray-600",children:"CRV"}),s.jsx("button",{onClick:()=>t("edge-bulk-update",{routingType:"orthogonal"}),className:"p-1 text-[10px] font-bold uppercase rounded hover:bg-gray-100 text-gray-600",children:"90"})]}),s.jsx("div",{className:"flex items-center gap-1 pl-2",children:s.jsx(An,{onClick:()=>t("edge-delete-selected"),icon:w.Trash,title:"Delete Links",color:"text-red-500 hover:bg-red-50"})})]}):s.jsxs("div",{className:"fixed top-24 left-1/2 -translate-x-1/2 z-40 flex items-center gap-2 bg-white/90 backdrop-blur-md border border-blue-500/30 p-1.5 rounded-xl shadow-clay-lg animate-fade-in",children:[s.jsxs("div",{className:"px-3 flex items-center gap-2 border-r border-gray-200",children:[s.jsx("div",{className:"w-6 h-6 rounded-full bg-blue-500 text-white flex items-center justify-center text-xs font-bold shadow-sm",children:e}),s.jsx("span",{className:"text-xs font-bold text-gray-500 hidden sm:inline",children:"Selected"})]}),s.jsxs("div",{className:"flex items-center gap-1.5 px-2 border-r border-gray-200",children:[["#ffffff","#fef3c7","#dbeafe","#fce7f3","#dcfce7"].map(o=>s.jsx("button",{onClick:()=>t("color",o),className:"w-5 h-5 rounded-full border border-black/5 hover:scale-110 transition-transform shadow-sm",style:{backgroundColor:o},title:"Set Color"},o)),s.jsxs("label",{className:"w-5 h-5 rounded-full border border-dashed border-gray-400 flex items-center justify-center cursor-pointer hover:bg-gray-100 relative overflow-hidden group",title:"Custom Color",children:[s.jsx("input",{type:"color",className:"opacity-0 absolute inset-0 w-full h-full cursor-pointer",onChange:o=>t("color",o.target.value)}),s.jsx(w.Palette,{size:10,className:"text-gray-500 pointer-events-none group-hover:text-blue-500"})]})]}),s.jsxs("div",{className:"flex items-center gap-1 px-2 border-r border-gray-200",children:[s.jsx(An,{onClick:()=>t("shape","rectangle"),icon:w.ShapeRect,title:"Rectangle"}),s.jsx(An,{onClick:()=>t("shape","circle"),icon:w.ShapeCircle,title:"Circle"}),s.jsx(An,{onClick:()=>t("shape","rounded"),icon:()=>s.jsx("div",{className:"w-3 h-3 border-2 border-current rounded-sm"}),title:"Rounded"})]}),s.jsxs("div",{className:"flex items-center gap-1 px-2 border-r border-gray-200",children:[s.jsx(An,{onClick:()=>t("align-left"),icon:w.AlignLeft,title:"Align Left"}),s.jsx(An,{onClick:()=>t("align-center"),icon:w.AlignCenter,title:"Align Center"})]}),s.jsxs("div",{className:"flex items-center gap-1 pl-2",children:[s.jsx(An,{onClick:()=>t("duplicate"),icon:w.Duplicate,title:"Duplicate"}),s.jsx(An,{onClick:()=>t("lock"),icon:w.Lock,title:"Lock/Unlock"}),s.jsx("div",{className:"w-px h-4 bg-gray-200 mx-1"}),s.jsx(An,{onClick:()=>t("delete"),icon:w.Trash,title:"Delete",color:"text-red-500 hover:bg-red-50"})]})]}),An=({onClick:e,icon:t,title:n,color:o="text-gray-600 hover:bg-gray-100"})=>s.jsx("button",{onClick:e,className:`p-1.5 rounded-lg transition-colors ${o}`,title:n,children:s.jsx(t,{size:18,strokeWidth:2})}),tI=()=>{const[e,t]=I.useState([]);if(I.useEffect(()=>{const r=l=>{const u=[];if(l.ctrlKey&&u.push("Ctrl"),l.altKey&&u.push("Alt"),l.shiftKey&&u.push("Shift"),l.metaKey&&u.push("Cmd"),u.length>0){const d=[...u].sort();t(f=>{const p=[...f].sort();return JSON.stringify(d)===JSON.stringify(p)?f:d})}},i=l=>{const u=[];l.ctrlKey&&u.push("Ctrl"),l.altKey&&u.push("Alt"),l.shiftKey&&u.push("Shift"),l.metaKey&&u.push("Cmd"),t(u)};return window.addEventListener("keydown",r),window.addEventListener("keyup",i),()=>{window.removeEventListener("keydown",r),window.removeEventListener("keyup",i)}},[]),e.length===0)return null;const o=(()=>{const r=e.includes("Ctrl")||e.includes("Cmd"),i=e.includes("Alt"),l=e.includes("Shift");if(r&&i)return[{key:"C",desc:"Copy Style"},{key:"V",desc:"Paste Style"}];if(r){const u=[{key:"Z",desc:"Undo"},{key:"Y",desc:"Redo"},{key:"F",desc:"Find & Replace"},{key:"K",desc:"Cmd Palette"},{key:"A",desc:"Select All"},{key:"Click",desc:"Multi-Select"},{key:"Scroll",desc:"Zoom"}];return l&&u.unshift({key:"Z",desc:"Redo (Alt)"}),u}return i?[{key:"Drag",desc:"Move Branch"},{key:"Click",desc:"Select Branch"},{key:"M",desc:"Magic Style"}]:l?[{key:"Click",desc:"Cycle Shape"},{key:"Click",desc:"Multi-Select"},{key:"Enter",desc:"Add Sibling"}]:[]})();return s.jsx("div",{className:"fixed bottom-8 left-8 z-[200] pointer-events-none animate-slide-up font-sans",children:s.jsxs("div",{className:"bg-black/80 backdrop-blur text-white p-4 rounded-2xl shadow-2xl border border-white/10",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3 border-b border-white/20 pb-2",children:[s.jsx("span",{className:"font-mono font-bold text-xl tracking-wider text-yellow-400",children:e.join(" + ")}),s.jsx("span",{className:"text-xs text-gray-400 font-bold uppercase",children:"Active Modifiers"})]}),o.length>0?s.jsx("div",{className:"grid grid-cols-2 gap-x-6 gap-y-2",children:o.map((r,i)=>s.jsxs("div",{className:"flex items-center justify-between gap-4 text-sm",children:[s.jsx("span",{className:"text-gray-300 font-medium",children:r.desc}),s.jsx("span",{className:"font-mono font-bold bg-white/20 px-1.5 rounded text-xs min-w-[20px] text-center",children:r.key})]},i))}):s.jsx("div",{className:"text-xs text-gray-500 italic",children:"No specific actions"})]})})},nI=({isOpen:e,onClose:t,onCreate:n})=>{const[o,r]=I.useState("");if(!e)return null;const i=u=>{u==null||u.preventDefault(),o.trim()?n(o):n("Generic Brainstorm")},l=["Project Launch Plan","Study Guide for Biology","Startup Business Model","Novel Plot Outline"];return s.jsx("div",{className:"fixed inset-0 z-[200] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",children:s.jsxs("div",{className:"bg-white w-full max-w-md rounded-2xl shadow-2xl border border-white/20 p-6 relative overflow-hidden",children:[s.jsx("div",{className:"absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500"}),s.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx(w.Close,{size:20})}),s.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[s.jsx("div",{className:"p-3 bg-blue-50 text-blue-600 rounded-xl",children:s.jsx(w.Brain,{size:28,strokeWidth:1.5})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-display font-bold text-gray-800",children:"New Mind Map"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Start fresh or let AI structure it for you."})]})]}),s.jsxs("form",{onSubmit:i,className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase tracking-wider mb-2",children:"What are you working on?"}),s.jsx("input",{type:"text",value:o,onChange:u=>r(u.target.value),placeholder:"e.g. 'Marketing Strategy for Q4'",className:"w-full bg-gray-50 border border-gray-200 rounded-xl px-4 py-3 text-base font-medium outline-none focus:ring-2 focus:ring-blue-500 focus:bg-white transition-all",autoFocus:!0})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-bold text-gray-400 mb-2",children:"Suggestions:"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:l.map((u,d)=>s.jsx("button",{type:"button",onClick:()=>r(u),className:"px-3 py-1 bg-gray-100 hover:bg-gray-200 text-gray-600 rounded-full text-xs font-bold transition-colors",children:u},d))})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{type:"button",onClick:()=>n(""),className:"flex-1 py-3 bg-gray-100 hover:bg-gray-200 text-gray-600 font-bold rounded-xl transition-colors",children:"Blank Canvas"}),s.jsxs("button",{type:"submit",className:"flex-[2] py-3 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white font-bold rounded-xl shadow-lg transition-all transform active:scale-95 flex items-center justify-center gap-2",children:[s.jsx(w.Sparkles,{size:18}),"AI Structure"]})]})]})]})})},wt=[{id:"add-child",label:"Add Child",icon:w.Plus,section:"QUICK"},{id:"delete",label:"Delete",icon:w.Trash,section:"QUICK"},{id:"duplicate",label:"Copy",icon:w.Duplicate,section:"QUICK"},{id:"lock",label:"Lock",icon:w.Lock,section:"QUICK"},{id:"magic-style",label:"Magic Style",icon:w.Magic,section:"MAIN"},{id:"convert-task",label:"Convert to Task",icon:w.Task,section:"MAIN"},{id:"convert-normal",label:"Convert to Node",icon:w.ShapeRect,section:"MAIN"},{id:"convert-code",label:"Convert to Code",icon:w.Code,section:"MAIN"},{id:"convert-table",label:"Convert to Table",icon:w.Table,section:"MAIN"},{id:"convert-list",label:"Convert to List",icon:w.Layers,section:"MAIN"},{id:"add-link",label:"Add Link",icon:w.Connect,section:"MAIN"},{id:"focus",label:"Focus Branch",icon:w.Zap,section:"MAIN"},{id:"ai-expand",label:"Expand Idea",icon:w.Zap,section:"AI"},{id:"dream-node",label:"Dream (Image)",icon:w.Image,section:"AI"},{id:"ai-summarize",label:"Summarize",icon:w.FileText,section:"AI"},{id:"ai-rewrite",label:"Refine Text",icon:w.Edit,section:"AI"}],$a=(e,t,n)=>{const o=(i,l=(i+e/60)%6)=>n-n*t*Math.max(Math.min(l,4-l,1),0),r=i=>Math.round(i*255).toString(16).padStart(2,"0");return`#${r(o(5))}${r(o(3))}${r(o(1))}`},yh=e=>{let t=0,n=0,o=0;e.length===4?(t=parseInt("0x"+e[1]+e[1]),n=parseInt("0x"+e[2]+e[2]),o=parseInt("0x"+e[3]+e[3])):e.length===7&&(t=parseInt("0x"+e[1]+e[2]),n=parseInt("0x"+e[3]+e[4]),o=parseInt("0x"+e[5]+e[6])),t/=255,n/=255,o/=255;const r=Math.max(t,n,o),i=Math.min(t,n,o),l=r-i,u=r===0?0:l/r,d=r;let f=0;return r!==i&&(r===t?f=(n-o)/l+(n<o?6:0):r===n?f=(o-t)/l+2:f=(t-n)/l+4,f/=6),{h:f*360,s:u,v:d}},oI=({initialColor:e,onPreview:t,onCommit:n})=>{const[o,r]=I.useState(yh(e||"#ffffff")),i=I.useRef(null),l=I.useRef(null),u=I.useRef(!1),d=I.useRef(null);I.useEffect(()=>{const C=yh(e||"#ffffff");(Math.abs(C.h-o.h)>5||Math.abs(C.s-o.s)>.1||Math.abs(C.v-o.v)>.1)&&(u.current||r(C))},[e]);const f=(C,S,D,b)=>{const x=$a(C,S,D);r({h:C,s:S,v:D}),t(x)},p=C=>{if(!i.current)return;const S=i.current.getBoundingClientRect(),D=Math.max(0,Math.min(1,(C.clientX-S.left)/S.width)),b=Math.max(0,Math.min(1,(C.clientY-S.top)/S.height));f(o.h,D,1-b)},h=C=>{if(!l.current)return;const S=l.current.getBoundingClientRect(),D=Math.max(0,Math.min(1,(C.clientX-S.left)/S.width));f(D*360,o.s,o.v)},m=(C,S)=>{C.stopPropagation(),C.nativeEvent.stopImmediatePropagation(),u.current=!0,d.current=S,S==="sv"?p(C):h(C);const D=x=>{d.current==="sv"?p(x):h(x)},b=x=>{window.removeEventListener("mousemove",D),window.removeEventListener("mouseup",b),u.current=!1};window.addEventListener("mousemove",D),window.addEventListener("mouseup",b)},v=I.useRef(o);return I.useEffect(()=>{v.current=o},[o]),I.useEffect(()=>{const C=()=>{if(u.current){const{h:S,s:D,v:b}=v.current;n($a(S,D,b)),u.current=!1,d.current=null}};return window.addEventListener("mouseup",C),()=>window.removeEventListener("mouseup",C)},[n]),s.jsxs("div",{className:"p-2 bg-gray-100 rounded-xl select-none",onMouseDown:C=>C.stopPropagation(),children:[s.jsx("div",{ref:i,className:"w-full h-24 rounded-lg relative cursor-crosshair mb-3 shadow-inner",style:{backgroundColor:`hsl(${o.h}, 100%, 50%)`,backgroundImage:"linear-gradient(to bottom, transparent, #000), linear-gradient(to right, #fff, transparent)"},onMouseDown:C=>m(C,"sv"),children:s.jsx("div",{className:"absolute w-3 h-3 border-2 border-white rounded-full shadow-md -translate-x-1/2 -translate-y-1/2 pointer-events-none",style:{left:`${o.s*100}%`,top:`${(1-o.v)*100}%`}})}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{ref:l,className:"flex-1 h-3 rounded-full relative cursor-ew-resize",style:{background:"linear-gradient(to right, #f00, #ff0, #0f0, #0ff, #00f, #f0f, #f00)"},onMouseDown:C=>m(C,"hue"),children:s.jsx("div",{className:"absolute top-1/2 -translate-y-1/2 w-3 h-3 bg-white border border-gray-300 rounded-full shadow-sm -translate-x-1/2 pointer-events-none",style:{left:`${o.h/360*100}%`}})}),s.jsx("div",{className:"w-6 h-6 rounded-full border border-gray-200 shadow-sm shrink-0",style:{backgroundColor:$a(o.h,o.s,o.v)}})]})]})},rI=({nodePosition:e,zoom:t,nodeType:n,onAction:o,initialColor:r})=>{const i=I.useRef(null),[l,u]=I.useState([null,null,null]),[d,f]=I.useState(null),[p,h]=I.useState(window.innerWidth<768);I.useEffect(()=>{const g=()=>h(window.innerWidth<768);return window.addEventListener("resize",g),()=>window.removeEventListener("resize",g)},[]),I.useEffect(()=>{const g=localStorage.getItem("singularity-quick-access");if(g)try{u(JSON.parse(g))}catch(N){console.error("Failed to parse quick slots",N)}},[]);const m=(g,N)=>{const M=[...l];M[g]=N,u(M),localStorage.setItem("singularity-quick-access",JSON.stringify(M)),f(null)};I.useLayoutEffect(()=>{if(i.current&&!p){const g=i.current.getBoundingClientRect(),N=window.innerWidth,M=window.innerHeight,T=100*t;let P=e.x+T,R=e.y-g.height/2;P+g.width>N-10&&(P=e.x-T-g.width),R<10&&(R=10),R+g.height>M-10&&(R=M-g.height-10),i.current.style.left=`${P}px`,i.current.style.top=`${R}px`}},[e,t,l,d,p]);const v=(g,N)=>{d!==null?m(d,g):o(g,N)},C=["#ffffff","#f87171","#fb923c","#4ade80","#60a5fa","#a78bfa"],S=({item:g})=>s.jsxs("button",{onClick:N=>{N.stopPropagation(),N.nativeEvent.stopImmediatePropagation(),v(g.id)},className:`w-full flex items-center gap-3 px-3 py-2 rounded-lg transition-colors text-left text-sm font-bold
           ${d!==null?"bg-blue-50 border border-blue-200 text-blue-700 hover:bg-blue-100":"hover:bg-gray-50 text-gray-700"}
        `,children:[s.jsx(g.icon,{size:16,className:d!==null?"text-blue-500":"text-gray-400"}),s.jsx("span",{children:g.label})]}),D=({item:g,color:N="text-gray-600"})=>s.jsxs("button",{onClick:M=>{M.stopPropagation(),M.nativeEvent.stopImmediatePropagation(),v(g.id)},className:`flex flex-col items-center justify-center p-2 rounded-xl transition-colors 
         ${d!==null?"bg-blue-50 border border-blue-200":"hover:bg-gray-50"}
      `,title:g.label,children:[s.jsx(g.icon,{size:20,strokeWidth:2.5,className:`mb-1 ${d!==null?"text-blue-600":N}`}),s.jsx("span",{className:`text-[9px] font-bold uppercase tracking-wide ${d!==null?"text-blue-600":"text-gray-500"}`,children:g.label})]}),b=({id:g,icon:N})=>s.jsx("button",{onClick:M=>{M.stopPropagation(),M.nativeEvent.stopImmediatePropagation(),o("shape",g)},className:"flex items-center justify-center p-2.5 rounded-lg hover:bg-blue-50 text-gray-400 hover:text-blue-600 transition-colors",title:g,children:s.jsx(N,{size:18})}),x=n===O.TASK;return s.jsx("div",{ref:i,className:`fixed z-[90] flex flex-col pointer-events-none transition-all duration-300
        ${p?"left-0 right-0 bottom-4 items-center justify-end px-4":""}
      `,style:p?{}:{left:0,top:0},children:s.jsxs("div",{className:`pointer-events-auto bg-white/95 backdrop-blur-xl border border-white/50 shadow-clay-xl overflow-hidden flex flex-col
            ${p?"w-full max-w-sm rounded-2xl max-h-[50dvh]":"w-[280px] rounded-[1.5rem]"}
        `,onMouseDown:g=>{g.stopPropagation(),g.nativeEvent.stopImmediatePropagation()},children:[s.jsx("div",{className:"grid grid-cols-3 gap-2 p-3 bg-gray-50 border-b border-gray-100",children:l.map((g,N)=>{const M=wt.find(T=>T.id===g);return s.jsx("button",{onClick:T=>{T.stopPropagation(),T.nativeEvent.stopImmediatePropagation(),M?v(g):f(N)},onContextMenu:T=>{T.preventDefault(),f(N)},className:`
                      aspect-square rounded-xl flex flex-col items-center justify-center border-2 transition-all
                      ${d===N?"border-blue-500 bg-blue-50 text-blue-600 animate-pulse":M?"border-white bg-white shadow-sm hover:border-blue-200 text-gray-700":"border-dashed border-gray-300 text-gray-400 hover:border-gray-400 hover:text-gray-500"}
                   `,title:M?M.label:"Click to assign shortcut",children:M?s.jsxs(s.Fragment,{children:[s.jsx(M.icon,{size:20,strokeWidth:2,className:"mb-1"}),s.jsx("span",{className:"text-[9px] font-bold uppercase truncate max-w-full px-1",children:M.label})]}):s.jsx(w.Plus,{size:20})},N)})}),d!==null&&s.jsx("div",{className:"bg-blue-500 text-white text-xs font-bold text-center py-1.5",children:"Select an option below to assign"}),s.jsxs("div",{className:"max-h-[60vh] overflow-y-auto custom-scrollbar",children:[s.jsxs("div",{className:"grid grid-cols-4 gap-1 p-2 border-b border-gray-100",children:[s.jsx(D,{item:wt.find(g=>g.id==="add-child"),color:"text-green-600"}),s.jsx(D,{item:wt.find(g=>g.id==="delete"),color:"text-red-500"}),s.jsx(D,{item:wt.find(g=>g.id==="duplicate")}),s.jsx(D,{item:wt.find(g=>g.id==="lock")})]}),s.jsxs("div",{className:"p-3 space-y-3",children:[s.jsxs("div",{children:[s.jsx(S,{item:wt.find(g=>g.id==="magic-style")}),s.jsx(S,{item:{id:x?"convert-normal":"convert-task",label:x?"Convert to Node":"Convert to Task",icon:x?w.ShapeRect:w.Task,section:"MAIN"}}),s.jsx(S,{item:wt.find(g=>g.id==="convert-code")}),s.jsx(S,{item:wt.find(g=>g.id==="convert-table")}),s.jsx(S,{item:wt.find(g=>g.id==="convert-list")}),s.jsx(S,{item:wt.find(g=>g.id==="add-link")}),s.jsx(S,{item:wt.find(g=>g.id==="focus")})]}),s.jsxs("div",{children:[s.jsxs("h3",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest mb-2 pl-1 flex items-center gap-2",children:[s.jsx(w.Sparkles,{size:10,className:"text-indigo-400"})," AI Actions"]}),s.jsxs("div",{className:"space-y-0.5",children:[s.jsx(S,{item:wt.find(g=>g.id==="ai-expand")}),s.jsx(S,{item:wt.find(g=>g.id==="dream-node")}),s.jsx(S,{item:wt.find(g=>g.id==="ai-summarize")}),s.jsx(S,{item:wt.find(g=>g.id==="ai-rewrite")})]})]}),s.jsxs("div",{children:[s.jsx("div",{className:"flex items-center justify-between mb-2 pl-1",children:s.jsx("h3",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Appearance"})}),s.jsxs("div",{className:"mb-3 px-1",children:[s.jsx(oI,{initialColor:r||"#ffffff",onPreview:g=>o("color-preview",g),onCommit:g=>o("color",g)}),s.jsx("div",{className:"flex justify-between gap-2 mt-3",children:C.map((g,N)=>s.jsx("button",{onClick:M=>{M.stopPropagation(),M.nativeEvent.stopImmediatePropagation(),o("color",g)},className:"w-6 h-6 rounded-full shadow-sm hover:scale-110 transition-transform ring-1 ring-black/5",style:{backgroundColor:g}},N))})]}),s.jsxs("div",{className:"grid grid-cols-4 gap-2 bg-gray-50 p-2 rounded-xl border border-gray-100",children:[s.jsx(b,{id:"rectangle",icon:w.ShapeRect}),s.jsx(b,{id:"rounded",icon:()=>s.jsx("div",{className:"w-3 h-2 border-2 border-current rounded-md"})}),s.jsx(b,{id:"circle",icon:w.ShapeCircle}),s.jsx(b,{id:"diamond",icon:()=>s.jsx("div",{className:"w-2.5 h-2.5 border-2 border-current rotate-45"})}),s.jsx(b,{id:"hexagon",icon:w.ShapeHexagon}),s.jsx(b,{id:"triangle",icon:w.ShapeTriangle}),s.jsx(b,{id:"cloud",icon:w.ShapeCloud}),s.jsx(b,{id:"parallelogram",icon:w.ShapePara})]})]})]})]})]})})},iI=({isOpen:e,setIsOpen:t,nodes:n,onSelectNode:o,isSidebarOpen:r})=>{const i=n.filter(u=>!u.parentId),l=(u,d=0)=>{const f=n.find(m=>m.id===u);if(!f)return null;const p=f.childrenIds.length>0,h=f.color&&f.color!=="transparent"&&!f.color.startsWith("bg-")?f.color:"#9ca3af";return s.jsxs("div",{style:{paddingLeft:d*12},children:[s.jsxs("div",{className:"flex items-center gap-2 py-1.5 px-2 rounded-lg hover:bg-gray-100 cursor-pointer group transition-colors",onClick:()=>o(f.id),children:[s.jsx("span",{className:"text-gray-400 shrink-0",children:p?s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-gray-400"}):s.jsx("div",{className:"w-1 h-1 rounded-full bg-gray-300 ml-0.5"})}),s.jsx("div",{className:"w-2 h-2 rounded-full shrink-0 border border-black/10 shadow-sm",style:{backgroundColor:h}}),s.jsx("span",{className:"text-xs font-bold text-gray-600 truncate group-hover:text-blue-600 transition-colors",children:f.label})]}),p&&s.jsx("div",{className:"border-l-2 border-gray-100 ml-2.5 my-1",children:f.childrenIds.map(m=>l(m,d+1))})]},f.id)};return e?s.jsx("div",{className:"fixed top-32 bottom-24 w-[180px] md:w-[240px] z-30 flex flex-col pointer-events-none transition-all duration-300 ease-in-out",style:{left:r?"280px":"16px"},children:s.jsxs("div",{className:"bg-white/95 backdrop-blur-xl rounded-2xl border border-white/40 shadow-clay-lg flex flex-col h-full pointer-events-auto overflow-hidden max-h-[calc(100dvh-150px)]",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-100 bg-gray-50/80",children:[s.jsxs("span",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest flex items-center gap-2",children:[s.jsx(w.AlignLeft,{size:12})," Map Outline"]}),s.jsx("button",{onClick:()=>t(!1),className:"hover:bg-gray-200 p-1.5 rounded-md text-gray-500 transition-colors",children:s.jsx(w.Close,{size:14})})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-3 space-y-1",children:[i.map(u=>l(u.id)),i.length===0&&s.jsx("div",{className:"text-center p-6 text-xs text-gray-400 italic font-medium",children:"Map is empty."})]})]})}):s.jsx("button",{onClick:()=>t(!0),className:"fixed top-44 z-30 p-2.5 bg-white rounded-lg shadow-clay-sm border border-gray-200 text-gray-500 hover:text-blue-600 hover:border-blue-400 transition-all duration-300 ease-in-out",style:{left:r?"280px":"16px"},title:"Open Outline",children:s.jsx(w.AlignLeft,{size:20})})},xh=[{id:"rectangle",icon:w.ShapeRect},{id:"rounded",icon:()=>s.jsx("div",{className:"w-3 h-2 border-2 border-current rounded-md"})},{id:"circle",icon:w.ShapeCircle},{id:"diamond",icon:()=>s.jsx("div",{className:"w-2.5 h-2.5 border-2 border-current rotate-45"})},{id:"triangle",icon:w.ShapeTriangle},{id:"hexagon",icon:w.ShapeHexagon},{id:"cloud",icon:w.ShapeCloud}],vh=({color:e,onChange:t,label:n})=>s.jsxs("div",{className:"relative w-7 h-7 group rounded-full overflow-hidden shrink-0 shadow-sm border border-gray-200 transition-transform hover:scale-110 cursor-pointer",children:[s.jsx("div",{className:"absolute inset-0 w-full h-full flex items-center justify-center pointer-events-none z-10",style:{backgroundColor:e},children:e==="transparent"&&s.jsx("div",{className:"w-full h-px bg-red-400 -rotate-45 absolute"})}),s.jsx("input",{type:"color",className:"opacity-0 absolute inset-0 w-full h-full cursor-pointer z-20 p-0 border-0",value:e==="transparent"?"#ffffff":e,onInput:o=>{o.stopPropagation(),t(o.target.value)},onChange:o=>{o.stopPropagation(),t(o.target.value)},title:`Change ${n} Color`})]}),sI=({defaultEdgeOptions:e,setDefaultEdgeOptions:t,defaultNodeShape:n,setDefaultNodeShape:o,defaultNodeColor:r,setDefaultNodeColor:i,className:l,style:u})=>{var v;const[d,f]=I.useState(!1),p=I.useRef(null);I.useEffect(()=>{const C=S=>{p.current&&!p.current.contains(S.target)&&f(!1)};return document.addEventListener("mousedown",C),()=>document.removeEventListener("mousedown",C)},[]);const h=((v=xh.find(C=>C.id===n))==null?void 0:v.icon)||w.ShapeRect,m=l||"fixed bottom-24 left-1/2 -translate-x-1/2 z-40 animate-slide-up origin-bottom pointer-events-none flex flex-col items-center";return s.jsx("div",{className:m,style:u,children:s.jsxs("div",{className:"pointer-events-auto bg-white/90 backdrop-blur-xl border border-white/60 rounded-2xl shadow-clay-lg p-1.5 flex items-center gap-2 transition-all hover:shadow-clay-xl select-none",children:[s.jsxs("div",{className:"flex items-center gap-2 px-1",children:[s.jsx("span",{className:"text-[9px] font-bold text-gray-300 uppercase mr-1 hidden sm:block",children:"STR"}),s.jsx("div",{className:"flex bg-gray-100/80 rounded-lg p-0.5 border border-gray-200/50",children:[{id:"straight",label:"STR"},{id:"curved",label:"CRV"},{id:"orthogonal",label:"90"}].map(C=>s.jsx("button",{onClick:()=>t({...e,routingType:C.id}),className:`px-2 py-1.5 text-[10px] font-bold uppercase rounded-md transition-all min-w-[36px] ${e.routingType===C.id?"bg-white text-blue-600 shadow-sm ring-1 ring-black/5":"text-gray-500 hover:text-gray-700 hover:bg-gray-200/50"}`,title:`Routing: ${C.label}`,children:C.label},C.id))}),s.jsx("div",{className:"w-px h-5 bg-gray-200 mx-1"}),s.jsx(vh,{color:e.color||"#cbd5e1",onChange:C=>t({...e,color:C}),label:"Link"})]}),s.jsx("div",{className:"w-px h-5 bg-gray-300/50"}),s.jsxs("div",{className:"flex items-center gap-2 px-1",children:[s.jsxs("div",{className:"relative",ref:p,children:[s.jsx("button",{onClick:()=>f(!d),className:"flex items-center justify-center w-9 h-9 bg-gray-50 hover:bg-gray-100 rounded-xl text-gray-600 border border-gray-200 hover:border-gray-300 transition-all shadow-sm",title:"Change Default Shape",children:s.jsx(h,{size:18})}),d&&s.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-3 bg-white border border-gray-200 rounded-xl shadow-xl p-2 grid grid-cols-4 gap-1 z-50 min-w-[160px] animate-pop origin-bottom",children:[xh.map(C=>s.jsx("button",{onClick:S=>{S.stopPropagation(),o(C.id),f(!1)},className:`p-2 rounded-lg hover:bg-blue-50 text-gray-500 hover:text-blue-600 flex justify-center transition-colors ${n===C.id?"bg-blue-50 text-blue-600 ring-1 ring-blue-100":""}`,title:C.id,children:s.jsx(C.icon,{size:18})},C.id)),s.jsx("div",{className:"absolute -bottom-1.5 left-1/2 -translate-x-1/2 w-3 h-3 bg-white border-b border-r border-gray-200 rotate-45"})]})]}),s.jsx(vh,{color:r,onChange:i,label:"Node"})]})]})})},lI=({tools:e,onAddClick:t,onRemoveTool:n,onDropTool:o,isSelectionMode:r})=>{const i=u=>{u.preventDefault(),u.dataTransfer.dropEffect="copy"},l=(u,d)=>{u.preventDefault();const f=u.dataTransfer.getData("singularity-tool");if(f)try{const p=JSON.parse(f);o(d??e.length,p)}catch(p){console.error("Invalid tool drop data",p)}};return s.jsxs("div",{className:"flex items-center gap-3 pointer-events-auto",children:[s.jsxs("div",{className:"relative",onDragOver:i,onDrop:u=>l(u),children:[s.jsx("button",{onClick:t,className:`
                    w-[44px] h-[44px] flex items-center justify-center rounded-2xl border-2 border-dashed transition-all bg-white/90 backdrop-blur-xl shadow-clay-md
                    ${r?"border-indigo-400 bg-indigo-50 text-indigo-600 animate-pulse shadow-[0_0_15px_rgba(99,102,241,0.4)]":"border-gray-300 text-gray-400 hover:border-blue-400 hover:text-blue-500 hover:bg-white hover:shadow-clay-lg"}
                `,title:e.length===0?"Add Custom Tool":"Add Another Tool",children:s.jsx(w.Plus,{size:20,strokeWidth:2.5})}),r&&s.jsx("div",{className:"absolute -top-10 left-1/2 -translate-x-1/2 bg-indigo-600 text-white text-[10px] font-bold px-2 py-1 rounded whitespace-nowrap animate-bounce shadow-lg",children:"Select Tool"})]}),e.length>0&&s.jsx("div",{className:`
                flex items-center gap-2 p-1.5 rounded-2xl border transition-all duration-300
                bg-white/90 backdrop-blur-xl border-white/60 shadow-clay-lg hover:shadow-clay-xl h-[44px]
            `,children:e.map((u,d)=>s.jsxs("div",{className:"relative group h-full",onContextMenu:f=>{f.preventDefault(),n(d)},children:[s.jsx("button",{onClick:()=>u.action(u.payload),className:`
                                w-8 h-8 flex items-center justify-center rounded-xl transition-all active:scale-95
                                ${u.isActive?"bg-blue-100 text-blue-600 ring-1 ring-blue-200 shadow-inner":"hover:bg-gray-100 text-gray-600"}
                            `,title:u.label,children:s.jsx(u.icon,{size:18,strokeWidth:2})}),s.jsx("button",{onClick:f=>{f.stopPropagation(),n(d)},className:"absolute -top-1 -right-1 bg-red-500 text-white w-3.5 h-3.5 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity hover:scale-110 shadow-sm z-10",children:s.jsx(w.Close,{size:8,strokeWidth:4})})]},`${u.id}-${d}`))})]})},wh=[{id:"trello",name:"Trello",icon:w.Layout,color:"text-blue-600",bg:"bg-blue-50",desc:"Sync nodes as Trello cards. Two-way status updates."},{id:"jira",name:"Jira",icon:w.Task,color:"text-blue-500",bg:"bg-blue-100",desc:"Map tasks to Jira issues. Visualize dependencies."},{id:"sheets",name:"Google Sheets",icon:w.Table,color:"text-green-600",bg:"bg-green-50",desc:"Live data sync. Map columns to node properties."},{id:"notion",name:"Notion",icon:w.FileText,color:"text-gray-700",bg:"bg-gray-100",desc:"Embed maps in Notion pages or sync databases."},{id:"slack",name:"Slack",icon:w.MessageCircle,color:"text-purple-600",bg:"bg-purple-50",desc:"Receive notifications for map changes and comments."}],aI=({isOpen:e,onClose:t})=>{const[n,o]=I.useState({}),[r,i]=I.useState({});if(!e)return null;const l=u=>{var d;n[u]?confirm(`Disconnect ${(d=wh.find(f=>f.id===u))==null?void 0:d.name}?`)&&o(f=>({...f,[u]:!1})):(i(f=>({...f,[u]:!0})),setTimeout(()=>{i(f=>({...f,[u]:!1})),o(f=>({...f,[u]:!0}))},1500))};return s.jsx("div",{className:"fixed inset-0 z-[200] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",onClick:t,children:s.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-2xl shadow-2xl border border-white/20 flex flex-col max-h-[85vh]",onClick:u=>u.stopPropagation(),children:[s.jsxs("div",{className:"p-6 border-b border-gray-100 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-indigo-50 rounded-xl text-indigo-600",children:s.jsx(w.Globe,{size:24})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-display font-bold text-gray-800",children:"Integrations"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Connect your ecosystem. Sync data in real-time."})]})]}),s.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-full text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx(w.Close,{size:20})})]}),s.jsx("div",{className:"flex-1 overflow-y-auto p-6 space-y-4 custom-scrollbar",children:wh.map(u=>s.jsxs("div",{className:"flex flex-col p-4 rounded-xl border border-gray-100 hover:border-gray-200 transition-all hover:shadow-sm bg-white",children:[s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:`p-3 rounded-xl ${u.bg} ${u.color} shrink-0`,children:s.jsx(u.icon,{size:24})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("h3",{className:"font-bold text-gray-800 text-lg",children:u.name}),r[u.id]?s.jsxs("span",{className:"text-xs font-bold text-indigo-500 animate-pulse flex items-center gap-1",children:[s.jsx(w.Navigation,{size:12,className:"animate-spin"})," Connecting..."]}):s.jsx("button",{onClick:()=>l(u.id),className:`px-4 py-1.5 rounded-full text-xs font-bold transition-all border ${n[u.id]?"bg-green-50 text-green-700 border-green-200 hover:bg-red-50 hover:text-red-600 hover:border-red-200":"bg-gray-900 text-white border-gray-900 hover:bg-gray-800"}`,children:n[u.id]?"Connected":"Connect"})]}),s.jsx("p",{className:"text-sm text-gray-500 leading-relaxed mb-3",children:u.desc})]})]}),n[u.id]&&u.id==="sheets"&&s.jsxs("div",{className:"mt-4 bg-gray-50 rounded-lg p-4 text-xs space-y-3 animate-fade-in border border-gray-200",children:[s.jsxs("div",{className:"flex items-center justify-between border-b border-gray-200 pb-2 mb-2",children:[s.jsxs("span",{className:"font-bold text-gray-700 uppercase tracking-wider flex items-center gap-2",children:[s.jsx(w.Table,{size:14,className:"text-green-600"})," Data Visualization Bridge"]}),s.jsx("span",{className:"text-[10px] bg-green-100 text-green-700 px-2 py-0.5 rounded-full font-bold",children:"Active"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{className:"text-[10px] font-bold text-gray-500 uppercase",children:"Sheet Column"}),s.jsxs("select",{className:"w-full p-2 bg-white border border-gray-200 rounded font-medium text-gray-600",children:[s.jsx("option",{children:"A: Task Name"}),s.jsx("option",{children:"B: Description"}),s.jsx("option",{children:"C: Status"}),s.jsx("option",{children:"D: Priority"})]})]}),s.jsx("div",{className:"flex items-center justify-center",children:s.jsx(w.Arrow,{size:16,className:"text-gray-400 rotate-90 sm:rotate-0"})}),s.jsxs("div",{className:"space-y-1 -mt-6 sm:mt-0",children:[s.jsx("label",{className:"text-[10px] font-bold text-gray-500 uppercase",children:"Node Property"}),s.jsxs("select",{className:"w-full p-2 bg-white border border-gray-200 rounded font-medium text-gray-600",children:[s.jsx("option",{children:"Label"}),s.jsx("option",{children:"Note / Description"}),s.jsx("option",{children:"Checkbox State"}),s.jsx("option",{children:"Color (Conditional)"})]})]})]}),s.jsxs("div",{className:"flex items-center gap-2 pt-2 text-gray-500",children:[s.jsx("input",{type:"checkbox",checked:!0,readOnly:!0,className:"accent-green-600"}),s.jsx("span",{children:"Two-way sync (Canvas  Sheet)"})]})]}),n[u.id]&&u.id!=="sheets"&&s.jsxs("div",{className:"mt-2 bg-gray-50 rounded-lg p-3 text-xs space-y-2 animate-fade-in border border-gray-100",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"font-bold text-gray-600",children:"Auto-Sync"}),s.jsx("div",{className:"w-8 h-4 bg-green-500 rounded-full relative",children:s.jsx("div",{className:"absolute right-0.5 top-0.5 w-3 h-3 bg-white rounded-full shadow-sm"})})]}),s.jsxs("div",{className:"pt-2 border-t border-gray-200 flex gap-2",children:[s.jsx("button",{className:"flex-1 py-1.5 bg-white border border-gray-200 rounded text-gray-600 hover:text-blue-600 font-bold",children:"Configure Mapping"}),s.jsx("button",{className:"flex-1 py-1.5 bg-white border border-gray-200 rounded text-gray-600 hover:text-blue-600 font-bold",children:"Force Sync Now"})]})]})]},u.id))}),s.jsx("div",{className:"p-4 bg-gray-50 border-t border-gray-100 text-center",children:s.jsx("p",{className:"text-xs text-gray-400",children:" Secure Connection via OAuth 2.0. Your data is encrypted in transit."})})]})})},bh=5,Ha=["circle","rectangle","rounded","diamond","triangle","hexagon","octagon","parallelogram","cloud"],Ch=e=>{const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null},uI=(e,t)=>{const n=Ch(e),o=Ch(t);return!n||!o?0:Math.sqrt(Math.pow(n.r-o.r,2)+Math.pow(n.g-o.g,2)+Math.pow(n.b-o.b,2))},cI=80,Sh=(e,t)=>{if(!t||t==="any")return!0;const n=e||"#ffffff",o=t;return o==="transparent"?!e||e==="transparent":n===o?!0:uI(n,o)<cI},gi=e=>{const t=e.indexOf("-node-",1);if(t!==-1)return{sourceId:e.substring(0,t),targetId:e.substring(t+1)};if(e.split("-").length>=2){const o=e.match(/(.+)-(.+)/);return o&&o[1]&&o[2]?{sourceId:o[1],targetId:o[2]}:null}return null},dI=(e,t)=>{const n=new Set,o=new Map(e.map(l=>[l.id,l])),i=e.filter(l=>!l.parentId||!o.has(l.parentId)).map(l=>l.id);for(;i.length>0;){const l=i.shift();if(n.add(l),!t.has(l)){const u=o.get(l);u&&u.childrenIds&&u.childrenIds.forEach(d=>{o.has(d)&&i.push(d)})}}return n},fI=({mapId:e,onBack:t,isGenerating:n,setIsGenerating:o})=>{var hd,md;const r=I.useRef(null),i=I.useRef(null),l=I.useRef(0),u=I.useRef(!1),d=I.useRef(null),f=I.useRef(0),p=I.useRef({x:0,y:0}),h=I.useRef(0),m=I.useRef(0),v=I.useRef(null),C=I.useRef(null),S=I.useRef(null),D=I.useRef(null),b=I.useRef(!1),x=I.useRef(0),g=I.useRef(!1),[N,M]=I.useState("Untitled Mind Map"),[T,P]=I.useState(_s),[R,j]=I.useState([]),[U,q]=I.useState({}),[V,oe]=I.useState({x:window.innerWidth/2,y:window.innerHeight/2,zoom:1}),[ce,fe]=I.useState(xe.SELECT),[Q,Te]=I.useState("MINDMAP"),[W,re]=I.useState({stroke:"solid",endMarker:"arrow",color:"#cbd5e1",width:2,routingType:"curved",controlPoints:[]}),[se,ye]=I.useState("rounded"),[be,Ce]=I.useState("#ffffff"),[De,at]=I.useState({active:!1,sibling:{color:!0,shape:!0,edge:!0},child:{color:!1,shape:!1,edge:!0}}),[He,Et]=I.useState(!1),[Bt,Jr]=I.useState(!1),[tn,tt]=I.useState(!1),[Cn,vo]=I.useState(null),[nn,wo]=I.useState(!0),[qo,Oo]=I.useState(!1),[Bn,qn]=I.useState(!1),[ae,Ge]=I.useState({theme:"default",showGrid:!0,zoomSensitivity:1,zoomInertia:!1}),[Be,gt]=I.useState(null),[mn,bo]=I.useState(new Set),[Co,Lt]=I.useState(!1),[yt,Xe]=I.useState(null),[Wl,Sn]=I.useState(!1),[So,Wo]=I.useState(!1),[Jl,Yr]=I.useState(!1),[Kr,No]=I.useState(!1),[Jo,On]=I.useState(!1),[Nn,Yo]=I.useState(!1),[Yl,Ko]=I.useState("PNG"),[Eo,Kl]=I.useState(""),[Tt,Xr]=I.useState([]),[Xo,Qo]=I.useState(0),[En,ns]=I.useState({color:"#1e293b",width:4,tool:"pen"}),[Zo,er]=I.useState(null),[le,Le]=I.useState(new Set),[ke,ut]=I.useState(new Set),[tr,Wn]=I.useState(null),[Se,Tn]=I.useState(null),[nr,$]=I.useState(!1),[ee,me]=I.useState(new Set),[ie,xt]=I.useState({x:0,y:0}),[Qe,os]=I.useState({x:0,y:0}),[or,rs]=I.useState(null),[E0,Xc]=I.useState([]),[on,Xl]=I.useState(null),[Qc,Zc]=I.useState(!1),[Ql,ed]=I.useState(!1),[kn,td]=I.useState([]),[rn,Zl]=I.useState(-1),[T0,ea]=I.useState(!1),[k0,is]=I.useState(!1),[To,rr]=I.useState(new Set),[Qr,ss]=I.useState(!1),[Jn,sn]=I.useState(null),[_e,_n]=I.useState(null),[Zr,In]=I.useState(null),[gn,qt]=I.useState(null),[ta,ls]=I.useState([]),[na,as]=I.useState(!1),[us,oa]=I.useState(!1),ir=I.useRef(null),Ot=Ki[ae.theme]||Ki.default;I.useEffect(()=>{if(us){if(!("webkitSpeechRecognition"in window)){alert("Voice control is not supported in this browser."),oa(!1);return}const y=new window.webkitSpeechRecognition;y.continuous=!0,y.interimResults=!1,y.lang="en-US",y.onresult=E=>{const _=E.results.length-1,k=E.results[_][0].transcript.trim().toLowerCase();console.log("Voice Command:",k),_0(k)},y.onerror=E=>{console.error("Voice Error",E),oa(!1)},y.start(),ir.current=y}else ir.current&&(ir.current.stop(),ir.current=null);return()=>{ir.current&&ir.current.stop()}},[us]);const _0=y=>{if(y.startsWith("create node")||y.startsWith("new node")||y.startsWith("add node")){const E=y.replace(/create node|new node|add node/,"").trim();kt(void 0,!1,void 0,void 0,E||"New Node")}else if(y.startsWith("child")||y.startsWith("add child")||y.startsWith("sub node")){const E=y.replace(/child|add child|sub node/,"").trim();if(le.size>0){const _=Array.from(le)[0];kt(_,!1,void 0,void 0,E||"New Child")}}else if(y.includes("delete")||y.includes("remove"))ko("delete");else if(y.includes("focus")){if(le.size>0){const E=Array.from(le)[0];gt(E),sr(E)}}else if(y.startsWith("color")||y.startsWith("make it")){const E=y.replace(/color|make it/,"").trim(),_={red:"#ef4444",blue:"#3b82f6",green:"#10b981",yellow:"#f59e0b",orange:"#f97316",purple:"#8b5cf6",pink:"#ec4899",black:"#000000",white:"#ffffff",gray:"#9ca3af"};_[E]&&le.size>0&&ko("color",_[E])}else y==="undo"?ei():y==="redo"&&ti()},ra=I.useMemo(()=>dI(T,To),[T,To]);I.useEffect(()=>{if(!Be){bo(new Set);return}const y=new Map;T.forEach(k=>{var L;k.parentId&&(y.has(k.parentId)||y.set(k.parentId,[]),(L=y.get(k.parentId))==null||L.push(k.id))});const E=new Set,_=[Be];for(;_.length>0;){const k=_.shift();E.add(k);const L=y.get(k);L&&L.forEach(F=>_.push(F))}bo(E)},[Be,T]);const ia=y=>Be?!mn.has(y):Eo&&Tt.length>0?!Tt.includes(y):!1;I.useEffect(()=>{const y=localStorage.getItem(`singularity-custom-toolbar-${e}`);if(y)try{const E=JSON.parse(y);ls(E)}catch(E){console.error("Failed to load toolbar",E)}},[e]),I.useEffect(()=>{localStorage.setItem(`singularity-custom-toolbar-${e}`,JSON.stringify(ta))},[ta,e]);const I0=y=>{const E=w[y.iconName]||w.Help;let _=L=>{},k=!1;if(y.id==="toggle:link-paint")_=()=>Et(!He),k=He;else if(y.id==="toggle:smart-sibling-color")_=()=>at(L=>({...L,sibling:{...L.sibling,color:!L.sibling.color}})),k=De.sibling.color;else if(y.id==="toggle:smart-sibling-shape")_=()=>at(L=>({...L,sibling:{...L.sibling,shape:!L.sibling.shape}})),k=De.sibling.shape;else if(y.id.startsWith("tool:")){const L=y.id.split(":")[1];_=()=>fe(L),k=ce===L}else if(y.id.startsWith("action:")){const L=y.id.split(":")[1];_=()=>je(L)}else if(y.id.startsWith("create:")){const L=y.id.split(":")[1];L==="note"&&(_=()=>je("new-sticky-color")),L==="code"&&(_=()=>je("code-node","JavaScript")),L==="table"&&(_=()=>je("table-node"))}else if(y.id.startsWith("shape:")){const L=y.id.split(":")[1];_=()=>je("add-node-shape",L)}else if(y.id.startsWith("export:")){const L=y.id.split(":")[1];_=()=>lr(L)}return{id:y.id,actionId:y.id,label:y.label,icon:E,action:_,isActive:k}},A0=ta.map(I0),M0=()=>{as(!0),wo(!0),qn(!0)},nd=(y,E,_)=>{ls(k=>[...k,{id:y,label:E,iconName:_}]),as(!1)},P0=y=>{ls(E=>{const _=[...E];return _.splice(y,1),_})},R0=(y,E)=>{ls(_=>{const k=[..._];return k.splice(y,0,{id:E.id,label:E.label,iconName:E.iconName}),k}),as(!1)};I.useEffect(()=>{const y=`singularity-map-${e}`,E=localStorage.getItem(y);if(E)try{const _=JSON.parse(E);_.nodes&&P(_.nodes),_.drawings&&j(_.drawings),_.edgeData&&q(_.edgeData),_.viewport&&oe(_.viewport),_.projectName&&M(_.projectName),_.canvasSettings&&Ge(k=>({...k,..._.canvasSettings})),_.defaultEdgeOptions&&re(_.defaultEdgeOptions),_.defaultNodeShape&&ye(_.defaultNodeShape),_.defaultNodeColor&&Ce(_.defaultNodeColor),_.smartRules&&at(_.smartRules),_.collapsedNodeIds&&rr(new Set(_.collapsedNodeIds))}catch(_){console.error("Failed to load map data",_)}else P(_s),M("Untitled Mind Map"),oe({x:window.innerWidth/2,y:window.innerHeight/2,zoom:1}),j([]),q({})},[e]),I.useEffect(()=>(d.current&&clearTimeout(d.current),d.current=setTimeout(()=>{const y=`singularity-map-${e}`,E={nodes:T,edgeData:U,drawings:R,viewport:V,projectName:N,canvasSettings:ae,defaultEdgeOptions:W,defaultNodeShape:se,defaultNodeColor:be,smartRules:De,collapsedNodeIds:Array.from(To)};localStorage.setItem(y,JSON.stringify(E));const _=localStorage.getItem("singularity-maps-index");let k=_?JSON.parse(_):[];const L=k.findIndex(F=>F.id===e);L!==-1?k[L]={...k[L],name:N,lastModified:Date.now()}:k.unshift({id:e,name:N,lastModified:Date.now()}),localStorage.setItem("singularity-maps-index",JSON.stringify(k))},2e3),()=>{d.current&&clearTimeout(d.current)}),[T,R,U,V,N,ae,W,se,be,De,e,To]);const D0=y=>{const E=y.target;if(!(E.closest("button")||E.closest("input")||E.closest(".no-pan"))){if(y.touches.length===1){const _=y.touches[0],k=Date.now();C.current={x:_.clientX,y:_.clientY},S.current={x:_.clientX,y:_.clientY};const L=k-x.current<300,F=document.elementFromPoint(_.clientX,_.clientY),A=F==null?void 0:F.closest("[data-node-id]"),z=A==null?void 0:A.getAttribute("data-node-id"),H=z?T.find(B=>B.id===z):null;if(L&&!H)g.current=!0,D.current&&clearTimeout(D.current);else if(H){if(!Bt){let B=new Set;le.has(H.id)?B=new Set(le):(B=new Set([H.id]),Le(B)),me(B),u.current=!1}D.current&&clearTimeout(D.current)}else D.current=setTimeout(()=>{sn(null),qt({left:_.clientX,top:_.clientY,right:_.clientX,bottom:_.clientY,width:0,height:0}),navigator.vibrate&&navigator.vibrate(50)},600)}else if(y.touches.length===2){D.current&&(clearTimeout(D.current),D.current=null),b.current=!0,g.current=!1;const _=y.touches[0],k=y.touches[1],L=Math.hypot(_.clientX-k.clientX,_.clientY-k.clientY);m.current=L,v.current={x:(_.clientX+k.clientX)/2,y:(_.clientY+k.clientY)/2}}}},L0=y=>{var _,k,L,F;const E=y.target;if(!(E.closest("button")||E.closest("input"))){if(y.touches.length===1&&!b.current){const A=y.touches[0],z=C.current;if(!z)return;const H=A.clientX-z.x,B=A.clientY-z.y;if((Math.abs(A.clientX-(((_=S.current)==null?void 0:_.x)||0))>10||Math.abs(A.clientY-(((k=S.current)==null?void 0:k.y)||0))>10)&&D.current&&(clearTimeout(D.current),D.current=null),g.current){if(!Se)Tn({start:{x:S.current.x,y:S.current.y},current:{x:A.clientX,y:A.clientY}});else{Tn(Ne=>Ne?{...Ne,current:{x:A.clientX,y:A.clientY}}:null);const G=Math.min(Se.start.x,A.clientX),te=Math.min(Se.start.y,A.clientY),K=Math.max(Se.start.x,A.clientX),Z=Math.max(Se.start.y,A.clientY),pe=(G-V.x)/V.zoom,he=(te-V.y)/V.zoom,ue=(K-V.x)/V.zoom,Ie=(Z-V.y)/V.zoom,Fe=new Set;T.forEach(Ne=>{Ne.position.x>=pe&&Ne.position.x<=ue&&Ne.position.y>=he&&Ne.position.y<=Ie&&Fe.add(Ne.id)}),Le(Fe)}return}if(ee.size>0&&!Bt){u.current=!0,y.preventDefault();const G=H/V.zoom,te=B/V.zoom;P(K=>K.map(Z=>ee.has(Z.id)?{...Z,position:{x:Z.position.x+G,y:Z.position.y+te}}:Z)),q(K=>{let Z=!1;const pe={...K};return ee.forEach(he=>{const ue=T.find(Ie=>Ie.id===he);ue&&ue.childrenIds.forEach(Ie=>{if(ee.has(Ie)){const Fe=`${he}-${Ie}`,Ne=pe[Fe];Ne&&Ne.controlPoints&&Ne.controlPoints.length>0&&(Z=!0,pe[Fe]={...Ne,controlPoints:Ne.controlPoints.map(Ye=>({x:Ye.x+G,y:Ye.y+te}))})}})}),Z?pe:K}),C.current={x:A.clientX,y:A.clientY}}else(Math.abs(A.clientX-(((L=S.current)==null?void 0:L.x)||0))>10||Math.abs(A.clientY-(((F=S.current)==null?void 0:F.y)||0))>10)&&(oe(G=>({...G,x:G.x+H,y:G.y+B})),C.current={x:A.clientX,y:A.clientY})}else if(y.touches.length===2){y.cancelable&&y.preventDefault(),D.current&&(clearTimeout(D.current),D.current=null);const A=y.touches[0],z=y.touches[1],H=Math.hypot(A.clientX-z.clientX,A.clientY-z.clientY);if(m.current>0){const G=1+(H/m.current-1)*.8;oe(te=>{let K=te.zoom*G;K=Math.min(Math.max(K,fi),pi);const Z=v.current||{x:window.innerWidth/2,y:window.innerHeight/2},pe=(Z.x-te.x)/te.zoom,he=(Z.y-te.y)/te.zoom,ue=Z.x-pe*K,Ie=Z.y-he*K;return{x:ue,y:Ie,zoom:K}}),m.current=H}}}},j0=y=>{if(x.current=Date.now(),g.current=!1,D.current&&(clearTimeout(D.current),D.current=null),Se){Tn(null);return}if(ee.size>0&&u.current){cs(T,R,U),me(new Set),u.current=!1;return}if(me(new Set),y.touches.length===0&&!b.current&&C.current&&S.current){const E=Math.abs(C.current.x-S.current.x),_=Math.abs(C.current.y-S.current.y);if(E<10&&_<10){const k=document.elementFromPoint(C.current.x,C.current.y),L=k==null?void 0:k.closest("[data-node-id]"),F=L==null?void 0:L.getAttribute("data-node-id"),A=F?T.find(z=>z.id===F):null;if(A)if(Bt){const z=new Set(le);z.has(A.id)?z.delete(A.id):z.add(A.id),Le(z)}else cd({stopPropagation:()=>{},preventDefault:()=>{},shiftKey:!1,ctrlKey:!1,altKey:!1,clientX:C.current.x,clientY:C.current.y},A.id);else Bt||(Le(new Set),ut(new Set),sn(null),qt(null))}}y.touches.length<2&&(b.current=!1),y.touches.length===0&&(C.current=null)},F0=y=>{rr(E=>{const _=new Set(E);if(_.has(y))_.delete(y);else{_.add(y);const k=L=>{const F=T.find(A=>A.id===L);F&&F.childrenIds.forEach(A=>{_.add(A),k(A)})};k(y)}return _})},U0=()=>{rr(new Set)},z0=()=>{const y=new Set;T.forEach(E=>{E.childrenIds.length>0&&y.add(E.id)}),rr(y)},sr=(y,E)=>{const _=T.find(k=>k.id===y);if(_){const k=V.zoom,L=window.innerWidth/2-_.position.x*k,F=window.innerHeight/2-_.position.y*k;oe({x:L,y:F,zoom:k})}},V0=async y=>{if(No(!1),o(!0),!y.trim()){de(_s,[],{}),oe({x:window.innerWidth/2,y:window.innerHeight/2,zoom:1}),o(!1);return}const E=await Ik();if(E){const _={x:0,y:0},k=Fv(E,_.x,_.y),L=Os(k);de(L,[],{}),oe({x:window.innerWidth/2,y:window.innerHeight/2,zoom:1}),M(y)}else alert("AI could not generate the map. Starting blank."),de(_s,[],{});o(!1)},$0=async y=>{const E=jt(y);if(!E)return;o(!0);let _="";const k=(G,te)=>{const K=jt(G);K&&(_+=`${"  ".repeat(te)}- ${K.label}
`,K.childrenIds.forEach(Z=>k(Z,te+1)))};k(y,0);const L=await Rk(E.label),F=Oe(),A={id:F,type:O.NOTE,label:` Summary of ${E.label}:

${L}`,position:{x:E.position.x+350,y:E.position.y},childrenIds:[],shape:"rectangle",color:"#fff740"},z=T.map(G=>G.id===y?{...G,childrenIds:[...G.childrenIds,F]}:G),H=`${y}-${F}`,B={...U,[H]:{stroke:"dashed",color:"#fbbf24"}};de([...z,A],R,B),o(!1)},H0=async y=>{const E=yt,_=T.find(F=>F.id===E);if(!_)return;const k=T.find(F=>F.id===_.parentId);k&&k.label,de(T.map(F=>F.id===E?{...F,data:{...F.data,isDreaming:!0}}:F));const L=await Lk(_.label);L?de(T.map(F=>F.id===E?{...F,type:O.MEDIA,data:{...F.data,imageUrl:L,isDreaming:!1}}:F)):(de(T.map(F=>F.id===E?{...F,data:{...F.data,isDreaming:!1}}:F)),alert("Could not dream up an image. Try again."))};I.useEffect(()=>{const y=E=>{var k;if(tr)return;const _=(k=E.clipboardData)==null?void 0:k.items;if(_){for(let L=0;L<_.length;L++)if(_[L].type.indexOf("image")!==-1){E.preventDefault();const F=_[L].getAsFile();if(F){const A=new FileReader;A.onload=z=>{var H;if((H=z.target)!=null&&H.result){const B={x:(window.innerWidth/2-V.x)/V.zoom,y:(window.innerHeight/2-V.y)/V.zoom};kt(void 0,!1,O.MEDIA,void 0,"Pasted Image",void 0,{imageUrl:z.target.result},B)}},A.readAsDataURL(F)}}}};return window.addEventListener("paste",y),()=>window.removeEventListener("paste",y)},[tr,V,T]);const cs=I.useCallback((y,E,_)=>{let k=rn;Array.isArray(kn)||(td([]),k=-1),k<-1&&(k=-1),k>=kn.length&&(k=kn.length-1);const L={nodes:JSON.parse(JSON.stringify(y)),drawings:JSON.parse(JSON.stringify(E)),edgeData:JSON.parse(JSON.stringify(_))},F=kn.slice(0,k+1);F.push(L),F.length>50&&F.shift(),td(F),Zl(F.length-1)},[kn,rn]),de=(y,E=R,_=U)=>{P(y),j(E),q(_),cs(y,E,_)},ei=()=>{if(rn>0){const y=kn[rn-1];P(JSON.parse(JSON.stringify(y.nodes))),j(JSON.parse(JSON.stringify(y.drawings))),q(JSON.parse(JSON.stringify(y.edgeData))),Zl(rn-1)}},ti=()=>{if(rn<kn.length-1){const y=kn[rn+1];P(JSON.parse(JSON.stringify(y.nodes))),j(JSON.parse(JSON.stringify(y.drawings))),q(JSON.parse(JSON.stringify(y.edgeData))),Zl(rn+1)}};I.useEffect(()=>{if(!Eo){Xr([]);return}const y=T.filter(E=>E.label.toLowerCase().includes(Eo.toLowerCase())).map(E=>E.id);Xr(y),Qo(0),y.length>0&&sr(y[0])},[Eo,T]);const od=()=>{if(Tt.length===0)return;const y=(Xo+1)%Tt.length;Qo(y),sr(Tt[y])},rd=()=>{if(Tt.length===0)return;const y=(Xo-1+Tt.length)%Tt.length;Qo(y),sr(Tt[y])},G0=async()=>{try{const y=await navigator.mediaDevices.getDisplayMedia({video:{displaySurface:"browser"},audio:!1}),E="video/webm;codecs=vp9",_=new MediaRecorder(y,{mimeType:E}),k=[];_.ondataavailable=L=>{L.data.size>0&&k.push(L.data)},_.onstop=()=>{const L=new Blob(k,{type:E}),F=URL.createObjectURL(L),A=document.createElement("a");A.href=F,A.download=`${N.replace(/\s+/g,"_")}_recording.webm`,A.click(),URL.revokeObjectURL(F),y.getTracks().forEach(z=>z.stop())},_.start(),y.getVideoTracks()[0].onended=()=>{_.state!=="inactive"&&_.stop()}}catch(y){console.error("Error starting screen recording:",y),alert("Screen recording cancelled or failed.")}},lr=async y=>{if(y==="JSON"){const E="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify({nodes:T,edgeData:U,drawings:R,viewport:V,projectName:N},null,2)),_=document.createElement("a");_.setAttribute("href",E),_.setAttribute("download",`${N.replace(/\s+/g,"_")}_backup.json`),document.body.appendChild(_),_.click(),_.remove()}else y==="MD"?fh(T,N):y==="TXT"?dh(T,N):y==="PNG"||y==="JPEG"||y==="SVG"?(Ko(y),Yo(!0)):y==="HTML"?A_(T,U,N,Ot):y==="DOC"?fh(T,N):y==="PDF"?P_(N):y==="EXCEL"?M_(T,N):y==="OPML"?dh(T,N):y==="VIDEO"&&G0()},id=async y=>{const E=jt(y);if(!E)return;o(!0);const _=await Pk(E.label);if(_){let k=E.type;_.type==="TASK"&&(k=O.TASK),_.type==="CODE"&&(k=O.CODE),de(T.map(L=>L.id===y?{...L,type:k,color:_.color,shape:_.shape}:L))}o(!1)},sa=y=>{let E=[...T];y==="FLOWCHART"?E=E.map(F=>({...F,originalShape:F.originalShape||F.shape,shape:F.label.includes("?")||F.type===O.MAIN?"diamond":"rectangle"})):E=E.map(F=>({...F,shape:F.originalShape||F.shape,originalShape:void 0}));let _=E,k=le.size>0;if(k){const F=E.filter(A=>le.has(A.id));F.length>0?_=F:k=!1}const L=Uv(_,y);if(k){const F=_.reduce((K,Z)=>K+Z.position.x,0)/_.length,A=_.reduce((K,Z)=>K+Z.position.y,0)/_.length,z=L.reduce((K,Z)=>K+Z.position.x,0)/L.length,H=L.reduce((K,Z)=>K+Z.position.y,0)/L.length,B=F-z,G=A-H,te=E.map(K=>{const Z=L.find(pe=>pe.id===K.id);return Z?{...Z,position:{x:Z.position.x+B,y:Z.position.y+G}}:K});de(te)}else de(L)},je=(y,E)=>{var _;switch(y){case"undo":ei();break;case"redo":ti();break;case"center":oe(k=>{var L,F;return{...k,x:window.innerWidth/2-(((L=T[0])==null?void 0:L.position.x)*k.zoom||0),y:window.innerHeight/2-(((F=T[0])==null?void 0:F.position.y)*k.zoom||0)}});break;case"fit":sa("MINDMAP_LR"),oe(k=>({...k,zoom:.8}));break;case"zoom-in":oe(k=>({...k,zoom:Math.min(5,k.zoom+.1)}));break;case"zoom-out":oe(k=>({...k,zoom:Math.max(.1,k.zoom-.1)}));break;case"new-map":No(!0);break;case"export-image":lr("PNG");break;case"export-jpeg":lr("JPEG");break;case"export-text":lr("TXT");break;case"export-json":lr("JSON");break;case"shortcuts":is(!0);break;case"select-all":Le(new Set(T.map(k=>k.id)));break;case"template-swot":la("SWOT");break;case"template-roadmap":la("ROADMAP");break;case"template-plan":la("PROJECT_PLAN");break;case"layout":sa(E);break;case"add-node-shape":{const k=E,L=typeof k=="string"?k:k==null?void 0:k.shape,F=typeof k=="object"?k==null?void 0:k.position:void 0;kt(void 0,!1,O.SUB,L,void 0,void 0,void 0,F);break}case"new-sticky-color":ld(!0,E);break;case"code-node":kt(void 0,!1,O.CODE,"rectangle","Code Snippet",void 0,E);break;case"table-node":kt(void 0,!1,O.TABLE,"rectangle","Data Table",void 0,E);break;case"open-media-modal":Yr(!0);break;case"search":Sn(!0);break;case"ai-expand":{const k=ni();k?(Xe(k.id),Lt(!0)):alert("Select a node to expand.");break}case"ai-chat":Wo(!0);break;case"present":document.fullscreenElement?(document.exitFullscreen(),ss(!1)):((_=r.current)==null||_.requestFullscreen(),ss(!0));break;case"copy-style":{const k=ni();k&&vo({color:k.color,shape:k.shape});break}case"paste-style":{if(Cn&&le.size>0){const k=T.map(L=>le.has(L.id)?{...L,color:Cn.color||L.color,shape:Cn.shape||L.shape}:L);de(k)}break}case"replace-global-style":{const{find:k,replace:L}=E||{};if(!L)return;const F=new Set,A=T.map(G=>{const te=!k.shape||k.shape==="any"||G.shape===k.shape,K=Sh(G.color,k.color);return te&&K?(F.add(G.id),{...G,shape:L.shape&&L.shape!=="any"?L.shape:G.shape,color:L.color&&L.color!=="any"?L.color:G.color}):G});let z=U;const H=L.linkColor&&L.linkColor!=="any",B=k.linkColor&&k.linkColor!=="any";(H||B)&&(z={...U},Object.keys(z).forEach(G=>{const te=z[G],[K,Z]=G.split("-"),pe=!B||Sh(te.color,k.linkColor);let he=!1;B?pe&&(he=!0):F.has(K)&&(he=!0),he&&H&&(z[G]={...te,color:L.linkColor})})),(JSON.stringify(A)!==JSON.stringify(T)||JSON.stringify(z)!==JSON.stringify(U))&&de(A,R,z);break}case"edge-bulk-update":{const{color:k,stroke:L,routingType:F,endMarker:A}=E||{};if(ke.size===0&&!He||ke.size===0)return;let z={...U};ke.forEach(H=>{if(!z[H])return;const B=z[H];z[H]={...B,color:k!==void 0?k:B.color,stroke:L!==void 0?L:B.stroke,routingType:F!==void 0?F:B.routingType,endMarker:A!==void 0?A:B.endMarker,controlPoints:F!==void 0&&F!==B.routingType?[]:B.controlPoints}}),de(T,R,z);break}case"edge-align-horizontal":{if(ke.size===0)return;let k=0,L=0;if(ke.forEach(z=>{var H,B;(B=(H=U[z])==null?void 0:H.controlPoints)!=null&&B[0]&&(k+=U[z].controlPoints[0].y,L++)}),L===0)return;const F=k/L;let A={...U};ke.forEach(z=>{var H,B;if((B=(H=A[z])==null?void 0:H.controlPoints)!=null&&B[0]){const G=[...A[z].controlPoints];G[0]={...G[0],y:F},A[z]={...A[z],controlPoints:G}}}),de(T,R,A);break}case"edge-align-vertical":{if(ke.size===0)return;let k=0,L=0;if(ke.forEach(z=>{var H,B;(B=(H=U[z])==null?void 0:H.controlPoints)!=null&&B[0]&&(k+=U[z].controlPoints[0].x,L++)}),L===0)return;const F=k/L;let A={...U};ke.forEach(z=>{var H,B;if((B=(H=A[z])==null?void 0:H.controlPoints)!=null&&B[0]){const G=[...A[z].controlPoints];G[0]={...G[0],x:F},A[z]={...A[z],controlPoints:G}}}),de(T,R,A);break}case"edge-delete-selected":{if(ke.size===0)return;let k=[...T];ke.forEach(F=>{const A=gi(F);if(A){const{sourceId:z,targetId:H}=A;k=k.map(B=>B.id===z?{...B,childrenIds:B.childrenIds.filter(G=>G!==H)}:B)}});let L={...U};ke.forEach(F=>delete L[F]),de(k,R,L),ut(new Set);break}case"focus":{if(le.size>0){const k=Array.from(le)[0];gt(k),sr(k)}break}case"dream-node":{le.size>0&&(Xe(Array.from(le)[0]),On(!0));break}case"update-node-data":{const{id:k,data:L}=E;k&&L&&sd(k,L);break}}},ko=(y,E)=>{if(le.size===0)return;const _=T.filter(L=>le.has(L.id));let k=[...T];switch(y){case"color":k=k.map(A=>le.has(A.id)?{...A,color:E}:A);break;case"shape":k=k.map(A=>le.has(A.id)?{...A,shape:E}:A);break;case"delete":k=k.filter(A=>!le.has(A.id)),k=k.map(A=>({...A,childrenIds:A.childrenIds.filter(z=>!le.has(z))})),Le(new Set);break;case"duplicate":const L=[],F=new Set;_.forEach(A=>{const z=Oe();L.push({...A,id:z,position:{x:A.position.x+20,y:A.position.y+20},childrenIds:[],label:A.label+" (Copy)"}),F.add(z)}),k=[...k,...L],Le(F);break;case"lock":k=k.map(A=>le.has(A.id)?{...A,locked:!A.locked}:A);break;case"align-left":{const A=Math.min(..._.map(z=>z.position.x));k=k.map(z=>le.has(z.id)?{...z,position:{...z.position,x:A}}:z);break}case"align-center":{const A=_.reduce((z,H)=>z+H.position.x,0)/_.length;k=k.map(z=>le.has(z.id)?{...z,position:{...z.position,x:A}}:z);break}}de(k)},jt=y=>T.find(E=>E.id===y),ni=()=>{const y=Array.from(le);return y.length===1?jt(y[0]):null},kt=(y,E,_,k,L,F,A,z)=>{let H=k||se,B=be;Q==="FLOWCHART"&&!k&&(H="rectangle");const G=y?jt(y):ni()||T[0];let te;if(!k&&!F&&De.active&&G){const ct=E?De.sibling:De.child,nt=G;if(ct.color&&nt.color&&(B=nt.color),ct.shape&&nt.shape&&(H=nt.shape),ct.edge){const _o=Object.keys(U).find(Wt=>Wt.endsWith(`-${nt.id}`));_o&&(te=U[_o])}}const K=_||(Q==="MINDMAP"?y?O.SUB:O.ROOT:O.MAIN);if(!y&&!E||K===O.MEDIA||K===O.CODE||K===O.TABLE||K===O.NOTE){const qe=Oe(),ct=z||{x:(window.innerWidth/2-V.x)/V.zoom,y:(window.innerHeight/2-V.y)/V.zoom};z||(ct.x+=Math.random()*50-25,ct.y+=Math.random()*50-25);let nt=A;K===O.CODE&&!nt?nt={codeLanguage:"JavaScript",codeSnippet:"// Write some code"}:K===O.TABLE&&!nt&&(nt={tableRows:[["A","B","C"],["1","2","3"],["4","5","6"]]});const _o={id:qe,type:K,label:L||(K===O.NOTE?"New Note":K===O.CODE?"Code Snippet":K===O.TABLE?"Data Table":"New Node"),position:ct,childrenIds:[],shape:H,color:B,data:nt};let Wt=[...T,_o];Wt=La(_o,Wt),de(Wt),Le(new Set([qe])),K!==O.MEDIA&&Wn(qe);return}if(!G){kt(void 0,!1,_,k,L,F,A,z);return}const Z=E&&G.parentId?jt(G.parentId):G;if(!Z)return;const pe=Oe(),he={id:pe,type:_||(Z.type===O.ROOT?O.MAIN:O.SUB),label:L||"New Node",position:{x:Z.position.x,y:Z.position.y},parentId:Z.id,childrenIds:[],shape:H,color:B},ue=T.map(qe=>qe.id===Z.id?{...qe,childrenIds:[...qe.childrenIds,pe]}:qe),Ie=`${Z.id}-${pe}`;let Fe={...W};De.active&&te?Fe={...te,label:void 0}:Fe={...W};const Ne={...U,[Ie]:Fe};let Ye=[...ue,he];if(Q==="MINDMAP"){const qe=Ye.find(ct=>ct.id===Z.id);if(qe){const ct=qe.childrenIds.map(Wt=>Ye.find(gd=>gd.id===Wt)).filter(Boolean),nt=qe.parentId?Ye.find(Wt=>Wt.id===qe.parentId):void 0,_o=kf(qe,ct,nt);Ye=Ye.map(Wt=>_o.find(uy=>uy.id===Wt.id)||Wt)}}const oi=Ye.find(qe=>qe.id===pe);oi&&(Ye=La(oi,Ye)),de(Ye,R,Ne),Le(new Set([pe])),Wn(pe),To.has(Z.id)&&rr(qe=>{const ct=new Set(qe);return ct.delete(Z.id),ct})},B0=y=>{jt(y)&&de(T.map(_=>_.id===y?{..._,checked:!_.checked}:_))},q0=(y,E)=>{const _=jt(y);if(_){const k={..._.data,items:E};de(T.map(L=>L.id===y?{...L,data:k}:L))}},sd=(y,E)=>{const _=jt(y);if(_){const k={..._.data,...E};de(T.map(L=>L.id===y?{...L,data:k}:L))}},la=y=>{if(confirm("This will replace your current map content. Continue?")){const E={x:(window.innerWidth/2-V.x)/V.zoom,y:(window.innerHeight/2-V.y)/V.zoom};let _=[];vl[y]&&(_=vl[y](E.x,E.y)),de(_,[],{}),oe(k=>({...k,x:window.innerWidth/2-E.x*k.zoom,y:window.innerHeight/2-E.y*k.zoom}))}},ld=(y,E)=>{const _=Oe(),k={x:(window.innerWidth/2-V.x)/V.zoom,y:(window.innerHeight/2-V.y)/V.zoom},L={id:_,type:O.NOTE,label:"Sticky Note",position:k,childrenIds:[],shape:void 0,color:E||"#fef3c7"};de([...T,L]),Le(new Set([_])),Wn(_)},O0=()=>{sa("MINDMAP_LR")};I.useEffect(()=>{const y=E=>{E.target.tagName==="INPUT"||E.target.tagName==="TEXTAREA"||E.target.isContentEditable||((E.key==="Delete"||E.key==="Backspace")&&(ke.size>0&&le.size===0?je("edge-delete-selected"):ko("delete")),E.key==="Tab"&&(E.preventDefault(),le.size===1&&kt(Array.from(le)[0],!1)),E.key==="Enter"&&(E.preventDefault(),le.size===1&&kt(Array.from(le)[0],!0)),E.key===" "&&!E.ctrlKey&&!E.metaKey&&!Qr&&(E.preventDefault(),fe(_=>_===xe.SELECT?xe.HAND:_===xe.HAND?xe.CONNECT:xe.SELECT)),E.key.toLowerCase()==="v"&&fe(xe.SELECT),E.key.toLowerCase()==="h"&&fe(xe.HAND),E.key.toLowerCase()==="d"&&fe(xe.DRAW),E.key.toLowerCase()==="l"&&O0(),E.key.toLowerCase()==="c"&&je("center"),E.key==="Escape"&&(Le(new Set),ut(new Set),rs(null),fe(xe.SELECT),Sn(!1),Lt(!1),Yr(!1),is(!1),ea(!1),On(!1),Yo(!1),sn(null),_n(null),In(null),qt(null),gt(null),Qr&&(document.exitFullscreen(),ss(!1)),as(!1)),(E.ctrlKey||E.metaKey)&&(E.key==="z"&&(E.preventDefault(),ei()),E.key==="y"&&(E.preventDefault(),ti()),E.key==="a"&&(E.preventDefault(),je("select-all")),E.key==="f"&&(E.preventDefault(),je("search")),E.key==="k"&&(E.preventDefault(),ea(_=>!_))),E.ctrlKey&&E.altKey&&(E.key.toLowerCase()==="c"&&(E.preventDefault(),je("copy-style")),E.key.toLowerCase()==="v"&&(E.preventDefault(),je("paste-style"))),E.shiftKey&&E.key.toLowerCase()==="f"&&(E.preventDefault(),je("present")))};return window.addEventListener("keydown",y),()=>window.removeEventListener("keydown",y)},[le,ke,ce,T,U,rn,Qr,Cn,De,W,se,be,Q]);const ad=I.useCallback(()=>{if(ae.zoomInertia){if(Math.abs(f.current)<.001){f.current=0,cancelAnimationFrame(h.current);return}oe(y=>{var G;const E=Math.pow(1.002,-f.current);let _=y.zoom*E;_<fi&&(_=fi),_>pi&&(_=pi);const k=(G=r.current)==null?void 0:G.getBoundingClientRect();if(!k)return y;const L=p.current.x-k.left,F=p.current.y-k.top,A=(L-y.x)/y.zoom,z=(F-y.y)/y.zoom,H=L-A*_,B=F-z*_;return{x:H,y:B,zoom:_}}),f.current*=.92,h.current=requestAnimationFrame(ad)}},[ae.zoomInertia]),ud=y=>{if(y.ctrlKey||y.metaKey){y.preventDefault();const E=y.deltaY;if(p.current={x:y.clientX,y:y.clientY},ae.zoomInertia)f.current+=E*.5*(ae.zoomSensitivity||1),cancelAnimationFrame(h.current),h.current=requestAnimationFrame(ad);else{const _=ae.zoomSensitivity||1,k=E*_,L=Math.pow(1.002,-k);oe(F=>{var pe;let A=F.zoom*L;A<fi&&(A=fi),A>pi&&(A=pi);const z=(pe=r.current)==null?void 0:pe.getBoundingClientRect();if(!z)return F;const H=y.clientX-z.left,B=y.clientY-z.top,G=(H-F.x)/F.zoom,te=(B-F.y)/F.zoom,K=H-G*A,Z=B-te*A;return{x:K,y:Z,zoom:A}})}}else ce===xe.HAND&&(y.preventDefault(),oe(E=>({...E,x:E.x-y.deltaX,y:E.y-y.deltaY})))};I.useEffect(()=>{const y=r.current;if(y)return y.addEventListener("wheel",ud,{passive:!1}),()=>y.removeEventListener("wheel",ud)},[ce,ae.zoomSensitivity,ae.zoomInertia]);const W0=y=>{if(y.button===2||y.button===1){Zc(!0),ed(!1),xt({x:y.clientX,y:y.clientY});return}sn(null),_n(null),In(null),qt(null);const E=y.shiftKey&&(ce===xe.SELECT||ce===xe.CONNECT);if(He||E){if(y.button!==0)return;tt(!0),He&&!y.shiftKey&&(ut(new Set),Le(new Set));return}if(ce===xe.DRAW){const _=(y.clientX-V.x)/V.zoom,k=(y.clientY-V.y)/V.zoom;er({id:Oe(),points:[{x:_,y:k}],color:En.color,width:En.width,type:En.tool==="pen"||En.tool==="eraser"?"pen":"highlighter",isEraser:En.tool==="eraser"});return}if(os({x:y.clientX,y:y.clientY}),u.current=!1,ce===xe.HAND){$(!0),xt({x:y.clientX,y:y.clientY});return}(ce===xe.SELECT||ce===xe.CONNECT)&&!y.ctrlKey&&!y.shiftKey&&y.target===r.current&&(Tn({start:{x:y.clientX,y:y.clientY},current:{x:y.clientX,y:y.clientY}}),Le(new Set),ut(new Set))},J0=y=>{const E=y.clientX,_=y.clientY;if(Qc){const k=E-ie.x,L=_-ie.y;(Math.abs(k)>2||Math.abs(L)>2)&&(ed(!0),oe(F=>({...F,x:F.x+k,y:F.y+L}))),xt({x:E,y:_});return}if(tn){const k=document.elementFromPoint(E,_),L=k==null?void 0:k.getAttribute("data-edge-id");if(L&&!ke.has(L)){const F=gi(L);if(F){const{sourceId:A,targetId:z}=F,H=Be&&!mn.has(A),B=Be&&!mn.has(z);!H&&!B&&ut(G=>{const te=new Set(G);return te.add(L),te})}}return}if(ce===xe.DRAW&&Zo){const k=(E-V.x)/V.zoom,L=(_-V.y)/V.zoom;er(F=>F?{...F,points:[...F.points,{x:k,y:L}]}:null);return}if(on){const k=(E-V.x)/V.zoom,L=(_-V.y)/V.zoom;let F=k,A=L;!y.altKey&&ae.showGrid&&(F=Math.round(k/20)*20,A=Math.round(L/20)*20);const z=U[on.edgeKey];if(!z||!z.controlPoints){Xl(null);return}const H=z.controlPoints[on.index];if(!H)return;const B=F-H.x,G=A-H.y;q(te=>{const K={...te},Z=(he,ue,Ie,Fe)=>{const Ne=K[he];if(!Ne||!Ne.controlPoints)return;const Ye=[...Ne.controlPoints];Ye[ue]&&(Ye[ue]={x:Ye[ue].x+Ie,y:Ye[ue].y+Fe},K[he]={...Ne,controlPoints:Ye})},pe=K[on.edgeKey];if(pe&&pe.controlPoints){const he=[...pe.controlPoints];he[on.index]&&(he[on.index]={x:F,y:A},K[on.edgeKey]={...pe,controlPoints:he})}return ke.forEach(he=>{if(he!==on.edgeKey){const ue=K[he];ue&&ue.controlPoints&&ue.controlPoints[on.index]&&Z(he,on.index,B,G)}}),K});return}if(nr||ee.size>0||Se){const k=E-ie.x,L=_-ie.y;xt({x:E,y:_}),cancelAnimationFrame(l.current),l.current=requestAnimationFrame(()=>{if(nr)oe(F=>({...F,x:F.x+k,y:F.y+L}));else if(Se)Tn(F=>F?{...F,current:{x:E,y:_}}:null);else if(ee.size>0){u.current=!0;const F=k/V.zoom,A=L/V.zoom;let z,H;if(!y.altKey&&ee.size===1){const B=Array.from(ee)[0],G=T.find(te=>te.id===B);if(G){const te=G.position.x+F,K=G.position.y+A;T.forEach(Z=>{ee.has(Z.id)||(Math.abs(Z.position.x-te)<bh&&(z=Z.position.x),Math.abs(Z.position.y-K)<bh&&(H=Z.position.y))})}}Xc(z!==void 0||H!==void 0?[{x:z,y:H}]:[]),P(B=>B.map(G=>ee.has(G.id)?{...G,position:{x:z!==void 0?z:G.position.x+F,y:H!==void 0?H:G.position.y+A}}:G)),q(B=>{const G={...B};let te=!1;return ee.forEach(K=>{const Z=T.find(pe=>pe.id===K);Z&&Z.childrenIds.forEach(pe=>{if(ee.has(pe)){const he=`${K}-${pe}`,ue=G[he];ue&&ue.controlPoints&&ue.controlPoints.length>0&&(te=!0,G[he]={...ue,controlPoints:ue.controlPoints.map(Ie=>({x:Ie.x+F,y:Ie.y+A}))})}})}),te?G:B})}})}else xt({x:E,y:_})},Y0=y=>{if(cancelAnimationFrame(l.current),Xc([]),Qc){Zc(!1);return}if(tn){tt(!1);return}if(ce===xe.DRAW&&Zo){de(T,[...R,Zo],U),er(null);return}if(on){Xl(null),cs(T,R,U);return}if(Se){const E=Math.min(Se.start.x,Se.current.x),_=Math.min(Se.start.y,Se.current.y),k=Math.max(Se.start.x,Se.current.x),L=Math.max(Se.start.y,Se.current.y),F=(E-V.x)/V.zoom,A=(_-V.y)/V.zoom,z=(k-V.x)/V.zoom,H=(L-V.y)/V.zoom,B=new Set(y.shiftKey?le:[]),G=new Set(y.shiftKey?ke:[]);T.forEach(te=>{!(Be&&!mn.has(te.id))&&te.position.x>=F&&te.position.x<=z&&te.position.y>=A&&te.position.y<=H&&B.add(te.id)}),Object.keys(U).forEach(te=>{const K=gi(te);if(K){const{sourceId:Z,targetId:pe}=K,he=T.find(Ie=>Ie.id===Z),ue=T.find(Ie=>Ie.id===pe);if(he&&ue){const Ie=Be&&!mn.has(Z),Fe=Be&&!mn.has(pe);if(!Ie&&!Fe){const Ne=he.position.x>=F&&he.position.x<=z&&he.position.y>=A&&he.position.y<=H,Ye=ue.position.x>=F&&ue.position.x<=z&&ue.position.y>=A&&ue.position.y<=H;if(Ne&&Ye)G.add(te);else{const oi=(he.position.x+ue.position.x)/2,qe=(he.position.y+ue.position.y)/2;oi>=F&&oi<=z&&qe>=A&&qe<=H&&G.add(te);const ct=U[te].controlPoints||[];for(const nt of ct)if(nt.x>=F&&nt.x<=z&&nt.y>=A&&nt.y<=H){G.add(te);break}}}}}}),Le(B),ut(G),Tn(null);return}$(!1),ee.size>0&&(u.current&&cs(T,R,U),u.current=!1),me(new Set)},K0=(y,E,_)=>{_.stopPropagation(),_.preventDefault(),Xl({edgeKey:y,index:E})},X0=(y,E)=>{if(E.stopPropagation(),ce!==xe.CONNECT)if(E.shiftKey){const _=new Set(ke);_.has(y)?_.delete(y):_.add(y),ut(_)}else ut(new Set([y])),Le(new Set)},cd=(y,E)=>{if(y.stopPropagation(),Jn&&Jn!==E&&sn(null),(_e||Zr||gn)&&(_n(null),In(null),qt(null)),He)return;if(y.shiftKey){const F=T.find(A=>A.id===E);if(F){const A=F.shape||se,z=Ha.indexOf(A),H=(z===-1?0:z+1)%Ha.length,B=Ha[H],G=T.map(te=>te.id===E?{...te,shape:B}:te);de(G),le.has(E)||Le(new Set([E]))}return}if(y.altKey){const F=new Set,A=new Set,z=H=>{F.add(H);const B=T.find(G=>G.id===H);B&&B.childrenIds.forEach(G=>{A.add(`${H}-${G}`),z(G)})};z(E),Le(F),ut(A);return}const _=y.ctrlKey||y.metaKey||Bt;if(ce===xe.CONNECT&&!_){if(le.size>0){const F=E,A=T.map(z=>le.has(z.id)&&z.id!==F&&!z.childrenIds.includes(F)?{...z,childrenIds:[...z.childrenIds,F]}:z);if(JSON.stringify(A)!==JSON.stringify(T)){const z={};le.forEach(H=>{var B;H!==F&&!((B=jt(H))!=null&&B.childrenIds.includes(F))&&(z[`${H}-${F}`]={...W})}),q(H=>({...H,...z})),de(A,R,{...U,...z})}return}if(!or)rs(E),le.size>0&&Le(new Set);else{if(or!==E){const F=jt(or);if(F&&!F.childrenIds.includes(E)){const A=T.map(B=>B.id===or?{...B,childrenIds:[...B.childrenIds,E]}:B),z=`${or}-${E}`,H={...U,[z]:{...W}};de(A,R,H)}}rs(null)}return}let k=new Set(le);_?k.has(E)?k.delete(E):k.add(E):k.has(E)||(k=new Set([E])),Le(k),_||ut(new Set);let L=new Set(k);me(L),xt({x:y.clientX,y:y.clientY})},Q0=y=>{y.preventDefault(),!Ql&&(sn(null),_n(null),In(null),qt({left:y.clientX,top:y.clientY,right:y.clientX,bottom:y.clientY,width:0,height:0}))},Z0=(y,E)=>{y.preventDefault(),y.stopPropagation(),!Ql&&(_n(null),In(null),qt(null),sn(E),Le(new Set([E])),ut(new Set))},ey=(y,E)=>{y.preventDefault(),y.stopPropagation(),!Ql&&(sn(null),In(null),_n(E),qt({left:y.clientX,top:y.clientY,right:y.clientX,bottom:y.clientY,width:0,height:0}),ke.has(E)||(ut(new Set([E])),Le(new Set)))},ty=(y,E,_)=>{_.preventDefault(),_.stopPropagation(),sn(null),_n(null),In({edgeKey:y,index:E}),qt({left:_.clientX,top:_.clientY,right:_.clientX,bottom:_.clientY,width:0,height:0})},dd=async(y,E)=>{var L,F;const _=gn?{x:(gn.left-V.x)/V.zoom,y:(gn.top-V.y)/V.zoom}:void 0,k=Jn||((L=ni())==null?void 0:L.id);if(_e){if(y==="edge-color"&&q(A=>({...A,[_e]:{...A[_e],color:E}})),y==="edge-style"&&q(A=>({...A,[_e]:{...A[_e],stroke:E}})),y==="edge-routing-straight"&&q(A=>({...A,[_e]:{...A[_e],routingType:"straight",controlPoints:[]}})),y==="edge-routing-curved"&&q(A=>({...A,[_e]:{...A[_e],routingType:"curved",controlPoints:[]}})),y==="edge-routing-orthogonal"&&q(A=>({...A,[_e]:{...A[_e],routingType:"orthogonal",controlPoints:[]}})),y==="edge-delete"){const A=gi(_e);if(A){const{sourceId:z,targetId:H}=A,B=T.map(te=>te.id===z?{...te,childrenIds:te.childrenIds.filter(K=>K!==H)}:te),G={...U};delete G[_e],de(B,R,G)}}if(y==="edge-add-point"){const A=U[_e];if(A){const z=gi(_e);if(z){const H=T.find(G=>G.id===z.sourceId),B=T.find(G=>G.id===z.targetId);if(H&&B){const G=(H.position.x+B.position.x)/2,te=(H.position.y+B.position.y)/2,K=[...A.controlPoints||[],{x:G,y:te}];q(Z=>({...Z,[_e]:{...Z[_e],controlPoints:K}}))}}}}if(y==="delete-control-point"&&Zr){const{edgeKey:A,index:z}=Zr,H=U[A];if(H&&H.controlPoints){const B=[...H.controlPoints];B.splice(z,1),q(G=>({...G,[A]:{...G[A],controlPoints:B}}))}}if(y==="edge-label"){const A=prompt("Enter label for this connection:",((F=U[_e])==null?void 0:F.label)||"");A!==null&&q(z=>({...z,[_e]:{...z[_e],label:A}}))}y==="edge-animate"&&q(A=>{var z;return{...A,[_e]:{...A[_e],animated:!((z=A[_e])!=null&&z.animated)}}}),_n(null),In(null),qt(null);return}if(y==="add-child"&&k&&kt(k,!1),y==="delete"&&ko("delete"),y==="duplicate"&&ko("duplicate"),y==="lock"&&ko("lock"),y==="magic-style"&&k&&id(k),y==="convert-task"&&k&&de(T.map(A=>A.id===k?{...A,type:O.TASK}:A)),y==="convert-normal"&&k&&de(T.map(A=>A.id===k?{...A,type:O.SUB}:A)),y==="convert-code"&&k&&de(T.map(A=>A.id===k?{...A,type:O.CODE,data:{...A.data,codeLanguage:"JavaScript",codeSnippet:"// Code"}}:A)),y==="convert-table"&&k&&de(T.map(A=>A.id===k?{...A,type:O.TABLE,data:{...A.data,tableRows:[["A","B"],["1","2"]]}}:A)),y==="convert-list"&&k&&de(T.map(A=>A.id===k?{...A,data:{...A.data,items:["Item 1"]}}:A)),y==="add-link"&&k&&(rs(k),fe(xe.CONNECT)),y==="focus"&&je("focus"),y==="ai-expand"&&k&&(Xe(k),Lt(!0)),y==="dream-node"&&k&&(Xe(k),On(!0)),y==="ai-summarize"&&k&&$0(k),y==="ai-rewrite"&&k){const A=jt(k);if(A){o(!0);const z=await Mk(A.label);aa(k,z),o(!1)}}y==="shape"&&k&&de(T.map(A=>A.id===k?{...A,shape:E}:A)),(y==="color"||y==="color-hex")&&k&&de(T.map(A=>A.id===k?{...A,color:E}:A)),y==="color-preview"&&k&&P(A=>A.map(z=>z.id===k?{...z,color:E}:z)),y==="add-node-shape"&&je("add-node-shape",{shape:E,position:_}),y==="add-node"&&kt(void 0,!1,void 0,void 0,void 0,void 0,void 0,_),y==="new-sticky-color"&&ld(!0,void 0),y==="insert-code"&&je("code-node",void 0),y==="insert-table"&&je("table-node",void 0),y!=="color-preview"&&(sn(null),qt(null))},aa=(y,E)=>{const _=T.map(k=>k.id===y?{...k,label:E}:k);de(_)},ny=async y=>{if(!yt)return;const E=T.find(k=>k.id===yt);if(!E)return;o(!0);const _=await Ak(E.label,y.context||"");if(_.length>0){const k=[],L=[],F={},A=(B,G,te)=>{B.forEach(K=>{const Z=Oe();let pe=E.color,he=E.shape,ue=W;if(y.style){if(pe=y.style.inheritNodeColor?E.color:y.style.customNodeColor,he=y.style.inheritNodeShape?E.shape:y.style.customNodeShape,y.style.inheritLinkStyle){const Fe=Object.keys(U).find(Ne=>Ne.endsWith(`-${G}`));Fe&&(ue={...U[Fe]})}else ue={...W,routingType:y.style.customLinkStyle};if(!y.style.inheritLinkColor&&y.style.customLinkColor)ue.color=y.style.customLinkColor;else if(y.style.inheritLinkColor){const Fe=Object.keys(U).find(Ne=>Ne.endsWith(`-${G}`));Fe&&(ue.color=U[Fe].color)}}const Ie={id:Z,type:te===0&&E.type===O.ROOT?O.MAIN:O.SUB,label:K.label,position:{x:E.position.x,y:E.position.y},parentId:G,childrenIds:[],isAiGenerated:!0,shape:he,color:pe};if(L.push(Ie),F[`${G}-${Z}`]={...ue},G===E.id)k.push(Z);else{const Fe=L.find(Ne=>Ne.id===G);Fe&&Fe.childrenIds.push(Z)}K.children&&K.children.length>0&&A(K.children,Z,te+1)})};A(_,E.id,0);const z={...E,childrenIds:[...E.childrenIds,...k]};let H=T.map(B=>B.id===E.id?z:B).concat(L);if(Q==="MINDMAP"){const B=(G,te)=>{const K=H.find(ue=>ue.id===G);if(!K)return;const Z=K.childrenIds.map(ue=>H.find(Ie=>Ie.id===ue)).filter(Boolean);if(Z.length===0)return;const pe=te?H.find(ue=>ue.id===te):void 0,he=kf(K,Z,pe);H=H.map(ue=>he.find(Fe=>Fe.id===ue.id)||ue),Z.forEach(ue=>B(ue.id,G))};B(E.id,E.parentId)}else H=Os(H);L.forEach(B=>{const G=H.find(te=>te.id===B.id);G&&(H=La(G,H))}),de(H,R,{...U,...F}),To.has(E.id)&&rr(B=>{const G=new Set(B);return G.delete(E.id),G})}o(!1)},oy=y=>{let E=[...T],_={...U};y.forEach(k=>{if(k.type==="CREATE_NODE"){const{label:L,parentId:F}=k.payload,A=Oe(),z={id:A,type:O.MAIN,label:L||"AI Node",position:{x:V.x,y:V.y},childrenIds:[]};if(F){const H=E.find(B=>B.id===F);H&&(z.parentId=F,z.position={x:H.position.x+200,y:H.position.y+50},H.childrenIds.push(A),_[`${F}-${A}`]={...W})}E.push(z)}}),Q==="MINDMAP"&&(E=Os(E)),de(E,R,_)},fd=Jn?T.find(y=>y.id===Jn):null,ry=!!Jn&&!!fd,ar=fd,iy=ar?{x:ar.position.x*V.zoom+V.x,y:ar.position.y*V.zoom+V.y}:{x:0,y:0},sy=Ot.pattern==="dots"?"bg-[radial-gradient(circle,rgba(0,0,0,0.1)_1px,transparent_1px)] dark:bg-[radial-gradient(circle,rgba(255,255,255,0.1)_1px,transparent_1px)]":Ot.pattern==="grid"?"bg-[linear-gradient(to_right,rgba(0,0,0,0.05)_1px,transparent_1px),linear-gradient(to_bottom,rgba(0,0,0,0.05)_1px,transparent_1px)] dark:bg-[linear-gradient(to_right,rgba(255,255,255,0.05)_1px,transparent_1px),linear-gradient(to_bottom,rgba(255,255,255,0.05)_1px,transparent_1px)]":"",pd=20*V.zoom,ly=()=>tn?"cursor-crosshair":ce===xe.HAND?nr?"cursor-grabbing":"cursor-grab":ce===xe.DRAW||ce===xe.CONNECT?"cursor-crosshair":"cursor-default",ay=[{id:"new-node",label:"Create New Node",icon:s.jsx(w.Plus,{size:18}),action:()=>kt(void 0,!1),shortcut:"Tab"},{id:"magic-style",label:"Magic Auto-Style Selected",icon:s.jsx(w.Magic,{size:18}),action:()=>{le.size>0&&id(Array.from(le)[0])},shortcut:"Alt+M"},{id:"dream-node",label:"Dream Node (AI Image)",icon:s.jsx(w.Image,{size:18}),action:()=>{le.size>0&&(Xe(Array.from(le)[0]),On(!0))}},{id:"find",label:"Find Node",icon:s.jsx(w.Search,{size:18}),action:()=>Sn(!0),shortcut:"Ctrl+F"},{id:"undo",label:"Undo Action",icon:s.jsx(w.Undo,{size:18}),action:ei,shortcut:"Ctrl+Z"},{id:"redo",label:"Redo Action",icon:s.jsx(w.Redo,{size:18}),action:ti,shortcut:"Ctrl+Y"}];return s.jsxs("div",{className:"w-full h-full relative overflow-hidden transition-colors duration-500 font-sans",style:{backgroundColor:Ot.bg},children:[s.jsx("svg",{width:"0",height:"0",className:"absolute pointer-events-none",children:s.jsx("defs",{children:s.jsx("clipPath",{id:"shape-cloud",clipPathUnits:"objectBoundingBox",children:s.jsx("path",{d:"M0.25,0.55 Q0.25,0.25 0.5,0.25 Q0.6,0.1 0.75,0.25 Q0.9,0.25 0.9,0.5 Q1,0.5 1,0.7 Q1,0.9 0.85,0.95 Q0.7,1 0.5,1 Q0.3,1 0.15,0.95 Q0,0.85 0,0.7 Q0,0.55 0.25,0.55 Z"})})})}),s.jsx(O_,{projectName:N,setProjectName:M,activeToolName:ce,onShare:()=>alert("Share link copied to clipboard!"),onSettings:()=>qn(!Bn),onAction:je,isSettingsOpen:Bn,isDarkMode:Ot.isDark,onBack:t,isVoiceActive:us,onToggleVoice:()=>oa(!us)}),s.jsx(j_,{isOpen:nn,setIsOpen:wo,activeMode:ce,setMode:fe,onAction:je,appMode:Q,setAppMode:Te,drawingSettings:En,setDrawingSettings:ns,defaultEdgeOptions:W,setDefaultEdgeOptions:re,isSelectionMode:na,onToolSelect:nd}),s.jsx(iI,{isOpen:qo,setIsOpen:Oo,nodes:T,onSelectNode:y=>{jt(y)&&(gt(y),sr(y))},isSidebarOpen:nn}),s.jsx("button",{onClick:()=>Jr(!Bt),className:`fixed top-32 z-[60] p-2.5 rounded-lg shadow-clay-md border transition-all duration-300 ease-in-out
            ${Bt?"bg-blue-50 border-blue-500 text-blue-600":"bg-white border-gray-200 text-gray-500 hover:text-blue-600 hover:border-blue-400"}
         `,style:{left:nn?"280px":"16px"},title:"Toggle Multi-Select",children:Bt?s.jsx(w.Task,{size:20}):s.jsx(w.Select,{size:20})}),s.jsx("div",{className:"fixed bottom-24 left-4 right-4 md:left-0 md:right-0 flex flex-col items-start md:items-center justify-end gap-2 pointer-events-none z-40",children:s.jsxs("div",{className:"flex flex-wrap-reverse justify-start md:justify-center items-center gap-3 pointer-events-auto max-w-[calc(100%-140px)] md:max-w-[90vw] transition-all origin-bottom-left scale-90 md:scale-100",children:[s.jsx(lI,{tools:A0,onAddClick:M0,onRemoveTool:P0,onDropTool:R0,isSelectionMode:na}),s.jsx(sI,{defaultEdgeOptions:W,setDefaultEdgeOptions:re,defaultNodeShape:se,setDefaultNodeShape:ye,defaultNodeColor:be,setDefaultNodeColor:Ce,className:"relative pointer-events-auto flex flex-col items-center bottom-2"})]})}),s.jsx(W_,{zoom:V.zoom,onZoomIn:()=>je("zoom-in"),onZoomOut:()=>je("zoom-out"),onZoomChange:y=>oe(E=>({...E,zoom:y})),onFitView:()=>je("fit"),onUndo:ei,onRedo:ti,canUndo:rn>0,canRedo:rn<kn.length-1,onExpandAll:U0,onCollapseAll:z0}),s.jsx(V_,{isOpen:Bn,setIsOpen:qn,canvasSettings:ae,setCanvasSettings:Ge,isDarkMode:Ot.isDark,toggleTheme:()=>Ge(y=>({...y,theme:y.theme==="default"?"dark":"default"})),onShowShortcuts:()=>is(!0),onExport:lr,smartRules:De,setSmartRules:at,onAction:je,selectedEdgeIds:ke,linkSelectionMode:He,setLinkSelectionMode:Et,defaultEdgeOptions:W,setDefaultEdgeOptions:re,defaultNodeShape:se,setDefaultNodeShape:ye,defaultNodeColor:be,setDefaultNodeColor:Ce,isSelectionMode:na,onToolSelect:nd,selectedNode:ni()}),s.jsx($_,{nodes:T,viewport:V,windowSize:{w:window.innerWidth,h:window.innerHeight},setViewport:oe}),le.size>0&&s.jsx("div",{className:"fixed bottom-8 right-[200px] z-50 animate-fade-in",children:s.jsxs("button",{onClick:()=>je("focus"),className:"bg-white/90 hover:bg-indigo-50 text-indigo-600 px-4 py-2 rounded-xl shadow-clay-md border border-indigo-100 flex items-center gap-2 font-bold text-xs transition-all hover:scale-105",children:[s.jsx(w.Zap,{size:16})," Focus Mode"]})}),s.jsx(tI,{}),Wl&&s.jsxs("div",{className:"fixed top-24 left-1/2 -translate-x-1/2 z-[60] bg-white p-2 rounded-lg shadow-xl border border-gray-200 flex items-center gap-2 w-96",children:[s.jsx(w.Search,{className:"text-gray-400 ml-2",size:18}),s.jsx("input",{autoFocus:!0,value:Eo,onChange:y=>Kl(y.target.value),placeholder:"Find in map...",className:"flex-1 bg-transparent border-none outline-none text-sm font-medium text-gray-700 h-8",onKeyDown:y=>{y.key==="Enter"&&(y.preventDefault(),y.shiftKey?rd():od())}}),s.jsx("span",{className:"text-xs text-gray-400 font-mono border-r border-gray-200 pr-2",children:Tt.length>0?`${Xo+1}/${Tt.length}`:"0/0"}),s.jsx("button",{onClick:rd,className:"p-1 hover:bg-gray-100 rounded text-gray-600",children:s.jsx(w.Arrow,{size:16,className:"rotate-180"})}),s.jsx("button",{onClick:od,className:"p-1 hover:bg-gray-100 rounded text-gray-600",children:s.jsx(w.Arrow,{size:16})}),s.jsx("button",{onClick:()=>Sn(!1),className:"p-1 hover:bg-red-50 rounded text-red-500",children:s.jsx(w.Close,{size:16})})]}),Be&&s.jsxs("div",{className:"fixed top-20 right-6 z-[60] bg-indigo-600 text-white px-4 py-2 rounded-full shadow-lg flex items-center gap-2 animate-fade-in",children:[s.jsx(w.Zap,{size:16,fill:"currentColor"}),s.jsx("span",{className:"text-sm font-bold",children:"Focus Mode Active"}),s.jsx("button",{onClick:()=>gt(null),className:"ml-2 hover:text-indigo-200",children:s.jsx(w.Close,{size:16})})]}),He&&s.jsxs("div",{className:"fixed top-32 right-6 z-[60] bg-green-600/90 backdrop-blur-md text-white px-3 py-1.5 rounded-full shadow-clay-md flex items-center gap-3 animate-fade-in border border-green-400/50",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(w.Connect,{size:14,className:"animate-pulse text-green-100"}),s.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Paint Mode"})]}),s.jsx("div",{className:"w-px h-3 bg-white/20 hidden sm:block"}),s.jsx("span",{className:"text-[10px] font-medium text-green-50 hidden sm:inline",children:"Drag to select"}),s.jsx("button",{onClick:()=>Et(!1),className:"ml-1 p-0.5 hover:bg-black/20 rounded-full transition-colors",title:"Exit Mode",children:s.jsx(w.Close,{size:12})})]}),Qr&&s.jsx(s.Fragment,{children:s.jsxs("div",{className:"fixed bottom-8 left-1/2 -translate-x-1/2 z-[100] bg-black/80 backdrop-blur-md text-white px-6 py-3 rounded-full flex items-center gap-4 shadow-2xl border border-white/10 animate-slide-up",children:[s.jsxs("div",{className:"flex items-center gap-2 mr-4",children:[s.jsx(w.Present,{size:20,className:"text-green-400 animate-pulse"}),s.jsx("span",{className:"font-bold text-sm",children:"Interactive Narrative"})]}),s.jsxs("div",{className:"text-xs text-gray-400 border-l border-gray-600 pl-4",children:["Click ",s.jsx(w.ChevronRight,{size:12,className:"inline"})," to expand, ",s.jsx(w.ChevronLeft,{size:12,className:"inline"})," to collapse."]}),s.jsx("div",{className:"w-px h-6 bg-white/20 mx-2"}),s.jsx("button",{onClick:()=>{document.exitFullscreen(),ss(!1)},className:"p-2 hover:bg-red-500/20 text-red-400 hover:text-red-300 rounded-full transition-colors",title:"Exit Presentation",children:s.jsx(w.Stop,{size:20})})]})}),s.jsxs("div",{ref:r,className:`absolute inset-0 outline-none overflow-hidden ${ly()}`,style:{overscrollBehavior:"none",touchAction:"none"},onMouseDown:W0,onMouseMove:J0,onMouseUp:Y0,onContextMenu:Q0,onTouchStart:D0,onTouchMove:L0,onTouchEnd:j0,children:[ae.showGrid&&s.jsx("div",{className:`absolute inset-0 pointer-events-none ${sy}`,style:{backgroundPosition:`${V.x}px ${V.y}px`,backgroundSize:`${pd}px ${pd}px`,opacity:Ot.isDark?.1:.4,filter:Ot.isDark?"invert(1)":"none"}}),s.jsx("canvas",{ref:i,className:"absolute inset-0 pointer-events-none z-0"}),Se&&s.jsx("div",{className:"absolute bg-blue-500/10 border border-blue-500 z-50 pointer-events-none",style:{left:Math.min(Se.start.x,Se.current.x),top:Math.min(Se.start.y,Se.current.y),width:Math.abs(Se.current.x-Se.start.x),height:Math.abs(Se.current.y-Se.start.y)}}),E0.map((y,E)=>s.jsxs(Ku.Fragment,{children:[y.x!==void 0&&s.jsx("div",{className:"absolute top-0 bottom-0 border-l-2 border-blue-500 border-dashed z-50 pointer-events-none",style:{left:y.x*V.zoom+V.x}}),y.y!==void 0&&s.jsx("div",{className:"absolute left-0 right-0 border-t-2 border-blue-500 border-dashed z-50 pointer-events-none",style:{top:y.y*V.zoom+V.y}})]},E)),s.jsx("div",{className:"absolute origin-top-left z-10",style:{transform:`translate(${V.x}px, ${V.y}px) scale(${V.zoom})`},children:s.jsxs("div",{id:"canvas-content",style:{position:"absolute",top:0,left:0,width:0,height:0},children:[s.jsx("svg",{className:"absolute overflow-visible",style:{top:0,left:0,pointerEvents:"none"},children:T.map(y=>y.childrenIds.map(E=>{const _=T.find(A=>A.id===E);if(!_||!(ra.has(y.id)&&ra.has(_.id)))return null;const L=`${y.id}-${E}`,F=ia(y.id)||ia(_.id);return s.jsx("g",{style:{pointerEvents:F?"none":"auto",opacity:F?.2:1,transition:"opacity 0.3s"},children:s.jsx(S0,{start:y.position,end:_.position,isSelected:ke.has(L),onDelete:()=>{const A=T.map(z=>z.id===y.id?{...z,childrenIds:z.childrenIds.filter(H=>H!==E)}:z);de(A)},onContextMenu:A=>ey(A,L),onHandleMouseDown:(A,z)=>K0(L,A,z),onLineClick:A=>X0(L,A),onPointContextMenu:(A,z)=>ty(L,A,z),options:U[L],themeColor:Ot.lineColor,edgeId:L})},L)}))}),T.map((y,E)=>ra.has(y.id)?s.jsx(Fg,{node:y,isSelected:le.has(y.id)||or===y.id||Jn===y.id,isHighlighted:Tt.includes(y.id),isDimmed:ia(y.id),isEditing:tr===y.id,themeClasses:{root:Ot.nodeRoot,main:Ot.nodeMain,sub:Ot.nodeSub},onMouseDown:cd,onContextMenu:Z0,onAddChild:_=>kt(_,!1),onDelete:_=>{const k=T.filter(L=>L.id!==_);de(k)},onExpandAI:_=>{Xe(_),Lt(!0)},onLabelChange:aa,onToggleTask:B0,onEditStart:Wn,onEditEnd:()=>Wn(null),connectMode:ce===xe.CONNECT,onListChange:q0,onDataChange:sd,isExpanded:!To.has(y.id),onToggleExpand:F0},y.id):null)]})})]}),le.size>1&&s.jsx(gh,{selectedCount:le.size,onAction:ko}),ke.size>0&&le.size<=1&&s.jsx(gh,{selectedCount:ke.size,onAction:je,isEdgeMode:!0}),s.jsx(R_,{isOpen:T0,onClose:()=>ea(!1),commands:ay}),s.jsx(L_,{isOpen:k0,onClose:()=>is(!1)}),s.jsx(q_,{isOpen:So,onClose:()=>Wo(!1),nodes:T,onAction:oy}),s.jsx(X_,{isOpen:Jl,onClose:()=>Yr(!1),onImageAdd:(y,E)=>{const _={x:(window.innerWidth/2-V.x)/V.zoom,y:(window.innerHeight/2-V.y)/V.zoom};kt(void 0,!1,O.MEDIA,void 0,E,void 0,{imageUrl:y},_)}}),s.jsx(nI,{isOpen:Kr,onClose:()=>No(!1),onCreate:V0}),s.jsx(K_,{isOpen:Co,onClose:()=>Lt(!1),onGenerate:ny,nodeLabel:yt&&((hd=T.find(y=>y.id===yt))==null?void 0:hd.label)||"",onLabelChange:y=>{yt&&aa(yt,y)}}),yt&&s.jsx(Q_,{isOpen:Jo,onClose:()=>On(!1),nodeLabel:((md=T.find(y=>y.id===yt))==null?void 0:md.label)||"",onConfirm:H0}),ry&&ar&&s.jsx(rI,{nodePosition:iy,zoom:V.zoom,nodeType:ar.type,onAction:dd,initialColor:ar.color}),(_e||Zr||!Jn&&gn)&&s.jsx(B_,{anchorRect:gn?{left:gn.left,top:gn.top,right:gn.right,bottom:gn.bottom,width:0,height:0}:{left:0,top:0,right:0,bottom:0,width:0,height:0},nodeId:null,activeNodeType:void 0,isEdge:!!_e,isControlPoint:!!Zr,onClose:()=>{sn(null),_n(null),In(null),qt(null)},onAction:dd}),s.jsx(eI,{isOpen:Nn,onClose:()=>Yo(!1),nodes:T,projectName:N,format:Yl,elementId:"canvas-content"}),s.jsx(aI,{isOpen:!1,onClose:()=>{}}),!So&&!Qr&&s.jsx("button",{onClick:()=>Wo(!0),className:"fixed bottom-8 right-20 z-40 p-3 rounded-full bg-gradient-to-tr from-indigo-500 to-purple-500 text-white shadow-lg hover:scale-110 transition-transform animate-fade-in",title:"AI Co-Pilot (Alt + C)",children:s.jsx(w.Sparkles,{size:24})})]})},yi=[{id:"root",type:O.ROOT,label:"Core Idea",position:{x:0,y:0},childrenIds:[],shape:"circle",color:"#6366f1"}],pI=({activeStep:e})=>{const[t,n]=I.useState(yi),[o,r]=I.useState({}),i=I.useRef(null),[l,u]=I.useState({x:0,y:0,zoom:1});return I.useEffect(()=>{if(i.current){const{width:d,height:f}=i.current.getBoundingClientRect();u({x:d/2,y:f/2,zoom:.8})}},[]),I.useEffect(()=>{if(e===0&&(n(yi),r({})),e===1){const d=yi[0],f="n1",p="n2",h="n3",m=[{...d,childrenIds:[f,p,h]},{id:f,type:O.MAIN,label:"Structure",position:{x:250,y:-120},childrenIds:[],parentId:"root",shape:"rounded",color:"#1e293b"},{id:p,type:O.MAIN,label:"Logic",position:{x:250,y:0},childrenIds:[],parentId:"root",shape:"rounded",color:"#1e293b"},{id:h,type:O.MAIN,label:"Design",position:{x:250,y:120},childrenIds:[],parentId:"root",shape:"rounded",color:"#1e293b"}];n(m),r({"root-n1":{color:"#475569",stroke:"solid"},"root-n2":{color:"#475569",stroke:"solid"},"root-n3":{color:"#475569",stroke:"solid"}})}if(e===2){const d=yi[0],f="n1",p="n2",h="n3",m=[{...d,childrenIds:[f,p,h],color:"#6366f1"},{id:f,type:O.MAIN,label:"Structure",position:{x:250,y:-120},childrenIds:[],parentId:"root",shape:"diamond",color:"#ec4899"},{id:p,type:O.MAIN,label:"Logic",position:{x:250,y:0},childrenIds:[],parentId:"root",shape:"hexagon",color:"#10b981"},{id:h,type:O.MAIN,label:"Design",position:{x:250,y:120},childrenIds:[],parentId:"root",shape:"triangle",color:"#f59e0b"}];n(m),r({"root-n1":{color:"#ec4899",stroke:"solid"},"root-n2":{color:"#10b981",stroke:"solid"},"root-n3":{color:"#f59e0b",stroke:"solid"}})}if(e===3){const d=yi[0],f="n1",p="n2",h="n3",m=[{...d,childrenIds:[f,p,h]},{id:f,type:O.MAIN,label:"Structure",position:{x:250,y:-120},childrenIds:[],parentId:"root",shape:"diamond",color:"#ec4899"},{id:p,type:O.MAIN,label:"Logic",position:{x:250,y:0},childrenIds:[],parentId:"root",shape:"hexagon",color:"#10b981"},{id:h,type:O.MAIN,label:"Design",position:{x:250,y:120},childrenIds:[],parentId:"root",shape:"triangle",color:"#f59e0b"}];n(m),r({"root-n1":{color:"#ec4899",stroke:"dashed",routingType:"curved",controlPoints:[{x:120,y:-200}]},"root-n2":{color:"#10b981",stroke:"solid",routingType:"curved",controlPoints:[{x:120,y:50}]},"root-n3":{color:"#f59e0b",stroke:"dotted",routingType:"curved",controlPoints:[{x:120,y:200}]}})}},[e]),s.jsxs("div",{ref:i,className:"w-full h-full relative overflow-hidden",style:{background:"transparent"},children:[s.jsx("div",{className:"absolute inset-0 opacity-10 pointer-events-none",style:{backgroundImage:"radial-gradient(#ffffff 1px, transparent 1px)",backgroundSize:"20px 20px",backgroundPosition:`${l.x}px ${l.y}px`}}),s.jsxs("div",{className:"absolute inset-0 origin-top-left transition-transform duration-500 ease-out",style:{transform:`translate(${l.x}px, ${l.y}px) scale(${l.zoom})`},children:[s.jsx("svg",{className:"absolute overflow-visible",style:{top:0,left:0,pointerEvents:"none"},children:t.map(d=>d.childrenIds.map(f=>{const p=t.find(v=>v.id===f);if(!p)return null;const h=`${d.id}-${f}`,m=o[h];return s.jsx("g",{className:"transition-all duration-700",children:s.jsx(S0,{start:d.position,end:p.position,options:m,onDelete:()=>{}})},h)}))}),t.map(d=>s.jsx("div",{className:"transition-all duration-500 ease-out",children:s.jsx(Fg,{node:d,isSelected:!1,isEditing:!1,themeClasses:{root:"bg-indigo-600 text-white border-indigo-400 shadow-lg shadow-indigo-900/50",main:"bg-slate-800 text-white border-slate-600 shadow-md",sub:"bg-slate-800 text-white border-slate-600"},onMouseDown:f=>f.stopPropagation(),onContextMenu:()=>{},onAddChild:()=>{},onDelete:()=>{},onExpandAI:()=>{},onLabelChange:()=>{},onToggleTask:()=>{},onEditStart:()=>{},onEditEnd:()=>{}})},d.id))]}),s.jsxs("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 bg-black/40 backdrop-blur px-4 py-2 rounded-full shadow-lg border border-white/10 flex gap-4 text-gray-400 scale-90 z-20",children:[s.jsx(w.Plus,{size:18,className:e===1?"text-blue-400 animate-pulse":""}),s.jsx(w.Trash,{size:18}),s.jsx(w.Palette,{size:18,className:e===2?"text-pink-400 animate-pulse":""}),s.jsx(w.Connect,{size:18,className:e===3?"text-green-400 animate-pulse":""})]}),s.jsx("div",{className:"absolute top-4 left-4 bg-white/5 text-white/30 text-[10px] font-bold px-2 py-1 rounded uppercase z-20 font-mono",children:"System: Online"})]})},xi=({title:e,desc:t,icon:n,color:o,className:r,visual:i})=>s.jsxs("div",{className:`bg-white/5 border border-white/10 backdrop-blur-sm rounded-3xl p-6 flex flex-col justify-between hover:bg-white/10 transition-colors group overflow-hidden relative ${r}`,children:[s.jsxs("div",{className:"relative z-10",children:[s.jsx("div",{className:`p-3 rounded-2xl w-fit mb-4 ${o} bg-white/5`,children:s.jsx(n,{size:24})}),s.jsx("h3",{className:"text-xl font-display font-bold text-white mb-2",children:e}),s.jsx("p",{className:"text-sm text-gray-400 leading-relaxed",children:t})]}),i&&s.jsx("div",{className:"absolute right-0 bottom-0 opacity-20 group-hover:opacity-40 transition-opacity duration-500",children:i})]}),hI=({onLaunch:e})=>{const[t,n]=I.useState(0),o=I.useRef(null);return I.useEffect(()=>{const r=()=>{if(o.current){const l=o.current.scrollTop,u=window.innerHeight;l<u*.5?n(0):l<u*1.5?n(1):l<u*2.5?n(2):n(3)}},i=o.current;return i==null||i.addEventListener("scroll",r),()=>i==null?void 0:i.removeEventListener("scroll",r)},[]),s.jsxs("div",{ref:o,className:"w-full h-screen overflow-y-auto bg-[#0B0F19] text-white selection:bg-indigo-500/30 font-sans custom-scrollbar scroll-smooth relative",children:[s.jsxs("div",{className:"fixed inset-0 pointer-events-none z-0",children:[s.jsx("div",{className:"absolute top-[-20%] left-[-10%] w-[50%] h-[50%] bg-indigo-600/20 rounded-full blur-[120px]"}),s.jsx("div",{className:"absolute bottom-[-20%] right-[-10%] w-[50%] h-[50%] bg-purple-600/10 rounded-full blur-[120px]"}),s.jsx("div",{className:"absolute inset-0 opacity-[0.03]",style:{backgroundImage:"url('https://grainy-gradients.vercel.app/noise.svg')"}})]}),s.jsx("nav",{className:"fixed top-6 left-1/2 -translate-x-1/2 z-50 w-full max-w-3xl px-4",children:s.jsxs("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-full px-6 py-3 flex items-center justify-between shadow-2xl",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(w.Brain,{className:"text-indigo-400",size:24}),s.jsx("span",{className:"font-display font-bold text-lg tracking-wide",children:"Singularity v4"})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("button",{onClick:e,className:"text-sm font-bold text-gray-300 hover:text-white transition-colors",children:"Login"}),s.jsx("button",{onClick:e,className:"bg-indigo-600 hover:bg-indigo-500 text-white px-5 py-2 rounded-full text-sm font-bold transition-all shadow-[0_0_15px_rgba(79,70,229,0.4)]",children:"Get Started"})]})]})}),s.jsxs("section",{className:"min-h-screen flex flex-col items-center justify-center relative z-10 px-4 pt-20 pb-32",children:[s.jsxs("div",{className:"text-center max-w-5xl mx-auto",children:[s.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1 rounded-full bg-indigo-500/10 border border-indigo-500/20 text-indigo-300 text-xs font-bold mb-8 animate-fade-in",children:[s.jsxs("span",{className:"relative flex h-2 w-2",children:[s.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-indigo-400 opacity-75"}),s.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-indigo-500"})]}),"AI-POWERED VISUAL WORKSPACE"]}),s.jsxs("h1",{className:"text-6xl md:text-8xl font-display font-black tracking-tight leading-[1.1] mb-8 text-transparent bg-clip-text bg-gradient-to-b from-white via-white to-white/40 animate-slide-up",children:["Think at the speed ",s.jsx("br",{})," of ",s.jsx("span",{className:"text-indigo-400",children:"imagination."})]}),s.jsx("p",{className:"text-xl text-gray-400 mb-12 max-w-2xl mx-auto leading-relaxed animate-slide-up",style:{animationDelay:"0.1s"},children:"Break free from linear thinking. Create mind maps, flowcharts, and dream boards on an infinite canvas powered by Gemini AI."}),s.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4 animate-slide-up",style:{animationDelay:"0.2s"},children:[s.jsxs("button",{onClick:e,className:"px-8 py-4 bg-white text-black text-lg font-bold rounded-2xl hover:scale-105 transition-transform flex items-center gap-2 shadow-[0_0_30px_rgba(255,255,255,0.2)]",children:[s.jsx(w.Zap,{size:20})," Launch App"]}),s.jsxs("button",{className:"px-8 py-4 bg-white/5 border border-white/10 text-white text-lg font-bold rounded-2xl hover:bg-white/10 transition-colors flex items-center gap-2 backdrop-blur-sm",children:[s.jsx(w.Play,{size:20})," Watch Demo"]})]})]}),s.jsx("div",{className:"absolute bottom-10 left-1/2 -translate-x-1/2 animate-bounce opacity-30",children:s.jsx(w.Arrow,{className:"rotate-135",size:24})})]}),s.jsxs("section",{className:"max-w-7xl mx-auto px-4 py-24 relative z-10",children:[s.jsxs("div",{className:"mb-12",children:[s.jsx("h2",{className:"text-4xl font-display font-bold mb-4",children:"Power Features"}),s.jsx("p",{className:"text-gray-400",children:"Everything you need to structure chaos."})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 auto-rows-[200px]",children:[s.jsx(xi,{title:"AI Co-Pilot",desc:"Generate entire branches, summarize complex topics, or chat with your map context.",icon:w.Sparkles,color:"text-yellow-400",className:"md:col-span-2 md:row-span-2",visual:s.jsx(w.Brain,{size:200,className:"text-white"})}),s.jsx(xi,{title:"Infinite Canvas",desc:"No boundaries. Auto-layout engine keeps your thoughts organized as you expand.",icon:w.Infinity,color:"text-blue-400",className:"md:row-span-2",visual:s.jsx(w.Layout,{size:150,className:"text-white rotate-12 translate-x-10 translate-y-10"})}),s.jsx(xi,{title:"Universal Export",desc:"PDF, PNG, JSON, Markdown, Word.",icon:w.Download,color:"text-green-400"}),s.jsx(xi,{title:"Dark Mode",desc:"Easy on the eyes. Deep space theme included.",icon:w.Moon,color:"text-purple-400"}),s.jsx(xi,{title:"Vector Links",desc:"Bezier curves with full control.",icon:w.Connect,color:"text-pink-400"})]})]}),s.jsx("section",{className:"relative min-h-[300vh] z-10",children:s.jsxs("div",{className:"sticky top-0 h-screen flex items-center overflow-hidden bg-[#0B0F19]/90 backdrop-blur-sm border-t border-white/5",children:[s.jsxs("div",{className:"w-full md:w-1/2 px-12 md:pl-32 z-20 pointer-events-none",children:[s.jsxs("div",{className:`transition-all duration-500 ${t===1?"opacity-100 translate-x-0":"opacity-30 translate-x-[-20px]"}`,children:[s.jsx("h2",{className:"text-5xl font-display font-bold mb-4",children:"Smart Layout"}),s.jsx("p",{className:"text-xl text-gray-400",children:"Intelligent placement algorithms ensure your map never gets messy."})]}),s.jsxs("div",{className:`mt-32 transition-all duration-500 ${t===2?"opacity-100 translate-x-0":"opacity-30 translate-x-[-20px]"}`,children:[s.jsx("h2",{className:"text-5xl font-display font-bold mb-4",children:"Global Styles"}),s.jsx("p",{className:"text-xl text-gray-400",children:"Change one, change all. Inheritance rules make formatting automatic."})]}),s.jsxs("div",{className:`mt-32 transition-all duration-500 ${t===3?"opacity-100 translate-x-0":"opacity-30 translate-x-[-20px]"}`,children:[s.jsx("h2",{className:"text-5xl font-display font-bold mb-4",children:"Vector Control"}),s.jsx("p",{className:"text-xl text-gray-400",children:"Precision handles for perfect connection curves."})]})]}),s.jsx("div",{className:"absolute right-0 top-0 w-full md:w-3/5 h-full p-8 md:p-16",children:s.jsxs("div",{className:"w-full h-full bg-[#131722] rounded-3xl border border-white/10 shadow-2xl overflow-hidden relative",children:[s.jsxs("div",{className:"absolute top-4 left-4 flex gap-2 z-20",children:[s.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500/80"}),s.jsx("div",{className:"w-3 h-3 rounded-full bg-yellow-500/80"}),s.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500/80"})]}),s.jsx(pI,{activeStep:t})]})})]})}),s.jsxs("footer",{className:"py-20 border-t border-white/10 bg-[#05070a] relative z-20 text-center",children:[s.jsx("h2",{className:"text-4xl font-display font-bold mb-8",children:"Start building today."}),s.jsx("button",{onClick:e,className:"px-8 py-4 bg-indigo-600 hover:bg-indigo-500 text-white font-bold rounded-full transition-all shadow-lg shadow-indigo-900/50",children:"Enter Workspace"}),s.jsx("p",{className:"text-gray-600 mt-12 text-sm",children:" 2024 Singularity. All systems operational."})]})]})},mI=({onOpenMap:e,onCreateMap:t,onBackToLanding:n})=>{const[o,r]=I.useState([]),[i,l]=I.useState(""),[u,d]=I.useState("MY_MAPS"),[f,p]=I.useState(null),[h,m]=I.useState("");I.useEffect(()=>{v()},[u]);const v=()=>{const R=localStorage.getItem("singularity-maps-index");if(R)try{let j=JSON.parse(R);j.sort((U,q)=>q.lastModified-U.lastModified),r(j)}catch{console.error("Failed to load map index")}},C=(R,j,U=!1)=>{R.stopPropagation(),p({isOpen:!0,mapId:j.id,mapName:j.name,isPermanent:U}),m("")},S=()=>{if(!f)return;const{mapId:R,isPermanent:j}=f;if(j){localStorage.removeItem(`singularity-map-${R}`);const U=o.filter(q=>q.id!==R);localStorage.setItem("singularity-maps-index",JSON.stringify(U)),r(U)}else{const U=o.map(q=>q.id===R?{...q,isDeleted:!0}:q);localStorage.setItem("singularity-maps-index",JSON.stringify(U)),r(U)}p(null)},D=(R,j)=>{R.stopPropagation();const U=o.map(q=>q.id===j?{...q,isDeleted:!1}:q);localStorage.setItem("singularity-maps-index",JSON.stringify(U)),r(U)},b=R=>{const j=vl[R];if(j){const U=j(0,0);t({nodes:U,projectName:`${R.replace(/_/g," ")} Template`})}},g=o.filter(R=>R.name.toLowerCase().includes(i.toLowerCase())).filter(R=>u==="TRASH"?R.isDeleted:u==="SHARED"?!R.isDeleted&&R.isShared:u==="MY_MAPS"?!R.isDeleted:!1),N=u==="SHARED"&&g.length===0?[{id:"demo-shared",name:"Team Brainstorm (Demo)",lastModified:Date.now(),isShared:!0,isDeleted:!1}]:g,M=u==="SHARED"?N:g,T=R=>new Date(R).toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"}),P=({id:R,label:j,icon:U})=>s.jsxs("button",{onClick:()=>d(R),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl font-bold text-sm transition-all ${u===R?"bg-blue-50 text-blue-700 shadow-sm ring-1 ring-blue-100":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,children:[s.jsx(U,{size:18,className:u===R?"text-blue-600":"text-gray-400"}),j]});return s.jsxs("div",{className:"w-full h-full bg-[#f0f4f8] flex overflow-hidden",children:[s.jsxs("div",{className:"w-64 bg-white border-r border-gray-200 flex flex-col shrink-0 z-20 shadow-sm",children:[s.jsxs("div",{className:"p-6 border-b border-gray-100",children:[s.jsxs("div",{className:"flex items-center gap-3 text-indigo-600 mb-1",children:[s.jsx(w.Brain,{size:28}),s.jsx("span",{className:"font-display font-black text-xl tracking-tight",children:"SINGULARITY"})]}),s.jsx("span",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest pl-10",children:"Workspace"})]}),s.jsxs("div",{className:"flex-1 py-6 px-4 space-y-2",children:[s.jsx(P,{id:"MY_MAPS",label:"My Maps",icon:w.Layout}),s.jsx(P,{id:"TEMPLATES",label:"Templates",icon:w.Sparkles}),s.jsx(P,{id:"SHARED",label:"Shared with Me",icon:w.Share}),s.jsx(P,{id:"TRASH",label:"Trash",icon:w.Trash})]}),s.jsx("div",{className:"p-4 border-t border-gray-200",children:s.jsxs("button",{onClick:n,className:"flex items-center gap-2 text-xs font-bold text-gray-400 hover:text-gray-600 transition-colors w-full px-2 py-2 rounded-lg hover:bg-gray-50",children:[s.jsx(w.Arrow,{className:"rotate-180",size:12})," Back to Landing"]})})]}),s.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden relative bg-[#f8f9fa]",children:[s.jsx("div",{className:"absolute top-0 left-0 w-full h-64 bg-gradient-to-b from-white to-transparent pointer-events-none"}),s.jsxs("div",{className:"p-8 pb-4 flex items-center justify-between relative z-10 shrink-0",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl font-display font-black text-gray-800 mb-2 flex items-center gap-3",children:[u==="MY_MAPS"&&s.jsxs(s.Fragment,{children:[s.jsx(w.Layout,{className:"text-blue-500"})," My Maps"]}),u==="TEMPLATES"&&s.jsxs(s.Fragment,{children:[s.jsx(w.Sparkles,{className:"text-purple-500"})," Templates"]}),u==="SHARED"&&s.jsxs(s.Fragment,{children:[s.jsx(w.Share,{className:"text-green-500"})," Shared with Me"]}),u==="TRASH"&&s.jsxs(s.Fragment,{children:[s.jsx(w.Trash,{className:"text-red-500"})," Trash"]})]}),s.jsxs("p",{className:"text-gray-500 font-medium",children:[u==="MY_MAPS"&&"Manage your ideas and projects",u==="TEMPLATES"&&"Start fast with pre-built structures",u==="SHARED"&&"Collaborate on ideas with your team",u==="TRASH"&&"Deleted maps (stored for 30 days)"]})]}),s.jsxs("div",{className:"flex gap-4",children:[(u==="MY_MAPS"||u==="TEMPLATES")&&s.jsxs("div",{className:"relative group",children:[s.jsx(w.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 group-focus-within:text-blue-500 transition-colors",size:16}),s.jsx("input",{type:"text",placeholder:"Search...",value:i,onChange:R=>l(R.target.value),className:"pl-10 pr-4 py-2.5 bg-white border border-gray-200 rounded-xl text-sm font-medium focus:outline-none focus:ring-2 focus:ring-blue-500 shadow-sm w-64 transition-all"})]}),(u==="MY_MAPS"||u==="TEMPLATES")&&s.jsxs("button",{onClick:()=>t(),className:"bg-indigo-600 hover:bg-indigo-700 text-white px-5 py-2.5 rounded-xl font-bold text-sm shadow-lg shadow-indigo-200 transition-all flex items-center gap-2 active:scale-95 hover:-translate-y-0.5",children:[s.jsx(w.Plus,{size:18,strokeWidth:3})," New Map"]})]})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-8 pt-2 content-start relative z-10 custom-scrollbar",children:[u==="MY_MAPS"&&s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 pb-20",children:[s.jsxs("button",{onClick:()=>t(),className:"group relative aspect-[4/3] bg-white/50 border-2 border-dashed border-gray-300 rounded-2xl flex flex-col items-center justify-center gap-4 hover:border-indigo-400 hover:bg-indigo-50 transition-all",children:[s.jsx("div",{className:"w-16 h-16 bg-white rounded-full shadow-sm flex items-center justify-center group-hover:scale-110 transition-transform border border-gray-100",children:s.jsx(w.Plus,{className:"text-indigo-500",size:32})}),s.jsx("span",{className:"font-bold text-gray-500 group-hover:text-indigo-600",children:"Create New Map"})]}),M.map(R=>s.jsxs("div",{onClick:()=>e(R.id),className:"group bg-white rounded-2xl shadow-clay-sm border border-white hover:shadow-clay-md hover:-translate-y-1 transition-all cursor-pointer overflow-hidden flex flex-col aspect-[4/3] relative ring-1 ring-black/5",children:[s.jsxs("div",{className:"flex-1 bg-gray-50 relative overflow-hidden p-4 group-hover:bg-blue-50/30 transition-colors",children:[s.jsx("div",{className:"absolute inset-0 opacity-10 bg-[radial-gradient(#cbd5e1_1px,transparent_1px)] [background-size:10px_10px]"}),s.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-16 h-10 bg-white rounded-lg border-2 border-gray-200 shadow-sm flex items-center justify-center transform group-hover:scale-110 transition-transform duration-500",children:s.jsx("div",{className:"w-8 h-1.5 bg-gray-200 rounded-full"})}),s.jsx("div",{className:"absolute top-1/2 left-1/2 w-32 h-32 -translate-x-1/2 -translate-y-1/2 border border-gray-200 rounded-full opacity-30"})]}),s.jsxs("div",{className:"p-4 border-t border-gray-100 flex items-start justify-between bg-white relative z-10",children:[s.jsxs("div",{className:"min-w-0",children:[s.jsx("h3",{className:"font-bold text-gray-800 truncate max-w-[140px] group-hover:text-indigo-600 transition-colors text-sm",children:R.name}),s.jsxs("p",{className:"text-xs text-gray-400 mt-1 font-medium",children:["Edited ",T(R.lastModified)]})]}),s.jsx("button",{onClick:j=>C(j,R,!1),className:"p-2 hover:bg-red-50 text-gray-300 hover:text-red-500 rounded-lg transition-colors opacity-0 group-hover:opacity-100",title:"Move to Trash",children:s.jsx(w.Trash,{size:16})})]})]},R.id))]}),u==="TEMPLATES"&&s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 pb-20",children:Object.keys(vl).map(R=>s.jsxs("button",{onClick:()=>b(R),className:"group bg-white p-6 rounded-2xl shadow-clay-sm border border-white hover:shadow-clay-md hover:border-purple-200 hover:ring-2 hover:ring-purple-100 transition-all text-left flex flex-col h-full relative overflow-hidden",children:[s.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-gradient-to-bl from-purple-50 to-transparent rounded-bl-full opacity-50 group-hover:opacity-100 transition-opacity"}),s.jsxs("div",{className:"w-12 h-12 bg-purple-50 rounded-xl flex items-center justify-center mb-4 group-hover:scale-110 transition-transform text-purple-600 border border-purple-100",children:[R==="SWOT"&&s.jsx(w.Grid,{size:24}),R==="ROADMAP"&&s.jsx(w.Map,{size:24}),R==="PROJECT_PLAN"&&s.jsx(w.Layers,{size:24})]}),s.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-1 group-hover:text-purple-700 transition-colors",children:R.replace(/_/g," ")}),s.jsxs("p",{className:"text-sm text-gray-500 leading-relaxed",children:["Start with a pre-configured ",R.toLowerCase()," structure for rapid planning."]}),s.jsxs("div",{className:"mt-auto pt-4 flex items-center text-xs font-bold text-purple-600 opacity-0 group-hover:opacity-100 transition-opacity translate-y-2 group-hover:translate-y-0",children:["Use Template ",s.jsx(w.Arrow,{size:12,className:"ml-1"})]})]},R))}),u==="SHARED"&&s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 pb-20",children:[M.map(R=>s.jsxs("div",{onClick:()=>R.id==="demo-shared"?alert("This is a demo shared map."):e(R.id),className:"group bg-white rounded-2xl shadow-clay-sm border border-white hover:shadow-clay-md hover:border-green-200 transition-all cursor-pointer overflow-hidden flex flex-col aspect-[4/3] relative ring-1 ring-black/5",children:[s.jsx("div",{className:"absolute top-3 right-3 z-20",children:s.jsxs("div",{className:"flex -space-x-2",children:[s.jsx("div",{className:"w-6 h-6 rounded-full bg-blue-400 border-2 border-white"}),s.jsx("div",{className:"w-6 h-6 rounded-full bg-green-400 border-2 border-white"})]})}),s.jsx("div",{className:"flex-1 bg-gray-50 relative overflow-hidden p-4 flex items-center justify-center",children:s.jsx(w.Share,{className:"text-green-200 group-hover:text-green-300 group-hover:scale-110 transition-all",size:48})}),s.jsx("div",{className:"p-4 border-t border-gray-100 flex items-start justify-between bg-white relative z-10",children:s.jsxs("div",{className:"min-w-0",children:[s.jsx("h3",{className:"font-bold text-gray-800 truncate max-w-[140px] group-hover:text-green-600 transition-colors text-sm",children:R.name}),s.jsx("p",{className:"text-xs text-gray-400 mt-1 font-medium",children:"Shared by Alice"})]})})]},R.id)),M.length===0&&s.jsxs("div",{className:"col-span-full flex flex-col items-center justify-center h-64 text-center",children:[s.jsx("div",{className:"w-20 h-20 bg-green-50 rounded-full flex items-center justify-center mb-4",children:s.jsx(w.Share,{size:32,className:"text-green-300"})}),s.jsx("h3",{className:"text-xl font-bold text-gray-700 mb-2",children:"No Shared Maps"}),s.jsx("p",{className:"text-gray-500 max-w-sm",children:"Maps shared with you by other Singularity users will appear here."})]})]}),u==="TRASH"&&s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 pb-20",children:[M.map(R=>s.jsxs("div",{className:"group bg-white rounded-2xl shadow-sm border border-gray-200 opacity-75 hover:opacity-100 transition-all flex flex-col aspect-[4/3] relative overflow-hidden",children:[s.jsxs("div",{className:"flex-1 bg-gray-100 flex items-center justify-center relative",children:[s.jsx(w.Trash,{size:32,className:"text-gray-300"}),s.jsx("div",{className:"absolute inset-0 bg-black/5"})]}),s.jsxs("div",{className:"p-4 border-t border-gray-200 bg-white relative z-10",children:[s.jsx("h3",{className:"font-bold text-gray-600 truncate text-sm line-through decoration-red-400",children:R.name}),s.jsxs("div",{className:"flex gap-2 mt-3",children:[s.jsx("button",{onClick:j=>D(j,R.id),className:"flex-1 py-1.5 bg-blue-50 hover:bg-blue-100 text-blue-600 rounded-lg text-xs font-bold transition-colors",children:"Restore"}),s.jsx("button",{onClick:j=>C(j,R,!0),className:"flex-1 py-1.5 bg-red-50 hover:bg-red-100 text-red-600 rounded-lg text-xs font-bold transition-colors",children:"Delete"})]})]})]},R.id)),M.length===0&&s.jsxs("div",{className:"col-span-full flex flex-col items-center justify-center h-64 text-center",children:[s.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:s.jsx(w.Trash,{size:32,className:"text-gray-300"})}),s.jsx("h3",{className:"text-xl font-bold text-gray-700 mb-2",children:"Trash is Empty"}),s.jsx("p",{className:"text-gray-500 max-w-sm",children:"Deleted maps will be stored here for 30 days before permanent deletion."})]})]})]})]}),f&&s.jsx("div",{className:"fixed inset-0 z-[100] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",onClick:()=>p(null),children:s.jsxs("div",{className:"bg-white w-full max-w-md rounded-2xl shadow-2xl border border-white/20 p-6 relative overflow-hidden",onClick:R=>R.stopPropagation(),children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4 text-red-600",children:[s.jsx("div",{className:"p-3 bg-red-50 rounded-xl",children:s.jsx(w.Trash,{size:24})}),s.jsx("h2",{className:"text-xl font-display font-bold text-gray-900",children:f.isPermanent?"Delete Forever?":"Move to Trash?"})]}),s.jsxs("p",{className:"text-gray-600 mb-2 text-sm",children:["You are about to delete ",s.jsx("b",{children:f.mapName}),"."]}),s.jsxs("p",{className:"text-gray-500 mb-6 text-sm",children:["To confirm deletion, please type ",s.jsx("b",{children:"Delete"})," below."]}),s.jsx("input",{type:"text",value:h,onChange:R=>m(R.target.value),placeholder:"Type 'Delete'",className:"w-full bg-gray-50 border border-gray-200 rounded-xl px-4 py-3 text-sm font-bold outline-none focus:ring-2 focus:ring-red-500 transition-all mb-6",autoFocus:!0}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:()=>p(null),className:"flex-1 py-3 bg-gray-100 hover:bg-gray-200 text-gray-600 font-bold rounded-xl transition-colors",children:"Cancel"}),s.jsx("button",{onClick:S,disabled:h!=="Delete",className:"flex-1 py-3 bg-red-600 hover:bg-red-700 disabled:bg-gray-300 disabled:cursor-not-allowed text-white font-bold rounded-xl shadow-lg transition-all flex items-center justify-center gap-2",children:f.isPermanent?"Delete Forever":"Delete Map"})]})]})})]})},gI=()=>{const[e,t]=I.useState("LANDING"),[n,o]=I.useState(null),[r,i]=I.useState(!1);I.useEffect(()=>{const p=localStorage.getItem("singularity-visited"),h=localStorage.getItem("singularity-maps-index");if(p&&h)t("HOME");else{const m=localStorage.getItem("singularity-data-v2");if(m){const v=Oe(),S=JSON.parse(m).projectName||"Legacy Map";localStorage.setItem(`singularity-map-${v}`,m);const D=[{id:v,name:S,lastModified:Date.now()}];localStorage.setItem("singularity-maps-index",JSON.stringify(D)),localStorage.setItem("singularity-visited","true"),t("HOME")}}},[]);const l=()=>{localStorage.setItem("singularity-visited","true"),t("HOME")},u=p=>{o(p),t("CANVAS")},d=p=>{const h=Oe(),m=localStorage.getItem("singularity-maps-index"),v=m?JSON.parse(m):[],C=(p==null?void 0:p.projectName)||"Untitled Mind Map",S={id:h,name:C,lastModified:Date.now()};if(localStorage.setItem("singularity-maps-index",JSON.stringify([S,...v])),p){const D={nodes:p.nodes||[],edgeData:p.edgeData||{},drawings:[],viewport:{x:window.innerWidth/2,y:window.innerHeight/2,zoom:1},projectName:C,canvasSettings:{theme:"default",showGrid:!0},...p};localStorage.setItem(`singularity-map-${h}`,JSON.stringify(D))}o(h),t("CANVAS")},f=()=>{o(null),t("HOME")};return s.jsxs("div",{className:"w-screen h-screen bg-[#f0f4f8] text-gray-800 overflow-hidden font-sans selection:bg-blue-200",children:[e==="LANDING"&&s.jsx(hI,{onLaunch:l}),e==="HOME"&&s.jsx(mI,{onOpenMap:u,onCreateMap:d,onBackToLanding:()=>t("LANDING")}),e==="CANVAS"&&n&&s.jsx(fI,{mapId:n,onBack:f,isGenerating:r,setIsGenerating:i,triggerAiPrompt:null}),r&&s.jsx("div",{className:"fixed inset-0 z-[9999] bg-white/50 backdrop-blur-md flex flex-col items-center justify-center pointer-events-none",children:s.jsxs("div",{className:"relative p-8 rounded-3xl bg-white shadow-clay-xl border border-white/50",children:[s.jsx("div",{className:"w-16 h-16 border-8 border-blue-100 border-t-blue-500 rounded-full animate-spin mb-4 mx-auto"}),s.jsx("p",{className:"font-display font-bold text-xl text-blue-600 tracking-wide animate-pulse text-center",children:"DREAMING..."})]})})]})},N0=document.getElementById("root");if(!N0)throw new Error("Could not find root element to mount to");const yI=Ga.createRoot(N0);yI.render(s.jsx(Ku.StrictMode,{children:s.jsx(gI,{})}));
